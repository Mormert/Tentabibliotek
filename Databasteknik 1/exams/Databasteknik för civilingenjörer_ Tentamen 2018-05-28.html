<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0091)http://basen.oru.se/kurser/dbciv/2019-2020-p4/tentor/tenta-2018-05-28/tenta-2018-05-28.html -->
<html lang="sv"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<title>Databasteknik för civilingenjörer: Tentamen 2018-05-28</title>
<style type="text/css">
     P.breakhere {page-break-before: always}
</style>
<script data-dapp-detection="">
(function() {
  let alreadyInsertedMetaTag = false

  function __insertDappDetected() {
    if (!alreadyInsertedMetaTag) {
      const meta = document.createElement('meta')
      meta.name = 'dapp-detected'
      document.head.appendChild(meta)
      alreadyInsertedMetaTag = true
    }
  }

  if (window.hasOwnProperty('web3')) {
    // Note a closure can't be used for this var because some sites like
    // www.wnyc.org do a second script execution via eval for some reason.
    window.__disableDappDetectionInsertion = true
    // Likely oldWeb3 is undefined and it has a property only because
    // we defined it. Some sites like wnyc.org are evaling all scripts
    // that exist again, so this is protection against multiple calls.
    if (window.web3 === undefined) {
      return
    }
    __insertDappDetected()
  } else {
    var oldWeb3 = window.web3
    Object.defineProperty(window, 'web3', {
      configurable: true,
      set: function (val) {
        if (!window.__disableDappDetectionInsertion)
          __insertDappDetected()
        oldWeb3 = val
      },
      get: function () {
        if (!window.__disableDappDetectionInsertion)
          __insertDappDetected()
        return oldWeb3
      }
    })
  }
})()</script></head>

<body bgcolor="#ffffff" text="#000000" link="#0000cc" vlink="#551a8b" alink="#ff0000">

Örebro universitet
<br>
Institutionen för naturvetenskap och teknik
<br>
<a href="http://www.aass.oru.se/~tpy/">Thomas Padron-McCarthy</a>
(<a href="mailto:thomas.padron-mccarthy@oru.se?subject=Databasteknik%20f%C3%B6r%20civilingenj%C3%B6rer:%20Tentamen%202018-05-28">thomas.padron-mccarthy@oru.se</a>)

<pre>




</pre>
<center>
<font size="+2">Tentamen i</font>
<p>
<font size="+4">Databasteknik</font>
</p><p>
måndag 28 maj 2018
</p><p>
<font size="-1">
Gäller som tentamen för:
<br>
DT504G Databasteknik för civilingenjörer, provkod 0100
</font>
</p></center>

<p>

</p><hr noshade="">

<p>

</p><table>
<tbody><tr><td valign="top">
<b>Hjälpmedel:</b>
</td><td valign="top">
Ordbok för översättning.
</td></tr>
<tr><td valign="top">
<b>Poängkrav:</b>
</td><td valign="top">
Maximal poäng är 37.
För godkänt betyg krävs 23 poäng,
varav minst fyra poäng på uppgift 1 och minst fem poäng på uppgift 2.
För den som följt kursen våren 2018
ger varje i tid inlämnad inlämningsuppgift en extra poäng.
Den som <i>inte</i> gått kursen våren 2018 får dessa (fem) extrapoäng ändå.
</td></tr>
<tr><td valign="top">
<b>Resultat:</b>
</td><td valign="top">
Meddelas på kursens hemsida eller via e-post senast måndag 18 juni 2018.
</td></tr>
<tr><td valign="top">
<b>Återlämning av tentor:</b>
</td><td valign="top">
Elektroniskt via Studentforum.
</td></tr>
<tr><td valign="top">
<b>Examinator och jourhavande:</b>
</td><td valign="top">
Thomas Padron-McCarthy, telefon 070 - 73 47 013.
</td></tr>
</tbody></table>

<p>

</p><hr noshade="">

<p>

<font size="-1">
</font></p><ul><font size="-1">

<li>
Skriv tydligt och klart. Lösningar som inte går att läsa kan
naturligtvis inte ge några poäng.
Oklara och tvetydiga formuleringar kommer att misstolkas.

</li><li>
Skriv den personliga tentamenskoden på varje inlämnat blad.
Skriv <i>inte</i> namn eller personnummer på bladen.

</li><li>
Skriv bara på en sida av papperet.
Använd inte röd skrift.

</li><li>
Antaganden utöver de som står i uppgifterna måste anges. Gjorda
antaganden får inte förändra den givna uppgiften.

</li><li>
Skriv gärna förklaringar om hur du tänkt.
Även ett svar som är fel kan ge poäng,
om det finns med en förklaring som visar att huvudtankarna var rätt.
</li></font></ul><font size="-1">
</font>

<p>

</p><hr noshade="">

<p>

</p><center>LYCKA TILL!</center>



<p class="breakhere">



<a name="scenario"></a>
</p><h2>Scenario till uppgifterna</h2>

<img src="./Databasteknik för civilingenjörer_ Tentamen 2018-05-28_files/te.jpg" width="360" height="270" alt="Te-utensilier" title="Te-utensilier">

<p>

Det är ingen ordning på tebryggningen, och det måste vi styra upp med en databas!

</p><p>

Det som ska lagras i databasen är följande:

</p><ol>

  <li>
    <b>Tekoppar</b>, som man ska hälla upp det färdiga teet i.
    Vi ger varje tekopp ett unikt <b>nummer</b>,
    och den har dessutom en <b>volym</b> som anger hur mycket den rymmer, mätt i liter.
    Tekopparna är alltså de olika kopparna,
    exempelvis den som syns på bilden ovan,
    och inte det man brukar mena med "en kopp te",
    alltså när man vid ett tillfälle hällt te i en kopp.

  </li><li>
    <b>Tekannor</b>
    som man använder för att göra te.
    Vi ger varje tekanna ett unikt <b>nummer</b>,
    och den har dessutom en <b>volym</b> som anger hur många liter den rymmer.
    Tekannorna är alltså de olika kannorna,
    exempelvis den som syns på bilden ovan.

  </li><li>
    <b>Tesorter</b>.
    Varje tesort har ett unikt <b>namn</b>.

  </li><li>
    <b>Tebryggningar</b>.
    En tebryggning är att framställa en kanna full med drickbart te.
    Den går till så att man tar teblad av en viss sort och lägger i en tesil i tekannan,
    man värmer vatten i en vattenkokare och häller i tekannan,
    och sen väntar man några minuter på att teet ska bli färdigt.
    Vi ger varje tebryggning ett unikt <b>nummer</b>,
    men man ska också lagra vilket <b>datum</b> den gjordes,
    och vi ska också lagra vilken <b>tesort</b> och vilken <b>tekanna</b> som användes.

  </li><li>
    Till sist häller man upp teet i koppar och dricker det.
    Det här kan vi kalla <b>koppar med te</b> eller kanske <b>drickkoppar</b>,
    och vi ger även var och en av dem ett unikt <b>nummer</b>.
    Ibland var tekannan nästan tom, så koppen blev inte full,
    och då fyller man på med te från nästa bryggning.
    En och samma kopp med te kan alltså innehålla te från flera olika bryggningar!
    Man ska lagra vilken <b>tekopp</b> (enligt punkt 1 ovan) som användes,
    och från vilka <b>tebryggningar</b> teet i koppen kom från.
    
</li></ol>



<p class="breakhere">



<a name="uppgift-1"></a>
</p><h2>Uppgift 1 (5 p)</h2>

Rita ett ER- eller EER-diagram för den beskrivna databasen.
Använd informationen i scenariot ovan,
men tänk också på att det ska gå att svara på frågorna i uppgift 3 nedan.

<p>

ER- och EER-diagram kan ritas på flera olika sätt.
Om du använder en annan notation än kursboken, måste du förklara den notation som du använder.



<a name="uppgift-2"></a>
</p><h2>Uppgift 2 (6 p)</h2>

Implementera den beskrivna databasen i relationsmodellen, dvs
översätt ER-diagrammet till tabeller.

<p>

Du behöver inte skriva <b>create table</b>-kommandon i SQL,
men du ska ange vilka relationer som finns och vilka attribut varje relation innehåller.
Ange också alla kandidatnycklar, vilken av dessa som är primärnyckel,
samt vilka referensattribut som finns och vad de refererar till.

</p><p>

Implementationen ska vara bra.



<a name="uppgift-3"></a>
</p><h2>Uppgift 3 (11 p)</h2>

Formulera följande frågor i SQL.
Definiera gärna vyer eller CTE:er om det underlättar, men skapa inte nya tabeller.

<p>

a) (1p)
Vi behöver en stor tekopp!
Vad är numren på de tekoppar som har större volym än en halv liter?

</p><p>

b) (1p)
Det finns en tesort som heter <b>Earl Grey</b>.
Eller ska den kanske stavas <b>Earl Gray</b>?
Visa alla namn på tesorter som innehåller <b>Grey</b> eller <b>Gray</b>!

</p><p>

c) (2p)
Det visar sig att tesorten <b>Bolmörtsblandning</b> är giftig,
och alla tekannor som någonsin innehållit den sortens te måste kasseras.
Vad är numren på de tekannor som vi bryggt den tesorten i?

</p><p>

d) (2p)
Här har jag en kopp med te.
Den har nummer <b>4711</b>.
Vilka sorters te innehåller den?
Vi vill veta namnen på tesorterna.

</p><p>

e) (2p)

Vilka tesorter som finns med i databasen har vi ännu inte bryggt te med?
Vi vill veta namnen på de tesorterna.

</p><p>

f) (3p)
Vilken tekanna har använts flest gånger?



</p><p class="breakhere">



<a name="uppgift-4"></a>
</p><h2>Uppgift 4 (3 p)</h2>

Alla tabeller innehåller många tusen rader.
Sökningen i fråga 3c ovan, om vilka tekannor som någonsin innehållit te av sorten
Bolmörtsblandning, måste kunna köras snabbt, så inte fler hinner bli förgiftade.

<p>

Vilka index bör man skapa för att just den frågan ska gå snabbare att köra?



<a name="uppgift-5"></a>
</p><h2>Uppgift 5 (3 p)</h2>

Vi använder en databashanterare som har så kallad "auto-commit",
vilket betyder att varje SQL-kommando räknas som en egen transaktion,
så länge man inte uttryckligen startar
en transaktion med kommandot "start transaction".

<p>

Vi startar två olika klientprogram som loggar in på samma databas,
och ger följande SQL-kommandon, i den angivna ordningen,
i de två klienterna.

</p><p>

Vad blir resultatet av var och en av de tio select-frågorna?

</p><p>

</p><table border="1" cellspacing="0" cellpadding="3">

<tbody><tr><th>Klient 1</th> <th>Klient 2</th></tr>

<tr><td>
create table Bananer
<br>
(nummer integer not null primary key,
<br>
färg varchar(10));
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
insert into Bananer values (1, 'gul');
</td></tr>

<tr><td>
select * from Bananer; <i>-- Fråga 1</i>
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
select * from Bananer; <i>-- Fråga 2</i>
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
start transaction;
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
select * from Bananer; <i>-- Fråga 3</i>
</td></tr>

<tr><td>
select * from Bananer; <i>-- Fråga 4</i>
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
insert into Bananer values (2, 'gul');
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
select * from Bananer; <i>-- Fråga 5</i>
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
commit;
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
select * from Bananer; <i>-- Fråga 6</i>
</td></tr>

<tr><td>
select * from Bananer; <i>-- Fråga 7</i>
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
start transaction;
<br>
insert into Bananer values (3, 'gul');
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
select * from Bananer; <i>-- Fråga 8</i>
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
rollback;
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
select * from Bananer; <i>-- Fråga 9</i>
</td>
<td>
&nbsp;
</td></tr>

<tr><td>
&nbsp;
</td>
<td>
select * from Bananer; <i>-- Fråga 10</i>
</td></tr>

</tbody></table>



<p class="breakhere">




<a name="uppgift-6"></a>
</p><h2>Uppgift 6 (3 p)</h2>

Ange tre olika databashanterare.
Skriv för var och en åtminstone någon egenskap som skiljer den från de två andra.



<a name="uppgift-7"></a>
<h2>Uppgift 7 (3 p)</h2>

B-träd är en lagringsstruktur som ofta används för att skapa index i databaser.

<p>

B:et i "B-träd" står inte för "binärt", utan (troligen) för "balanserat".
Vad är de viktigaste skillnaderna mellan B-träd och binära träd,
och varför är B-träd lämpliga i databaser?



<a name="uppgift-8"></a>
</p><h2>Uppgift 8 (3 p)</h2>

I databassammanhang menar man med en <b>cursor</b> inte en liten pil eller fyrkant på skärmen,
utan något annat.

<p>

Vad är en cursor, och vad används den till?

</p><p>

</p><hr>



</body></html>