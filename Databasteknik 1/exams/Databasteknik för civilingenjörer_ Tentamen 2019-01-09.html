<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0091)http://basen.oru.se/kurser/dbciv/2019-2020-p4/tentor/tenta-2019-01-09/tenta-2019-01-09.html -->
<html lang="sv"><script data-dapp-detection="">
(function() {
  let alreadyInsertedMetaTag = false

  function __insertDappDetected() {
    if (!alreadyInsertedMetaTag) {
      const meta = document.createElement('meta')
      meta.name = 'dapp-detected'
      document.head.appendChild(meta)
      alreadyInsertedMetaTag = true
    }
  }

  if (window.hasOwnProperty('web3')) {
    // Note a closure can't be used for this var because some sites like
    // www.wnyc.org do a second script execution via eval for some reason.
    window.__disableDappDetectionInsertion = true
    // Likely oldWeb3 is undefined and it has a property only because
    // we defined it. Some sites like wnyc.org are evaling all scripts
    // that exist again, so this is protection against multiple calls.
    if (window.web3 === undefined) {
      return
    }
    __insertDappDetected()
  } else {
    var oldWeb3 = window.web3
    Object.defineProperty(window, 'web3', {
      configurable: true,
      set: function (val) {
        if (!window.__disableDappDetectionInsertion)
          __insertDappDetected()
        oldWeb3 = val
      },
      get: function () {
        if (!window.__disableDappDetectionInsertion)
          __insertDappDetected()
        return oldWeb3
      }
    })
  }
})()</script><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<title>Databasteknik för civilingenjörer: Tentamen 2019-01-09</title>
<style type="text/css">
     P.breakhere {page-break-before: always}
</style>
</head>

<body bgcolor="#ffffff" text="#000000" link="#0000cc" vlink="#551a8b" alink="#ff0000">

Örebro universitet
<br>
Institutionen för naturvetenskap och teknik
<br>
<a href="http://www.aass.oru.se/~tpy/">Thomas Padron-McCarthy</a>
(<a href="mailto:thomas.padron-mccarthy@oru.se?subject=Databasteknik%20f%C3%B6r%20civilingenj%C3%B6rer:%20Tentamen%202019-01-09">thomas.padron-mccarthy@oru.se</a>)

<pre>




</pre>
<center>
<font size="+2">Tentamen i</font>
<p>
<font size="+4">Databasteknik</font>
</p><p>
onsdag 9 januari 2019
</p><p>
<font size="-1">
Gäller som tentamen för:
<br>
DT504G Databasteknik för civilingenjörer, provkod 0100
</font>
</p></center>

<p>

</p><hr noshade="">

<p>

</p><table>
<tbody><tr><td valign="top">
<b>Hjälpmedel:</b>
</td><td valign="top">
Ordbok för översättning.
</td></tr>
<tr><td valign="top">
<b>Poängkrav:</b>
</td><td valign="top">
Maximal poäng är 33.
För godkänt betyg krävs 17 poäng,
varav minst fyra poäng på uppgift 1 och minst fem poäng på uppgift 2.
<!--
För den som följt kursen våren 2019
ger varje i tid inlämnad inlämningsuppgift en extra poäng.
Den som <i>inte</i> gått kursen våren 2019 får dessa (fem) extrapoäng ändå.
-->
</td></tr>
<tr><td valign="top">
<b>Resultat:</b>
</td><td valign="top">
Meddelas på kursens hemsida eller via e-post senast onsdag 30 januari 2019.
</td></tr>
<tr><td valign="top">
<b>Återlämning av tentor:</b>
</td><td valign="top">
Elektroniskt via Studenttjänster.
</td></tr>
<tr><td valign="top">
<b>Examinator och jourhavande:</b>
</td><td valign="top">
Thomas Padron-McCarthy, telefon 070 - 73 47 013.
</td></tr>
</tbody></table>

<p>

</p><hr noshade="">

<p>

<font size="-1">
</font></p><ul><font size="-1">

<li>
Skriv tydligt och klart. Lösningar som inte går att läsa kan
naturligtvis inte ge några poäng.
Oklara och tvetydiga formuleringar kommer att misstolkas.

</li><li>
Skriv den personliga tentamenskoden på varje inlämnat blad.
Skriv <i>inte</i> namn eller personnummer på bladen.

</li><li>
Skriv bara på en sida av papperet.
Använd inte röd skrift.

</li><li>
Antaganden utöver de som står i uppgifterna måste anges. Gjorda
antaganden får inte förändra den givna uppgiften.

</li><li>
Skriv gärna förklaringar om hur du tänkt.
Även ett svar som är fel kan ge poäng,
om det finns med en förklaring som visar att huvudtankarna var rätt.
</li></font></ul><font size="-1">
</font>

<p>

</p><hr noshade="">

<p>

</p><center>LYCKA TILL!</center>



<p class="breakhere">



<a name="scenario"></a>
</p><h2>Scenario till uppgifterna</h2>

Här är ett par varuautomater som står utanför
kafeterian i Teknikhuset:

<p>

<img src="./Databasteknik för civilingenjörer_ Tentamen 2019-01-09_files/automater.jpg" width="552" height="400" alt="Automater" title="Automater">

</p><p>

De har varit trasiga åtminstone sen i somras,
och Sodexo, som äger automaterna, har inte lagat dem.
Kanske har de glömt var de ställt dem,
och kan inte hitta dem?
Vi måste hjälpa dem genom att skapa en databas!

</p><p>

Det som ska lagras i databasen är följande:

</p><ol>

  <li>
    <b>Kunder</b>.
    Kunderna är de företag och andra organisationer
    där Sodexo har placerat ut automaterna.
    Varje kund har ett <b>namn</b>,
    till exempel <b>Örebro universitet</b>,
    och ett unikt <b>kundnummer</b>, till exempel <b>83712</b>.

  </li><li>
    <b>Byggnader</b>.
    Varje kund har en eller flera byggnader där Sodexo kan ställa automater.
    På Örebro universitet finns till exempel
    <b>Teknikhuset</b> och <b>Långhuset</b>.
    Dessa <b>namn</b> är inte unika globalt,
    men en och samma kund kan inte ha två byggnader med samma namn.

  </li><li>
    <b>Automater</b>.
    Varje automat har ett unikt <b>nummer</b>, till exempel <b>602827</b>,
    och den står i en av byggnaderna.

  </li><li>
    <b>Varor</b>
    som finns i automaterna.
    Varje vara har ett unikt <b>namn</b>, till exempel <b>Coke Zero, 50 cl</b>,
    och även ett unikt <b>varunummer</b>, till exempel <b>1283798</b>.

  </li><li>
    Automaterna <b>innehåller</b> varor.
    Varje automat kan förstås innehålla flera varor,
    och varje vara kan förstås finnas i flera automater.

</li></ol>



<p class="breakhere">



<a name="uppgift-1"></a>
</p><h2>Uppgift 1 (5 p)</h2>

Rita ett ER- eller EER-diagram för den beskrivna databasen.
Använd informationen i scenariot ovan,
men tänk också på att det ska gå att svara på frågorna i uppgift 3 nedan.

<p>

ER- och EER-diagram kan ritas på flera olika sätt.
Om du använder en annan notation än kursboken, måste du förklara den notation som du använder.



<a name="uppgift-2"></a>
</p><h2>Uppgift 2 (6 p)</h2>

Implementera den beskrivna databasen i relationsmodellen, dvs
översätt ER-diagrammet till tabeller.

<p>

Du behöver inte skriva <b>create table</b>-kommandon i SQL,
men du ska ange vilka relationer som finns och vilka attribut varje relation innehåller.
Ange också alla kandidatnycklar, vilken av dessa som är primärnyckel,
samt vilka referensattribut som finns och vad de refererar till.

</p><p>

Implementationen ska vara bra.



<a name="uppgift-3"></a>
</p><h2>Uppgift 3 (9 p)</h2>

Formulera följande frågor i SQL.
Definiera gärna vyer eller CTE:er om det underlättar, men skapa inte nya tabeller.

<p>

a) (2p)
Vad är numren på de automater som är placerade i <b>Teknikhuset</b>
hos kunden <b>Örebro universitet</b>?

</p><p>

b) (2p)
Hur många automater finns hos kunden <b>USÖ</b>?
Vi vill veta antalet, inte numren.

</p><p>

c) (2p)
I vilka byggnader står det inga automater?
För varje sådan byggnad vill vi veta byggnadens namn och kundens namn.

</p><p>

e) (3p)
Hos vilken kund står den automat som innehåller flest varor?
Vi vill veta namnet på den kunden.



</p><p class="breakhere">



<a name="uppgift-4"></a>
</p><h2>Uppgift 4 (3 p)</h2>

Frågorna <b>a</b> och <b>b</b> i uppgiften ovan körs ofta,
men kanske med andra konstanter än just
<b>Teknikhuset</b> och <b>Örebro universitet</b>.
Vi vill att den ska gå snabbare att köra.
Databasen innehåller inga index, inte ens på primärnycklar.
Alla tabellerna har väldigt många rader.

<p>

a) Vilka index bör man skapa?

</p><p>

b) Ange något index som <i>inte</i> skulle hjälpa, och förklara varför det inte skulle hjälpa.



<a name="uppgift-5"></a>
</p><h2>Uppgift 5 (5 p)</h2>

När man programmerar numera är det populärast med
<b>objektorienterad programmering</b>.
Samtidigt är det <b>relationsdatabaser</b> som är den vanligaste typen av databaser.
Om man har ett objektorienterat program, och vill lagra det programmets objekt i en databas,
brukar man därför behöva <b>översätta</b> från programmets objekt till databasens tabeller.

<p>

Ett objektorienterat program innehåller följande klasser,
alltså typer av objekt:

</p><ul>
<li>
<b>Hushållsredskap</b>.
Varje hushållsredskap har ett unikt nummer (till exempel <b>17</b>),
ett unikt namn (till exempel <b>Electrolux EKM4100</b>),
och en färg (till exempel <b>röd</b>).

</li><li>
Varje hushållsredskap kan vara antingen ett handredskap eller en elektrisk maskin.
Klassen <b>Hushållsredskap</b> har därför två subklasser,
<b>Handredskap</b> och <b>Elmaskiner</b>.
Elmaskiner har, förutom samma egenskaper som andra hushållsredskap, även en <b>effekt</b>,
till exempel <b>1000 W</b>.

</li><li>
Klassen <b>Handredskap</b> är i sin tur uppdelad i tre subklasser:
<b>Vispar</b>, <b>Mått</b> och <b>Diskborstar</b>.
Mått har, förutom samma egenskaper som andra handredskap, även en <b>volym</b>.

</li></ul>

<p>

a) (2p)
Rita ett EER-diagram som innehåller entitetstyperna ovan,
med arv och egenskaper.

</p><p>

b) (2p)
Översätt EER-diagrammet till tabeller.
Du behöver inte skriva <b>create table</b>-kommandon i SQL,
men du ska ange vilka relationer som finns och vilka attribut varje
relation innehåller. Ange också vad som är primärnyckel, och
vilka referensattribut som finns och vad de refererar till.

</p><p>

c) (1p)
Skriv en SQL-fråga som tar fram färgen på alla mått som är större än 1 liter.



</p><p class="breakhere">



<a name="uppgift-6"></a>
</p><h2>Uppgift 6 (5 p)</h2>

Ibland behöver man kombinera de vanliga select-frågorna i SQL
med konstruktioner som vi känner igen från vanliga programmeringsspråk,
som variabler, if-satser och loopar.

<p>

Beskriv vilka olika sätt som det finns att göra det på,
och några av deras för- och nackdelar.

</p><p>

</p><hr>



</body></html>