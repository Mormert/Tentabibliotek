<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="sv">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Operativsystem för civilingenjörer: Tentamen 2023-08-17</title>
<STYLE TYPE="text/css">
     P.breakhere {page-break-before: always}
</STYLE>
</head>

<body bgcolor="#ffffff" text="#000000" link="#0000cc" vlink="#551a8b" alink="#ff0000">

Örebro universitet
<br>
Institutionen för naturvetenskap och teknik
<br>
<a href="http://www.aass.oru.se/~tpy/">Thomas Padron-McCarthy</a>
(<a href="mailto:thomas.padron-mccarthy@oru.se?subject=Operativsystem för civilingenjörer: Tentamen 2023-08-17">thomas.padron-mccarthy@oru.se</a>)

<pre>









</pre>
<center>
<font size="+2">Tentamen i</font>
<p>
<font size="+4">Operativsystem</font>
<font size="+4">för civilingenjörer</font>
<p>
torsdag 17 augusti 2023
<p>
<font size="-1">
Gäller som tentamen för:
<br>
DT513G Operativsystem för civilingenjörer, provkod A001
</font>
</center>

<p>

<hr noshade>

<p>

<table>
<tr><td valign="top">
<b>Hjälpmedel:</b>
</td><td valign="top">
Ordbok för översättning.
</td></tr>
<tr><td valign="top">
<b>Poängkrav:</b>
</td><td valign="top">
Maximal poäng är 30.
För godkänt betyg krävs 18 poäng.
</td></tr>
<tr><td valign="top">
<b>Resultat:</b>
</td><td valign="top">
Meddelas senast 15 arbetsdagar efter tentamensdatum.
</td></tr>
<tr><td valign="top">
<b>Återlämning av tentor:</b>
</td><td valign="top">
Elektroniskt via webbportalen Studenttjänster.
</td></tr>
<tr><td valign="top">
<b>Examinator och jourhavande:</b>
</td><td valign="top">
Thomas Padron-McCarthy, telefon 070 - 73 47 013.
</td></tr>
</table>

<p>

<hr noshade>

<p>

<font size="-1">
<ul>

<li>
Skriv tydligt och klart. Lösningar som inte går att läsa kan
naturligtvis inte ge några poäng.
Oklara och tvetydiga formuleringar kommer att misstolkas.

<li>
Skriv den personliga tentamenskoden på varje inlämnat blad.
Skriv <i>inte</i> namn eller personnummer på bladen.

<li>
Skriv bara på en sida av papperet.
Använd inte röd skrift.

<li>
Antaganden utöver de som står i uppgifterna måste anges. Gjorda
antaganden får inte förändra den givna uppgiften.

<li>
Skriv gärna förklaringar om hur du tänkt.
Även ett svar som är fel kan ge poäng,
om det finns med en förklaring som visar att huvudtankarna var rätt.
</ul>
</font>

<p>

<hr noshade>

<p>

<pre>

</pre>

<center>LYCKA TILL!</center>



<P CLASS="breakhere">



<h2>Formelsamling</h2>

<table border="1" cellspacing="0" cellpadding="3">
<td>2<sup>0</sup> = 1</td> <td>2<sup>24</sup> = 16777216</td></tr></td></tr>
<td>2<sup>1</sup> = 2</td> <td>2<sup>25</sup> = 33554432</td></tr>
<td>2<sup>2</sup> = 4</td> <td>2<sup>26</sup> = 67108864</td></tr>
<td>2<sup>3</sup> = 8</td> <td>2<sup>27</sup> = 134217728</td></tr>
<td>2<sup>4</sup> = 16</td> <td>2<sup>28</sup> = 268435456</td></tr>
<td>2<sup>5</sup> = 32</td> <td>2<sup>29</sup> = 536870912</td></tr>
<td>2<sup>6</sup> = 64</td> <td>2<sup>30</sup> = 1073741824</td></tr>
<td>2<sup>7</sup> = 128</td> <td>2<sup>31</sup> = 2147483648</td></tr>
<td>2<sup>8</sup> = 256</td> <td>2<sup>32</sup> = 4294967296</td></tr>
<td>2<sup>9</sup> = 512</td> <td>2<sup>33</sup> = 8589934592</td></tr>
<td>2<sup>10</sup> = 1024</td> <td>2<sup>34</sup> = 17179869184</td></tr>
<td>2<sup>11</sup> = 2048</td> <td>2<sup>35</sup> = 34359738368</td></tr>
<td>2<sup>12</sup> = 4096</td> <td>2<sup>36</sup> = 68719476736</td></tr>
<td>2<sup>13</sup> = 8192</td> <td>2<sup>37</sup> = 137438953472</td></tr>
<td>2<sup>14</sup> = 16384</td> <td>2<sup>38</sup> = 274877906944</td></tr>
<td>2<sup>15</sup> = 32768</td> <td>2<sup>39</sup> = 549755813888</td></tr>
<td>2<sup>16</sup> = 65536</td> <td>2<sup>40</sup> = 1099511627776</td></tr>
<td>2<sup>17</sup> = 131072</td> <td>2<sup>41</sup> = 2199023255552</td></tr>
<td>2<sup>18</sup> = 262144</td> <td>2<sup>42</sup> = 4398046511104</td></tr>
<td>2<sup>19</sup> = 524288</td> <td>2<sup>43</sup> = 8796093022208</td></tr>
<td>2<sup>20</sup> = 1048576</td> <td>2<sup>44</sup> = 17592186044416</td></tr>
<td>2<sup>21</sup> = 2097152</td> <td>2<sup>45</sup> = 35184372088832</td></tr>
<td>2<sup>22</sup> = 4194304</td> <td>2<sup>46</sup> = 70368744177664</td></tr>
<td>2<sup>23</sup> = 8388608</td> <td>2<sup>47</sup> = 140737488355328</td></tr>
</table>

<p>

2<sup>x</sup> * 2<sup>y</sup> = 2<sup>x+y</sup>



<P CLASS="breakhere">



<a name="uppgift-1"></a>
<h2>Uppgift 1 (3 p)</h2>

Förklara skillnaderna mellan
applikationsprogram,
systemprogram
och operativsystemkärnan.

<p>

<hr>


<a name="uppgift-2"></a>
<h2>Uppgift 2 (3 p)</h2>

a)
Förklara skillnaderna mellan
funktionsanrop
och systemanrop.

<p>

b)
Ett systemanrop är normalt mycket långsammare än ett funktionsanrop.
Förklara varför!

<p>

<hr>



<a name="uppgift-3"></a>
<h2>Uppgift 3 (5 p)</h2>

Här är ett C-program för Linux:

<p>

<table border="1" cellspacing="0" cellpadding="3"><tr><td bgcolor="#ccffcc">
<pre>
#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;

int x = 0;

int main(void) {
    int y = 0;
    if (fork() == 0) {
        x = x + 1;
        y = y + 1;
        printf("child: x = %d, y = %d\n", x, y);
    }
    else {
        x = x + 2;
        y = y + 2;
        printf("parent: x = %d, y = %d\n", x, y);
        if (fork() == 0) {
            x = x + 3;
            y = y + 3;
            printf("another child: x = %d, y = %d\n", x, y);
        }
    }
    printf("x = %d, y = %d\n", x, y);
}
</pre>
</td></tr></table>

<p>

<br>
a) Vad skrivs ut när programmet körs?

<p>

b) Kan det bli olika utskrifter från gång till gång,
och vad beror det i så fall på?

<p>

<hr>



<P CLASS="breakhere">



<a name="uppgift-4"></a>
<h2>Uppgift 4 (6 p)</h2>

Här är ett annat C-program för Linux:

<p>

<table border="1" cellspacing="0" cellpadding="3"><tr><td bgcolor="#ccffcc">
<pre>
#include &lt;stdio.h&gt;
#include &lt;pthread.h&gt;

#define NR_THREADS 1000

volatile int x = 0;

void *thread_body(void *arg) {
    int y = 0;
    x = x + 1;
    y = y + 1;
    return NULL;
}

int main(void) {
    int z = 0;
    x = x + 1;
    z = z + 1;
    printf("Startar! x = %d, z = %d\n", x, z);
    pthread_t threads[NR_THREADS];
    for (int i = 0; i < NR_THREADS; ++i)
        pthread_create(&threads[i], NULL, thread_body, NULL);
    for (int i = 0; i < NR_THREADS; ++i)
        pthread_join(threads[i], NULL);
    printf("Klart! x = %d, z = %d\n", x, z);
}
</pre>
</td></tr></table>

<p>

a) Vad skrivs ut när programmet körs?

<p>

b) Kan det bli olika utskrifter från gång till gång,
och vad beror det i så fall på?

<p>

c) Kan det bli deadlock? Förklara!

<p>

d) Min dator har en 8-kärnig processor med hyperthreading, så den kan köra 16 trådar parallellt.
Men här kör vi 1000 trådar samtidigt! Hur är det möjligt? Förklara!

<p>

<hr>



<P CLASS="breakhere">



<a name="uppgift-5"></a>
<h2>Uppgift 5 (5 p)</h2>

Här är tre olika C-program för Linux som kopierar filen <b>gamla</b> till filen <b>nya</b>.
Vad kan man anta om hur snabba de är på att kopiera en stor fil, jämfört med varandra?
Diskutera och förklara!

<p>

Programmet <a href="cp-1.c">cp-1.c</a>:

<p>

<table border="1" cellspacing="0" cellpadding="3"><tr><td bgcolor="#ccffcc">
<pre>
#include &lt;stdio.h&gt;

int main(void) {
    FILE *gamla = fopen("gamla", "r");
    FILE *nya = fopen("nya", "w");

    int c;
    while ((c = getc(gamla)) != EOF)
        putc(c, nya);

    fclose(gamla);
    fclose(nya);
}
</pre>
</td></tr></table>

<p>

Programmet <a href="cp-2.c">cp-2.c</a>:

<p>

<table border="1" cellspacing="0" cellpadding="3"><tr><td bgcolor="#ccffcc">
<pre>
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;

int main(void) {
    int gamla = open("gamla", O_RDONLY);
    int nya = open("nya", O_WRONLY | O_CREAT | O_TRUNC, 0666);

    char data[1];
    int n;
    while((n = read(gamla, data, 1)) &gt; 0)
        write(nya, data, n);
    
    close(gamla);
    close(nya);
}
</pre>
</td></tr></table>

<p>

Programmet <a href="cp-3.c">cp-3.c</a>:

<p>

<table border="1" cellspacing="0" cellpadding="3"><tr><td bgcolor="#ccffcc">
<pre>
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;

int main(void) {
    int gamla = open("gamla", O_RDONLY);
    int nya = open("nya", O_WRONLY | O_CREAT | O_TRUNC, 0666);

    char data[1000000];
    int n;
    while((n = read(gamla, data, 1000000)) &gt; 0)
        write(nya, data, n);
    
    close(gamla);
    close(nya);
}
</pre>
</td></tr></table>

<p>

<hr>



<P CLASS="breakhere">



<a name="uppgift-6"></a>
<h2>Uppgift 6 (8 p)</h2>

Vi har en byteadresserad dator som arbetar med virtuella minnesadresser på 18 bitar
och fysiska minnesadresser på 14 bitar.
Datorns fysiska minne delas mellan de olika processerna som körs.
Av bitarna i adresserna används 10 bitar för offset inom en sida eller frame.

<p>

a) Hur stor (i bytes) är den virtuella minnesrymden?

<p>

b) Hur stor (i bytes) är den fysiska minnesrymden?

<p>

c) Hur stor (i bytes) är en minnessida ("page")?

<p>

d) Någon föreslår att i stället ha minnessidor som är exakt 1000 byte stora.
Är det ett bra förslag? Förklara!

<p>

e) Hur många minnessidor är den virtuella minnesrymden indelad i?

<p>

f) Hur många olika ramar ("frames") finns det i det fysiska minnet?

<p>

g) Den fysiska minnesrymden är mindre än den virtuella.
Hur är det möjligt att en process ändå kan använda hela den virtuella minnesrymden?
Förklara!

<p>

h) Vi kör flera processer samtidigt.
Hur är det möjligt, när det inte ens finns plats för en enda process hela virtuella minnesrymd
i det fysiska minnet?
Förklara!

<p>

<hr>

</body>
</html>
