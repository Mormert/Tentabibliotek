!function(e){function t(t){for(var r,i,a=t[0],c=t[1],l=t[2],u=0,p=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);p.length;)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={241:0,542:0},o={241:0,542:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{0:1,1:1,2:1,3:1,4:1,6:1,8:1,9:1,11:1,13:1,15:1,17:1,18:1,19:1,20:1,24:1,25:1,27:1,28:1,29:1,31:1,32:1,33:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1,44:1,45:1,47:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,82:1,83:1,84:1,85:1,86:1,88:1,90:1,91:1,92:1,93:1,125:1,126:1,127:1,128:1,129:1,130:1,131:1,132:1,133:1,134:1,135:1,137:1,138:1,139:1,140:1,142:1,143:1,144:1,145:1,146:1,147:1,148:1,149:1,152:1,540:1,546:1,547:1,548:1,549:1,550:1,551:1,552:1,553:1,554:1,555:1,556:1,557:1,558:1,559:1,560:1,561:1,562:1,563:1,564:1,565:1,566:1,567:1,568:1,569:1,570:1,571:1,572:1,573:1,574:1,575:1,576:1,577:1,579:1,580:1,581:1,582:1,583:1,584:1,585:1,586:1,587:1,588:1,589:1,590:1,591:1,592:1,594:1,595:1,596:1,597:1,598:1,599:1,600:1,601:1,602:1,603:1,604:1,605:1,606:1,608:1,609:1,610:1,611:1,612:1,613:1,614:1,615:1,616:1,617:1,618:1,619:1,620:1,621:1,622:1,623:1,624:1,625:1,626:1,627:1,628:1,629:1,630:1,631:1,632:1,633:1,634:1,635:1,636:1,637:1,638:1,640:1,641:1,642:1,644:1,645:1,646:1,647:1,648:1,649:1,652:1,653:1,654:1,655:1,656:1,657:1,660:1,661:1,663:1,664:1,665:1,666:1,667:1,668:1,669:1,670:1,672:1,673:1,674:1,675:1,676:1,677:1,678:1,679:1,680:1,681:1,683:1}[e]&&t.push(i[e]=new Promise((function(t,n){for(var r=e+"-5631721f66c92ebdfd02.css",o=a.p+r,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var l=(d=s[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===r||l===o))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var d;if((l=(d=u[c]).getAttribute("data-href"))===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete i[e],p.parentNode.removeChild(p),n(s)},p.href=o,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){i[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=function(e){return a.p+""+({96:"locale-ar-sa",97:"locale-cs-cz",98:"locale-cy-gb",99:"locale-da-dk",100:"locale-de-de",101:"locale-en",102:"locale-en-au",103:"locale-en-gb",104:"locale-en-us-k12",105:"locale-en-us-pro",106:"locale-en-za",107:"locale-es-es",108:"locale-fr-fr",109:"locale-it-it",110:"locale-ja-jp",111:"locale-ko-kr",112:"locale-ms-my",113:"locale-nb-no",114:"locale-nl-nl",115:"locale-nn-no",116:"locale-pl-pl",117:"locale-pt-br",118:"locale-ru-ru",119:"locale-sv-se",120:"locale-th-th",121:"locale-tr-tr",122:"locale-zh-cn",123:"locale-zh-tw",242:"app_develop",243:"cldrdata-ar",244:"cldrdata-ar-001",245:"cldrdata-ar-AE",246:"cldrdata-ar-BH",247:"cldrdata-ar-DJ",248:"cldrdata-ar-DZ",249:"cldrdata-ar-EG",250:"cldrdata-ar-EH",251:"cldrdata-ar-ER",252:"cldrdata-ar-IL",253:"cldrdata-ar-IQ",254:"cldrdata-ar-JO",255:"cldrdata-ar-KM",256:"cldrdata-ar-KW",257:"cldrdata-ar-LB",258:"cldrdata-ar-LY",259:"cldrdata-ar-MA",260:"cldrdata-ar-MR",261:"cldrdata-ar-OM",262:"cldrdata-ar-PS",263:"cldrdata-ar-QA",264:"cldrdata-ar-SA",265:"cldrdata-ar-SD",266:"cldrdata-ar-SO",267:"cldrdata-ar-SS",268:"cldrdata-ar-SY",269:"cldrdata-ar-TD",270:"cldrdata-ar-TN",271:"cldrdata-ar-YE",272:"cldrdata-bg",273:"cldrdata-bg-BG",274:"cldrdata-ca",275:"cldrdata-ca-AD",276:"cldrdata-ca-ES",277:"cldrdata-ca-ES-VALENCIA",278:"cldrdata-ca-FR",279:"cldrdata-ca-IT",280:"cldrdata-cs",281:"cldrdata-cs-CZ",282:"cldrdata-cy",283:"cldrdata-cy-GB",284:"cldrdata-da",285:"cldrdata-da-DK",286:"cldrdata-da-GL",287:"cldrdata-dav",288:"cldrdata-dav-KE",289:"cldrdata-de",290:"cldrdata-de-AT",291:"cldrdata-de-BE",292:"cldrdata-de-CH",293:"cldrdata-de-DE",294:"cldrdata-de-LI",295:"cldrdata-de-LU",296:"cldrdata-en",297:"cldrdata-en-001",298:"cldrdata-en-150",299:"cldrdata-en-AG",300:"cldrdata-en-AI",301:"cldrdata-en-AS",302:"cldrdata-en-AU",303:"cldrdata-en-BB",304:"cldrdata-en-BE",305:"cldrdata-en-BM",306:"cldrdata-en-BS",307:"cldrdata-en-BW",308:"cldrdata-en-BZ",309:"cldrdata-en-CA",310:"cldrdata-en-CC",311:"cldrdata-en-CK",312:"cldrdata-en-CM",313:"cldrdata-en-CX",314:"cldrdata-en-DG",315:"cldrdata-en-DM",316:"cldrdata-en-ER",317:"cldrdata-en-FJ",318:"cldrdata-en-FK",319:"cldrdata-en-FM",320:"cldrdata-en-GB",321:"cldrdata-en-GD",322:"cldrdata-en-GG",323:"cldrdata-en-GH",324:"cldrdata-en-GI",325:"cldrdata-en-GM",326:"cldrdata-en-GU",327:"cldrdata-en-GY",328:"cldrdata-en-HK",329:"cldrdata-en-IE",330:"cldrdata-en-IM",331:"cldrdata-en-IN",332:"cldrdata-en-IO",333:"cldrdata-en-JE",334:"cldrdata-en-JM",335:"cldrdata-en-KE",336:"cldrdata-en-KI",337:"cldrdata-en-KN",338:"cldrdata-en-KY",339:"cldrdata-en-LC",340:"cldrdata-en-LR",341:"cldrdata-en-LS",342:"cldrdata-en-MG",343:"cldrdata-en-MH",344:"cldrdata-en-MO",345:"cldrdata-en-MP",346:"cldrdata-en-MS",347:"cldrdata-en-MT",348:"cldrdata-en-MU",349:"cldrdata-en-MW",350:"cldrdata-en-MY",351:"cldrdata-en-NA",352:"cldrdata-en-NF",353:"cldrdata-en-NG",354:"cldrdata-en-NR",355:"cldrdata-en-NU",356:"cldrdata-en-NZ",357:"cldrdata-en-PG",358:"cldrdata-en-PH",359:"cldrdata-en-PK",360:"cldrdata-en-PN",361:"cldrdata-en-PR",362:"cldrdata-en-PW",363:"cldrdata-en-RW",364:"cldrdata-en-SB",365:"cldrdata-en-SC",366:"cldrdata-en-SD",367:"cldrdata-en-SG",368:"cldrdata-en-SH",369:"cldrdata-en-SL",370:"cldrdata-en-SS",371:"cldrdata-en-SX",372:"cldrdata-en-SZ",373:"cldrdata-en-TC",374:"cldrdata-en-TK",375:"cldrdata-en-TO",376:"cldrdata-en-TT",377:"cldrdata-en-TV",378:"cldrdata-en-TZ",379:"cldrdata-en-UG",380:"cldrdata-en-UM",381:"cldrdata-en-US",382:"cldrdata-en-US-POSIX",383:"cldrdata-en-VC",384:"cldrdata-en-VG",385:"cldrdata-en-VI",386:"cldrdata-en-VU",387:"cldrdata-en-WS",388:"cldrdata-en-ZA",389:"cldrdata-en-ZM",390:"cldrdata-en-ZW",391:"cldrdata-es",392:"cldrdata-es-419",393:"cldrdata-es-AR",394:"cldrdata-es-BO",395:"cldrdata-es-CL",396:"cldrdata-es-CO",397:"cldrdata-es-CR",398:"cldrdata-es-CU",399:"cldrdata-es-DO",400:"cldrdata-es-EA",401:"cldrdata-es-EC",402:"cldrdata-es-ES",403:"cldrdata-es-GQ",404:"cldrdata-es-GT",405:"cldrdata-es-HN",406:"cldrdata-es-IC",407:"cldrdata-es-MX",408:"cldrdata-es-NI",409:"cldrdata-es-PA",410:"cldrdata-es-PE",411:"cldrdata-es-PH",412:"cldrdata-es-PR",413:"cldrdata-es-PY",414:"cldrdata-es-SV",415:"cldrdata-es-US",416:"cldrdata-es-UY",417:"cldrdata-es-VE",418:"cldrdata-fi",419:"cldrdata-fi-FI",420:"cldrdata-fr",421:"cldrdata-fr-BE",422:"cldrdata-fr-BF",423:"cldrdata-fr-BI",424:"cldrdata-fr-BJ",425:"cldrdata-fr-BL",426:"cldrdata-fr-CA",427:"cldrdata-fr-CD",428:"cldrdata-fr-CF",429:"cldrdata-fr-CG",430:"cldrdata-fr-CH",431:"cldrdata-fr-CI",432:"cldrdata-fr-CM",433:"cldrdata-fr-DJ",434:"cldrdata-fr-DZ",435:"cldrdata-fr-FR",436:"cldrdata-fr-GA",437:"cldrdata-fr-GF",438:"cldrdata-fr-GN",439:"cldrdata-fr-GP",440:"cldrdata-fr-GQ",441:"cldrdata-fr-HT",442:"cldrdata-fr-KM",443:"cldrdata-fr-LU",444:"cldrdata-fr-MA",445:"cldrdata-fr-MC",446:"cldrdata-fr-MF",447:"cldrdata-fr-MG",448:"cldrdata-fr-ML",449:"cldrdata-fr-MQ",450:"cldrdata-fr-MR",451:"cldrdata-fr-MU",452:"cldrdata-fr-NC",453:"cldrdata-fr-NE",454:"cldrdata-fr-PF",455:"cldrdata-fr-PM",456:"cldrdata-fr-RE",457:"cldrdata-fr-RW",458:"cldrdata-fr-SC",459:"cldrdata-fr-SN",460:"cldrdata-fr-SY",461:"cldrdata-fr-TD",462:"cldrdata-fr-TG",463:"cldrdata-fr-TN",464:"cldrdata-fr-VU",465:"cldrdata-fr-WF",466:"cldrdata-fr-YT",467:"cldrdata-ga",468:"cldrdata-ga-IE",469:"cldrdata-he",470:"cldrdata-he-IL",471:"cldrdata-it",472:"cldrdata-it-CH",473:"cldrdata-it-IT",474:"cldrdata-it-SM",475:"cldrdata-ja",476:"cldrdata-ja-JP",477:"cldrdata-ko",478:"cldrdata-ko-KP",479:"cldrdata-ko-KR",480:"cldrdata-kok",481:"cldrdata-kok-IN",482:"cldrdata-ms",483:"cldrdata-ms-Latn",484:"cldrdata-ms-Latn-BN",485:"cldrdata-ms-Latn-MY",486:"cldrdata-ms-Latn-SG",487:"cldrdata-nb",488:"cldrdata-nb-NO",489:"cldrdata-nb-SJ",490:"cldrdata-nl",491:"cldrdata-nl-AW",492:"cldrdata-nl-BE",493:"cldrdata-nl-BQ",494:"cldrdata-nl-CW",495:"cldrdata-nl-NL",496:"cldrdata-nl-SR",497:"cldrdata-nl-SX",498:"cldrdata-nn",499:"cldrdata-nn-NO",500:"cldrdata-pl",501:"cldrdata-pl-PL",502:"cldrdata-pt",503:"cldrdata-pt-AO",504:"cldrdata-pt-BR",505:"cldrdata-pt-CV",506:"cldrdata-pt-GW",507:"cldrdata-pt-MO",508:"cldrdata-pt-MZ",509:"cldrdata-pt-PT",510:"cldrdata-pt-ST",511:"cldrdata-pt-TL",512:"cldrdata-ru",513:"cldrdata-ru-BY",514:"cldrdata-ru-KG",515:"cldrdata-ru-KZ",516:"cldrdata-ru-MD",517:"cldrdata-ru-RU",518:"cldrdata-ru-UA",519:"cldrdata-sv",520:"cldrdata-sv-AX",521:"cldrdata-sv-FI",522:"cldrdata-sv-SE",523:"cldrdata-th",524:"cldrdata-th-TH",525:"cldrdata-tr",526:"cldrdata-tr-CY",527:"cldrdata-tr-TR",528:"cldrdata-vi",529:"cldrdata-vi-VN",530:"cldrdata-zh",531:"cldrdata-zh-Hans",532:"cldrdata-zh-Hans-CN",533:"cldrdata-zh-Hans-HK",534:"cldrdata-zh-Hans-MO",535:"cldrdata-zh-Hans-SG",536:"cldrdata-zh-Hant",537:"cldrdata-zh-Hant-HK",538:"cldrdata-zh-Hant-MO",539:"cldrdata-zh-Hant-TW",540:"courses",541:"datepicker-locales",545:"vendors~app_develop"}[e]||e)+"-5631721f66c92ebdfd02.js"}(e);var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;s.push(["e6ZA",124,544]),n()}({"+3BC":function(e,t,n){},"+4Px":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return h})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return v})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return y})),n.d(t,"v",(function(){return S})),n.d(t,"w",(function(){return C})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return k})),n.d(t,"o",(function(){return T})),n.d(t,"n",(function(){return I})),n.d(t,"x",(function(){return $})),n.d(t,"y",(function(){return E})),n.d(t,"A",(function(){return P})),n.d(t,"z",(function(){return A}));var r=8,i=188,o=46,s=40,a=35,c=13,l=27,u=36,d=37,p=110,m=108,f=34,h=33,g=190,v=39,b=32,y=9,S=38,C=48,w=53,k=57,T=96,I=105;function $(e){var t=e.keyCode;return t===S||t===s||t===d||t===v}function E(e){return e.keyCode===c||e.keyCode===m}function P(e){return e.keyCode===y&&!e.shiftKey}function A(e){return e.keyCode===y&&e.shiftKey}},"+IM5":function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return d})),n.d(t,"TrueFalseAnswerType",(function(){return p}));var r=n("D57K"),i=(n("QLzv"),n("wHJ2")),o=n("nbDY"),s=n.n(o),a=n("Sa5G");n.d(t,"QuestionType",(function(){return a.A})),n.d(t,"FIMBAnswerEvaluationType",(function(){return a.o}));var c=n("yCC5"),l=n("Rjd/"),u=n("nkTj"),d=c.Ub,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.TrueFalse=new t("true_false"),t.AgreeDisagree=new t("agree_disagree"),t.RightWrong=new t("right_wrong"),t.YesNo=new t("yes_no"),t.UserEnteredLabels=new t("user_entered_labels"),t}(s.a);l.a.factory(d,["restmod",u.d,function(e){return e.model().mix({ui:{init:function(){return{rendered:!1}}},$extend:{Record:{getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.edit},saveAlignedGoals:function(e){var t=this;return e&&(this.alignedGoals=e.map((function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals,questionType:this.questionType}}).$then((function(){t.$getPreviousVersion()&&(t.$getPreviousVersion().alignedGoals=t.alignedGoals)}))},isPresentationOnly:function(){return a.A.PresentationOnly.isEqualTo(this.questionType)}},Collection:{getInsertIndex:function(e){var t=-1,n=e.positionBefore,r=e.positionAfter;return null!=n&&(t="start"===i.lowercase(n)?0:this.indexOfItemById(n)),t<0&&null!=r&&("end"===i.lowercase(r)?t=this.length:(t=this.indexOfItemById(r))>=0&&t++),t},indexOfItemById:function(e){return this.$indexOf((function(t){return t.id===e}))}}}})}])},"+O05":function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return g}));var r,i=n("D57K"),o=n("nsO7"),s=n("wHJ2"),a=n("pjml"),c=n("12mu"),l=n("0JpG"),u=n("JfV0"),d=n("5Dl8"),p=n("aHpC"),m=n("klG7"),f="ultra.services.assessment",h="assessment";!function(e){e.FOLDER="folder",e.ASSESSMENT="assessment",e.BANK="bank"}(r||(r={}));var g=function(){function e(e,t){this.modal=e,this.$rootScope=t}return e.isAssessment=function(e){return a.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)||a.r.ContentHandler.SurveyLink.isEqualTo(e.contentHandler)},e.isExternalSubmissionsAssessment=function(e){if(s.isUndefined(e)||null==e)return!1;if(a.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail){var t=e.contentDetail[a.r.ContentHandler.TestLink.handle];return s.isDefined(t)&&s.isDefined(t.test)&&s.isDefined(t.test.deploymentSettings)&&t.test.deploymentSettings.isCollectExternalSubmissions}return!1},e.getQuestionsForAttempt=function(e,t){if(!e.getToolAttemptDetailItem(t))return[];var n=e.getToolAttemptDetailItem(t).questionAttempts;return n&&n.length>0?n.map((function(e){return e.question})):[]},e.studentCanViewAttemptGradeAndFeedback=function(e,t){return t?!!(e&&e.isSubmitted()&&t.isPosted()):!(!e||!e.isCompleted())},e.attemptHasFeedback=function(e){var t=e&&e.getFeedbackToUser();return!!t&&!!t.rawText},e.groupAttemptHasIndividualFeedback=function(e){var t=e&&e.attempts&&e.attempts[0].getGroupIndividualFeedbackToUser();return!!t&&!!t.rawText},e.canViewAssessmentException=function(e,t,n,r){return!e&&!t&&n&&!r},e.getSubmissionListAllExceptions=function(e,t){return null==e||null==t?null:e.assessments.$buildRaw(t.getDeployedAssessment().assessment).exceptions.$resolve().$allow([404]).$asPromise()},e.initAssessmentExceptionsIndicators=function(e,t){var n=this;if(null==e||null==t)return null;var r={},i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return this.getSubmissionListAllExceptions(e,t).then((function(t){var o=n.setAssessmentExceptionStyleTag(i.id)();return t.length&&t.forEach((function(t){n.setAssessmentExceptionClass(o,e.id,t,!0,r)})),o}))},e.updateAssessmentExceptionIndicator=function(e,t,n,r){if(void 0===n&&(n=!0),null!=e&&null!=t){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),o=this.setAssessmentExceptionStyleTag(i.id)();this.setAssessmentExceptionClass(o,e.id,r,n)}},e.setAssessmentExceptionStyleTag=function(e){var t="css_assessment_exceptions"+e;return o.once((function(){var e=s.element(document).find("#"+t);return 0===e.length&&(e=s.element('<style id="'+t+'"></style>').appendTo("head")),e}))},e.setAssessmentExceptionClass=function(e,t,n,r,i){void 0===r&&(r=!0);var s,c=new d.a,l=r?"inline-block":"none",u=n.target.id,p=n.target.type;a.e.AssessmentExceptionType.User.isEqualTo(p)&&c.selector(".cc"+t+" .assessment-exception bb-username.course_user"+u+":before").rule("display",l),a.e.AssessmentExceptionType.Group.isEqualTo(p)&&(c.selector(".cc"+t+" .assessment-exception .show-exceptions.submission_row_group"+u+":before").rule("display",l),c.selector(".cc"+t+" .slick_title"+u+" .assessment-exception .show-exceptions:before").rule("display",l),c.selector(".cc"+t+" .assign_group"+u+".show-exceptions:before").rule("display",l)),i&&(i[u]=c.build(),s=o(i).sortBy().map((function(e,t){return e})).join("\n")),s&&s!==e.text()&&e.text(s),s||(s=e.text(),e.text([s,c.build()].join("\n")))},e.getSubmissionRowException=function(e,t,n,r){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return a.e.AssessmentExceptionType.Group.isEqualTo(n)?i.groupExceptions.$new(r).$resolve().$allow([404]).$asPromise():a.e.AssessmentExceptionType.User.isEqualTo(n)?i.userExceptions.$new(r).$resolve().$allow([404]).$asPromise():void 0},e.deleteException=function(e,t,n,r){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return a.e.AssessmentExceptionType.User.isEqualTo(n)?i.userExceptions.$new(r).deleteException():a.e.AssessmentExceptionType.Group.isEqualTo(n)?i.groupExceptions.$new(r).deleteException():void 0},e.setSubmissionRowException=function(e,t,n,r,i){var o=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),s={due:i.due,start:i.start,end:i.end,attempts:i.attempts};return a.e.AssessmentExceptionType.User.isEqualTo(n)?o.userExceptions.$new(r).saveException(s):a.e.AssessmentExceptionType.Group.isEqualTo(n)?o.groupExceptions.$new(r).saveException(s):void 0},e.prototype.isExternallyRefQuestionsAPIError=function(e){return 409===e.status&&o.includes(e.code,u.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE)},e.prototype.openHasExternallyRefQuestionsModal=function(e){var t=this.$rootScope.$new();t.translateOpts={title:{key:"components.services.assessment.modal.error-external-questions."+e.toString()+".title"}},t.descriptionKey="components.services.assessment.modal.error-external-questions."+e.toString()+".description";var n={scope:t,template:m,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/services/assessment")}]}};this.modal.open(n)},e=Object(i.__decorate)([Object(i.__param)(0,Object(p.b)(c.b)),Object(i.__param)(1,Object(p.b)("$rootScope"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(g);s.module(f,[c.a]).service(h,g)},"+brj":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return f}));var r=n("D57K"),i=(n("qY1S"),n("wHJ2")),o=n("nbDY"),s=n.n(o),a=n("dzwE"),c=n("Ymz8"),l=n("Fvsw"),u=n("TnpK"),d=n("fYJU"),p="ultra.components.services.browserStorage",m="browserStorage",f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.LocalStorage=new t("localStorage"),t.SessionStorage=new t("sessionStorage"),t}(s.a),h=function(){function e(e,t,n,r,i,o){var s=this;this.$rootScope=e,this.$q=t,this.DSCacheFactory=n,this.context=r,this.ultraState=i,this.contextUser=o,this.QUOTA_EXCEEDED_ERR=22,this.QUOTA_EXCEEDED_ERR_FIREFOX=22,this.BROWSER_STORAGE_PREFERENCE_KEY="ultraui.browserstorage.key",this.CACHE_PREFIX="ultraui.browserstorage",this.sjcl=c,this.crypto=window.crypto,this.BROWSER_STORAGE_RECORD_MAX_AGE=864e5,this.BROWSER_STORAGE_RECORD_MAX_COUNT=10,this._isEncryptNativeSupported=s.crypto&&s.crypto.subtle?s.crypto.subtle.digest({name:"SHA-256"},s._stringToArrayBuffer("x")).then((function(){return s.$q.when(!0)})).catch((function(){return s.$q.when(!1)})):s.$q.when(!1)}return e.prototype.serializeCurrentRouteScopes=function(e,t){return this.saveToStorage(this._getCurrentRouterStateObject(),t,e,(function(e,t){if(!(t&&t instanceof Array&&t.length>=1e9)&&(t&&t.$type&&t.$type===t.constructor&&"$pk"in t&&(t.ui.isRestModObject=!0),("_"!==e[0]||this.ui&&!0===this.ui.isRestModObject||t&&t.ui&&!0===t.ui.isRestModObject)&&("$"!==e[0]||-1!==["$viewValue","$modelValue"].indexOf(e))))return t}))},e.prototype.deserializeCurrentRouteScopes=function(e,t){return this.getFromStorage(this._getCurrentRouterStateObject(),e)},e.prototype.deleteCurrentRouteScopes=function(e){return this.deleteFromStorage(this._getCurrentRouterStateObject(),e)},e.prototype._getCurrentRouterStateObject=function(){return{componentState:this.ultraState.current.name.slice(this.ultraState.getBaseState().length+1),stateParams:this.ultraState.getCurrentUrlParams()}},e.prototype.saveToStorage=function(e,t,n,r){var i=this,o=this._getBrowserStorageCache(n);o.removeExpired();var s=a.stringify(t,r);return this._getUserEncryptionPassword().then((function(t){return i._encrypt(t,s).then((function(t){try{return o.put(i._toSortedKeyJSON(e),t)}catch(e){e.code&&e.code===i.QUOTA_EXCEEDED_ERR||e.code===i.QUOTA_EXCEEDED_ERR_FIREFOX?console.warn("Local storage is at capacity",e):console.warn("Local storage not permitted.",e),i.saveToStorage=function(e,t,n){return i.$q.when(void 0)}}}))}))},e.prototype.getFromStorage=function(e,t,n){var r=this,i=this._getBrowserStorageCache(t).get(this._toSortedKeyJSON(e));return null!=i?this._getUserEncryptionPassword().then((function(e){return r._decrypt(e,i).then((function(e){return a.parse(e,n)}))})):this.$q.when(void 0)},e.prototype.updateStorageKey=function(e,t,n,r){var i=this;return this.getFromStorage(e,n).then((function(o){i.deleteFromStorage(e,n);var s=r||o;if(s)return i.saveToStorage(t,s,n)}))},e.prototype.deleteFromStorage=function(e,t){var n=this._getBrowserStorageCache(t);return n.removeExpired(),!!n.remove(this._toSortedKeyJSON(e))},e.prototype._toSortedKeyJSON=function(e){return JSON.stringify(e,(function(e,t){return"object"!=typeof t?t:Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})}))},e.prototype._getBrowserStorageCache=function(e){var t=this.CACHE_PREFIX+"."+e.toString()+"."+this.contextUser.userId,n=this.DSCacheFactory.get(t);if(!n)switch(e){case f.LocalStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,maxAge:this.BROWSER_STORAGE_RECORD_MAX_AGE,storageMode:f.LocalStorage.toString()});break;case f.SessionStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,storageMode:f.SessionStorage.toString()})}return n},e.prototype._getUserEncryptionPassword=function(){this._sjclForceReady();var e=this.sjcl.codec.base64.fromBits(this.sjcl.random.randomWords(6));return this.storageKeyPromise=this.storageKeyPromise||this.context.getPreference(this.BROWSER_STORAGE_PREFERENCE_KEY,e).then((function(e){return e.value&&!e.$resolved&&e.$save(),e.value}))},e.prototype._sjclForceReady=function(){if(!this.sjcl.random.isReady()){for(var e=[],t=0;t<32;t++)e.push(Math.floor(4294967296*Math.random()));this.sjcl.random.addEntropy(e,1024,"IE10 fallback entrophy")}},e.prototype._encrypt=function(e,t){var n=this;return this._isEncryptNativeSupported.then((function(r){return r?n._subtleCryptoEncrypt(e,t).then((function(e){return{SubtleCryptoEncrypted:e}})):n.$q.when(n.sjcl.encrypt(e,t)).then((function(e){return{SjclCipherEncrypted:e}}))}))},e.prototype._decrypt=function(e,t){var n=this;return this._isEncryptNativeSupported.then((function(r){return r?n._subtleCryptoDecrypt(e,t.SubtleCryptoEncrypted):n.$q.when(n.sjcl.decrypt(e,t.SjclCipherEncrypted))}))},e.prototype._subtleCryptoEncrypt=function(e,t){var n=this;return this._subtleCryptoGetPasswordKey(e).then((function(e){var r=n.crypto.getRandomValues(new Uint8Array(16));return n.crypto.subtle.encrypt({name:"AES-CBC",iv:r},e,n._stringToArrayBuffer(t)).then((function(e){return{vector:n._arrayBufferToBase64(r),encrypted:n._arrayBufferToBase64(e)}}))}))},e.prototype._subtleCryptoDecrypt=function(e,t){var n=this;return this._subtleCryptoGetPasswordKey(e).then((function(e){var r=n._base64ToArrayBuffer(t.vector);return n.crypto.subtle.decrypt({name:"AES-CBC",iv:r},e,n._base64ToArrayBuffer(t.encrypted)).then((function(e){return n._arrayBufferToString(e)}))}))},e.prototype._subtleCryptoGetPasswordKey=function(e){var t=this;return this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer(e)).then((function(e){return t.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"])}))},e.prototype._arrayBufferToString=function(e,t){for(var n=t&&new Uint8Array(e)||new Uint16Array(e),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r},e.prototype._arrayBufferToBase64=function(e){return window.btoa(this._arrayBufferToString(e,!0))},e.prototype._stringToArrayBuffer=function(e,t){for(var n=t&&new ArrayBuffer(e.length)||new ArrayBuffer(2*e.length),r=t&&new Uint8Array(n)||new Uint16Array(n),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return n},e.prototype._base64ToArrayBuffer=function(e){return this._stringToArrayBuffer(window.atob(e),!0)},e.$inject=["$rootScope","$q","DSCacheFactory",l.b,u.d,d.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h);i.module(p,["angular-data.DSCacheFactory",l.a,u.b]).service(m,h)},"+e2k":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=(n("DlnX"),n("yC9S")),o=["active","alert","success","warning"],s="ultra.components.directives.svgIcon";!function(){function e(e,t){this.$rootScope=e,this.$element=t}e.prototype.$onInit=function(){var e=this;this.windowHref=window.location.href,this.updateIconHref(),this.setStatusStyles(),this.destroyLocationChangeListener=this.$rootScope.$on("$locationChangeSuccess",(function(){e.windowHref=window.location.href,e.updateIconHref()}))},e.prototype.$onChanges=function(){this.updateIconHref()},e.prototype.$onDestroy=function(){this.destroyLocationChangeListener()},e.prototype.updateIconHref=function(){this.iconHref=this.windowHref+"#icon-"+this.size+"-"+this.icon},e.prototype.setStatusStyles=function(){var e=this;this.color?this.statusStyles="color":null!=o.find((function(t){return e.status}))?this.statusStyles=this.status:this.statusStyles="default"},e.$inject=["$rootScope","$element"],e=Object(r.__decorate)([Object(i.a)({moduleName:s,componentName:"bbSvgIcon",template:'\n    <svg class="svg-icon {{::$ctrl.size}}-icon {{::$ctrl.statusStyles}}"\n         focusable="false" aria-hidden="true" bb-cache-compilation="svg-icon">\n      <use xlink:href="" ng-href="{{$ctrl.iconHref}}"></use>\n    </svg>\n  ',bindings:{icon:"@",color:"<",size:"@",status:"@"}})],e)}()},"+g6d":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("MFWY");var r=n("wHJ2"),i=n("lEL+"),o="ultra.components.directives.clickToInvokeChild",s="bbClickToInvokeChild",a=function(){function t(t,n,r,i){var o=this;if(this.scope=t,this.element=n,this.attrs=r,this.timeout=i,this.linkSelector=r[s],!this.linkSelector&&void 0!==this.linkSelector)throw new Error(s+" has no child selector specified.");this.setClickableStyle(),t.$on("click-to-invoke-child-directive-init",(function(){o.setClickableStyle()})),n.on("click",(function(t){if(!e(t.target).closest("a, button, [ng-click], .stop-click-propagation, [bb-click-to-invoke-child]",o.element.get(0)).length){var n=o.element.find(o.linkSelector).get(0);n&&(n.click(),r.stopPropagation&&"true"===r.stopPropagation&&t.stopPropagation())}}))}return t.prototype.setClickableStyle=function(){var e=this;this.timeout((function(){e.element.find(e.linkSelector).first().length?(void 0===e.element.attr("tabindex")&&e.element.attr("tabindex","-1"),e.element.addClass("child-is-invokable")):(e.element.removeAttr("tabindex"),e.element.removeClass("child-is-invokable"))}),this.scope,0,!1)},t.$inject=["scope","element","attrs",i.b],t}(),c=function(){function e(e){var t=this;this.$injector=e,this.scope=!1,this.restrict="A",this.link=function(e,n,r){t.$injector.instantiate(a,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();r.module(o,[i.a]).directive(s,["$injector",function(e){return e.instantiate(c)}])}).call(this,n("5iHu"))},"/J7e":function(e,t,n){"use strict";function r(e){if(null==e)return!1;if("boolean"==typeof e)return e;if("string"==typeof e){var t=e.trim();return"true"===t.toLowerCase()||"1"===t}if("number"==typeof e)return 0!==e;throw new Error('Cannot convert "'+e+'" to boolean')}n.d(t,"a",(function(){return r}))},"/KQw":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.components.directives.cacheCompilation",o=function(){function e(e){this.$compile=e,this.compiled=Object.create(null),this.priority=2e3}return e.prototype.compile=function(e,t){var n=this,r=t.bbCacheCompilation;if(!r)throw new Error("Cache compilation key is required");var i=e.contents();return e.empty(),null==this.compiled[r]&&(this.compiled[r]=this.$compile(i)),function(e,t){n.compiled[r](e,(function(e,n){t.append(e)}))}},e.$inject=["$compile"],e}();r.module(i,[]).directive("bbCacheCompilation",["$injector",function(e){return e.instantiate(o)}])},"/jNt":function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));n("t04/"),n("kH1j"),n("ud/9");var r,i=n("wHJ2"),o=n("UP3t"),s=n("pjml"),a=n("z6Q5"),c=n("TnpK"),l=n("gkef"),u=n("ZzYr"),d="ultra.directives.courseCatalogLink",p="course",m="org",f="ultraui.coursecatalog.link",h="classic_course_catalog_link_ind",g="classic_course_catalog_link",v=((r={})[f]="Disabled",r[h]="N",r[g]="",r),b=function(){function e(e,t,n,r,i,s,a){var c=this;this.scope=e,this.attrs=t,this.$q=n,this.SystemPreferenceModel=r,this.batchService=i,this.ultraState=s,this.windowSizeService=a,this.template=o,i.performBatch((function(){n.all([r.$find(f).$allow([404]).$asPromise(),r.$find(h).$allow([404]).$asPromise(),r.$find(g).$allow([404]).$asPromise()]).then((function(e){c.handleSystemPreferencesResponse(e)}))}));var l=t.catalogType===m?"base.organization-catalog":"base.course-catalog";e.handleCatalogLink=function(){s.goToRoute(l)},e.windowSizeService=a}return e.prototype.handleSystemPreferencesResponse=function(e){var t=this.getPreferenceValueByKey(e,f)||v[f];this.scope.shouldDisplayCatalogLink="Enabled"===t;var n=this.getPreferenceValueByKey(e,h)||v[h];this.scope.isExternalCatalog="Y"===n,this.scope.externalCatalogUrl=this.getPreferenceValueByKey(e,g)||v[g]},e.prototype.getPreferenceValueByKey=function(e,t){var n=e.find((function(e){return e.key===t}));return n?n.value:null},e.$inject=["scope","attrs","$q",s.wb.serviceName,a.b,c.d,l.b],e}(),y=function(){function e(e){var t=this;this.$injector=e,this.template=o,this.link=function(e,n,r){e.courseCatalogLink=t.$injector.instantiate(b,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();i.module(d,[s.R,a.a,c.b,l.a,u.a]).directive("bbCourseCatalogLink",["$injector",function(e){return e.instantiate(y)}])},"/mDi":function(e,t,n){},"/qpZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.keyboardEnter",s=function(){this.restrict="A",this.link=function(e,t,n){t.on("keydown keypress",(function(r){r.keyCode===i.f&&(n.bbBlurBeforeEnter&&t.blur(),e.$apply((function(){e.$eval(n.bbKeyboardEnter,{$event:r})})),r.preventDefault())}))}};r.module(o,[]).directive("bbKeyboardEnter",["$injector",function(e){return e.instantiate(s)}])},0:function(e,t){},"0+Qs":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("wHJ2"),i=n("5MwF"),o="ultra.services.interval",s="interval";r.module(o,[]).factory(s,["$interval",function(e){var t=function(t,n,r,o,s){if(r<5e3&&!o&&(null==s||s)){if(!i.a.production)throw new Error("Short duration interval, repeating indefinitely, which invokes apply was registered!");console.warn("Short duration interval, repeating indefinitely, which invokes apply was registered!\n"+(new Error).stack)}var a=e(t,r,o,s);return a.__bb_unregister_scope_destroy__=n.$on("$destroy",(function(){e.cancel(a)})),a};return t.cancel=function(t){t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},"07uq":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.directives.bbMouseLeaveEnter",o=function(){function e(e){var t=this;this.$rootScope=e,this.restrict="A",this.link=function(e,n,r){var i=function(){e.$apply((function(){t.$rootScope.$broadcast(r.bbMouseLeaveEnter+"-mouse-enter")}))},o=function(){e.$apply((function(){t.$rootScope.$broadcast(r.bbMouseLeaveEnter+"-mouse-leave")}))};e.$on("$destroy",(function(){n.off("mouseenter",i),n.off("mouseleave",o)})),n.on("mouseenter",i),n.on("mouseleave",o)}}return e.$inject=["$rootScope"],e}();r.module(i,[]).directive("bbMouseLeaveEnter",["$injector",function(e){return e.instantiate(o)}])},"09tz":function(e,t,n){},"0JpG":function(e,t,n){"use strict";n.d(t,"moduleName",(function(){return u})),n.d(t,"serviceName",(function(){return d})),n.d(t,"providerName",(function(){return p})),n.d(t,"localeQuerystringRegex",(function(){return m})),n.d(t,"Service",(function(){return g}));var r=n("D57K"),i=(n("2R3U"),n("nsO7")),o=n("wHJ2"),s=n("lAEu"),a=n("n7/H"),c=n("C3Ga"),l=n("tfZW");n.o(a,"ILocaleComposedDurationFormat")&&n.d(t,"ILocaleComposedDurationFormat",(function(){return a.ILocaleComposedDurationFormat})),n.o(a,"ILocaleDateFormat")&&n.d(t,"ILocaleDateFormat",(function(){return a.ILocaleDateFormat})),n.o(a,"ILocaleDatetimeFormat")&&n.d(t,"ILocaleDatetimeFormat",(function(){return a.ILocaleDatetimeFormat})),n.o(a,"ILocaleTimeFormat")&&n.d(t,"ILocaleTimeFormat",(function(){return a.ILocaleTimeFormat})),n.o(a,"ILocaleTimezoneFormat")&&n.d(t,"ILocaleTimezoneFormat",(function(){return a.ILocaleTimezoneFormat})),n.o(a,"LocaleCategory")&&n.d(t,"LocaleCategory",(function(){return a.LocaleCategory})),n.d(t,"ILocaleUsernameFormat",(function(){return a.ILocaleUsernameFormat}));var u="ultra.services.BbLocalize",d="bbLocalize",p=d+"Provider",m=/setLang=([^&]*)/,f=function(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$q.when(r.apply(this,e))}},h=function(){function e(t,n){this.$q=t,this.$rootScope=n,this.defaultLocale="en",this.percentageFormatters={},this.currencyFormatters={},this.bundlePromises={},this.intl=c.a.getInstance(),this.frmt=new s.a(this.intl,{production:e.production,urlRoot:e.urlRoot,defaultLocale:this.defaultLocale}),this.overrideLoader=l.a.getInstance()}return e.prototype.isRTL=function(e){return!1},e.prototype.getDecimalStringForScope=function(e){var t=this.getLocale(e);return this.frmt.number.getDecimalStringSync(t)},e.prototype.getGroupingStringForScope=function(e){var t=this.getLocale(e);return this.frmt.number.getGroupingStringSync(t)},e.prototype.isValidNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.isValidSync(e,n)},e.prototype.loadBundle=function(e,t){null==t&&(t=this.getLocale(null));var n="locales/[locale]/"+e+".json";return this.intl.addBundles(n),this.intl.loadBundles(t)},e.prototype.loadAllBundles=function(e){return this.intl.loadBundles(e)},e.prototype.insertLocaleData=function(e,t){return this.intl.storeLocaleData(e,t)},e.prototype.resetLocaleData=function(){return this.intl.reset()},e.prototype.translateSync=function(e){var t=o.copy(e.params)||{};return Object.keys(t).forEach((function(e){void 0===t[e]&&(t[e]="")})),o.isObject(t)&&(t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape})),this.intl.translateSync(e.locale||this.getLocale(null),e.key,t)},e.prototype.translate=function(e){var t=o.copy(e.params)||{};return o.isObject(t)&&(t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape})),this.intl.translate(e.locale||this.getLocale(null),e.key,t)},e.prototype._getFormatter=function(e){return this.frmt.getFormatterSync(e)},e.prototype.getAppLocale=function(){return this.intl.normalizeLocale(this.getUserLocale()||this.defaultLocale)},e.prototype.getAppLocaleISO=function(){return this.getUserLocale()||this.defaultLocale},e.prototype.getLocale=function(e){if(!e)return this.getAppLocale();for(var t=e.locale;!t&&e.$parent;)t=(e=e.$parent).locale;return this.intl.normalizeLocale(t)||this.getAppLocale()},e.prototype.getUserLocale=function(){return this.userLocale},e.prototype.preProcessFormatterLocale=function(e){return this.frmt.preProcessFormatterLocale(e)},e.prototype.getPreferredLocales=function(e){return this.intl.normalizeLocales(this.frmt.getPreferredLocales(e))},e.prototype.validateLocale=function(e){try{this.intl.getMf("isLocaleExists",this.intl.normalizeLocale(e))}catch(e){return!1}return!0},e.prototype.setLocale=function(e,t){var n=this;return t||(t=this.getAppLocale()),e&&(e.locale=t),this.loadLocale(t).then((function(){n.$rootScope.$broadcast("$translateChangeSuccess",{language:t})}))},e.prototype.setUserLocale=function(e){this.userLocale=e},e.prototype.setSystemDefaultLocale=function(e){this.defaultLocale=e},e.prototype.addOverride=function(e,t){this.overrideLoader.addOverrideBundle(e,t)},e.prototype.loadLocale=function(e){return this.frmt.loadLocale(e)},e.prototype.formatNumber=function(e,t,n){var r=this.getLocale(t);return this.frmt.number.format(e,r,n)},e.prototype.formatNumberSync=function(e,t,n){var r=this.getLocale(t);return this.frmt.number.formatSync(e,r,n)},e.prototype.regroupNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.regroup(e,n)},e.prototype.regroupNumberSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.regroupSync(e,n)},e.prototype.parseNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.parse(e,n)},e.prototype.parseNumberSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.parseSync(e,n)},e.prototype.formatDate=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDate(e,t,r)},e.prototype.formatDateSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDateSync(e,t,r)},e.prototype.parseDate=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseDate(e,t,i,r)},e.prototype.parseDateSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseDateSync(e,t,i,r)},e.prototype.formatTime=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTime(e,t,r)},e.prototype.formatTimeSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimeSync(e,t,r)},e.prototype.getDayPeriodsFormatSync=function(e){return this.frmt.getFormatterSync(e).cldr.main("dates").calendars.gregorian.dayPeriods.format.abbreviated},e.prototype.getTimePattern=function(e,t){var n=this.getLocale(t);return this.frmt.datetime.getTimePattern(e,n)},e.prototype.getTimePatternSync=function(e,t){var n=this.getLocale(t);return this.frmt.datetime.getTimePatternSync(e,n)},e.prototype.parseTime=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseTime(e,t,i,r)},e.prototype.parseTimeSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseTimeSync(e,t,i,r)},e.prototype.formatDatetime=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDatetime(e,t,r)},e.prototype.formatDatetimeSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDatetimeSync(e,t,r)},e.prototype.formatDurationBetweenSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.formatDurationBetweenSync(e,t,i,r)},e.prototype.formatDuration=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.datetime.formatDuration(e,i,n,r)},e.prototype.formatComposedDurationSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatComposedDurationSync(e,t,r)},e.prototype.formatTimezone=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimezone(e,t,r)},e.prototype.formatTimezoneSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimezoneSync(e,t,r)},e.prototype.formatUsername=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.format(e,t,i,r)},e.prototype.formatUsernameSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.formatSync(e,t,i,r)},e.prototype.formatUsernameList=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.formatList(e,t,i,r)},e.prototype.formatItems=function(e,t,n,r,i){var o=this.getLocale(n);return this.frmt.items.format(e,e.length,t,o,r,i)},e.prototype.formatItemsSync=function(e,t,n,r,i,o){var s=this.getLocale(r);return this.frmt.items.formatSync(e,t,n,s,i,o)},e.prototype.getFormatEnum=function(e,t){if(!t)return null;var n=e[t=t.charAt(0).toUpperCase()+t.slice(1)];if(null==n)throw new Error("Invalid format `"+t+"` is used");return n},e.prototype.getFormatId=function(e,t){if(null==t)return 0;var n=e[t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)];if(null==n)throw new Error("Invalid format `"+t+"` is used");return n},e.prototype.formatPercentage=function(e,t){var n=this.getLocale(t);return this.frmt.number.format(e,n,{style:"percent"})},e.prototype.formatPercentageSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.formatSync(e,n,{style:"percent"})},e.prototype.formatCurrency=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.currency.format(e,i,n,r)},e.prototype.formatCurrencySync=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.currency.formatSync(e,i,n,r)},e.prototype.getReactBabelfishParams=function(){return{locale:this.getAppLocale(),babelfishInstance:this.intl,babelfishFormatter:this.frmt}},e.$inject=["$q","$rootScope"],e.production=!1,e.urlRoot=".",e.defaultDecimalPrecision=a.Number.defaultDecimalPrecision,e.minDecimalPrecision=1,e.maxDecimalPrecision=4,Object(r.__decorate)([f],e.prototype,"loadBundle",null),Object(r.__decorate)([f],e.prototype,"translate",null),Object(r.__decorate)([f],e.prototype,"formatNumber",null),Object(r.__decorate)([f],e.prototype,"regroupNumber",null),Object(r.__decorate)([f],e.prototype,"parseNumber",null),Object(r.__decorate)([f],e.prototype,"formatUsername",null),Object(r.__decorate)([f],e.prototype,"formatUsernameList",null),Object(r.__decorate)([f],e.prototype,"formatPercentage",null),e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(h),v=function(){function e(){this.$get=["$injector",function(e){return e.instantiate(h)}]}return e.prototype.setOptions=function(e){void 0===e&&(e={}),i.forOwn(e,(function(e,t){h[t]=e}))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(v);o.module(u,[]).provider(d,v)},"0Y4C":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-collab",use:"icon-small-collab-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3h10v3l4-1.974V12l-4-2v3H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6l1 2-1 2M7.5 6l1 2-1 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"0fB1":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("nsO7"),i=n("wHJ2"),o=n("5MwF"),s=n("w9Zy"),a="ultra.offcanvas-scope.offcanvas-scope-pausal-scope",c="bbOffcanvasPausalScope",l=function(){this.restrict="A",this.link=function(t,n,i){var a=function(e){return e.hasClass("bb-offcanvas-overlay")&&(t=e.next()).hasClass("bb-offcanvas-panel")&&(t.hasClass("full")||(n=t.css("max-width"),r.findIndex([void 0,"none"],(function(e){return e===n}))>=0));var t,n};t.$newOffcanvasScope=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.constructor.prototype.$new.apply(this,e);return n.$$__digestPaused=!1,n};var l=function(){var r;t.$$__digestPaused="true"===(r=n.is(".hide-in-background")?n:n.parents(".hide-in-background")).attr("aria-hidden")&&function(){for(var t=r.nextAll(),n=0;n<t.length;n+=2)if(a(e(t.get(n))))return!0;return!1}(),!1!==t.$$__digestPaused||t.$root.$$phase||t.$digest()};if(t.$on(s.c,l),t.$on(s.b,l),!o.a.production){var u=function(e){return e?u(e.$parent)+"."+e.$id+(e.$$digestPaused?"P":"A"):""},d=function(){i.$set(c,u(t))};t.$on(s.c,d),t.$on(s.b,d),d()}}},u=i.module(a,[]);o.a.features.offcanvasPausalScope&&u.directive(c,["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},"0wat":function(e,t){e.exports='<div id="body-content" class="tools-frame" ng-controller="ultra.legacy.tool.controller">\n  <div id="side-panel" class="tools-overlay full bb-offcanvas-right side-panel">\n    <div class="panel-wrap">\n      <header class="panel-header">\n        <div class="columns" id="global-title">\n          <h1 class="panel-title ng-scope" bb-translate="{{tool.getToolTitleByKey(legacyTool.toolName)}}"></h1>\n          <button class="left-off-canvas-toggle menu-toggle" aria-expanded="true"\n                  analytics-id="base.tools.frame.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n        </div>\n      </header>\n      <div class="iframe-wrapper">\n        <iframe name="legacy-tool-iframe" bb-iframe-max-height seamless="seamless" ng-src="{{::legacyTool.getUrl()}}"\n                bb-iframe-event-repeater="keydown"\n                bb-translate-attrs="{\'title\': \'{{tool.getToolTitleByKey(legacyTool.toolName)}}\'}"></iframe>\n      </div>\n    </div>\n  </div>\n</div>\n'},1:function(e,t){},"1/43":function(e,t,n){"use strict";n.r(t),n.d(t,"EmailSettingGeneralSettingValue",(function(){return r})),n.d(t,"SmsSettingGeneralSettingValue",(function(){return i})),n.d(t,"PushNotificationGeneralSettingValue",(function(){return o})),n.d(t,"serviceName",(function(){return u}));n("QLzv");var r,i,o,s=n("5MwF"),a=n("yCC5"),c=n("Rjd/"),l=n("nkTj");!function(e){e.Digest="D",e.Immediate="I",e.None="N"}(r||(r={})),function(e){e.Enabled="A",e.Disabled="N"}(i||(i={})),function(e){e.Everyone="E",e.Instructor="I"}(o||(o={}));var u=a.sb;c.a.factory(u,["restmod",l.d,function(e){return e.model().mix({$url:function(){return s.a.apiBasePath+"/v1/notification/settings/generalSettings/course"}})}])},"12mu":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));n("imME");var r=n("wHJ2"),i=n("w9Zy"),o=n("9zo4"),s=n("H8CZ"),a=n("wWlP"),c=n("cQcs"),l=n("A4cK"),u=n("fmWv"),d="mm.foundation.modal",p="$modal";r.module(d,[i.d]).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,template:c,link:function(n){n.animate=!1,t((function(){n.animate=!0})),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,template:l,link:function(e,n,r){e.windowClass=r.windowClass||"",t((function(){e.animate=!0,n[0].querySelectorAll("[autofocus]").length>0?n[0].querySelectorAll("[autofocus]")[0].focus():n[0].querySelector("div").focus()}))}}}]).factory("$modalStack",["$window","$timeout","$document","$compile","$rootScope",i.e,o.c,function(t,n,i,o,c,l,u){var d,p,m="modal-open",f=a.a,h={};function g(){for(var e=-1,t=f.keys(),n=0;n<t.length;n++)f.get(t[n]).value.backdrop&&(e=n);return e}function v(e,t){var n=i.find("body").eq(0),r=f.get(e).value;f.remove(e),b(r.modalDomEl,r.modalScope,300,(function(){r.modalScope.$destroy(),n.toggleClass(m,f.length()>0),function(e){if(d&&-1===g()){var t=p;b(d,p,150,(function(){t.$destroy(),t=null,e()})),d=void 0,p=void 0}else e()}(t),u.revertAccessibilityHandling()}))}function b(e,t,r,i){var o=n(a,r);function a(){a.done||(a.done=!0,e.remove(),i&&i())}s.a(e,(function(){n.cancel(o),a(),t.$apply()})),t.animate=!1}return c.$watch(g,(function(e){p&&(p.index=e)})),h.open=function(n,s){f.add(n,{deferred:s.deferred,modalScope:s.scope,backdrop:s.backdrop,keyboard:s.keyboard});var a=i.find("body").eq(0),v=g();v>=0&&!d&&((p=c.$new(!0)).index=v,d=o("<div modal-backdrop></div>")(p),a.append(d));var b=r.element('<div class="reveal-modal" style="z-index:-1""></div>');a.append(b[0]);var y=parseInt(getComputedStyle(b[0]).top,10)||0;b.remove();var S=(t.pageYOffset||0)+y;function C(e){var t;27===e.which&&(t=f.top())&&t.value.keyboard&&c.$apply((function(){h.dismiss(t.key)}))}return l.getTopElement().then((function(e){var t=r.element('<div modal-window style="visibility: visible; top:'+S+'px;"></div>');t.attr("window-class",s.windowClass),t.attr("index",f.length()-1),t.attr("animate","animate"),e&&e.name&&t.attr("data-base-state-name",e.name),t.append(s.content);var i=o(t)(s.scope);u.applyAccessibilityHandlingForPanel(i),f.top().value.modalDomEl=i,i&&!f.get(n).value.modalDomEl&&(f.get(n).value.modalDomEl=i),a.append(i),a.addClass(m)})),p&&(p.darkenBackdrop=s.darkenBackdrop),i.bind("keydown",C),s.scope.$on("$destroy",(function(){e(document).off("keydown",C)})),f},h.close=function(e,t){if(f.get(e)){var n=f.get(e).value;n&&v(e,(function(){n.deferred.resolve(t)}))}},h.dismiss=function(e,t){if(f.get(e)){var n=f.get(e).value;n&&v(e,(function(){n.deferred.reject(t)}))}},h.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},h.getTop=function(){return f.top()},h}]).provider(p,(function(){var e={options:{backdrop:!0,keyboard:!0,darkenBackdrop:!1},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,o,s,c,l){new u.a(a.a).start();var d={};return d.open=function(o){var s=i.defer(),a=i.defer(),u={result:s.promise,opened:a.promise,close:function(e){l.close(u,e)},dismiss:function(e){l.dismiss(u,e)}};if((o=r.extend({},e.options,o)).resolve=o.resolve||{},!o.template)throw new Error("Template is required. Use requireJs to load template string if needed.");var d,p,m=i.all([i.when(o.template)].concat((d=o.resolve,p=[],r.forEach(d,(function(e,n){(r.isFunction(e)||r.isArray(e))&&p.push(i.when(t.invoke(e)))})),p)));return m.then((function(e){var t=(o.scope||n).$new();t.$close=u.close,t.$dismiss=u.dismiss;var i={},a=1;o.controller&&(i.$scope=t,i.$modalInstance=u,r.forEach(o.resolve,(function(t,n){i[n]=e[a++]})),c(o.controller,i)),l.open(u,{scope:t,deferred:s,content:e[0],backdrop:o.backdrop,keyboard:o.keyboard,windowClass:o.windowClass,darkenBackdrop:o.darkenBackdrop})}),(function(e){s.reject(e)})),m.then((function(){a.resolve(!0)}),(function(){a.reject(!1)})),u},d}]};return e}))}).call(this,n("5iHu"))},"1I+h":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("JzsJ");var r=n("wHJ2"),i=n("5MwF"),o=n("0JpG"),s=n("TnpK"),a="ultra.course.collab.router";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){i.a.features.collab&&e.peekState("collab",{url:"/collab/:launchType",require:function(){return n.e(696).then(n.bind(null,"6DVw"))},pageTitle:"course.outline.collab.ultraCollabTitle",panelClass:"full",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/collab/course-collab")}]},onExit:["$rootScope",function(e){e.$broadcast("collab-exit")}]})}])},"1ZiP":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=(n("JzsJ"),n("wHJ2")),o=n("pjml"),s=n("w9Zy"),a=n("0JpG"),c=n("Is+C"),l=n("Qbdf"),u=n("TnpK"),d=n("bF8R"),p=n("Fvsw"),m=n("gkef"),f=n("+O05"),h=n("nmzr"),g="ultra.course.content.scorm.routes",v={onEnter:["contentData","attempt",s.e,u.d,"$stateParams",m.b,function(e,t,n,r,i,o){if(i.forceOpenFeedbackPanel&&!i.skipTransitionEvents){r.isPeekPanelOpen()&&n.expandTopPanel();var s=f.a.attemptHasFeedback(t),a=f.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),c=r.next.name.indexOf("assessment-submission-feedback")>=0,l=!r.prev.name,u=o.isSmallBreakpoint();!s||!a||u||c||l||r.goPeekState("assessment-submission-feedback",{attemptId:t.id})}}],onExit:["contentData",s.e,u.d,"$q","$stateParams",function(e,t,n,r,i){if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){var o=r.when();n.isPeekPanelOpen()&&(o=t.shrinkTopPanel()),o.then((function(){n.goPeekState("scorm-overview.student.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId})}))}}]};i.module(g,[a.moduleName,u.b,l.b]).config([u.c,l.c,function(e,t){var i,s,m;e.peekState("scorm",{abstract:!0,url:"/scorm"}).peekState("scorm.open",{url:"/open",params:{contentId:null,courseId:null},routingFunction:[u.d,c.c,function(e,t){t.scormLaunch({courseId:e.nextParams.courseId,contentId:e.nextParams.contentId,showPreLaunchPanel:!0})}]}).peekState("scorm-settings",{url:"/scorm/settings?parentId&positionBefore&positionAfter&contentId",pageTitle:"course.content.scorm.settings.panelTitle",require:[function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(567)]).then(n.bind(null,"7Six"))}],resolve:(i={},i[l.d]=t.resolve,i.translations=[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}],i),peekViewName:"scorm-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release","content-collection-picker"]}).peekState("scorm-launch-frame",{url:"/scorm/launchFrame?toolHref&courseId&contentId",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}]},panelClass:"full",require:[function(){return n.e(591).then(n.bind(null,"26hv"))}],pageTitle:"course.content.scorm.launch.frameTitle"}).peekState("gradebook-item.scorm-submissions",{pageTitle:"course.content.scorm.settings.gradingTitle",url:"/scorm/:contentId/columns/:columnId/submissions?courseId&gradeitemView",panelClass:"full",resolve:{translations:["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])}]},views:{"gradebook-item-scorm-slider@":{require:function(){return n.e(679).then(n.bind(null,"2eYu"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(9),n.e(11),n.e(31),n.e(49)]).then(n.bind(null,"hmMQ"))}}},onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conversations","message","conditional-release","scorm-settings","scorm-launch-frame","submission-grading",h.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT],peekViewName:"gradebook-item-panel@"}).peekState("scorm-overview",{abstract:!0,resolve:(s={},s[l.d]=t.resolve,s.contentData=[l.d,d.b,u.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],s.translations=["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}],s),onEnter:["contentData",p.b,function(e,t){t.column=e.gradingColumn}],onExit:[p.b,function(e){e.column=null}],require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(10),n.e(1),n.e(2),n.e(3),n.e(8),n.e(548)]).then(n.bind(null,"HwBC"))}}).peekState("scorm-overview.student",{url:"/scorm/overview/{contentId:_[0-9]+_1}?courseId",peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations","message"],views:{"scorm-grading-section@":{require:function(){return n.e(698).then(n.bind(null,"all8"))}}}}).peekState("scorm-overview.student.multiple-attempt",{url:"/scorm-attempts/:columnId/:gradeId",resolve:{scormContentData:[l.d,"contentData",c.c,d.b,u.d,function(e,t,n,r,i){var o=n.currentContentData||t&&t.gradingColumn.id===i.nextParams.columnId&&t;return o||r.loadContentAndGrades({course:e,contentId:i.nextParams.contentId,columnId:i.nextParams.columnId})}],translations:["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment")])}]},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:function(){return Promise.all([n.e(1),n.e(19),n.e(11),n.e(43),n.e(635)]).then(n.bind(null,"x3h6"))}}).peekState("scorm-overview.student.attempt",Object(r.__assign)(Object(r.__assign)({url:"/column/{columnId:_[0-9]+_1}/attempt/{attemptId:_[0-9]+_1}",panelClass:"full",resolve:{contentData:["contentData",l.d,d.b,u.d,function(e,t,n,r){return e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:r.nextParams.contentId,columnId:r.nextParams.columnId})}],currentContent:["contentData",function(e){return e.courseContent}],currentColumn:["contentData",function(e){return e.gradingColumn}],attempt:["$q","contentData",o.o.serviceName,u.d,o.C.serviceName,o.H.serviceName,function(e,t,n,r){var i=r.nextParams.attemptId;return n.$buildRaw({id:t.courseContent.courseId}).gradebook.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){t.attempt=e})).$asPromise()}]},require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(2),n.e(3),n.e(8),n.e(9),n.e(126)]).then(n.bind(null,"H0q3"))}},v),{params:{commentPanelInitiallyOpen:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations","message"]})).peekState("scorm-analytics-report",{url:"/scorm-report/{contentId:_[0-9]+_1}?courseId",resolve:(m={},m[l.d]=t.resolve,m.content=[l.d,u.d,o.o.serviceName,function(e,t,n){return n.$new(e.id).contents.$find(t.nextParams.contentId).$asPromise()}],m.translations=[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}],m),panelClass:"full",require:function(){return n.e(599).then(n.bind(null,"0rof"))},pageTitle:"course.content.scorm.report.pageTitle"})}])},"1fiZ":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-large-avatar-multiple",use:"icon-large-avatar-multiple-usage",viewBox:"0 0 60 60",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" id="icon-large-avatar-multiple"><g fill="none" stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663" /><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438" /><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27" /><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223" /><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758" /></g></g></symbol>'});i.add(o);e.exports=o},"1y/X":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.TEACHING=new t("TEACHING"),t.SUPPORTING=new t("SUPPORTING"),t.TAKING=new t("TAKING"),t.VISITING=new t("VISITING"),t}(n.n(i).a);t.a=o},2:function(e,t){},"2Tae":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n("D57K"),i=n("wHJ2"),o=n("3bn4"),s=n("0JpG"),a=n("TnpK"),c="ultra.course.rubric.rubric-goal-alignment",l="rubric-goal-alignment",u=["course","goal-alignment","goal"],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="/goalAlignment/:rowId",t.panelClass="peek rubric-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentCourse","currentRubric",s.serviceName,a.d,function(t,n,r,i,o){return t.when(i.loadBundle("features/"+u.join("/"))).then((function(){return n.rubrics.$find(r.id,{expand:"rows.alignedGoals,permissions"}).$asPromise().then((function(t){t.rows.forEach((function(t){t.id&&o.nextParams&&o.nextParams.rowId&&t.id===o.nextParams.rowId&&(e.rubricRow=t)}))}))})).then((function(){return e.rubricRow?e.setupGoalAlignableContent(e.rubricRow,i):t.when([])}))}]},t.prototype.getPeekStateName=function(){return l},t.prototype.getOverrideSubTitle=function(){return["currentRubric",a.d,function(e,t){var n="";return e.rows.forEach((function(e){e.id&&t.nextParams&&t.nextParams.rowId&&e.id===t.nextParams.rowId&&(n=e.header)})),n}]},t.prototype.setupGoalAlignableContent=function(e,t){return[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:u.join(".")+".goalsAlignedWithRubricCriteria"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals:function(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map((function(t){return t.content=e,t}))}]},t.$inject=["$injector","$q"],t}(o.a);i.module(c,[a.b,s.moduleName]).config([a.c,function(e){var t=new d;e.peekState(t.getPeekStateName(),t)}])},"2qV7":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return se}));var r=n("D57K"),i=(n("JzsJ"),n("h3Te"),n("nsO7")),o=n("wHJ2"),s=n("TnpK"),a=n("pjml"),c=n("Fvsw"),l=n("fYJU"),u=n("0JpG"),d=n("neh4"),p=n("vWx0"),m=n("VfFK"),f=n("OMme"),h=n("jj6p"),g=n("cacA"),v=n("sb+l"),b=n("Nrpd"),y=n("rmtn"),S=n("iAaI"),C=n("qOsI"),w=n("qtHE"),k=n("Sjpn"),T=n("DDbI"),I=n("P43K"),$=n("YVo+"),E=n("iwI+"),P=n("yGso"),A=n("YfM7"),x=n("pUR+"),D=n("Hbkz"),O=n("CPqS"),_=n("GNXM"),M=n("3hz+"),N=n("FE+f"),R=n("fzj8"),L=n("yXB1"),j=n("1I+h"),U=n("JRp+"),G=n("gOJg"),B=n("y3by"),F=n("uNsL"),q=n("8HGT"),H=n("jnoB"),z=n("7oqQ"),V=n("RJ/U"),K=n("7QJo"),J=n("UiBk"),W=n("U8wS"),Q=n("sNuB"),Y=n("BrA8"),Z=n("IVtk"),X=n("hWgD"),ee=n("IVCC"),te=n("1ZiP"),ne=n("cwoR"),re=n("j2IR"),ie=n("Q/M7"),oe=n("tfZW"),se="ultra.routes";function ae(e,t){return{systemInfo:[c.b,function(e){return e.getSystemInfo().$asPromise()}],currentUser:[l.b,function(e){return e.userModel.$asPromise()}],languages:["currentUser",a.N.serviceName,function(e,n){if(t&&e.locale)return n.$collection().$fetch({limit:1e4}).$asPromise()}],user:["currentUser","languages",function(e,n){return t&&e.locale&&!i.find(n,{locale:e.locale})&&(e.locale=null),e.$patch().$asPromise()}],localize:["$q","$rootScope","user","systemInfo",u.serviceName,"$cookies","$window",function(t,n,i,o,s,a,c){var l=i.locale||o.defaultLocaleIdentifier,d=a.get("guest.session.locale");i.isGuest()&&d&&(l=d);var p=oe.a.getInstance();if(o.siteId&&o.ultraCustomLocaleLocation&&p.setOverrideLocation(o.ultraCustomLocaleLocation,o.siteId),o.ultraLocaleData){var m=Object.keys(o.ultraLocaleData);m.forEach((function(e){var t=o.ultraLocaleData[e];t.ultraOverrideCode&&s.addOverride(e,t.ultraOverrideCode)})),m.indexOf(l)<0&&(l=o.defaultLocaleIdentifier)}var f=c.location.href.match(u.localeQuerystringRegex);f&&(l=f[1]),s.setUserLocale(l),s.setSystemDefaultLocale(o.defaultLocaleIdentifier);var h=Object(r.__spreadArrays)([s.setLocale(n,l)],e.map((function(e){return s.loadBundle(e)})));return t.all(h)}]}}o.module(se,[a.R,c.a,l.a,u.moduleName,s.b,d.a,p.a,m.a,f.b,A.a,w.a,h.a,g.a,k.a,T.a,I.a,$.a,E.a,v.a,b.a,y.a,S.a,C.a,P.a,D.a,O.a,_.a,M.a,N.a,R.a,L.a,j.a,U.a,G.a,B.a,F.a,q.a,H.a,z.a,V.a,K.a,J.a,W.a,Q.a,x.a,Y.a,X.a,ee.a,te.a,ne.a,re.a,"ngCookies"]).config([s.c,function(t){t.state("base",{abstract:!0,resolve:ae(["features/base/base","global","common/grades-common","components/services/grade"]),require:function(){return Promise.all([n.e(20),n.e(662),n.e(12),n.e(29),n.e(23),n.e(87),n.e(566)]).then(n.bind(null,"03Un"))}}).state("welcome",{resolve:ae(["features/welcome"],!0),require:function(){return n.e(674).then(n.bind(null,"IYP1"))},pageTitle:"welcome.welcome.title"}).state("register-succeeded",{url:"/startLearn?registerStatusCode?courseId?enrollStatusCode",require:function(){return n.e(711).then(n.bind(null,"90MB"))}}).state("base.not-found",{resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/base/not-found/base-not-found")}]},require:function(){return n.e(676).then(n.bind(null,"A15Z"))},pageTitle:"base.not-found.pageNotFoundTitle"}).state("logout",{url:"^/logout",onEnter:function(){e("body").addClass("bb-logout"),window.location.href=ie.c("/webapps/login/?action=logout")}}).state("classicRedirect",{url:"/classicRedirect?legacyUrl",onEnter:[s.d,function(e){var t=e.nextParams.legacyUrl,n=t?ie.b(t).course_id:null;n&&e.goPeekState("course.classic.outline",{courseId:n,legacyUrl:t})}]}).state("mobileApiCall",{url:"^/mobileApiCall?action&courseId&contentId&attemptId",onEnter:[s.d,function(e){Z.b(e)}]})}])}).call(this,n("5iHu"))},3:function(e,t){},"3FFP":function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v}));var r=n("D57K"),i=(n("YQEa"),n("nsO7")),o=n("5iHu"),s=n("wHJ2"),a=n("nbDY"),c=n.n(a),l=n("rxY8"),u=n("lEL+"),d=n("0JpG"),p=n("yC9S"),m=n("LsF/"),f=n("DyQT"),h=n("yo/t"),g="ultra.components.directives.saveTray",v=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.template=n,o.msgKeysSuffix=r,o.eventName=i,o}return Object(r.__extends)(t,e),t.prototype.getTemplateHtml=function(){return this.template},t.getTrayType=function(e){switch(e){case"LoadMoreResults":return t.LoadMoreResults;case"Toast":return t.Toast;default:return t.Default}},t.Default=new t("Default",m,{inProgress:"saving",success:"success",error:"error"},"bb-save-tray-start"),t.LoadMoreResults=new t("LoadMoreResults",f,{inProgress:"loadingMoreItems",success:"itemsLoaded",error:"itemsFailedToLoad"},"bb-load-more-results-start"),t.Toast=new t("Toast",h),t}(c.a),b=function(){function e(t,n,r,s,a){var c=this;if(this.scope=t,this.spinner=r,this.timeout=s,this.bbLocalize=a,this.inProgress=!1,this.localizationKeysPrefix=t.trayLocalizationKeysPrefix||"components.directives.save-tray",this.footer=n.closest("footer"),t.toastMessage&&t.toastMessage()){if(n.find(".notification-container span.progress-status").html(t.toastMessage()),t.toastShortMessage&&t.toastShortMessage()){var l,u=!1,d=!1,m=!0,f=n.find(".notification-container span.progress-status"),h=function(){var e=o(window).width();f[0].offsetWidth<f[0].scrollWidth?(u||(l=e),u=!0,m&&(d=!0),f.html(t.toastShortMessage())):e>l&&!d&&(u=!1,f.html(t.toastMessage())),m=!1};this.timeout(h,t,0);var g=i.debounce(h,100);p.b.OnWindow("resize",g,t)}}else this.spinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5,successCallback:function(){c.status="success",c.inProgress=!1,c.sendStatusMessage(t,c.status),c.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.success),t.$apply()},errorCallback:function(){c.status="error",c.inProgress=!1,c.sendStatusMessage(t,c.status),c.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.error),t.$apply()}},t.$on("save-tray-spinner-status-update",(function(e,t){if(c.spinnerObject)return t?c.spinnerObject.complete():c.spinnerObject.error()})),t.$on(t.trayType.eventName,(function(r,i,o,s,a,l){t.trayId===i&&(c.status="",c.canvasElement||(c.canvasElement=n.find(".canvas")),s&&(c.spinnerArgs=s),c.footer.addClass("is-active"),c.spinnerObject||(c.spinnerObject=c.spinner.initInlineLoader(c.canvasElement,c.spinnerArgs)),c.inProgress||(c.spinnerObject.start(),c.inProgress=!0),c.timeoutComplete=!1,c.activeTimeout&&!c.timeoutComplete&&c.timeout.cancel(c.activeTimeout),c.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.inProgress,0),o.then((function(){a?(c.activeTimeout=c.timeout((function(){c.footer.removeClass("is-active"),c.timeoutComplete=!0,c.scope.$root.$broadcast("bbSaveTrayComplete")}),t,l||e.ACTIVE_TIMEOUT_LENGTH,!0),c.spinnerObject.complete()):c.spinnerObject.error()}),(function(e){e&&"canceled"===e.$status||c.spinnerObject.error()})))}))}return e.prototype.sendMessageToScreenReader=function(e,t,n){t&&e.$root.$emit("read-info-directive-alert",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.localizationKeysPrefix+"."+t}),n)},e.prototype.sendStatusMessage=function(e,t){"true"===e.emitStatusEvent&&e.$root.$emit("save-tray-status-event",t)},e.$inject=["scope","element",l.b,u.b,d.serviceName],e.ACTIVE_TIMEOUT_LENGTH=6e3,e}(),y=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="E",this.scope={trayId:"@?",trayLocalizationKeysPrefix:"@?",toastMessage:"&?",toastShortMessage:"&?",toastClass:"&?",toastIcon:"&?",toastStatus:"&?",emitStatusEvent:"@?"},this.link=function(e,t,r){r.trayType?e.trayType=v.getTrayType(r.trayType):e.trayType=e.toastMessage&&e.toastMessage()?v.Toast:v.Default,t.append(n.$compile(e.trayType.getTemplateHtml())(e)),e.saveTray=n.$injector.instantiate(b,{scope:e,element:t})}}return e.$inject=["$injector","$compile"],e}();s.module(g,[l.a,u.a,d.moduleName]).directive("bbSaveTray",["$injector",function(e){return e.instantiate(y)}])},"3bn4":function(e,t,n){"use strict";var r=n("nsO7"),i=n("0JpG"),o=function(){function e(){var e,t,o=this;this.panelClass="peek",this.url="/goalAlignment",this.require=function(){return Promise.all([n.e(1),n.e(600)]).then(n.bind(null,"lQY5"))},this.pageTitle="course.goal-alignment.goal.header",this.allowChildPeekStates=!0,this.peekViewName="goal-alignment-peek",this.params={noAutoGo:!1},this.peekStates=["goal-picker-legacy"],this.resolve={translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}],goalAlignableContents:(e=o.resolveGoalAlignableContent(),t=e[e.length-1],e[e.length-1]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(null,e).then((function(e){return r.isArray(e)?e:[e]}))},e),overrideSubTitle:o.getOverrideSubTitle()}}return e.prototype.getOverrideSubTitle=function(){return[function(){return null}]},e}();t.a=o},"3hz+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.books-and-tools.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("books-and-tools",{url:"/booksAndTools?parentId",require:function(){return Promise.all([n.e(84),n.e(610)]).then(n.bind(null,"cFJh"))},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/books-and-tools/books-and-tools")}]},panelClass:"peek",pageTitle:"course.booksAndTools.tab.title",peekStates:["content-market","partner-tools","proctoring-lti-tool"]})}])},"3uIF":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("QLzv");var r=n("5MwF"),i=n("yCC5"),o=n("Rjd/"),s=i.zb;o.a.factory(s,["restmod",function(e){var t=r.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{delete:function(e,t){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e+"/linkRefId/"+t},(function(e){})).$asPromise()}}}})}])},"3vti":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=(n("4lO8"),n("my/J"),n("OAwL"),n("5iHu")),o=n("wHJ2"),s=n("yC9S"),a=n("nbDY"),c=n.n(a),l=n("+4Px"),u=n("0JpG"),d="ultra.components.directives.bbSortable",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Horizontal=new t("Horizontal"),t.Vertical=new t("Vertical"),t}(c.a),m={containerSelector:"[sortable-container]",itemSelector:"[sortable-item]",containerPath:"[sortable-parent]:first",placeholder:'<div class="placeholder">&nbsp;</div>',handle:"i.icon-reorder",onDragStart:function(e,t,n,r){t.rootGroup.placeholder=e.clone().addClass("placeholder").removeAttr("sortable-item"),t.rootGroup.placeholder.find("[sortable-container], [sortable-item]").removeAttr("sortable-container sortable-item"),n(e,t)},triggerKey:l.f,orientation:p.Vertical,placeholderClass:"placeholder",moveKeyHandler:function(e,t,n,r){var i=t.options;if(p.Horizontal.isEqualTo(i.orientation)){var o=i.isRTL?l.j:l.s,s=i.isRTL?l.s:l.j;r.keyCode===s?(r.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):r.keyCode===o&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),r.stopPropagation())}else r.keyCode===l.v?(r.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):r.keyCode===l.d&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),r.stopPropagation())},cancelHandler:function(e,t,n,r,i){var o=e.index();o>n?e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+n+")")):o<n&&e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+(n+1)+")"))},saveHandler:function(e,t,n,r){e.focus(),t.options.onDrop&&"function"==typeof t.options.onDrop&&t.options.onDrop(e,t,n,r)}},f=function(){function e(e){var t=this;this.localize=e,this.scope={sortableOptions:"=?"},this.restrict="A",this.link=function(e,n,r){var o=e.$watch("sortableOptions",(function(){e.sortableOptions=i.extend({},m,e.sortableOptions),e.sortableOptions.isRTL=t.localize.isRTL(e);var r=n.parents("[bb-sortable]");n.on("touchstart",e.sortableOptions.handle,(function(e){i(e.target).trigger("click")})),0!==r.length?(r.sortable("destroy"),r.last().sortable(e.sortableOptions)):n.sortable(e.sortableOptions),n.find(e.sortableOptions.itemSelector).each((function(n,r){t.keyboardDragAndDrop(i(r),e)})),s.b.OnRootScope(e,"sortable-item-inserted",(function(n,r){var i=t.keyboardDragAndDrop(r,e);r.hasClass(e.sortableOptions.placeholderClass)&&!r.data("axHandlersAdded")&&t.triggerAccessibilityMode(i,e)})),o()}))}}return e.prototype.keyboardDragAndDrop=function(e,t){var n=this,r=i(e).find(t.sortableOptions.handle);return r.on("keyup",(function(e){if(e.keyCode===t.sortableOptions.triggerKey){var r=i(e.target),o=r.closest(t.sortableOptions.itemSelector),s=o.parents(t.sortableOptions.containerSelector).last().data("sortable");if(o.hasClass(t.sortableOptions.placeholderClass))return;e.stopImmediatePropagation(),o.addClass(t.sortableOptions.placeholderClass),t.sortableOptions.onEnter&&t.sortableOptions.onEnter(o,s),n.triggerAccessibilityMode(r,t)}})),r},e.prototype.triggerAccessibilityMode=function(e,t){var n,r,o,s=e.closest(t.sortableOptions.itemSelector),a=s.parents(t.sortableOptions.containerSelector).last().data("sortable"),c=s.index(),l=function(){i(document).off("click focusin",r),e.off("keydown",n),e.off("keyup",o),s.data("axHandlersAdded",!1),s.removeClass(t.sortableOptions.placeholderClass),t.sortableOptions.onExit&&t.sortableOptions.onExit(s,a)};n=function(e){t.sortableOptions.moveKeyHandler(s,a,i.noop,e)},r=function(n){i(n.target).is(e)||(l(),t.sortableOptions.cancelHandler(s,a,c,i.noop,n))},o=function(e){e.keyCode===t.sortableOptions.triggerKey&&(l(),e.stopImmediatePropagation(),t.sortableOptions.saveHandler(s,a,i.noop,e))},e.on("keyup",o),e.on("keydown",n),i(document).on("click focusin",r),t.$on("$destroy",l),s.data("axHandlersAdded",!0)},e.$inject=[u.serviceName],e}();o.module(d,[u.moduleName]).directive("bbSortable",["$injector",function(e){return e.instantiate(f)}])},4:function(e,t){},"40MU":function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return h})),n.d(t,"RandomizeAnswers",(function(){return g})),n.d(t,"TimerCompletion",(function(){return v}));var r=n("D57K"),i=(n("QLzv"),n("nbDY")),o=n.n(i),s=n("5MwF"),a=n("yCC5"),c=n("Rjd/"),l=n("nkTj"),u=n("a8V0");n.d(t,"DeliveryType",(function(){return u.a}));var d=n("r6n2");n.d(t,"DeployedAssessmentType",(function(){return d.a}));var p=n("VJfD");n.d(t,"FeedbackMode",(function(){return p.a}));var m=n("K4f8");n.d(t,"FeedbackOption",(function(){return m.a}));var f=n("817J");n.d(t,"AssessmentType",(function(){return f.a}));var h=a.f,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.A=new t("ALWAYS"),t.N=new t("NEVER"),t.P=new t("PER_QUESTION"),t}(o.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.C=new t("CONTINUAL"),t.H=new t("HARDSTOP"),t}(o.a);c.a.factory(h,["restmod",l.d,function(e,t){return e.model().mix({lastModifiedDate:{serialize:"date"},answers:{hasMany:a.Vb},gradedQuestionAttempts:{hasMany:a.bb,path:"answers/grades"},questions:{hasMany:a.Ub},ui:{mask:!0,init:function(){return{}}},exceptions:{hasMany:a.g,hooks:{"before-request":function(e){e.url=e.url.replace(s.a.apiBasePath,s.a.apiBasePath+"/public")}}},userExceptions:{hasMany:a.g,path:"exceptions/users"},groupExceptions:{hasMany:a.g,path:"exceptions/groups"}})}])},"41sU":function(e,t,n){},"43zP":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NoChanges=new t("noChanges"),t.NotSaved=new t("notSaved"),t.Saved=new t("saved"),t.Saving=new t("saving"),t.Cancelling=new t("cancelling"),t.Deleting=new t("deleting"),t}(n.n(i).a)},"4GL6":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=(n("pGZF"),n("nsO7")),o=n("wHJ2"),s=n("0JpG"),a=n("lEL+"),c=n("gkef"),l=n("fGgA"),u=n("+4Px"),d="ultra.components.directives.tooltip.complexTooltip";function p(e){return void 0===e&&(e=""),'<ul class="complex-tooltip-list '+e+'"><li ng-repeat="item in items track by $index">{{item}}</li></ul>'}var m=function(t){function n(e,n,r,s,a,c,l){var u=t.call(this,e,n,r,a,c,l)||this;u.scope=e,u.element=n,u.attrs=r,u.$compile=s,u.localizeService=a,u.timeoutService=c,u.windowSizeService=l,u.scopeChanged=!1;var d=u.scope.$watch("tooltipScope()",(function(e){e&&(u.tooltipScope=u.scope.tooltipScope(),d())})),p=u.scope.$watch("tooltipScope().items",(function(e,t){e&&t&&i.difference(e,t).length&&(u.tooltipScope=u.scope.tooltipScope(),u.scopeChanged=!0,u.tooltipScope.$parent.$on("$destroy",(function(){u.tooltipScope.$destroy()})),(o.isUndefined(u.scope.tooltipAutoUpdate)||"false"===u.scope.tooltipAutoUpdate)&&p())}));return u}return Object(r.__extends)(n,t),n.prototype.showTooltip=function(){"true"===this.scope.tooltipAutoUpdate&&this.tooltipCreated&&this.scopeChanged&&(this.updateTooltipContent(t.prototype.getTooltip.call(this)),this.tooltipCreated=!1,this.scopeChanged=!1),t.prototype.showTooltip.call(this)},n.prototype.addTooltipContent=function(t){var r=this,i=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope);this.tooltipScope.$apply(),t.on("keydown",(function(e){e.which===u.g?(r.element.focus(),r.hideTooltip()):e.which!==u.u||e.shiftKey?e.which===u.u&&e.shiftKey&&o.element(e.target).closest(".tooltip-first-tabbable").length>0&&(r.getTooltip().find(".tooltip-last-tabbable").focus(),e.preventDefault(),e.stopPropagation()):o.element(e.target).closest(".tooltip-last-tabbable").length>0&&(r.getTooltip().find(".tooltip-first-tabbable").focus(),e.preventDefault(),e.stopPropagation())})),t.append(e('<div class="'+n.TOOLTIP_CONTENT_CLASS+'"></div>').append(i))},n.prototype.updateTooltipContent=function(e){var t=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope);e.find("."+n.TOOLTIP_CONTENT_CLASS).empty().append(t)},n.prototype.addTooltipStyles=function(e){e.removeClass("tooltip-center-content"),this.attrs.tooltipMaxWidth&&(e.removeClass("tooltip-max-width"),e.css({"max-width":this.attrs.tooltipMaxWidth})),"true"===this.attrs.tooltipDisablePadding&&e.addClass("tooltip-unpadded"),"true"===this.attrs.tooltipDarkTheme&&e.addClass("tooltip-dark-theme")},n.prototype.addTooltipEvents=function(e){var t=this;e.on("mouseleave",(function(e){t.timeoutMS>0?t.timeout=t.timeoutService((function(){t.hideTooltip()}),t.scope,t.timeoutMS):t.hideTooltip()})),e.on("mouseover",(function(e){t.timeout&&t.timeoutService.cancel(t.timeout)})),e.on("click",(function(e){e.stopPropagation()}))},n.prototype.postShowTooltip=function(){var e=this;o.isDefined(this.attrs.tooltipFocusSelector)&&this.timeoutService((function(){e.getTooltip().find(e.attrs.tooltipFocusSelector).eq(0).focus()}),this.scope,120)},n.$inject=["scope","element","attrs","$compile",s.serviceName,a.b,c.b],n.TOOLTIP_CONTENT_CLASS="complex-tooltip-content",n}(l.a),f=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.scope={tooltipScope:"&",tooltipTemplate:"@",tooltipAutoUpdate:"@?"},this.link=function(e,n,r){e.complexTooltip=t.$injector.instantiate(m,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();o.module(d,[s.moduleName,a.a,l.b,c.a]).directive("bbComplexTooltip",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},"4HBD":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n("gSbt");var r=n("wHJ2"),i=n("0JpG"),o=n("oVrE"),s=n("gCXj"),a=n("pjml"),c="ultra.components.directives.bbUsername",l=function(){function t(e){var t=this;this.bbLocalize=e,this.scope={user:"="},this.restrict="AE",this.link=function(e,n,r){e.update=function(){return t.updateDom(e,n,r)},n.addClass("username");var i=e.$watchGroup(["user.id","user.familyName","user.givenName","user.title","user.email"],(function(){if(e.user){var t=e.user;t.$asPromise&&!t.$resolved?t.$asPromise().then(e.update):e.update(),null!=r.autoUpdate&&"false"!==r.autoUpdate||i()}else n.html("")}))}}return t.prototype.isAnonymousUser=function(e){return o.f(e)},t.prototype.cleanUpClassNames=function(e){return e.split(/\s+/).filter((function(e){return!/^course_user.+$/.test(e)})).join(" ")},t.prototype.updateName=function(e,t){e.html(t)},t.prototype.updateAttrs=function(t,n,r,i){var o;"true"===r.hasTitleAttr&&n.attr("title",i),"true"!==r.shouldAllowLabel&&n.children().attr("aria-hidden","true");var s=n.find(".sr-only");0===s.length&&(s=e('<span class="sr-only"></span>'),n.append(s));var a=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.directives.username.msg-has-accommodations",params:{fullname:i},noWrap:!0});s.attr(((o={})["aria-label-if-no-accommodation"]=i,o["aria-label-if-has-accommodation"]=a,o))},t.prototype.updateDom=function(e,t,n){var r=this,o=e.user;this.isAnonymousUser(o)&&(o.givenName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"anonymous.postedName"}),o.familyName=""),t[0].className=this.cleanUpClassNames(t[0].className),o.id&&t.addClass("course_user"+o.id);var s=this.bbLocalize.getFormatId(i.ILocaleUsernameFormat,n.format);if(n.formatSync)try{this.updateName(t,this.bbLocalize.formatUsernameSync(o,s,e)),this.updateAttrs(e,t,n,this.bbLocalize.formatUsernameSync(o,s,e,{noWrap:!0,noEscape:!0}))}catch(e){console.error(e)}else this.bbLocalize.formatUsername(o,s,e).then((function(e){r.updateName(t,e)})).catch((function(e){return console.error(e)})),this.bbLocalize.formatUsername(o,s,e,{noWrap:!0,noEscape:!0}).then((function(i){r.updateAttrs(e,t,n,i)})).catch((function(e){return console.error(e)}))},t.$inject=[i.serviceName],t}();r.module(c,[i.moduleName,s.a,a.R]).config([s.b+"Provider",function(e){e.onStyleRefresh((function(e,t){var n=t.course&&t.course.memberships&&t.course.memberships.permissions?t.course.memberships.permissions.editAccommodation||t.course.memberships.permissions.viewAccommodation:t.permissions&&(t.permissions.editAccommodation||t.permissions.viewAccommodation);e.selector("bb-username.course_user"+t.userId+":before").rule("display",t.accommodation().hasAccommodation&&n?"inline-block":"none"),e.selector("bb-username.course_user"+t.userId).selector(".sr-only:before").rule("content",t.accommodation().hasAccommodation&&n?"attr(aria-label-if-has-accommodation)":"attr(aria-label-if-no-accommodation)")}))}]).directive("bbUsername",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},"4HXK":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("w9mJ"),a="ultra.services.logger",c="logger",l=function(){function e(e,t){this.$http=e,this.promiseQueueService=t,this.$http=e,this.queue=t.getQueue("telemetry")}return e.prototype.logToServer=function(e,t,n){var r=this;if(e){var i="string"==typeof e?new Error(e):e,s={applicationId:o.a.telemetryAppId,component:"",message:i.message,data:n,cause:i.stack,level:t};s.cause||(s.cause="Stack trace is unavailable"),this.queue.enqueue((function(){return r.$http.post(o.a.telemetryApiBasePath+"/v1/browser/logs",s,{timeout:o.a.telemetryApiTimeoutMS}).error((function(e,t){console.error("Failed to send logs to server. \nResponse: "+e+"Status: "+t)}))}))}else console.error("Unable to send empty log entry to server")},e.prototype.debug=function(e,t){this.logToServer(e,"debug",t)},e.prototype.info=function(e,t){this.logToServer(e,"info",t)},e.prototype.error=function(e,t){this.logToServer(e,"error",t)},e.prototype.critical=function(e,t){this.logToServer(e,"critical",t)},e.prototype.warn=function(e,t){this.logToServer(e,"warn",t)},e.$inject=["$http",s.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(a,[s.a]).service(c,l)},"4nF1":function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return A}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("Y3OE"),c=n("nbDY"),l=n.n(c),u=n("g66W"),d=n("Q/M7"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.BbPage=new t("resource/x-bb-page"),t.LtiLaunch=new t("ltilaunch"),t.ScormLaunch=new t("scormlaunch"),t.ContentUrl=new t("contenturl"),t.None=new t("none"),t}(l.a),m=function(){function e(e,t){this.content=e,this.isFromCourseLink=t}return e.prototype.deleteKey=function(){return this.content.contentHandler.toString()},e.prototype.iconClass=function(){var e=a.a.parse(this.content.contentHandler.toString());return null!=e?e.iconClass:null},e.prototype.linkAction=function(){var e=this.content.contentHandler.toString();this.isFromCourseLink&&(e=a.a.CourseLink.toString());var t=p.parse(e);return t||(t=new p(e)),t},e.prototype.viewHandler=function(){return this.content.contentHandler.toString()},e.prototype.getTargetCourseContentDisplay=function(){return null},e.prototype.getEditSref=function(){return null},e.prototype.getEditState=function(){return null},e.prototype.getEditStateParams=function(){return null},e.prototype.usesEditButton=function(){return null!=this.getEditSref()},e.prototype.canUseEditButton=function(){return this.usesEditButton()&&!(!this.content.permissions||!this.content.permissions.edit&&!this.content.permissions.modifyAvailability)},e.prototype.isLtiLink=function(){return!1},e.prototype.contentUrl=function(){throw new Error("contentUrl() is not supported for "+this.content.contentHandler.toString())},e.prototype.supportsConversations=function(){return!1},e.prototype.isXplorLtiLink=function(){return!1},e}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"gradebook-item.assignment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'},t}(m),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"gradebook-item.assignment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'},t.prototype.supportsConversations=function(){return!0},t}(m),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.deleteKey=function(){if(this.content.getAssociatedGradingColumn){var e=this.content.getAssociatedGradingColumn();if(e&&e.gradebookCategory)switch(e.gradebookCategory.title){case s.E.GradeCategoryTitleEnum.Assignment.toString():return a.a.UltraAssignment.toString();default:return a.a.TestLink.toString()}}return this.content.contentHandler.toString()},t.prototype.getEditState=function(){return"gradebook-item.assessment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details",assessmentType:"test"}},t.prototype.canUseEditButton=function(){var e=this.content.getDeployedAssessment().permissions;return!(!e||!e.modify&&!e.view)},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details",assessmentType: "test"})'},t.prototype.supportsConversations=function(){return!0},t}(m),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"discussion.view.with-grading"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"},t}(m),b=function(e){function t(t){var n=e.call(this,t)||this;return n.content=t,t.contentDetail&&(n.targetContent=t.getLinkContentSource()),n}return Object(r.__extends)(t,e),t.prototype.getTargetCourseContentDisplay=function(){if(!(this.targetContent&&this.targetContent.$resolved&&this.targetContent.contentHandler))return new m(this.content,!0);switch(A.normalize(this.targetContent.contentHandler.toString())){case a.a.Discussion.toString():return new v(this.targetContent,!0);default:return new m(this.targetContent,!0)}},t}(m),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.file"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return p.ContentUrl},t.prototype.contentUrl=function(){return d.c(this.content.contentDetail[s.r.ContentHandler.File.toString()].file.permanentUrl)},t}(m),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.folder"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t}(m),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.learning-module"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t}(m),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),Object.defineProperty(t,"EDIT_STATE_SREF",{get:function(){return"content-manage.edit.document"},enumerable:!0,configurable:!0}),t.prototype.getEditState=function(){return t.EDIT_STATE_SREF},t.prototype.getIconClass=function(){return a.a.Document.iconClass},t.prototype.supportsConversations=function(){return!0},t.prototype.linkAction=function(){return p.BbPage},t.prototype.viewHandler=function(){return a.a.Page.toString()},t}(S),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.link"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.contentUrl=function(){var e=this.content.contentDetail&&this.content.contentDetail[s.r.ContentHandler.ExternalLink.toString()].url;return e&&(e=u.c(e)),t.PROTOCOL_CHECK.test(e)?e:"http://"+e},t.prototype.linkAction=function(){return p.ContentUrl},t.PROTOCOL_CHECK=/^\w+\:{1}/,t}(m),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.lti"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return p.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t.prototype.isXplorLtiLink=function(){var e=this.content.contentDetail[this.content.contentHandler.toString()].url;return e&&e.indexOf("://xplor")>-1},t.prototype.supportsConversations=function(){return!0},t}(m),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.deleteKey=function(){return a.a.LtiPlacement.toString()},t.prototype.getEditState=function(){return"content-manage.edit.placement"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return p.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t.prototype.supportsConversations=function(){return!0},t.prototype.canUseEditButton=function(){return e.prototype.canUseEditButton.call(this)&&o.isDefined(this.content.contentDetail)&&o.isDefined(this.content.contentDetail[this.content.contentHandler.toString()])&&o.isDefined(this.content.contentDetail[this.content.contentHandler.toString()].placement)},t}(m),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"scorm-settings"},t.prototype.getEditStateParams=function(){return{contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({contentId:content.id})"},t.prototype.linkAction=function(){return p.ScormLaunch},t.prototype.supportsConversations=function(){return!0},t}(m),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"journal.view.with-grading"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"},t}(m),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.linkAction=function(){return p.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t}(m),A=function(){function e(){}return e.normalize=function(e){return null!=e&&0===e.indexOf(a.a.LtiPlacement.toString())?a.a.LtiPlacement.toString():e},e.matchesHandlers=function(e,t){var n=this.normalize(e);return i.findIndex(t,(function(e){return n===e.toString()}))>=0},e.create=function(e){switch(this.normalize(e.contentHandler.toString())){case a.a.ClassicAssignment.toString():return new f(e);case a.a.File.toString():return new y(e);case a.a.Folder.toString():if(e.contentDetail){var t=e.contentDetail[a.a.Folder.toString()];if(t&&t.isBbPage)return new w(e)}return new S(e);case a.a.ExternalLink.toString():return new k(e);case a.a.LtiLink.toString():return new T(e);case a.a.LtiPlacement.toString():return new I(e);case a.a.Page.toString():return new w(e);case a.a.PartnerCloud.toString():return new P(e);case a.a.TestLink.toString():return new g(e);case a.a.RusticiScorm.toString():return new $(e);case a.a.UltraAssignment.toString():return new h(e);case a.a.Discussion.toString():return new v(e);case a.a.CourseLink.toString():return new b(e).getTargetCourseContentDisplay();case a.a.LearningModule.toString():return new C(e);case a.a.Journal.toString():return new E(e);default:return new m(e)}},e}()},"5Dl8":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n("nsO7");function i(e){return e&&e/16+"rem"||"0"}var o=function(){function e(e){this.parent=e,this.curSelector=null,this.pool=null==e?{}:null}return e.prototype.selector=function(t){var n=new e(this);return n.curSelector=t,n},e.prototype.rule=function(e,t){return this.subRule(null,e,t),this},e.prototype.build=function(){return r.map(this.pool,(function(e,t){var n=[];return e.forEach((function(e){return n.push(e)})),n.join(",")+"{"+t+"}"})).join("\n")},e.prototype.subRule=function(e,t,n){var i=r.compact([this.curSelector,e]).join(" ");if(null!=this.parent)this.parent.subRule(i,t,n);else{var o=t+":"+n;this.pool[o]=this.pool[o]||new Set,this.pool[o].add(i)}},e}()},"5KgE":function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("w9Zy"),s=n("Fvsw"),a=n("Qbdf"),c=n("lEL+"),l=n("aHpC"),u=n("g66W"),d=n("5MwF"),p=n("wDWF"),m=d.a.features.devtools_disableFtue?-1:2,f=function(){function e(e,t,n,r){this.$q=e,this.context=t,this.offCanvas=n,this.contextCourse=r}return e.prototype.shouldShow=function(e,t,n){var r=this;return d.a.disableAllFtueGuidance?this.$q.when(!1):n?this.$q.when(this.isShownInCurrentSession(e)):this.$q.all([this.offCanvas.getElement(t),this.offCanvas.getTopElement(),this.getSessionNumber(e)]).then((function(t){var n=t[0],i=t[1],o=t[2];return i&&n!==i?r.$q.when(!1):r.shouldShowImpl(e,o)}))},e.prototype.shouldShowImpl=function(e,t){if(t>m)return this.$q.when(!1);if(this.isLastSessionCurrent(e))return this.$q.when(this.isShownInCurrentSession(e));var n=++t<=m;return sessionStorage.setItem(this.getSessionStorageKey(e),n?"show":"hide"),this.setSessionNumber(e,t).then((function(){return n})),this.$q.when(n)},e.prototype.hide=function(e,t){var n=this;sessionStorage.setItem(this.getSessionStorageKey(e),"hide"),t&&this.getSessionNumber(e).then((function(t){n.setSessionNumber(e,++t)}))},e.prototype.getSessionNumber=function(e){var t="ftue."+e+".visited";if(!this.isPredictComponent(e)){return this.context.getPreference(t,"0").then((function(e){var t=parseInt(e.value,10);return Number.isNaN(t)?0:t}))}return this.context.getPredictPreference(t,"0").then((function(e){var t=parseInt(e.value,10);return Number.isNaN(t)?m:t}))},e.prototype.isLastSessionCurrent=function(e){var t=sessionStorage.getItem(this.getSessionStorageKey(e));return"show"===t||"hide"===t},e.prototype.isShownInCurrentSession=function(e){return"hide"!==sessionStorage.getItem(this.getSessionStorageKey(e))},e.prototype.setSessionNumber=function(e,t){var n="ftue."+e+".visited";return this.isPredictComponent(e)?this.context.setPredictPreference(n,t.toString()):this.context.setPreference(n,t.toString())},e.prototype.getSessionStorageKey=function(e){return"ftue."+e+".show."+p.a(this.context.sessionId)},e.prototype.isPredictComponent=function(e){return!!e&&0===e.toLowerCase().indexOf("predict.")},e}(),h=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(r.__extends)(t,e),t.prototype.shouldShowImpl=function(e,t){var n=this;return this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,"."),this.getSessionNumber(e+this.courseId).then((function(r){if(t>m&&r>1)return n.$q.when(!1);if(n.isLastSessionCurrent(e+n.courseId))return n.$q.when(n.isShownInCurrentSession(e)||n.isShownInCurrentSession(e+n.courseId));var i,o;r++,i=++t<=m,sessionStorage.setItem(n.getSessionStorageKey(e),i?"show":"hide"),o=r<=1,sessionStorage.setItem(n.getSessionStorageKey(e+n.courseId),o?"show":"hide");var s=[];return t<=m+1&&s.push(n.setSessionNumber(e,t)),r<=2&&s.push(n.setSessionNumber(e+n.courseId,r)),n.$q.all(s).then((function(){return i||o})),n.$q.when(i||o)}))},t.prototype.hide=function(e){sessionStorage.setItem(this.getSessionStorageKey(e),"hide"),this.courseId||(this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,".")),sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),"hide")},t}(f);n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var g,v="ultra.service.firstTimeHelper",b="firstTimeHelper",y=/[_-]/g,S=Symbol("default"),C=function(){function e(e){this.timeout=e,this.TIME_TO_SHOW_FIRST_BUTTON=5e3}return e.prototype.shouldShow=function(e,t,n){return this.convertAngularPromise((g.get(e)||g.get(S)).shouldShow(e,t,n))},e.prototype.hasBeenShown=function(e){return(g.get(e)||g.get(S)).getSessionNumber(e).then((function(e){return e>0}))},e.prototype.hide=function(e,t){(g.get(e)||g.get(S)).hide(e,t)},e.prototype.fadeAddContentButton=function(e,t,n){var r=this;this.shouldShow(t,n).then((function(t){var n=e.$on("add-content-button-ready",(function(){var i=t?r.TIME_TO_SHOW_FIRST_BUTTON:0;n(),r.timeout((function(){e.$broadcast("always-show-time-expires")}),e,i)}))}))},e.prototype.hasMultiTargetSupport=function(e){return!!e&&0===e.toLowerCase().indexOf("predict.")},e.prototype.convertAngularPromise=function(e){return new Promise((function(t,n){e.then(t).catch(n)}))},e=Object(r.__decorate)([Object(r.__param)(0,Object(l.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(C);i.module(v,[s.a,a.b,o.d]).run(["$q",s.b,a.e,o.e,function(e,t,n,r){var i,o=new h(e,t,r,n),s=new f(e,t,r,n);g=(new Map).set((i="components.features.course.content.assessment.ftue.group-conversation",u.a(i,y)),o).set(S,s)}]).service(b,C)},"5MwF":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"default",(function(){return o}));var i=n("nsO7"),o={},s=n("gm4d"),a={},c={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(s.a,a),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",kloudlessServices:[],mockApiEndpoints:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,kloudlessInitializationTimeout:1e4},l=JSON.parse(sessionStorage.getItem(c.storageKeyForFeatureFlags)||"{}");i.isEmpty(l)||(console.warn("Attention! Feature flags are overridden by client setting!",l),console.warn("To clear, please logout and re-login"),Object.assign(c.features,l)),r&&Object.assign(c,r);t.a=c},"5RJJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("wHJ2"),o=n("yC9S"),s=n("oVrE"),a=n("pjml"),c="ultra.service.courseMembership",l="courseMembership",u=function(){function e(e,t,n,r){var i=this;this.$q=e,this.$rootScope=t,this.CourseModel=n,this.CourseMembershipModel=r,this.userCourseAvailabilities={},this.msgToolAvailability={},this.fetchToolAvailabilityPromiseCache={},o.b.OnRootScope(this.$rootScope,"membership.update",(function(e,t,n,r,o,s,a,c){i.getUserCourseAvailabilities(c).then((function(){i.userCourseAvailabilities[c][a.id]=t.isAvailable}))})),o.b.OnRootScope(this.$rootScope,"deleteMembership",(function(e,t,n,r){i.getUserCourseAvailabilities(r).then((function(){i.userCourseAvailabilities[r][t.id]=!1}))})),o.b.OnRootScope(this.$rootScope,"roster.enroll.new.membership",(function(e,t,n,r){i.getUserCourseAvailabilities(n).then((function(){i.userCourseAvailabilities[n][r]=t.isAvailable}))}))}return e.prototype.getUserCourseAvailabilities=function(e){var t=this;if(this.userCourseAvailabilities[e])return this.$q.when(this.userCourseAvailabilities[e]);var n=this.$q.defer();return this.userCourseAvailabilities[e]={},this.CourseModel.$new(e).memberships.$refresh().$then((function(r){r.forEach((function(n){t.userCourseAvailabilities[e][n.userId]=n.isAvailable})),t.userCourseAvailabilities[e][s.b()]=!0,t.userCourseAvailabilities[e][s.d()]=!1,n.resolve(t.userCourseAvailabilities[e])})),n.promise},e.prototype.getMsgToolAvailability=function(e,t){var n=this;if(e){if(t||null==this.msgToolAvailability[e.id]){if(!e.isUltra()){var r=this.fetchToolAvailabilityPromiseCache[e.id];return r||(r=e.tools.$find("messages").$asPromise().then((function(t){return n.msgToolAvailability[e.id]=t.isVisible,t.isVisible}),(function(e){console.error("Fetch ToolAvailability error!")})).finally((function(){delete n.fetchToolAvailabilityPromiseCache[e.id]})),this.fetchToolAvailabilityPromiseCache[e.id]=r,r)}this.msgToolAvailability[e.id]=!0}var i=this.$q.defer();return i.resolve(this.msgToolAvailability[e.id]),i.promise}},e.prototype.isUserCourseAvailable=function(e,t){return this.userCourseAvailabilities[e][t]},e.prototype.createGuestMembership=function(e,t){return this.CourseMembershipModel.$build({userId:t.id,course:e,user:t,role:a.y.KnownCourseRoleIdentifier.Guest})},e.$inject=["$q","$rootScope",a.o.serviceName,a.v.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(c,[a.R]).service(l,u)},"5k3c":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-large-document-multiple",use:"icon-large-document-multiple-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-document-multiple"><path fill="#E0E0E0" d="M8 0h24v35H8z" /><path fill="#E0E0E0" d="M7 3h24v33H7z" /><path fill="#FFF" d="M7 37.5c-.8 0-1.5-.7-1.5-1.5V6c0-.8.7-1.5 1.5-1.5h11.6l2 7.9 7.9 2V36c0 .8-.7 1.5-1.5 1.5H7z" /><path fill="#767676" d="M18.2 5l1.8 7.2.1.6.6.1 7.2 1.8V36c0 .6-.4 1-1 1h-20c-.6 0-1-.4-1-1V6c0-.6.4-1 1-1h11.3m.8-1H7c-1.1 0-2 .9-2 2v30c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V14l-8-2-2-8z" /><path fill="#E0E0E0" d="M20 14.5c-.8 0-1.5-.7-1.5-1.5V4.5h.5c.1 0 .3.1.4.1l9 9c.1.1.1.2.1.4v.5H20z" /><path fill="#767676" d="M19 5l9 9h-8c-.5 0-1-.4-1-1V5m0-1h-1v9c0 1.1.9 2 2 2h9v-1c0-.3-.1-.5-.3-.7l-9-9c-.2-.2-.4-.3-.7-.3z" /><path fill="none" stroke="#767676" stroke-linecap="square" stroke-linejoin="round" stroke-miterlimit="10" d="M7.5 2.5h23v33" /><path fill="none" stroke="#767676" stroke-linecap="square" stroke-linejoin="round" stroke-miterlimit="10" d="M8.5.5h24v34" /><path fill="none" stroke="#CDCDCD" stroke-linecap="round" stroke-miterlimit="10" d="M11.5 20.5h11M11.5 23.5h11M11.5 26.5h11M11.5 29.5h11M11.5 32.5h11" /></symbol>'});i.add(o);e.exports=o},"5uPl":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("Q/M7"),c="ultra.service.originalityReport",l="originalityReport",u=function(){function e(){this.columnOriginalityAverageScoreDict={}}return e.prototype.setCourseContent=function(e,t){this.courseContent=e,this.isPrivileged=t},e.prototype.clearCourseContent=function(){this.courseContent=void 0,this.isPrivileged=void 0},e.prototype.updateReport=function(e,t,n){this.columnId=n,this.attempt=e,this.openOriginalityReport=!0,this.shouldFetchOriginality()&&(t&&(this.gradedQuestionAttempts=t.map((function(e){return i.pick(e,["questionAttempt.question.position","questionAttempt.visibleQuestionNumber"])}))),this.fetchOriginality())},e.prototype.clearReport=function(){this.gradedQuestionAttempts=void 0,this.attempt=void 0,this.originality=void 0,this.openOriginalityReport=void 0,this.columnId=void 0,this.reports=void 0,this.personalMaxScore=void 0,this.personalMaxScoreReportName=void 0,this.personalAverageScore=void 0,this.classAverageScore=void 0},e.prototype.isSafeAssignEnabled=function(){return this.courseContent&&this.courseContent.isSafeAssignEnabled()},e.prototype.canStudentViewReports=function(){return this.courseContent&&this.courseContent.canStudentViewReports()},e.prototype.isReportSectionOpen=function(){return this.openOriginalityReport&&this.originality&&this.originality.canShowReportPanel()},e.prototype.shouldFetchOriginality=function(){return this.isPrivileged&&this.isSafeAssignEnabled()||!this.isPrivileged&&this.canStudentViewReports()},e.prototype.setOriginalityAverageScore=function(e,t){var n=0,r=0;e.forEach((function(e){e.originalityProcessed&&!i.isUndefined(e.originalityScore)&&(n++,r+=e.originalityScore)})),n&&(this.columnOriginalityAverageScoreDict[t]=r/n)},e.prototype.fetchOriginality=function(){var e=this,t=this.attempt;t.originality.$fetch().$then((function(n){e.attempt===t&&(e.originality=n,e.generateReport())}))},e.prototype.hasValidReports=function(){return this.reports&&this.reports.some((function(e){return!e.invalid}))},e.prototype.generateReport=function(){var e,t=this,n=this.originality.answerOriginalities;if(this.gradedQuestionAttempts){if(this.isPrivileged&&t.gradedQuestionAttempts.some((function(e,t){return e.questionAttempt.question.position!==t+1}))){var o=i.sortBy(this.gradedQuestionAttempts,(function(e){return e.questionAttempt.question.position})),s=[];i.map(o,"questionAttempt.visibleQuestionNumber").forEach((function(e,t){return s[e-1]=t})),n.forEach((function(e){return e.order=s[e.order-1]+1})),n.sort((function(e,t){return e.order-t.order}))}}this.reports=i.flatMap(n,(function(e){return e.attachments.map((function(t){return Object(r.__assign)(Object(r.__assign)({},t),{isQuestionAnswerContent:!0,visibleQuestionNumber:e.order})}))})),this.originality.attemptOriginality&&(e=this.reports).push.apply(e,this.originality.attemptOriginality.attachments),this.hasValidReports()&&this.calculateScore()},e.prototype.calculateScore=function(){var e=this,t=this.reports.filter((function(e){return!e.invalid})),n=0;this.personalMaxScore=t[0].score,this.personalMaxScoreReportName=t[0].name,t.forEach((function(t){t.reportLink=Object(a.c)(t.reportLink),e.personalMaxScore<t.score&&(e.personalMaxScore=t.score,e.personalMaxScoreReportName=t.name),n+=t.score})),this.personalAverageScore=Math.floor(n/t.length),i.isUndefined(this.columnOriginalityAverageScoreDict[this.columnId])||(this.classAverageScore=Math.floor(this.columnOriginalityAverageScoreDict[this.columnId]))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);o.module(c,[s.R]).service(l,u)},"65PF":function(e,t){e.exports='<td class="table-cell"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</td>\n'},"67oV":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-close",use:"icon-small-close-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-close"><path d="M15 1L1 15M1 1l14 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"6BRP":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-attention",use:"icon-small-attention-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attention"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="12" r=".5" /></symbol>'});i.add(o);e.exports=o},"6Ksg":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("5iHu"),o=n("wHJ2"),s=n("nsO7"),a=n("0JpG"),c="ultra.directives.validate.bbmlmarkup",l={img:["id"]},u=function(){function e(e,t){var n=this;this.$q=e,this.$http=t,this.whitelist=null,this.whitelistInitializer=null,this.require="ngModel",this.restrict="A",this.initialWhitelist=function(){return null===n.whitelistInitializer&&(n.whitelistInitializer=n.$http.get("/learn/api/v1/utilities/bbml/whitelist").then((function(e){n.whitelist={};var t=(e.data[":all"]||[]).concat(l[":all"]||[]);s.forEach(e.data,(function(e,r){var i={};s.each(e.concat(t,l[r]||[]),(function(e){i[e]=e})),n.whitelist[r]=i}))}),(function(){n.whitelist=null}))),n.whitelistInitializer},this.validate=function(e){if(null===n.whitelist)return!0;if(1!==e[0].nodeType)return!0;var t=e[0].tagName.toLowerCase();if(!Object.prototype.hasOwnProperty.call(n.whitelist,t))return!1;var r=n.whitelist[t];return s.every(e[0].attributes,(function(e){return Object.prototype.hasOwnProperty.call(r,e.name.toLowerCase())}))&&s.every(e.children(),(function(e){return n.validate(i(e))}))},this.getValidator=function(e,t,r,o){return function(e){var r=n.$q.defer();return n.initialWhitelist().then((function(){s.every(t.children(),(function(e){return n.validate(i(e))}))?r.resolve():r.reject()})),r.promise}},this.link=function(e,t,r,i){i.$asyncValidators.bbmlMarkup=n.getValidator(e,t,r,i)}}return e.$inject=["$q","$http"],e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(u);o.module(c,[a.moduleName]).directive("bbValidateBbmlMarkup",["$injector",function(e){return e.instantiate(u)}])},"6fZB":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return new Promise((function(t,n){e.then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},"6jv3":function(e,t){e.exports='<div class="save-buttons">\n  <footer class="panel-footer" ng-if="!(hideCancel() || hideSave() || hideDelete())">\n    \x3c!--footer tag is removed, and its children appended to parent if the directive is marked as \'isInline\'--\x3e\n    <div ng-class="{\'inline\':isInline(), \'panel-footer-right\':!isInline()}" class="buttons-2 equal-buttons">\n      <button ng-if="!(hideDelete() != null ? hideDelete() : true)"\n              class="button js-delete js-primary-button non-first-focus" ng-class="{\'small clear icon\':isInline}"\n              bb-confirmation-needed="{{ deleteConfirmationResourceType }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isDeleteDisabled()"\n              ng-click="saveButtons.deleteAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices()}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.delete.button">\n                <span ng-if="!isInline()">{{saveButtons.deleteButtonStatus}}</span>\n                <span ng-if="isInline()"><i class="icon-trash"></i></span>\n      </button>\n      <button ng-if="!hideCancel()"\n              class="button button--secondary js-cancel js-secondary-button non-first-focus"\n              bb-confirmation-needed="{{ saveButtons.isCancelNowADelete() ? deleteConfirmationResourceType : \'\' }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isCancelDisabled()"\n              ng-click="saveButtons.cancelAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.cancel.button">{{saveButtons.cancelButtonStatus}}</button>\n      <button ng-if="!hideSave()"\n              class="button js-save js-primary-button non-first-focus"\n              bb-confirmation-needed="{{ saveConfirmationResourceType }}"\n              show-type="{{mustShowSaveConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isSaveDisabled()"\n              ng-click="saveButtons.saveAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="submit"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.save.button">{{saveButtons.saveButtonStatus}}</button>\n    </div>\n  </footer>\n</div>'},"6vR2":function(e,t,n){"use strict";function r(e){var t=new Set;return JSON.parse(JSON.stringify(e,(function(e,n){if("object"!=typeof n||!t.has(n))return"object"!=typeof n?n:(t.add(n),n)})))}n.d(t,"a",(function(){return r}))},"6ynb":function(e,t,n){"use strict";var r=n("D57K"),i=function(e){function t(n){var r=this,i="string"==typeof n?n:"";n&&n.message&&(i=n.message),(r=e.call(this,i)||this).name="Exception",r.message=i,r.stack=(new Error).stack;var o=Error;return n&&n.stack?r.stack=n.stack:o.captureStackTrace&&o.captureStackTrace(r,t),r}return Object(r.__extends)(t,e),t}(Error);t.a=i},"7+Tq":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n("wHJ2"),i=n("0+Qs"),o=n("XGja"),s=n("+4Px"),a="ultra.services.dropdownInit",c="dropdownInitService";r.module(a,[i.a]).factory(c,[i.b,function(t){var n=function(e,t){t.focus()};return function(r,i){r.find("[data-dropdown]").each((function(r,a){var c=e(a),l=c.attr("data-dropdown"),u=e("#"+l);if(u.length){c.attr("aria-haspopup","true"),u.attr("role")||(u.attr("role","menu"),u.find("li a").each((function(){e(this).attr("role")||e(this).attr("role","menuitem")}))),u.off("keydown.fndtn.dropdown"),u.on("keydown.fndtn.dropdown",(function(e){if(u.hasClass("open")){var t=!0,r=u.find("li a:focus").closest("li");0===r.length&&(r=u.find(":focus"),t=!1);var i=void 0;if(e.keyCode===s.g&&!u.hasClass("bb-foundation-dropdown-close-esc-override")||e.keyCode===s.u&&!u.hasClass("bb-foundation-dropdown-tab-override"))c.click(),e.keyCode===s.g&&(n(0,c),e.stopPropagation());else if(e.keyCode===s.d||e.keyCode===s.v||e.keyCode===s.u)return t?(e.keyCode===s.d||e.keyCode===s.u&&!e.shiftKey?(i=r.nextAll().not(".scroll-control").find(":tabbable").first().closest("li"))&&0!==i.length||(i=u.find(":tabbable").closest("li").not(".scroll-control").first()):(e.keyCode===s.v||e.keyCode===s.u&&e.shiftKey)&&((i=r.prevAll().not(".scroll-control").find(":tabbable").last().closest("li"))&&0!==i.length||(i=u.find(":tabbable").closest("li").not(".scroll-control").last())),i.length>0&&i.find(":tabbable").focus()):e.keyCode===s.d||e.keyCode===s.u&&!e.shiftKey?o.b(u,r):(e.keyCode===s.v||e.keyCode===s.u&&e.shiftKey)&&o.c(u,r),!1}}));var d=!0;u.off("keyup.fndtn.dropdown"),u.on("keyup.fndtn.dropdown",(function(t){if((t.keyCode===s.f||t.keyCode===s.t)&&!u.hasClass("bb-foundation-dropdown-enter-override")){if(!d)return d=!0,!1;if(e(t.target).closest("input[type=checkbox]").length)return!0;if(e(t.target).closest("button").length)return!0;if("-1"===e(t.target).attr("tabindex"))return!0;if(u.hasClass("open")){var r=u.find("li a:focus").closest("li");return r.length>0?r.find("a").click():c.click(),n(0,c),!1}}})),c.off("keydown.fndtn.dropdown"),c.on("keydown.fndtn.dropdown",(function(e){if((e.keyCode===s.f||e.keyCode===s.t)&&!u.hasClass("open")){c.click(),d=!1;var t=u.find("li a:focus").closest("li");return 0===t.length&&(t=u.find("li").not(".scroll-control").find(":tabbable").first().closest("li")),t.find("a:visible").length?t.find("a:visible").focus():u.find(":tabbable").first().focus(),!1}})),c.off("click.fndtn.dropdown"),c.on("click.fndtn.dropdown",(function(e){var n=u.find("li a:focus").closest("li");0===n.length&&(n=u.find("li").not(".scroll-control").find(":tabbable").first().closest("li"));var r=t((function(){"false"===u.attr("aria-hidden")&&(n.find("a:visible").length?n.find("a:visible").focus():u.find("*:focus").length||u.find(":tabbable").first().focus(),t.cancel(r))}),i,50,100,!1)}))}}))}}])}).call(this,n("5iHu"))},"7/0s":function(e,t){e.exports='<a\n  href="javascript:void(0);"\n  class="skip-link"\n  bb-focus-next="{{ bbSkipLinkFocusNext }}"\n  bb-translate\n  bb-load-bundle="components/directives/skip-link"\n  analytics-id="components.directives.skip-link.message">\n  components.directives.skip-link.message\n</a>\n'},"7/CN":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return f}));var r=n("5iHu"),i=n("lUN/"),o=".bb-offcanvas-panel, #main-content-inner",s=".bb-close",a=".reveal-modal-bg, .wrs_modal_overlay";function c(e){for(var t=r(e),n=0;t.length;){if(t.is(s))n++;else if(t.is(o)){if(n<=0)return t[0];n--}t=t.parent()}return document.body}function l(){var e=r(a);return e&&e.length}function u(e){var t=(e||"0").split(" ");return{top:parseInt(t[0],10),right:parseInt(t[1]||t[0],10),bottom:parseInt(t[2]||t[0],10),left:parseInt(t[3]||t[1]||t[0],10)}}function d(e){var t=e.view,n=e.el;e.viewHeight=null==e.viewHeight?t.get(0).clientHeight:e.viewHeight,e.viewWidth=null==e.viewWidth?t.get(0).clientWidth:e.viewWidth,e.height=null==e.height?n.height():e.height,e.width=null==e.width?n.width():e.width;var r=t.offset(),i=n.offset(),o=t.scrollTop(),s=t.scrollLeft(),a=i.top-r.top-e.padding.top,c=i.left-r.left-e.padding.left,l=i.top+e.height+e.padding.bottom-r.top-e.viewHeight,u=i.left+e.width+e.padding.right-r.left-e.viewWidth;e.height<=e.viewHeight?a<0?t.scrollTop(o+a):l>0&&t.scrollTop(o+l):a>0?t.scrollTop(o+a):l<0&&t.scrollTop(o+l),e.width<=e.viewWidth?c<0?t.scrollLeft(s+c):u>0&&t.scrollLeft(s+u):c>0?t.scrollLeft(s+c):u<0&&t.scrollLeft(s+u)}function p(e){i.a(),e.find(":tabbable").each((function(){var e=r(this);e.addClass("bb-element-inaccessible"),e.data("bb-element-inaccessible",{tabindex:e.attr("tabindex")}),e.attr("tabindex","-1")}))}function m(e){e.attr("aria-hidden","true"),p(e)}function f(e){e.removeAttr("aria-hidden"),e.find(".bb-element-inaccessible").each((function(){var e=r(this);e.removeClass("bb-element-inaccessible"),e.data("bb-element-inaccessible")&&(null!=e.data("bb-element-inaccessible").tabindex?e.attr("tabindex",e.data("bb-element-inaccessible").tabindex):e.removeAttr("tabindex"))}))}},"7CA4":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NothingToGrade=new t("NOTHING_TO_GRADE"),t.NeedsGrading=new t("NEEDS_GRADING"),t.NeedsPosting=new t("NEEDS_POSTING"),t.AllPosted=new t("ALL_POSTED"),t.AllGraded=new t("ALL_GRADED"),t}(n.n(i).a);t.a=o},"7QJo":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("wHJ2"),i=n("0JpG"),o=n("pjml"),s=n("TnpK"),a=n("Qbdf"),c=n("X455"),l=n("OTLg"),u="ultra.course.roster.router";r.module(u,[i.moduleName,s.b,a.b,c.a]).config([s.c,a.c,c.b,function(e,t,r){var s;e.peekState("roster",{url:"/roster",resolve:(s={},s[a.d]=t.resolve,s[c.c]=r.resolve,s.translations=[i.serviceName,function(e){return e.loadBundle("features/course/roster/course-roster")}],s),peekStates:["edit-enrollment","enroll-users","message","invite","accommodation"],panelClass:"full",peekViewName:"account-update-base@",require:function(){return Promise.all([n.e(1),n.e(95),n.e(587)]).then(n.bind(null,"DjKT"))},pageTitle:"course.roster.rosterName"}).peekState("edit-enrollment",{url:"/edit/:membershipId",require:function(){return Promise.all([n.e(95),n.e(92),n.e(671)]).then(n.bind(null,"VZ54"))}}).peekState("enroll-users",{url:"/enroll",require:function(){return Promise.all([n.e(95),n.e(658)]).then(n.bind(null,"30P8"))},pageTitle:"course.roster.enroll.enrollPeople"}).peekState("message",{url:"/message?courseId?recipientId",require:function(){return Promise.all([n.e(0),n.e(8),n.e(33),n.e(48)]).then(n.bind(null,"BrlV"))}}).peekState("invite",{url:"/invite",require:function(){return n.e(589).then(n.bind(null,"IgRM"))},pageTitle:"course.roster.invite.inviteStudents"}).peekState("accommodation",{url:"/exception/:membershipId",require:function(){return n.e(642).then(n.bind(null,"0vas"))},pageTitle:"course.roster.dueDateException",resolve:{currentMembership:["$q","$stateParams",o.o.serviceName,function(e,t,n){var r={fields:l.b.join(",")};return n.$new(t.courseId).memberships.$find(t.membershipId,r).$asPromise()}]}})}])},"7oqQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("JzsJ");var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.course.question-analysis.routes",c=function(){return{translations:[o.serviceName,function(e){return e.loadBundle("features/course/question-analysis/question-analysis")}]}};r.module(a,[s.b]).config([s.c,function(e){e.peekState("question-analysis",{url:"?qaContentId",abstract:!0,resolve:c(),courseEntitlement:[i.v.ViewGrades]}).peekState("question-analysis.report",{panelClass:"full",url:"/report",require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(89),n.e(707)]).then(n.bind(null,"wD7k"))},pageTitle:"course.question-analysis.report.pageTitle",peekViewName:"question-analysis-report",peekStates:["gradebook-item","question-analysis-report"]}),e.peekState("question-analysis-report",{url:"?difficultyFilter&discriminationFilter",abstract:!0,resolve:c(),courseEntitlement:[i.v.ViewGrades]}).peekState("question-analysis-report.question-details",{panelClass:"full",url:"/questionDetails/:questionId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(89),n.e(705)]).then(n.bind(null,"jvDI"))},pageTitle:"course.question-analysis.question-details.pageTitle",peekViewName:"question-analysis-question-details",peekStates:["gradebook-item"]})}])},"7sec":function(e,t,n){},"817J":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("Y3OE"),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.handle=t,r.contentHandler=n,r}return Object(r.__extends)(t,e),t.parseByContentHandler=function(e){switch(e){case t.Assignment.contentHandler:return t.Assignment;case t.Test.contentHandler:return t.Test;case t.UltraAssignment.contentHandler:return t.UltraAssignment;case t.Survey.contentHandler:return t.Survey}},t.Test=new t("Test",s.a.TestLink.toString()),t.Quiz=new t("Quiz"),t.Survey=new t("Survey",s.a.SurveyLink.toString()),t.Assignment=new t("Assignment",s.a.ClassicAssignment.toString()),t.UltraAssignment=new t("UltraAssignment",s.a.UltraAssignment.toString()),t.Pool=new t("Pool"),t}(o.a);t.a=a},"8HGT":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("wHJ2"),i=n("Sa5G"),o=n("w9Zy"),s=n("Fvsw"),a=n("vdfi"),c=n("JXhc"),l=n("hlSw"),u=n("0JpG"),d=n("pjml"),p=n("TnpK"),m=n("Qbdf"),f=n("nmzr"),h="ultra.course.grades.router";r.module(h,[u.moduleName,p.b,a.c,c.c,m.b]).config([p.c,m.c,function(e,t){var r,h,g,v,b,y,S,C;e.peekState("gradebook-item",{abstract:!0,require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(2),n.e(3),n.e(9),n.e(39),n.e(44),n.e(569)]).then(n.bind(null,"AlUX"))},resolve:(r={translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/gradebook-item/gradebook-item")}]},r[m.d]=t.resolve,r.currentColumn=l.a.currentColumn,r.currentContent=l.a.currentContent,r)}).peekState("gradebook-item.assignment-create",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])}]},onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/assignment?id&parentId&positionBefore&positionAfter&gradeitemView",views:{"gradebook-item-details@":{require:[function(){return Promise.all([n.e(16),n.e(147)]).then(n.bind(null,"eePf"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}]},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(9),n.e(11),n.e(31),n.e(49)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assignment-grading","assessment-settings","conversations","message","course-group","editAssignmentFileAttachment",a.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],peekViewName:"gradebook-item-panel@",pageTitle:"course.content.assignmentCreate"}).peekState("gradebook-item.assignment",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])}]},onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/assignment/:contentId?courseId&gradeitemView",views:{"gradebook-item-details@":{require:[function(){return Promise.all([n.e(16),n.e(147)]).then(n.bind(null,"eePf"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}]},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(9),n.e(11),n.e(31),n.e(49)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assignment-grading","assessment-settings","conversations","message","course-group","editAssignmentFileAttachment",a.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],params:{},peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assignment.edit"}).peekState("editAssignmentFileAttachment",{require:function(){return n.e(148).then(n.bind(null,"TFHU"))},resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/content/media-widget/media-widget")}]},url:"/assignment/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&alternativeText&mediaType&bbmlEditorId"}).peekState(f.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT,{panelClass:"peek",resolve:(h={translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},h[m.d]=t.resolve,h.currentContent=l.a.nullContent,h.currentColumn=l.a.currentColumn,h),url:"/multiple-attempt-grading?columnId&gradeId&userId",params:{hasException:!1},require:[function(){return n.e(701).then(n.bind(null,"bhG9"))},function(){return Promise.all([n.e(1),n.e(19),n.e(11),n.e(43),n.e(645)]).then(n.bind(null,"0dEv"))}],pageTitle:"course.grades.multiple-attempt-grading.title",peekStates:["submission-grading"]}).peekState("reconcile-grade",{panelClass:"full",resolve:(g={translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},g[m.d]=t.resolve,g.currentContent=l.a.nullContent,g.currentColumn=l.a.currentColumn,g),url:"/reconcile-grade?columnId&gradeId&userId",require:[function(){return n.e(681).then(n.bind(null,"NNJe"))},function(){return Promise.all([n.e(1),n.e(19),n.e(11),n.e(43),n.e(646)]).then(n.bind(null,"e5ML"))}],pageTitle:"course.grades.reconcile-grade.title",peekStates:["submission-grading"],peekViewName:"reconcile-grade-peek"}).peekState("per-assessment-settings",{panelClass:"peek",courseEntitlement:i.v.ModifyGradebook,resolve:(v={translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}],currentContent:l.a.currentContent,currentColumn:l.a.currentColumn},v[m.d]=t.resolve,v),url:"/per-assessment-settings?userId&columnId",require:[function(){return Promise.all([n.e(72),n.e(703)]).then(n.bind(null,"1p7s"))},function(){return Promise.all([n.e(7),n.e(2),n.e(3),n.e(36),n.e(72),n.e(135)]).then(n.bind(null,"Wn37"))}],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("per-assessment-group-settings",{panelClass:"peek",courseEntitlement:i.v.ModifyGradebook,resolve:(b={translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}],currentContent:l.a.currentContent,currentColumn:l.a.currentColumn},b[m.d]=t.resolve,b),url:"/per-assessment-group-settings?groupId&columnId",require:[function(){return Promise.all([n.e(72),n.e(702)]).then(n.bind(null,"bMue"))},function(){return Promise.all([n.e(7),n.e(2),n.e(3),n.e(36),n.e(72),n.e(135)]).then(n.bind(null,"Wn37"))}],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("originality-report",{panelClass:"peek",url:"/originality-report",require:function(){return n.e(680).then(n.bind(null,"K7I1"))},peekViewName:"originality-report-peek"}).peekState("submission-grading",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:l.a.currentColumn,currentContent:l.a.currentContent},url:"/submission-grading?columnId&gradeId&userId&attemptId&contentId",onExit:["currentColumn",o.e,p.d,function(e,t,n){var r=n.current.name.match(".peek.reconcile-grade");(e.isMultipleAttempts()&&!r||n.prevParams.hasException)&&(n.isPeekPanelOpen()&&t.shrinkTopPanel(),n.goPeekState("multiple-attempt-grading",{columnId:n.prevParams.columnId,gradeId:n.prevParams.gradeId,userId:n.prevParams.userId,hasException:n.prevParams.hasException}))}],onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(9),n.e(684)]).then(n.bind(null,"6S3j"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(13),n.e(1),n.e(2),n.e(3),n.e(8),n.e(73)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submission-grading.title",params:{commentPanelInitiallyOpen:!1,hasException:!1},peekViewName:"submission-grading-peek",peekStates:["per-assessment-settings","assessment-submission-feedback","rubric-evaluation","rubric-view","originality-report","content-market"]}).peekState("group-submission-grading",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:l.a.currentColumn,currentContent:l.a.currentContent},url:"/group-submission-grading?columnId&gradeId&groupId&contentId&attemptId",reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(9),n.e(710)]).then(n.bind(null,"rNv7"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(13),n.e(1),n.e(2),n.e(3),n.e(8),n.e(73)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submission-grading.title",peekViewName:"submission-grading-peek",peekStates:["per-assessment-group-settings","assessment-submission-feedback","rubric-evaluation","originality-report","content-market"]}).peekState("assignment-grading",{panelClass:"full",resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/submissions-grading")}],currentColumn:["currentColumn",d.o.serviceName,p.d,function(e,t,n){if(null!=e)return e.$asPromise();var r=n.nextParams.columnId,i=n.nextParams.courseId;return t.$find(i).gradebook.columns.$find(r,{expand:"associatedRubrics,externalGrade"}).$asPromise()}]},url:"/grading?columnId&gradeId&groupId",reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(9),n.e(657)]).then(n.bind(null,"XGKH"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(13),n.e(1),n.e(2),n.e(3),n.e(8),n.e(73)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submissions-grading.title",peekViewName:"assignment-grading-peek",peekStates:["rubric-evaluation"]}).peekState("gradebook-item.offline",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/course-grades"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},url:"/offline-grades/:columnId?courseId&gradeitemView",views:{"gradebook-item-students@":{require:function(){return Promise.all([n.e(11),n.e(76)]).then(n.bind(null,"qijm"))}}},pageTitle:"course.grades.instructorHeaderLabel"}).peekState("gradebook-item.calculation",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/gradebook-item/calculation"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},url:"/calculation/:columnId?courseId&gradeitemView&isOverallGrade&positionBefore&positionAfter",params:{columnId:d.F.CREATE_COLUMN_ID},views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(136),n.e(644)]).then(n.bind(null,"aUnP"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(11),n.e(76)]).then(n.bind(null,"qijm"))}}},courseEntitlement:i.v.ViewGradebookMetaData,pageTitle:"course.grades.gradebook-item.title.calculation"}).peekState("gradebook-item.assessment",{panelClass:"full",courseEntitlement:[i.j.ViewAssessment,i.v.ViewAttempts],resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])}]},onEnter:[o.e,p.d,"currentColumn",s.b,function(e,t,n,r){r.column=n,t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",s.b,function(e,t){e.$broadcast("deadline-refresh"),t.column=null}],url:"/assessment/:assessmentType/{contentId:_[0-9]+_1|create}?courseId&gradeitemView&parentId&positionBefore&positionAfter&gradebookCategoryId",params:{contentId:d.r.CREATE_CONTENT_ID,isCreateState:!1},views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(27),n.e(1),n.e(2),n.e(3),n.e(8),n.e(127)]).then(n.bind(null,"EPkw"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(9),n.e(11),n.e(31),n.e(49)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assessment-create-attempt","assessment-settings","question-analysis","reconcile-grade","multiple-attempt-grading","submission-grading","group-submission-grading","course-group","conditional-release",a.a,c.a,"conversations","message","edit-file-settings","rubric","rubric-list","rubric-evaluation","view-exceptions","content-market","lti","proctoring-lti-tool","per-assessment-settings","per-assessment-group-settings","grades-bulk-download"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assessment"}).peekState("grade-item",{abstract:!0,url:"/item"}).peekState("grade-item.create",{url:"/create?positionBefore&positionAfter",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/course-grades")])}]},require:function(){return Promise.all([n.e(7),n.e(138)]).then(n.bind(null,"kneA"))},pageTitle:"course.grades.gradeItem.addItem"}).peekState("grade-item.edit",{url:"/edit/:id",resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},require:function(){return Promise.all([n.e(7),n.e(138)]).then(n.bind(null,"kneA"))},pageTitle:"course.grades.gradeItem.editItem"}).peekState("gradebook-item.overall-grade",{panelClass:"full",resolve:{translations:["$q",u.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/overallGrade?columnId&gradeitemView",views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(136),n.e(583)]).then(n.bind(null,"FOdA"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(11),n.e(76)]).then(n.bind(null,"qijm"))}}},peekStates:["overall-grade-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("overall-grade-settings",{url:"/overallGradeSettings",resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/overall-grade")}]},panelClass:"peek",require:function(){return n.e(670).then(n.bind(null,"CW69"))},pageTitle:"course.grades.overallGrade.settings.pageTitle"}).peekState("overall-grade-student",{url:"/overallGradeStudent?courseId&courseName",resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/overall-grade")}]},panelClass:"peek",require:function(){return n.e(624).then(n.bind(null,"Fn0y"))},pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("grade-download-setting",{resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/grades-download-settings/grades-download-settings")}]},url:"/grade-download-setting",require:function(){return n.e(656).then(n.bind(null,"+xg7"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-download-setting-peek",courseEntitlement:i.v.ExportGradebookData,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-upload-setting",{resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/grades-upload-settings/grades-upload-settings")}],contentCollectionAvailability:[d.xb.serviceName,function(e){return e.$new("bbcms").$resolve().$asPromise()}]},url:"/grade-upload-setting",require:function(){return n.e(601).then(n.bind(null,"nrqE"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-upload-setting-peek",courseEntitlement:i.v.ModifyGradebook,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-setting",{resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},url:"/grade-settings",require:function(){return Promise.all([n.e(1),n.e(575)]).then(n.bind(null,"NsLW"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-setting-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("grade-and-feedback",{resolve:(y={translations:[u.serviceName,function(e){return e.loadBundle("features/course/grades/grade-and-feedback")}]},y[m.d]=t.resolve,y.currentColumn=[m.d,p.d,function(e,t){var n=t.nextParams.columnId;return e.gradebook.columns.$find(n).$asPromise()}],y),url:"/grade-and-feedback?columnId?userId?courseId",require:function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(11),n.e(38),n.e(592)]).then(n.bind(null,"SZKj"))},pageTitle:"course.grades.grade-and-feedback.title"}).peekState("course-group",{panelClass:"full",url:"/group?groupCourseId&groupContentId&groupColumnId",resolve:{translations:[u.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}]},courseEntitlement:i.w.ViewGroupsAsAdmin,require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(1),n.e(2),n.e(3),n.e(8),n.e(556)]).then(n.bind(null,"OZRj"))},pageTitle:"course.content.courseGroup.title",peekStates:["message"],peekViewName:"group-message-peek"}).peekState("rubric-list",{url:"/rubricList?gradeColumnId",resolve:(S={translations:[u.serviceName,function(e){return e.loadBundle("features/course/content/assignment/rubric-list")}]},S[m.d]=t.resolve,S.currentContent=l.a.currentContent,S),panelClass:"peek",require:function(){return Promise.all([n.e(2),n.e(3),n.e(585)]).then(n.bind(null,"WtEJ"))},pageTitle:"course.content.assignmentSettings.rubricList.title",peekViewName:"rubric-list-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("view-exceptions",{panelClass:"peek",pageTitle:"course.content.exceptions.peekPanel.title",url:"/view-exceptions",require:function(){return n.e(668).then(n.bind(null,"MBGk"))},resolve:(C={},C[m.d]=t.resolve,C.currentContent=l.a.currentContent,C),allowChildPeekStates:!0,peekStates:["roster"],peekViewName:"exceptions-peek"}).peekState("grades-bulk-download",{url:"/grades-bulk-download?columnId",require:[function(){return n.e(723).then(n.bind(null,"sI1N"))}],pageTitle:"course.grades.grades-bulk-download.pageTitle",panelClass:"full"})}])},"8W6D":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NONE=new t("none"),t.CREATE=new t("create"),t.EDIT=new t("edit"),t.COPY=new t("copy"),t}(n.n(i).a)},"8jry":function(e,t){e.exports='<bb-modal class="notification js-disallowed-file-type"\n          modal-title-key="components.directives.fileUpload.disallowedFileTypeTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowedFileTypeFull</bb-translate>\n      <a href="{{::fileUpload.getMoreSupportURL()}}" target="_blank" rel="noopener noreferrer" analytics-id="components.directives.fileUpload.moreSupportedFiles"><bb-translate>components.directives.fileUpload.moreSupportedFiles</bb-translate></a>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.validFiles.length > 0">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadValidFiles.plural">\n          <bb-translate translate-values="{count:fileUpload.validFiles.length}">components.directives.fileUpload.uploadValidFiles.plural</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.forceReselectDisallowedFiles && fileUpload.forceReselectDisallowedFiles()">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModalAndChooseFiles()" analytics-id="components.directives.fileUpload.selectAnotherFile">\n          <bb-translate>components.directives.fileUpload.selectAnotherFile</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"8jzW":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return r}));var r,i=n("D57K"),o=n("wHJ2"),s=n("pjml"),a=n("A0nf"),c=n("TnpK"),l=n("nmzr"),u="ultra.components.services.scoreProviderHelper",d="scoreProviderHelper";!function(e){e[e.GenerateStateParams=0]="GenerateStateParams",e[e.GenerateStateRef=1]="GenerateStateRef",e[e.GoToState=2]="GoToState"}(r||(r={}));var p=function(){function e(e){this.ultraState=e}return e.prototype.getScoreProviderHandle=function(){return null},e.prototype.openStateRef=function(e,t){return null},e.prototype.studentViewStateRef=function(e,t){return null},e.prototype.editStateRef=function(e,t){return null},e.prototype.gradingStateRef=function(e,t){return null},e.prototype.gradingWithRubricStateRef=function(e,t){return null},e.prototype.gradingWithFeedbackStateRef=function(e,t){return null},e.prototype.getSubmissionsListStateRef=function(e,t){return null},e.prototype.supportsOverall=function(){return!1},e.prototype.supportsEdit=function(){return!0},e.prototype.supportsViewItem=function(){return!1},e.prototype.supportsExternalEdit=function(){return!1},e.prototype.takeActionOnStateRef=function(e,t,n){switch(n){case r.GoToState:this.ultraState.goPeekState(e,t);break;case r.GenerateStateParams:return o.toJson({state:e,args:t});case r.GenerateStateRef:default:return this.generateStateRef(e,t)}},e.prototype.generateStateRef=function(e,t){return t?e+"("+o.toJson(t)+")":e},e.$inject=[c.d],e}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Scorm},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("scorm.open",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)},t.prototype.gradingStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading",e,t)},t.prototype.gradingWithFeedbackStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)},t.prototype.supportsOverall=function(){return!0},t}(p),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return[a.a.Test,a.a.PeerSubmissionsTest,a.a.PeerEvaluationTest]},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("assessment.open",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef(e.state||"assessment.overview",e,t)},t.prototype.editStateRef=function(e,t){return e.assessmentType="test",e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assessment",e,t)},t.prototype.gradingStateRef=function(e,t){return this.takeActionOnStateRef(e&&e.groupId?"group-submission-grading":"submission-grading",e,t)},t.prototype.gradingWithFeedbackStateRef=function(e,t){var n=e&&e.groupId?"group-submission-grading":"submission-grading";return this.takeActionOnStateRef(n+".peek.assessment-submission-feedback",e,t)},t.prototype.gradingWithRubricStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading.peek.rubric-evaluation",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.assessmentType="test",e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assessment",e,t)},t.prototype.supportsOverall=function(){return!0},t}(p),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.UltraAssignment},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)},t.prototype.editStateRef=function(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)},t.prototype.gradingStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("assignment-grading",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assignment",e,t)},t.prototype.supportsOverall=function(){return!0},t}(p),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Attendance},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.gradingStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.supportsEdit=function(){return!1},t.prototype.supportsOverall=function(){return!0},t}(p),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Discussion},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef(l.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef(l.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef(l.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.view="participants",this.takeActionOnStateRef(l.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.supportsOverall=function(){return!0},t}(p),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Journal},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("journal.view.with-grading",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("journal.view.with-grading",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("journal.view.with-grading",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("journal.view.with-grading",e,t)},t.prototype.supportsOverall=function(){return!0},t}(p),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.LTILink},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.supportsOverall=function(){return!0},t.prototype.supportsExternalEdit=function(){return!0},t}(p),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.PartnerCloud},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){var n;return n=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:a.a.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef("lti.launch",n,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.supportsOverall=function(){return!0},t.prototype.supportsViewItem=function(){return!0},t.prototype.supportsEdit=function(){return!1},t.prototype.supportsExternalEdit=function(){return!0},t}(p),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(p),w=function(){function e(t,n){var r=this;this.$rootScope=t,this.$injector=n,this.delegates=Object.create(null),this.contentHandlerToDelegateMap=Object.create(null),e.SCORE_PROVIDER_DELEGATES.forEach((function(e){var t=r.$injector.instantiate(e),n=t.getScoreProviderHandle();Array.isArray(n)?n.forEach((function(e){r.buildDelegateMap(e,t)})):r.buildDelegateMap(n,t)}))}return e.prototype.buildDelegateMap=function(e,t){var n=this;if(this.delegates[e.toString()])throw new Error("There is already a registered delegate for "+e.toString());this.delegates[e.toString()]=t,e.contentHandlers.forEach((function(r){if(n.contentHandlerToDelegateMap[r]){if(n.contentHandlerToDelegateMap[r]!==t)throw new Error("There is already a registered delegate for "+e.toString())}else n.contentHandlerToDelegateMap[r]=t}))},e.prototype.getDelegate=function(e){return e&&this.delegates[e.toString()]||k.NULL_DELEGATE},e.prototype.getDelegateByContentHandler=function(e){return e&&this.contentHandlerToDelegateMap[e.toString()]||k.NULL_DELEGATE},e.prototype.isSupported=function(e){return e&&null!=this.getDelegate(e).getScoreProviderHandle()},e.prototype.getSupportedHandles=function(){return Object.keys(this.delegates).map((function(e){return a.a.parse(e)}))},e.prototype.openStateRef=function(e,t,n){return this.getDelegateByContentHandler(e).openStateRef(t,n)},e.prototype.getSubmissionListStateRef=function(e,t,n){return this.getDelegate(e).getSubmissionsListStateRef(t,n)},e.prototype.getSubmissionListStateRefByContentHandler=function(e,t,n){return this.getDelegateByContentHandler(e).getSubmissionsListStateRef(t,n)},e.prototype.studentViewStateRef=function(e,t,n){return this.getDelegate(e).studentViewStateRef(t,n)},e.prototype.editStateRef=function(e,t,n){return this.getDelegate(e).editStateRef(t,n)},e.prototype.gradingStateRef=function(e,t,n){return this.getDelegate(e).gradingStateRef(t,n)},e.prototype.gradingWithRubricStateRef=function(e,t,n){return this.getDelegate(e).gradingWithRubricStateRef(t,n)},e.prototype.gradingWithFeedbackStateRef=function(e,t,n){return this.getDelegate(e).gradingWithFeedbackStateRef(t,n)},e.prototype.getNeedsGradingIconByContentHandler=function(e){var t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsGradingIcon):null},e.prototype.getNeedsReconcilingIconByContentHandler=function(e){var t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsReconcilingIcon):null},e.prototype.supportsOverall=function(e){return this.getDelegate(e).supportsOverall()},e.prototype.supportsEdit=function(e){return this.getDelegate(e).supportsEdit()},e.prototype.supportsViewItem=function(e){return this.getDelegate(e).supportsViewItem()},e.prototype.supportsExternalEdit=function(e){if(s.r.ContentHandler.PartnerCloud.isEqualTo(e)||s.r.ContentHandler.LtiLink.isEqualTo(e))return this.getDelegate(e).supportsExternalEdit()},e.$inject=["$rootScope","$injector"],e.SCORE_PROVIDER_DELEGATES=[h,g,v,b,y,S,m,f],e.NULL_DELEGATE=new C(null),e}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(w);o.module(u,[c.b]).service(d,w)},"90v0":function(e,t){e.exports='<div class="preview-header"\n     ng-if="shouldShowHeader && !previewHeader.contextCourse.isInIframeOfPreviewMode()"\n     role="banner">\n  <div>\n    <h2 bb-translate course-org-token-resolver>course.outline.previewCourse.headerBar.title</h2>\n    <div ng-if="hasExceptionReport">\n      <bb-translate>course.outline.previewCourse.headerBar.description</bb-translate>\n      <a href="javascript:void(0);" bb-peek-sref="conversion-risk-analysis" bb-translate\n         analytics-id="course.outline.previewCourse.headerBar.exceptionsLink">course.outline.previewCourse.headerBar.exceptionsLink</a>\n    </div>\n  </div>\n</div>\n'},"94iD":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("40MU"),a=function(){function e(e){this.apiData=e}return Object.defineProperty(e.prototype,"testType",{get:function(){if(!this.apiData.timeLimitSec)return l.NotATimedTest;switch((this.apiData.timerCompletion||"").toString()){case s.TimerCompletion.C.toString():return l.UnlimitedExtraTime;case s.TimerCompletion.H.toString():return this.apiData.softLimitSec?l.LimitedExtraTime:l.NoExtraTime;default:return l.NotATimedTest}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptedTime",{get:function(){switch(this.testType){case l.NoExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case l.UnlimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:Number.POSITIVE_INFINITY};case l.LimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.softLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};default:return{elapsedSeconds:NaN,softlimitSeconds:NaN,hardlimitSeconds:NaN}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"testStage",{get:function(){switch(this.testType){case l.NoExtraTime:return this.withinHardlimit?c.Stage0NoExtraTime:c.StageE;case l.UnlimitedExtraTime:return this.withinLimit?c.Stage0UnlimitedExtraTime:c.Stage1UnlimitedExtraTime;case l.LimitedExtraTime:return this.withinLimit?c.Stage0LimitedExtraTime:this.withinHardlimit?c.Stage1LimitedExtraTime:c.StageE;default:return}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTimeLimit",{get:function(){return this.testType!==l.NotATimedTest},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasExtraTime",{get:function(){return this.testType===l.LimitedExtraTime||this.testType===l.UnlimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasLimitedExtraTime",{get:function(){return this.testType===l.LimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnlimitedExtraTime",{get:function(){return this.testType===l.UnlimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withinLimit",{get:function(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withinHardlimit",{get:function(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.hardlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"willAutoSubmit",{get:function(){return this.testType===l.NoExtraTime||this.testType===l.LimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedTimeLimitSeconds",{get:function(){return this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedExtraTimeSeconds",{get:function(){return this.adaptedTime.hardlimitSeconds-this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),e.prototype.getSubmissionRuleText=function(e,t){switch(this.testType){case l.NoExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.autoSubmission"});case l.UnlimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.unlimitExtraTime"});case l.LimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.extraTimeInfo.plural",params:{allowExtraTime:Math.floor(this.displayedExtraTimeSeconds/60)}});default:return""}},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Stage0NoExtraTime=new t("S0_NO_EXTRA"),t.Stage0UnlimitedExtraTime=new t("S0_UNLIMITED_EXTRA"),t.Stage1UnlimitedExtraTime=new t("S1_UNLIMITED_EXTRA"),t.Stage0LimitedExtraTime=new t("S0_LIMITED_EXTRA"),t.Stage1LimitedExtraTime=new t("S1_LIMITED_EXTRA"),t.StageE=new t("SE"),t}(o.a),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NoExtraTime=new t("NO_EXTRA"),t.UnlimitedExtraTime=new t("UNLIMITED_EXTRA"),t.LimitedExtraTime=new t("LIMITED_EXTRA"),t.NotATimedTest=new t("NOT_TIMED"),t}(o.a)},"9Ss5":function(e,t){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="avatarsClasses"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default--\x3e\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <bb-svg-icon ng-if="::(first.isAllMembers)" class="all-members" size="large" icon="avatar-multiple" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null"></bb-svg-icon>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default --\x3e\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <bb-svg-icon ng-if="::(second.isAllMembers)" class="all-members" size="large" icon="avatar-multiple" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null"></bb-svg-icon>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!first.isAllMembers" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <bb-svg-icon ng-if="first.isAllMembers" class="all-members" size="large" icon="avatar-multiple" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null"></bb-svg-icon>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!second.isAllMembers" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <bb-svg-icon ng-if="second.isAllMembers" class="all-members" size="large" icon="avatar-multiple" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null"></bb-svg-icon>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n</div>'},"9ZjI":function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-not-found-modal"\n          modal-title-key="components.services.error-modal.error-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-found">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>'},"9zo4":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=(n("my/J"),n("wHJ2")),o=n("5iHu"),s=n("XGja"),a=n("+4Px"),c=n("lUN/"),l="ultra.services.accessibility",u="accessibility",d=function(){function e(e){var t=this;this.$rootScope=e,this.FOCUSED_ELEMENT="focusedElement",this.FOCUS_SELECTOR_OVERRIDE="focusSelectorOverride",this.isFocusDelayed=!1,this.panelInfoStack=[{panelElement:o(document.body)}],this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=this.currentPanelInfo.panelElement,this.isFocusedElementInFocusTrap=function(){return!!o(document.activeElement).closest(".ms-FocusTrapZone").length},this.focusCorrectElementOnPanel=function(e){void 0===e&&(e=this.activePanel),this.isFocusDelayed=!1;var t=o(".ms-Callout");if(!t||!t.length){var n=o(".ms-Modal");if(!n||!n.length){var r=o(".datepicker-dropdown");if(!(r&&r.length||this.isFocusedElementInFocusTrap())){var i=e.find("[bb-focus]");if(i&&i.length){var a=i.first();if(a.trigger("focus"),this.elementHasFocus(a))return}var c=e.find("h1").filter(":visible");if(c&&c.length){var l=c.first();if(s.a(l),this.elementHasFocus(l))return}var u=e.find(":tabbable:not(.bb-close, .non-first-focus):first");u&&u.length&&(u.trigger("focus"),this.elementHasFocus(u))||s.a(e)}}}},this.elementHasFocus=function(e){return e.is(o(document.activeElement))},this.isElementInActivePanel=function(e){return e.hasClass("pagehelp-directive-link")||!!e.closest(".focus-handling-disabled").size()||t.isElementInPanel(t.activePanel,e)},this.isElementInPanel=function(e,t){return e.is(t)||o.contains(e[0],o(t)[0])},this.applyFocusinHandler=function(){o("body").off("focusin.axService"),o("body").on("focusin.axService",(function(e){var n=o(e.target);t.isFocusDelayed||t.isElementInActivePanel(n)||t.focusCorrectElementOnPanel(t.activePanel)}))},this.removeFocusinHandler=function(){o("body").off("focusin.axService")},this.backgroundElementsStack=[],c.a(),this.applyFocusinHandler();var n=function(e){t.isElementInActivePanel(o(e.target))||t.removeFocusinHandler()};o("body").on("mousedown",n),e.$on("$destroy",(function(){o("body").off("mousedown",n)}))}return e.prototype.applyAccessibilityHandlingForPanel=function(e){this._storeFocusedElement(),this._setActivePanel(e),this._applyTabCapture(),this.ariaHideBackgroundElements()},e.prototype.revertAccessibilityHandling=function(){this.ariaShowBackgroundElements(),this._revertTabCapture(this.currentPanelInfo),this._restoreActivePanel(),this._restoreFocusedElement()},e.prototype._setActivePanel=function(e){this.activePanel=null,this.activePanel=e,this.currentPanelInfo={panelElement:e,overlayDisabled:e.hasClass("overlay-disabled"),panelFocusHandlingDisabled:e.hasClass("focus-handling-disabled")},this.panelInfoStack.push(this.currentPanelInfo),o(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()},e.prototype._restoreActivePanel=function(){this.panelInfoStack.length<2&&(this._setActivePanel(o(document.body)),this._setActivePanel(o(document.body))),this.panelInfoStack.pop().panelElement=null,this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=null,this.activePanel=this.currentPanelInfo.panelElement,o(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()},e.prototype.ariaHideBackgroundElements=function(e){void 0===e&&(e=!0);var t=o('.hide-in-background[aria-hidden!="true"]');t.attr("aria-hidden","true"),this.backgroundElementsStack.push(t),e&&this.activePanel.attr("aria-hidden","false")},e.prototype.ariaShowBackgroundElements=function(){if(this.backgroundElementsStack.length<1)throw o(".hide-in-background").attr("aria-hidden","false"),new Error("Tried to set aria-hidden=false for background elements, but there were no background elements in the stack.");this.backgroundElementsStack.pop().attr("aria-hidden","false")},e.prototype.setFocusOverrideOnPanel=function(e,t){if(!t)throw new Error("A panel selector is required to override focus on a panel");for(var n=this.panelInfoStack.length-1;n>=0;n--)if(this.panelInfoStack[n].panelElement.find(t).addBack(t).length){this.panelInfoStack[n].panelElement.data(this.FOCUS_SELECTOR_OVERRIDE,e);break}},e.prototype._storeFocusedElement=function(){var e=o(document.activeElement);!p.isLastNavigationByKeyboard&&p.lastClickedElement&&p.lastClickedElement.length&&(e=p.lastClickedElement),this.activePanel.data(this.FOCUSED_ELEMENT,e),e=null},e.prototype._restoreFocusedElement=function(){if(this.isFocusDelayed=!1,this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)){var e=this.activePanel.find(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).addBack(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).first();e.length&&this.activePanel.data(this.FOCUSED_ELEMENT,e),this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE,"")}var t=this.activePanel.data(this.FOCUSED_ELEMENT);t&&0!==t.length&&t.focus(),t&&t.length&&o(document.activeElement).is(t)||this.focusCorrectElementOnPanel(this.activePanel),this.activePanel.removeData(this.FOCUSED_ELEMENT),t=null},e.prototype._applyTabCapture=function(){var e=this;this.activePanel.on("keydown",(function(t){if(t.keyCode===a.u&&!e.currentPanelInfo.tabCalled){var n=e.activePanel.data("axMutationObserver");n||((n=new MutationObserver((function(){e.currentPanelInfo.tabCalled=!1}))).observe(e.activePanel[0],{childList:!0,attributes:!0,subtree:!0}),e.activePanel.data("axMutationObserver",n));var r=o(e.activePanel).find("*").addBack();e._conditionallyUpdateSkipLinkFocus(),o(":tabbable").not(".bb-ax-background-tabindex").add(o('a[tabindex!="-1"]').filter((function(){return 0===o(this).height()&&0===o(this).width()}))).filter((function(){return 0===o(this).closest(".focus-handling-disabled").size()})).add(o('div.editor-element[tabindex!="-1"]')).not(r).not(o(".pagehelp-directive-link")).add(o('div.panel-wrap[tabindex!="-1"]')).each((function(){o(this).data("originalTabindex",this.getAttribute("tabindex"))})).attr("tabindex","-1").addClass("bb-ax-background-tabindex"),e.currentPanelInfo.tabCalled=!0}}))},e.prototype._revertTabCapture=function(e,t){var n=t||o(document);n.find(".bb-ax-background-tabindex").each((function(){var e=o(this);null==e.data("originalTabindex")?e.removeAttr("tabindex"):e.attr("tabindex",e.data("originalTabindex")),e.removeAttr("originalTabindex")})).removeClass("bb-ax-background-tabindex"),n.data("axMutationObserver")&&n.data("axMutationObserver").disconnect()},e.prototype._revertTabCaptureForActivePanel=function(){this._revertTabCapture(this.currentPanelInfo)},e.prototype._conditionallyUpdateSkipLinkFocus=function(){this.currentPanelInfo.overlayDisabled&&!this.currentPanelInfo.panelFocusHandlingDisabled&&this.panelInfoStack.length>1&&this._revertTabCapture(this.panelInfoStack[this.panelInfoStack.length-2],this.activePanel)},e.isLastNavigationByKeyboard=!1,e.$inject=["$rootScope"],e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(d);i.module(l,[]).service(u,d)},"A+IJ":function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return h}));var r=1,i=2,o="#c575d2",s="#1874a4",a="#333333",c="#666666",l="#e5e5e5",u="#cdcdcd",d="#ffffff",p="#f0f0f0",m="Open Sans",f="600 12px "+m,h="700 12px "+m},A0nf:function(e,t,n){"use strict";var r=n("D57K"),i=n("nsO7"),o=n("nbDY"),s=n.n(o),a=n("Y3OE"),c=function(e){function t(t,n,r,i,o){void 0===i&&(i="grades"),void 0===o&&(o="grades");var s=e.call(this,t)||this;return s.iconClass=n,s.contentHandlers=r,s.needsGradingIcon=i,s.needsReconcilingIcon=o,s}return Object(r.__extends)(t,e),t.prototype.getContentHandlers=function(){return this.contentHandlers.map((function(e){return a.a.parse(e)}))},t.parse=function(e){return i.find(t.getValues(),(function(t){return e===t.toString()}))},t.parseByContentHandler=function(e){return e===t.Test.contentHandlers[0]?t.Test:i.find(t.getValues(),(function(t){return t.contentHandlers.some((function(t){return t===e}))}))},t.UltraAssignment=new t("resource/x-bb-assessment-ultraassignment","assignment",[a.a.UltraAssignment.toString()]),t.ClassicAssignment=new t("resource/x-bb-assignment","assignment",[a.a.ClassicAssignment.toString()]),t.Attendance=new t("resource/x-bb-attendance","attendance",[a.a.Attendance.toString()]),t.Blog=new t("resource/x-bb-bloglink","blog",[a.a.Blog.toString()]),t.Discussion=new t("resource/x-bb-forumlink","discussion",[a.a.Discussion.toString()]),t.Wiki=new t("resource/x-bb-wiki","wiki",[a.a.Wiki.toString()]),t.Survey=new t("resource/x-bb-assessment-survey","survey",[a.a.SurveyLink.toString()]),t.Test=new t("resource/x-bb-assessment","test",[a.a.TestLink.toString()]),t.PeerSubmissionsTest=new t("resource/x-bb-peer-submission","test",[a.a.TestLink.toString()]),t.PeerEvaluationTest=new t("resource/x-bb-peer-eval","test",[a.a.TestLink.toString()]),t.LTILink=new t("resource/x-bb-blti-link","link",[a.a.LtiLink.toString(),a.a.LtiPlacement.toString()]),t.PartnerCloud=new t("resource/x-bbgs-partner-cloud","link",[a.a.PartnerCloud.toString()]),t.Scorm=new t("resource/x-plugin-scormengine","scormengine",[a.a.RusticiScorm.toString()]),t.Journal=new t("resource/x-bb-journallink","journal",[a.a.Journal.toString()]),t}(s.a);t.a=c},A3SN:function(e,t,n){},A4cK:function(e,t){e.exports="<div ng-transclude></div>"},A4xO:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.focusNext";function s(e,t,n){e.on("keydown.focusNext",(function(o){if(o.keyCode===i.u&&!o.shiftKey&&t){var s=r.element(t);s.length>=1&&-1!==parseInt(s.attr("tabindex"),10)&&(s.first().focus(),o.preventDefault(),n&&e.off("keydown.focusNext"))}}))}var a=function(){this.restrict="A",this.link=function(e,t,n){var r="true"===n.bbFocusNextOneTimeOnly;s(t,n.bbFocusNext,r)}};r.module(o,[]).directive("bbFocusNext",["$injector",function(e){return e.instantiate(a)}])},BOxd:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Graded=new t("GRADED"),t.NeedsGrading=new t("NEEDS_GRADING"),t}(n.n(i).a);t.a=o},BXiQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("H9Wo");var r,i,o=n("wHJ2"),s=n("5iHu"),a=n("nsO7"),c=n("Ymz8"),l=n("oVrE"),u=n("5Dl8"),d=n("pjml"),p=n("Q/M7"),m=n("DpvE"),f=n("gCXj"),h=n("yCJt"),g="ultra.directives.user-avatar",v=(e=o.module(g,[d.R,f.a]),h.replace(/\s+id="[^\"]+"\s*/," ").replace(/<svg /,'<svg stroke-width="3" stroke="#fff" ').replace(/\s+viewBox="(\d+ \d+ \d+ \d+)"/,(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0].split(" ").map((function(e){return parseInt(e,10)})),i=r[0],o=r[1],s=r[2],a=r[3];return' viewBox="'+[i-s/2,o-a/2,2*s,2*a].join(" ")+'"'}))),b={avatar:{permanentUrl:"data:image/svg+xml;base64,"+c.codec.base64.fromBits(c.codec.utf8String.toBits(v))},lastModifiedAt:"",getInitials:a.noop},y=s('<style id="css-bb-user-avatar"></style>').appendTo("head"),S={},C=function(e){e.forEach((function(e){var t=e.id||e.$pk,n=S[t]=S[t]||{};if(!(null!=e.lastModifiedAt&&e.lastModifiedAt===n.lastModifiedAt)&&!e.isPlaceHolder){n.avatarURL=void 0,n.isAvailable=e.isAvailable,n.lastModifiedAt=e.lastModifiedAt;var r=e.avatar&&"default"!==e.avatar.permanentUrl;if(r){var i=e.avatar.permanentUrl;e.avatar.permanentUrl.startsWith("http")&&(i=Object(p.a)(e.avatar.permanentUrl,"ts",e.lastModifiedAt?encodeURIComponent(e.lastModifiedAt):(new Date).getTime())),n.avatarURL=i}var o=(e.getInitials||a.noop).apply(e);n.initials=!r&&o?o:void 0}})),r()};e.config([f.b+"Provider",function(e){e.onStyleRefresh((function(e,t){t.isAvailable||(e.selector("bb-user-avatar.u"+t.userId+":after").rule("display","block"),e.selector("bb-user-avatar.u"+t.userId+" > div").rule("opacity",".3"))}))}]).run(["$rootScope",d.Qb.serviceName,function(e,t){r=a.debounce((function(){var e=new u.a;a.forEach(S,(function(t,n){var r=e.selector("bb-user-avatar.u"+n);t.avatarURL?(r.selector(".image:after").rule("background-image",'url("'+t.avatarURL+'")').rule("display","block"),r.selector(".image:before").rule("display","none")):t.initials&&(r.selector(".image").rule("display","none"),r.selector(".initials").rule("display","block"),r.selector(".initials:after").rule("content",'"'+t.initials+'"')),!1===t.isAvailable&&e.selector("bb-user-avatar.u"+n+":after").rule("display","block")}));var t=e.build();y.text()!==t&&y.text(t)}),200),i=a.once((function(){t.$mixHook("after-feed",(function(){var e=Array.prototype.concat.call([],this);C(e)}))}))}]).directive("bbUserAvatar",(function(){return{restrict:"E",template:m,scope:{user:"=?"},link:function(e,t){i(),t.addClass("avatar element-image");e.$watch("user",(function(e,n){e&&(l.e(e)&&a.extend(e,b),t[0].className=t[0].className.split(/\s+/).filter((function(e){return!/^u\w+$/.test(e)})).join(" "),t.addClass("u"+(e.id||e.$pk)),C([e]))}))}}}))},BfLg:function(e,t,n){n.p=window.publicPath||n.p},BrA8:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("JzsJ");var r=n("wHJ2"),i=n("pjml"),o=n("0JpG"),s=n("Fvsw"),a=n("bF8R"),c=n("jhBu"),l=n("o5Lu"),u=n("TnpK"),d=n("Qbdf"),p=n("A0nf"),m="ultra.course.content.lti.routes";r.module(m,[o.moduleName,a.a,c.a,l.f,u.b,d.b]).config([u.c,d.c,function(e,t){var r;e.peekState("lti",{abstract:!0,url:"/lti"}).peekState("lti.launch",{url:"/launch?courseId&contentId&linkRef&linkType",resolve:(r={translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},r[d.d]=t.resolve,r.currentContent=["$q",u.d,i.W.serviceName,i.o.serviceName,function(e,t,n,r){var i=e.defer(),o=t.nextParams.courseId?t.nextParams.courseId:t.prevParams.courseId,s=t.nextParams.contentId?t.nextParams.contentId:t.prevParams.contentId,a=t.nextParams.linkRef?t.nextParams.linkRef:t.prevParams.linkRef,c=t.nextParams.linkType?t.nextParams.linkType:t.prevParams.linkType;return o&&s?r.$new(o).contents.$find(s).$asPromise().then((function(e){return i.resolve(e)})):o&&a&&p.a.PartnerCloud.isEqualTo(c)?n.getContentIds(o,a).then((function(e){e.contentIds&&e.contentIds.length>0?r.$new(o).contents.$find(e.contentIds[0]).$asPromise().then((function(e){return i.resolve(e)})):i.resolve(null)})):i.resolve(null),i.promise}],r.currentGradeColumn=["$q",d.d,"currentContent",s.b,function(e,t,n){if(t&&n){var r=n.contentDetail[n.contentHandler.toString()].gradingColumn.id;return t.gradebook.columns.$find(r).$asPromise()}return e.when(null)}],r.contentData=["$q",d.d,"currentContent","currentGradeColumn",a.b,function(e,t,n,r,i){if(t&&n&&r)return i.loadContentAndGrades({course:t,content:n,column:r});e.when(null)}],r),panelClass:"peek",require:function(){return Promise.all([n.e(2),n.e(3),n.e(596)]).then(n.bind(null,"7CZ/"))},pageTitle:" Launch"}).peekState("lti.launch-frame",{url:"/launchFrame?toolHref",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},panelClass:"full",require:function(){return Promise.all([n.e(2),n.e(3),n.e(613)]).then(n.bind(null,"I/hb"))},pageTitle:"course.content.ltiLaunchFrameTitle"})}])},Bu0u:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidArgumentsError",n}return Object(r.__extends)(t,e),t}(n("6ynb").a)},ByeC:function(e,t){e.exports='<bb-modal id="disallow-folder-upload-modal" class="notification js-disallow-folder"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.disallowFolderUploadTitle\' : \'components.directives.fileUpload.disallowFolderUploadNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.disallowFolderUploadFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"C/Ry":function(e,t){e.exports='<th class="table-cell"\n    scope="row"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</th>'},C3Ga:function(e,t,n){"use strict";var r,i=n("D57K"),o=n("WftU"),s=n("5MwF"),a=n("n7/H"),c=n("tfZW"),l=function(e){function t(t,n){void 0===n&&(n=c.a.getInstance());var r=e.call(this,t)||this;return r.preferredLocalesCache=new Map,r.overrideLoader=n,r.overrideLoader.onOverrideAdded(r.onOverrideAdded.bind(r)),r}return Object(i.__extends)(t,e),t.prototype.getBundlePath=function(e,t){if(s.a.unitTesting){if(!t.match(/^force\!/))return t.match(/^forcereset$/)?void this.reset():void 0;t=t.replace(/^force\!/,"")}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"},t.prototype.loadIncludedBundle=function(e){var t=this,r=function(e){var t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw new Error("Could not find locale in path "+e);return t[1]}(e);return new a.InstantPromise((function(i){n("spHl")("./"+e.replace("locales/","").replace(r,t.normalizeLocale(r))).then(i).catch((function(){return i(null)}))}))},t.prototype.loadPath=function(e){return e.indexOf("://")>=0?c.a.loadFromRemotePath(e):this.loadIncludedBundle(e)},t.prototype.load=function(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]},t.prototype.onOverrideAdded=function(e){this.preferredLocalesCache=new Map},t.prototype.loadBundles=function(t){var n=this;"string"==typeof t&&(t=[t]);var r=[];return this.normalizeLocales(t).forEach((function(t){r.push(n.overrideLoader.getOverridePathForLocale(t).then((function(e){if(e&&e.path)return n.loadBundle(e.ultraLocale,e.path)})),e.prototype.loadBundles.call(n,t))})),a.InstantPromise.all(r)},t.prototype.getPreferredLocales=function(e){var t=this;"string"==typeof e&&(e=[e]);var n=e.join("|");if(!this.preferredLocalesCache.has(n)){var r=[];this.normalizeLocales(e).forEach((function(e){r=r.concat(t.overrideLoader.getPreferredLocales(e))})),this.preferredLocalesCache.set(n,Array.from(new Set(r)))}return this.preferredLocalesCache.get(n)},t.prototype.getLocaleForFormatting=function(e){return this.overrideLoader.getBaseLocale(e)||e},t}(o.Babelfish),u=function(){function e(){}return e.getInstance=function(){return null==r&&(r=new l({fallbackLocales:[]})),r},e.getTestInstance=function(e){if(!s.a.unitTesting)throw new Error("Use getInstance() instead");return new l({fallbackLocales:[]},e)},e}();t.a=u},CPVT:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("TnpK"),o=n("Qbdf"),s=n("aHpC"),a=n("wHJ2"),c="ultra.components.directives.confirmationCourseOrgTokenReplacementDirective",l=function(){function e(e,t,n,r,i){this.element=e,this.attributes=t,this.scope=n,this.ultraState=r,this.currentCourse=i;try{(r.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&t.bbConfirmationNeeded&&(t.bbConfirmationNeeded=this.replaceToken(t.bbConfirmationNeeded),e.attr("bb-confirmation-needed",this.replaceToken(t.bbConfirmationNeeded)))}catch(e){}}return e.prototype.replaceToken=function(e){return e?e.replace("resource/x-bb-course-","resource/x-bb-organization-"):e},e}(),u=function(){function e(e,t){var n=this;this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=function(){return function(e,t,r){return new l(t,r,e,n.ultraState,n.currentCourse)}}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)(i.d)),Object(r.__param)(1,Object(s.b)(o.e))],e)}();a.module(c,[i.b]).directive("confirmationCourseOrgTokenResolver",["$injector",function(e){return e.instantiate(u)}])},CPqS:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("w9Zy"),a=n("nYZ0"),c=n("ZzN+"),l=n("hqh6"),u=n("5RJJ"),d=n("pjml"),p=n("M+Ig"),m=n("TnpK"),f=n("Qbdf"),h=n("X455"),g=n("uC9d"),v=n("x+T+"),b=n("jhBu"),y=n("fYJU"),S="ultra.course.routes";r.module(S,[l.a,u.a,f.b,h.a]).config([m.c,f.c,h.b,function(t,r,l){var u,S,C;t.peekState("course",{abstract:!0,url:"^/{coursesOrOrganizations:(?:courses|organizations)}/:courseId",panelClass:"full",require:function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))},resolve:(u={currentColumn:function(){return null}},u[f.d]=r.resolve,u[h.c]=l.resolve,u.currentCourseId=["$state",function(e){return e.nextParams.courseId}],u.courseEntitlementsLoader=["currentCourseId",v.c,function(e,t){return t.loadCourseEntitlements(e)}],u["?courseMembershipsLoader"]=["currentCourseId",d.o.serviceName,function(e,t){return t.$new(e).memberships.$fetch({limit:1e4}).$asPromise()}],u.isOrganization=[f.d,m.d,function(e,t){return t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization}],u),onExit:["$rootScope","$stateParams","membership",o.serviceName,s.e,f.e,c.b,g.c,y.b,h.d,function(t,n,r,i,o,s,a,c,l,u){t.bbOffcanvasOpened=!1,o.close("course"),s.course.isClassic()&&t.$broadcast("reloadCourse",n.courseId);var d=r.isStudentMembership(),p=!l.userModel.isGuest();!d&&p&&u.courseMembership.$fetch().$allow([404]).$asPromise().then((function(e){e.isStudentMembership()&&c.clearCache("users/"+l.userId+"/memberships")})),a.showPreviewAlert=!0,e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode")}]}).peekState("course.analytics",{url:"/analytics",views:{"course@":{require:[function(){return Promise.all([n.e(13),n.e(85)]).then(n.bind(null,"amHh"))},function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{"analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/analytics/course-analytics")}]}}},panelClass:"full",pageTitle:"course.analytics.headerLabel"}).peekState("course.analytics.predict-instructor",{url:"/predict?resetFTUE",views:{"analytics@":{require:function(){return Promise.all([n.e(21),n.e(22),n.e(129),n.e(672)]).then(n.bind(null,"x4MM"))},resolve:{"predict-translations":[o.serviceName,function(e){return e.loadBundle("features/predict/predict")}]}}},pageTitle:"predict.course.title",peekStates:["predictCourseStudentPanel"],panelClass:"full"}).peekState("course.analytics.predict-student",{url:"/predict/:studentId",views:{"analytics@":{require:function(){return Promise.all([n.e(21),n.e(26),n.e(22),n.e(25),n.e(34),n.e(75),n.e(683)]).then(n.bind(null,"lanz"))},resolve:{"predict-translations":[o.serviceName,function(e){return e.loadBundle("features/predict/predict")}]}}},peekStates:["predictMessagingPanel"],pageTitle:"course.title.predictStudent",panelClass:"full"}).peekState("course.analytics.reports",{url:"/reports",views:{"analytics@":{require:[function(){return Promise.all([n.e(13),n.e(617)]).then(n.bind(null,"Va14"))},function(){return Promise.all([n.e(13),n.e(85)]).then(n.bind(null,"amHh"))},function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{"analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/analytics/course-analytics")}]}}},panelClass:"full",pageTitle:"course.analytics.headerLabel"}).peekState("course.analytics.scorm-reports",{url:"/scormReports",resolve:(S={},S[f.d]=r.resolve,S),views:{"analytics@":{require:[function(){return n.e(669).then(n.bind(null,"txuS"))},function(){return Promise.all([n.e(13),n.e(85)]).then(n.bind(null,"amHh"))}],resolve:{"scorm-report-analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}]}}},peekStates:["scorm-analytics-report"],panelClass:"full",pageTitle:"course.analytics.title.scormReports"}).peekState("course.analytics.question-analysis",{url:"/questionAnalysis",views:{"analytics@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(89),n.e(706)]).then(n.bind(null,"ErSj"))},resolve:{"question-analysis-translations":[o.serviceName,function(e){return e.loadBundle("features/course/question-analysis")}]}}},peekViewName:"question-analysis-report-list",peekStates:["question-analysis"],panelClass:"full",pageTitle:"course.question-analysis.report-list.pageTitle"}).peekState("course.calendar",{url:"/calendar",views:{"course@":{require:[function(){return Promise.all([n.e(93),n.e(1),n.e(14),n.e(79),n.e(24),n.e(623)]).then(n.bind(null,"bbBO"))},function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{"calendar-translations":[o.serviceName,function(e){return e.loadBundle("features/course/calendar/course-calendar")}]}}},courseEntitlement:i.e.ViewCalendar,peekStates:["event-create","event-edit","event-view","class-schedule","office-hours","conversion-analysis","content-manage","assignment","grade-item","assessment","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],panelClass:"full",peekViewName:"calendar-panel-base",pageTitle:"course.calendar.headerLabel"}).peekState("course.engagement",{url:"/engagement",resolve:{"engagement-translations":[o.serviceName,function(e){return e.loadBundle("features/course/engagement/course-engagement")}]},views:{"course@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(10),n.e(1),n.e(2),n.e(3),n.e(546)]).then(n.bind(null,"QVC4"))}}},panelClass:"full",peekStates:["content-manage","conversion-analysis","discussion","conditional-release","content-group-enroll","discussion-settings",p.a.DiscussionForumInsights.toString(),"course-group"],peekViewName:"engagement-panel-base",pageTitle:"course.engagement.headerLabel"}).peekState("course.grades",{url:"/grades?gradebookView",views:{"course@":{require:[function(){return Promise.all([n.e(0),n.e(7),n.e(10),n.e(1),n.e(2),n.e(3),n.e(8),n.e(19),n.e(11),n.e(547)]).then(n.bind(null,"OFW5"))},function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{"grades-translations":[o.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]}}},resolve:{courseEntitlement:["$q","membership",b.b,function(e,t,n){return t.isStudentMembership()?e.resolve(!0):n.hasAllCourseEntitlements(["course.gradebook-metadata.VIEW",i.w.ViewGroups])}]},peekStates:["assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview","multiple-attempt-grading","assignment-grading","submission-grading","group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting","grade-and-feedback","conversion-analysis","content-manage","lti","discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis","reconcile-grade","grades-bulk-download"],panelClass:"full",peekViewName:"grades-panel-base",pageTitle:"course.grades.instructorHeaderLabel"}).peekState("course.messages",{url:"/messages",views:{"course@":{require:[function(){return Promise.all([n.e(0),n.e(13),n.e(8),n.e(33),n.e(134),n.e(704)]).then(n.bind(null,"vjWz"))},function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{"messages-translations":[o.serviceName,function(e){return e.loadBundle("features/course/messages/course-messages")}]}}},panelClass:"full",peekStates:["create-message","edit-message","conversion-analysis"],pageTitle:"course.messages.headerLabel"}).peekState("course.outline",{url:"/outline?legacyUrl?enrollmentMessage?inPreviewMode",views:{"course@":{require:[function(){return Promise.all([n.e(7),n.e(10),n.e(20),n.e(1),n.e(2),n.e(12),n.e(19),n.e(14),n.e(23),n.e(125)]).then(n.bind(null,"Qile"))},function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{isClassicCourse:[f.d,m.d,function(e,t){e.isUltra()||t.goPeekState("course.classic.outline",{courseId:e.id,legacyUrl:t.nextParams.legacyUrl})}],"outline-translations":[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}},onExit:["$rootScope",m.d,function(e,t){"base.calendar"===t.getBaseState()&&e.$broadcast("deadline-refresh")}],peekStates:["announcement-list","announcement-detail","assignment","assessment-settings","question-analysis","question-banks","assessment-safe-assign-settings","bulk-edit-content","class-schedule","content-group-enroll","content-manage","conversion-analysis","conversion-risk-analysis","description","event-view","exports","gradebook-item","import-report","message","roster","collab","stream-message","assessment","content-market","content-collection","document-settings","partner-tool","lti","discussion-settings","conversations","books-and-tools","rubric",p.a.ContentActivityInDetail.toString(),p.a.DiscussionForumInsights.toString(),"overall-grade","attendance","attendance-student-view","course-group-enroll","conditional-release","course-group","scorm-settings","gradebook-item.scorm-submissions","group-set-detail","group-set-list","scorm-launch-frame","scorm-overview","content-navigator-transition-peek","content-navigator-transition-full","content-navigator-placeholder","scorm-analytics-report"],peekViewName:"content-create-base",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("content-navigator-transition-peek",{url:"/content-navigator-transition-peek",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"peek"}).peekState("content-navigator-transition-full",{url:"/content-navigator-transition-full",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"full"}).peekState("content-navigator-placeholder",{url:"/link/{contentId:_[0-9]+_1}",require:function(){return Promise.all([n.e(2),n.e(3),n.e(602)]).then(n.bind(null,"1Uig"))},panelClass:"full",peekStates:["lti"],resolve:{currentContent:[m.d,f.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==d.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}]}}).peekState("conditional-release",{url:"/conditionalRelease?id",pageTitle:"course.conditionalRelease.panelTitle",require:[function(){return Promise.all([n.e(7),n.e(2),n.e(3),n.e(36),n.e(625)]).then(n.bind(null,"gl4I"))},function(){return Promise.all([n.e(7),n.e(10),n.e(20),n.e(1),n.e(2),n.e(12),n.e(19),n.e(14),n.e(23),n.e(125)]).then(n.bind(null,"Qile"))}],resolve:(C={},C[f.d]=r.resolve,C.currentContent=[m.d,"currentCourse",a.e,function(e,t,n){var r=e.nextParams.id,i=n.findRootNode(t,d.r.ContentRootNode.ROOT);return n.getOrMakeContentInContentTree(i,t.id,r).then((function(e){return e.content.$fetch({expand:"hasProgressed"}).$asPromise()}))}],C.translations=[o.serviceName,function(e){return e.loadBundle("features/course/conditional-release/conditional-release")}],C)}).peekState("course.classic",{abstract:!0,url:"/cl"}).peekState("course.classic.outline",{url:"/outline?legacyUrl?enrollmentMessage",require:[function(){return Promise.all([n.e(1),n.e(24),n.e(30)]).then(n.bind(null,"ogn+"))}],resolve:{"outline-translations":[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]},peekStates:[p.a.ContentActivityInDetail.toString()],peekViewName:"course-classic-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("edit-file-settings",{require:[function(){return n.e(148).then(n.bind(null,"TFHU"))}],resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/media-widget/media-widget")}]},url:"/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&isDecorative&alternativeText&mediaType&bbmlEditorId"}).peekState("bulk-edit-content",{url:"/bulkEditContent",require:[function(){return Promise.all([n.e(549),n.e(721)]).then(n.bind(null,"iGvw"))}],pageTitle:"course.outline.bulkEditHeaderLabel",panelClass:"full"})}])}).call(this,n("5iHu"))},Cxi4:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("D57K"),i=n("wHJ2"),o=n("nYZ0"),s=n("Sa5G"),a=n("jhBu"),c=n("pjml"),l="ultra.components.services.discussionPermission",u="discussionPermission",d=function(){function e(e,t,n,r){this.$q=e,this.content=t,this.CourseModel=n,this.entitlement=r}return e.prototype.canCreateAllContent=function(e){if(e){var t,n=this.CourseModel.$new(e),r=this.content.findRootNode(n,c.r.ContentRootNode.INTERACTIVE);return r.$then((function(){(t=r.children)||(t=r.getChildren({limit:0}))})).$asPromise().then((function(){return t.$asPromise().then((function(){return t.permissions&&t.permissions.create}))}))}return this.$q.when(!1)},e.prototype.hasEditPermission=function(e){return this.entitlement.hasCourseEntitlement(s.f.ModifyContent,e)},e.prototype.hasEditAvailabilityPermission=function(e){return this.entitlement.hasCourseEntitlement(s.f.ModifyContentAvailability,e)},e.prototype.hasEditDueDatePermission=function(e){return this.entitlement.hasCourseEntitlement(s.v.ModifyItemDueDate,e)},e.prototype.hasGradingPermission=function(e){return this.entitlement.hasCourseEntitlement(s.v.ModifyGradebook,e)},e.prototype.canDeleteDiscussion=function(e,t){return t&&t.permissions?t.canDelete():e&&e.canDelete()},e.prototype.areAnyGroupEntitled=function(e){return this.entitlement.areAnyEntitled([s.w.CreateGroups,s.w.DeleteGroups,s.w.ManageGroupMembership,s.w.ModifyGroups,s.w.ViewGroups],e)},e.$inject=["$q",o.e,c.o.serviceName,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(d);i.module(l,[o.d,c.R,a.a]).service(u,d)},DDbI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("w9Zy"),o=n("TnpK"),s="profile.update-avatar.routes";r.module(s,[i.d,o.b]).config([o.c,function(e){e.peekState("update-avatar",{url:"/avatar/update",require:function(){return Promise.all([n.e(29),n.e(652)]).then(n.bind(null,"Jgl2"))},pageTitle:"base.profile.update-avatar.pageTitle"})}])},DlnX:function(e,t,n){},DpvE:function(e,t){e.exports='<div>\n  <div class="initials"></div>\n  <div class="image"></div>\n</div>'},DsaG:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("f4B+"),a="ultra.components.services.fileViewer",c="fileViewer",l=function(){function t(t){var n=this;this.$sce=t,this.canFileBeRenderedInline=function(e){if(e.ui=e.ui||{},!e.currentMimeType)return!1;if(e.ui.mediaType=e.ui.mediaType||n.getMediaType(e),e.ui.mediaSubtype=e.ui.mediaSubtype||n.getMediaSubType(e),"image"===e.ui.mediaType){return["jpeg","gif","png"].indexOf(e.ui.mediaSubtype)>-1}if("audio"===e.ui.mediaType||"video"===e.ui.mediaType){var t=document.createElement(e.ui.mediaType);return t.canPlayType&&!!t.canPlayType(e.currentMimeType)}return!1},this.getMediaSubType=function(e){var t=null;return e.currentMimeType&&(t=e.currentMimeType.substr(e.currentMimeType.indexOf("/")+1)),t},this.getMediaType=function(e){var t=null;return e.currentMimeType&&(t=e.currentMimeType.substring(0,e.currentMimeType.indexOf("/"))),t},this.isMediaFile=function(t){return e.inArray(t,["image","video","audio"])>=0},this.shouldRenderInlineByDefault=function(e){var t=!1,r=n.getMediaType(e);return r&&(t=n.isMediaFile(r)),t},this.isAudioFile=function(e){return"audio"===e},this.isImageFile=function(e){return"image"===e},this.isVideoFile=function(e){return"video"===e},this.initUiField=function(e){null==e.ui&&(e.ui={}),e.viewerData&&e.viewerData.viewerUrl&&(e.ui.trustedViewUrl=n.$sce.trustAsResourceUrl(e.viewerData.viewerUrl)),e.ui.iconClass=o.r.FileContentHandlerType.getIconClassByFileMIMEType(e.currentMimeType)||"img-icon-document-blank",e.ui.mediaType=n.getMediaType(e),e.ui.mediaSubtype=n.getMediaSubType(e),e.ui.canBeRenderedInline=n.canFileBeRenderedInline(e),e.ui.safeAltText=e.alternativeText?s.a.HTML(e.alternativeText):""}}return t.$inject=["$sce"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(a,[]).service(c,l)}).call(this,n("5iHu"))},Dwp2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("YOs/"),o=n("65PF"),s=n("C/Ry"),a="ultra.components.directives.table.tableCell",c=function(){function e(e,t,n){this.scope=e,this.element=t,this.ctrl=n,this.getColumn(),this.handleAlternateText()}return e.prototype.getColumn=function(){this.column=this.ctrl.getConfig().columns[this.scope.columnIndex()]},e.prototype.handleAlternateText=function(){if(this.column&&this.column.alternateTextFn){var e=this.column.alternateTextFn(this.scope.item);this.element.find(".alternate-contents").text(e),this.element.find(".transclude-container").attr("aria-hidden","true")}},e.$inject=["scope","element","ctrl"],e}(),l=function(){function e(e){var t=this;this.$injector=e,this.require="^bbTable",this.restrict="E",this.replace=!0,this.transclude=!0,this.template=function(e,t){return"true"===t.header?s:o},this.scope={columnIndex:"&",header:"@"},this.link=function(e,n,r,i,o){e.item=e.$parent.$parent.item,e.tableCell=t.$injector.instantiate(c,{scope:e,element:n,ctrl:i}),o((function(t,r){r.item=e.item,n.find(".transclude-container").append(t)}))}}return e.$inject=["$injector"],e}();r.module(a,[i.b]).directive("bbTableCell",["$injector",function(e){return e.instantiate(l)}])},DyQT:function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.loadingMoreItems</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsLoaded</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsFailedToLoad</span>\n  </div>\n</div>\n'},E01l:function(e,t){e.exports='<bb-modal class="notification group-attempt-access-control-dialog {{additionalClass}}"\n  modal-translate-options="modalTranslateOptions"\n  analytics-id-tag-prefix="components.directives.groupAttemptAccessControlDialog">\n\n  <div name="modal-contents">\n\n    <div class="queue">\n      <div class="owner user-tile">\n        <div>\n          <bb-avatar user="owner"></bb-avatar>\n          <bb-username user="owner"></bb-username>\n        </div>\n      </div>\n      <div class="user-tile queuer" ng-repeat="user in queuedUsers track by user.id" ng-class="\'queuer-\' + $index">\n        <div>\n          <bb-avatar user="user"></bb-avatar>\n          <bb-username user="user"></bb-username>\n        </div>\n      </div>\n    </div>\n\n    <p ng-bind-html="::modalStrings.instructions"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button class="button confirm-ok js-primary-button" ng-click="okAction()" ng-if="!hideOK" analytics-id="primary.ok.action.button">{{::modalStrings.ok}}</button>\n    <button class="button confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="!hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n</bb-modal>\n'},EN13:function(e,t){e.exports='<bb-modal class="notification js-non-file-error" \n          modal-title-key="components.directives.fileUpload.disallowNonFileUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowNonFileUploadError</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},Ediv:function(e,t){e.exports='\x3c!--\n  this #ftue-new div is copied from first-time-visit-directive.html.\n  it may need to move back up a level if/when the welcome template is made configurable.\n--\x3e\n<div id="ftue-new" class="base-ftue" ng-if="firstVisit">\n  <div id="ftue-new-1" class="ftue-new-slide current-view">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.welcome.title</h2>\n\n      <div>\n        <a href="javascript:void(0);" class="ftue-img ftue-1-button scroll-button" tabindex="0" analytics-id="welcome.welcome.welcomeIcon.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_Welcome.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.welcome.alt\'}"\n                                          ></a>\n      </div>\n      <p class="medium-up-padding" bb-translate>welcome.welcome.description</p>\n    </div>\n    <div class="slide-control">\n\n      <button class="button ftue-1-button icon round ftue-advance large scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.welcome.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-2">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.layers.title</h2>\n\n      <div>\n        <a id="ftue-new-2-img" href="javascript:void(0);" class="ftue-img ftue-2-button scroll-button" tabindex="0" analytics-id="welcome.welcome.neverLoseYourPlace.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_NeverLoseYourPlace.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.layers.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.layers.description</p>\n    </div>\n    <div class="slide-control">\n      <button class="button icon round ftue-advance large ftue-2-button scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.layers.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-3">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.safe.title</h2>\n\n      <div>\n        <a id="ftue-new-3-img" href="javascript:void(0);" class="ftue-img ftue-3-button" ng-click="welcome.goNextPage()" tabindex="0" analytics-id="welcome.welcome.goNextPage.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_FeelFree.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.safe.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.safe.description</p>\n\n    </div>\n    <div class="slide-control">\n      <button class="button round ftue-end large ftue-3-button" bb-translate ng-click="welcome.goNextPage()" analytics-id="welcome.safe.button">welcome.safe.button</button>\n    </div>\n  </div>\n</div>\n'},FBBZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"p",(function(){return w})),n.d(t,"h",(function(){return k}));var r=n("nsO7"),i=n("Q/M7"),o=n("5MwF"),s=["xplor-connector"];function a(e){return i.c(o.a.partnerCloudBasePath+e)}function c(e){var t=e.baseUrl+"/ultra/features/course/partner-tool/partner-tool-return-page.html";return a("/launch/lti?returnUrl="+encodeURIComponent(t)+"&uri_uri="+encodeURIComponent("ACTION:cloudProvisioning")+"&content_id="+encodeURIComponent(e.parentId||"")+"&window=false&disclaimer=true&provider_id=CLOUD1&uri_scheme=ACTION&custom_error_url="+encodeURIComponent(t)+"&action=cloudProvisioning&uri_id="+(new Date).getTime().toString()+"&course_id="+encodeURIComponent(e.courseId||"")+"&public=true&ignore_partner_settings=false&target=_self")}function l(e){var t="/content"+(e.displayInIframe?"/ultra":"")+"?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return e.parentId&&(t+="&content_id="+encodeURIComponent(e.parentId)),e.position&&(t+="&position="+encodeURIComponent(e.position)),e.mode&&(t+="&mode="+encodeURIComponent(e.mode)),a(t)}function u(e){return a("/launch/content?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&link_ref_id="+encodeURIComponent(e.linkRefId))}function d(e){var t="/content/return?provider_id="+encodeURIComponent(e.providerId)+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.contentId)+"&parentId="+encodeURIComponent(e.parentId)+"&position="+encodeURIComponent(e.position);return a(t+=e.itemIds?"&itemIds="+encodeURIComponent(e.itemIds):"&root=true")}function p(e){var t=e.baseUrl+"/webapps/blackboard/execute/blti/launchReturn";return a("/launch/lti?window=false&action=provisioning&ignore_partner_settings=false&uri_scheme=ACTION&target=_self&uri_id="+(new Date).getTime().toString()+"&uri_uri="+encodeURIComponent("ACTION:provisioning")+"&b2Uri="+encodeURIComponent("/webapps/partner-cloud/")+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.parentId||"")+"&provider_id="+encodeURIComponent(e.partnerId)+"&returnUrl="+encodeURIComponent(t)+"&custom_error_url="+encodeURIComponent(t))}function m(e){return a("/course/tools?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId))}function f(e){return a("/gradeLink/grade?outcomeDefinitionId="+encodeURIComponent(e.gradableItemId)+"&linkRefId="+encodeURIComponent(e.linkId)+"&course_id="+encodeURIComponent(e.courseId)+"&attempt_id="+encodeURIComponent(e.attemptId)+"&courseMembershipId="+encodeURIComponent(e.membershipId)+"&cancelGradeUrl")}function h(e){return a("/diagnostics/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function g(e){return a("/contentRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function v(e){return a("/gradeRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function b(e){return a("/course/roster/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function y(e){return e?e&&e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.name?e.toolProvider.toolProviderProfile.name:e&&e.portfolio&&e.portfolio.name?e.portfolio.name:e.providerId:""}function S(e,t){if(!e)return"";var n=t?e.iconUrl:e.associatedIconUrl;return n?i.l(n):""}function C(e){return e?(e.toolProvider&&e.toolProvider.toolProviderProfile&&(t=e.toolProvider.toolProviderProfile.description),t||""):"";var t}function w(e){return e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor&&r.includes(s,e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor.handle)||!1}function k(e){var t=[];return Array.prototype.push.apply(t,e.premierList),Array.prototype.push.apply(t,e.signatureList),Array.prototype.push.apply(t,e.otherList),t.forEach((function(e){e.childProviders&&Array.prototype.push.apply(t,e.childProviders)})),r.keyBy(t,"providerId")}},"FE+f":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.description.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("description",{url:"/description",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/description/course-description")}]},require:function(){return n.e(149).then(n.bind(null,"8WQs"))},pageTitle:"course.description.header"})}])},FHk9:function(e,t,n){"use strict";n.r(t),n.d(t,"EVENT_BBML_EDITOR_IS_UPDATED",(function(){return r})),n.d(t,"EVENT_BBML_EDITOR_FORCE_UPDATE",(function(){return i})),n.d(t,"EVENT_BBML_EDITOR_ID_GENERATED",(function(){return o})),n.d(t,"ReorderBlockEventInfo",(function(){return s}));var r="bbml-updated",i="bb-bbml-editor-force-bbml-update",o="bb-bbml-editor-id-generated",s=function(){}},FR7u:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));n("FwJ5");var r=n("wHJ2"),i="ultra.components.directives.clickScrollTo",o=function(){this.restrict="A",this.link=function(t,n,r){n.on("click",(function(){e(r.bbClickScrollTo).scrollintoview({duration:500})})),t.$on("$destroy",(function(){n.off()}))}};r.module(i,[]).directive("bbClickScrollTo",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("5iHu"))},Fvsw:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("5MwF"),a=n("nbDY"),c=n.n(a),l=n("Sa5G"),u=n("jhBu"),d=n("fYJU"),p=n("Qbdf"),m=n("emI2"),f=n("X455"),h=n("pjml"),g=n("eUpQ"),v="ultra.service.context",b="context",y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Administrator=new t("administrator"),t.NonStudent=new t("nonstudent"),t.Student=new t("student"),t.ClassicNonStudent=new t("classicnonstudent"),t.ClassicStudent=new t("classicstudent"),t}(c.a),S=function(){function e(e,t,n,r,o,s,a,c,u,d,p,m){this.$rootScope=e,this.$q=t,this.currentUser=n,this.EntitlementService=r,this.currentCourse=o,this.currentCourseMembership=s,this.preferenceService=a,this.BrandModel=c,this.SystemInfoModel=u,this.PrivacyPolicyModel=d,this.PredictFtueModel=p,this.ThemeModel=m,this.helpVariantOverride=null,this.predictInitialDefer=null,this.getHelpVariantDependencies=i.memoize((function(){return this.$q.all([this.EntitlementService.hasSystemEntitlement(l.C.ViewAdminTop),this.currentUser.userModel.memberships.$fetch({fields:"role,courseId"})])})),this.registerCourseContextDetection();this._course=new(function(){function e(){}return Object.defineProperty(e.prototype,"model",{get:function(){return o.course},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"membership",{get:function(){return s.courseMembership},enumerable:!0,configurable:!0}),e}())}return Object.defineProperty(e.prototype,"course",{get:function(){return{model:this.currentCourse.course,membership:this.currentCourseMembership.courseMembership}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"courseId",{get:function(){return this.currentCourse.courseId},set:function(e){this.currentCourse.load(e)},enumerable:!0,configurable:!0}),e.prototype.registerCourseContextDetection=function(){var e=this;this.$rootScope.$on(p.a,(function(t,n){e.courseId=n.id}))},e.prototype.overrideHelpVariant=function(e){this.helpVariantOverride=e},e.prototype.guessHelpVariant=function(){var e=this,t=[];if(this.helpVariantOverride){var n=this.helpVariantOverride;return this.helpVariantOverride=null,this.$q.when([n])}return this.course&&this.course.membership&&!this.course.membership.isStudentOrGuestMembership()&&t.push(this.course.model.isClassic()?y.ClassicNonStudent:y.NonStudent),this.getHelpVariantDependencies().then((function(n){var r=n[0],o=n[1];if(r&&t.push(y.Administrator),e.course&&e.course.model)r&&t.push(e.course.model.isClassic()?y.ClassicNonStudent:y.NonStudent);else{var s=y.Student;o.some((function(e){return!e.isStudentOrGuestMembership()}))&&(s=y.NonStudent),t.push(s)}return 0===t.length&&t.push(e.course&&e.course.model&&e.course.model.isClassic()?y.ClassicStudent:y.Student),i.uniq(t)}))},e.prototype.getSystemInfo=function(){return this.systemInfo||(this.systemInfo=window.__initialContext&&window.__initialContext.systemInfo?this.SystemInfoModel.$buildRaw(window.__initialContext.systemInfo):this.SystemInfoModel.$new().$fetch().$suppressErrorDialog()),this.systemInfo},e.prototype.getTheme=function(){return this.theme||(this.theme=this.ThemeModel.$new({themeId:this.getBrand().themeId}).$fetch()),this.theme},e.prototype.getServerTime=function(){return g.a.getServerTime()},e.prototype.getPrivacyPolicyUrls=function(){return this.privacyPolicy||(this.privacyPolicy=this.PrivacyPolicyModel.$new().$fetch().$suppressErrorDialog()),this.privacyPolicy},e.prototype.getCourseId=function(){return this.currentCourse.courseId},e.prototype.userHasGradebookModificationEntitlement=function(){var e=this.getCourseId();return e?this.EntitlementService.hasCourseEntitlement(l.v.ModifyGradebook,e).then((function(e){return e})):this.$q.when(!1)},e.prototype.getBrand=function(){return this.brand||(this.brand=window.__initialContext&&window.__initialContext.brand?this.BrandModel.$buildRaw(window.__initialContext.brand):this.BrandModel.getCurrent()),this.brand},e.prototype.getUiVersion=function(){return window.__initialContext&&window.__initialContext.uiVersion||""},e.prototype.getLandingPage=function(){var e=this;return this.currentUser.userModel.$asPromise().then((function(t){return t.isGuest()?e.convertLandingPageToRoute():e.getPreference("ultraui.first.time.welcome.welcome.visited").then((function(){return e.convertLandingPageToRoute()}),(function(t){return 404===t.$response.status?s.a.features.devtools_disableFtue?e.convertLandingPageToRoute():"welcome":e.convertLandingPageToRoute()}))}))},e.prototype.convertLandingPageToRoute=function(){return this.currentUser.userModel.$asPromise().then((function(e){switch(e.landingPage){case"ActivityStream":return"base.recentActivity";case"InstitutionPage":return"base.institution-page";case"CourseList":return"base.courses";default:return"base.recentActivity"}}))},e.prototype.getPreference=function(e,t){return this.preferenceService.getPreference(e,t)},e.prototype.getPredictPreference=function(e,t){var n=this,r=this.$q.defer();if(!Object.keys(this.preferenceService.preferences).some((function(e){return e.indexOf(".predict.")>0}))){if(this.predictInitialDefer)return this.predictInitialDefer.promise.then((function(){r.resolve(n.preferenceService.preferences[e])})),r.promise;this.predictInitialDefer=r,this.PredictFtueModel.getFtues().then((function(i){if(i){var o=null;i.forEach((function(t){n.preferenceService.preferences[t.key]=t,e===t.key&&(o=t)})),o?r.resolve(o):(n.preferenceService._addPreferenceToCache(e,t),r.resolve(n.preferenceService.preferences[e]))}else{if(void 0===t)return void r.reject(i);n.preferenceService._addPreferenceToCache(e,t),r.resolve(n.preferenceService.preferences[e])}}),(function(e){r.reject(e)}))}else Object.prototype.hasOwnProperty.call(this.preferenceService.preferences,e)||this.preferenceService._addPreferenceToCache(e,t),r.resolve(this.preferenceService.preferences[e]);return r.promise},e.prototype.getUltraConversionReportId=function(){return this.course.model.ultraConversionReportId},e.prototype.setPreference=function(e,t,n){return this.preferenceService.setPreference(e,t,n)},e.prototype.setPredictPreference=function(e,t,n){if(e.length>m.a)throw new Error("Preference key is too long!");return this.preferenceService._addPreferenceToCache(e,t,n),this.PredictFtueModel.setFtue(e)},e.$inject=["$rootScope","$q",d.b,u.b,p.e,f.d,m.c,h.g.serviceName,h.vb.serviceName,h.nb.serviceName,h.fb.serviceName,h.Ob.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(S);o.module(v,[h.R,d.a,u.a,p.b,f.a,m.b]).service(b,S)},GGEJ:function(e,t){e.exports='<div bb-load-bundle="components/directives/collab-session-icon" class="icon-shadow" ng-class="{\'is-running\': $ctrl.runningSessionFlag}">\n    <bb-svg-icon size="small" icon="collab" role="presentation" aria-hidden="true" status="active"></bb-svg-icon>\n    <bb-svg-icon size="medium" icon="collab-session" role="presentation" aria-hidden="true"></bb-svg-icon>\n</div>'},GNXM:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.announcement.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("announcement-list",{url:"/announcement-list",require:function(){return Promise.all([n.e(20),n.e(709)]).then(n.bind(null,"pp2P"))},pageTitle:"course.outline.announcements.title",peekStates:["announcement-detail"],panelClass:"full"}).peekState("announcement-detail",{url:"/announcement-detail?courseId&announcementId&mode",require:function(){return Promise.all([n.e(20),n.e(665)]).then(n.bind(null,"Zozd"))},pageTitle:"course.outline.announcements.title",panelClass:"full"})}])},GbAM:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("yC9S"),o=n("hlUp"),s="ultra.components.directives.accessibility.liveRegion",a="aria_live_polite",c="aria_live_assertive",l=function(){function t(t,n,r){var o=this;this.scope=t,this.element=n,this.attrs=r;i.b.OnRootScope(t,a,(function(t,n){var r=e("#aria-live-polite-region-1"),i=e("#aria-live-polite-region-2");""===r.text()?o.switchRegion(i,r,n):o.switchRegion(r,i,n)})),i.b.OnRootScope(t,c,(function(t,n){var r=e("#aria-live-assertive-region-1"),i=e("#aria-live-assertive-region-2");""===r.text()?o.switchRegion(i,r,n):o.switchRegion(r,i,n)}))}return t.prototype.switchRegion=function(e,t,n){e.empty(),e.attr("aria-hidden","true"),t.text(n),t.attr("aria-hidden","false")},t.$inject=["scope","element","attrs"],t}(),u=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="A",this.link=function(e,t,r){t.append(n.$compile(o)(e)),e.liveRegion=n.$injector.instantiate(l,{scope:e,element:t,attrs:r})}}return e.$inject=["$injector","$compile"],e}();r.module(s,[]).directive("bbLiveRegion",["$injector",function(e){return e.instantiate(u)}])}).call(this,n("5iHu"))},GiEq:function(e,t,n){},"H+SH":function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <bb-translate>course.conversion.statusBar.page-out-of-date</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(\'refresh\')" class="button js-primary-button" analytics-id="course.outline.previewCourse.alert.ok.button">\n    <span bb-translate="global.ok"></span>\n  </button>\n</bb-modal>'},H8CZ:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",i="webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend";function o(e,t){a(e,t,r)}function s(e,t){a(e,t,i)}function a(e,t,n){if(!window.Modernizr.csstransitions)return t({data:{noTransitions:!0}});var r=function(i){var o;i.data||(i.data={});try{o=t(i)}finally{void 0===o&&e.off(n,r)}};e.on(n,r)}},H9Wo:function(e,t,n){},HAJP:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("D57K"),i="external.script.loader",o="externalScriptLoader",s=function(){function e(e){this.$q=e,this.scripts={}}return e.prototype._createScriptElement=function(){return document.createElement("script")},e.prototype._appendScriptElement=function(e){document.head.appendChild(e)},e.prototype._getWindowProperty=function(e){return window[e]},e.prototype.getScript=function(e,t){if(void 0===t&&(t={}),this.scripts[e])return this.scripts[e];var n=this.$q.defer();try{this.scripts[e]=n.promise;var r=(e.indexOf("?")>=0?"&":"?")+"_"+Date.now(),i=this._createScriptElement();if(i.type="text/javascript",i.src=e+r,t.attributes)for(var o=0,s=Object.keys(t.attributes);o<s.length;o++){var a=s[o];i.setAttribute(a,t.attributes[a])}var c=this;i.onload=function(){t.exports?n.resolve(c._getWindowProperty(t.exports)):n.resolve()},i.onerror=function(){n.reject(new Error("error loading script: "+e))},this._appendScriptElement(i)}catch(e){n.reject(e)}return n.promise},e.$inject=["$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(s);angular.module(i,[]).service(o,s)},HDxW:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("wHJ2"),i=n("5MwF"),o=n("k9iv"),s=n("Q/M7"),a=n("JfV0"),c="ultra.service.errorHandler",l="errorHandler",u=function(e){return function(){var t,n=e.connect((function(e){return{}}),a.actions.app)((function(e,n){e,t=n}));try{t&&t.clearError&&t.clearError()}finally{n()}}},d=function(e,t,n,r,o){return function(a){if(a&&a.$response){if(401===a.$response.status){var c=e.get("$location").url(),l=c?"/?new_loc="+encodeURIComponent(i.a.basePath+c):"/";t.location.href=s.c(l)}403===a.$response.status?o.handleApiError(a.$response,(function(){n.$broadcast("no-permission-course"),u(r)()})):o.handleApiError(a.$response,u(r))}}};r.module(c,[]).factory(l,["$injector",function(e){var t=function(t){return e.invoke(["$injector","$window","$rootScope","$ngRedux",o.c,d])(t)};return{handle:t,subscribe:function(){return e.invoke(["$ngRedux",function(e){return function(e){return function(t){var n;return e.subscribe((function(){var r=e.getState();if(r.app.error&&n!==r.app.error){var i={status:r.app.error.status,data:r.app.error.data||{}};t({$response:i})}n=r.app.error}))}}(e)(t)}])}}}])},Hbkz:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("JzsJ");var r=n("wHJ2"),i=n("0JpG"),o=n("bF8R"),s=n("g7Mf"),a=n("pjml"),c=n("TnpK"),l=n("Qbdf"),u="ultra.course.content.conversations.routes";r.module(u,[i.moduleName,c.b,l.b]).config([c.c,l.c,function(e,t){var r;e.peekState("conversations",{url:"/conversations/:contentId/:courseId?groupId",resolve:(r={},r[l.d]=t.resolve,r.content=[l.d,o.b,c.d,a.o.serviceName,function(e,t,n,r){return r.$new(e.id).contents.$find(n.nextParams.contentId,{expand:"assignedGroups"}).$asPromise()}],r.translations=["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("common/user-common")])}],r.currentCourseMemberships="^courseMembershipsLoader",r.discussionInit=[s.c,"currentCourseMemberships",function(e,t){return e.init(t).then((function(){return e.loadHardContent(!0)}))}],r),onExit:[s.c,function(e){e.destroy()}],require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(10),n.e(1),n.e(2),n.e(3),n.e(551)]).then(n.bind(null,"FFqm"))},pageTitle:"course.content.classConversations",peekViewName:"conversations-peek",panelClass:"full",allowChildPeekStates:!0,peekStates:["message","discussion-participants"]})}])},HtY7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("lEL+"),o="ultra.components.directives.click",s=0,a=function(){function e(e){var t=this;this.timeout=e,this.restrict="A",this.link=function(e,n,r){void 0===r.bbClickTimeout&&(r.bbClickTimeout=s);var i=0,o=function(){var n;"true"===r.bbClickOnceDisable?n=e.$eval(r.bbClick):(i+=1)<=1&&(n=e.$eval(r.bbClick)),null!=n&&void 0!==n&&n.finally((function(){t.timeout((function(){i=0}),e,r.bbClickTimeout)}))};e.$on("$destroy",(function(){n.off("click",o)})),n.on("click",o)}}return e.$inject=[i.b],e}();r.module(o,[i.a]).directive("bbClick",["$injector",function(e){return e.instantiate(a)}])},I22j:function(e,t,n){},IVCC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s=n("w9Zy"),a=n("pjml"),c=n("fYJU"),l=n("TnpK"),u=n("ZBYA"),d=n("aohr"),p="ultra.predict.routes";i.module(p,[o.moduleName,s.d,a.R,c.a,l.b,u.a]).config([l.c,function(e){var t;e.baseState("predictBase",{abstract:!0,require:function(){return Promise.all([n.e(29),n.e(659)]).then(n.bind(null,"xID3"))},resolve:(t=["components/directives/telemetry/telemetry","components/services/telemetry-chart","features/predict/predict","features/locations","features/course/course","global"],{user:[c.b,function(e){return e.userModel.$asPromise()}],localize:["$q","$rootScope","user","$window",o.serviceName,u.b,function(e,n,i,s,a,c){c.getInstitutionPreference(d.a.OverrideLanguagePack).then((function(c){var l=c.value||i.locale||"en",u=s.location.href.match(o.localeQuerystringRegex);u&&(l=u[1]),l=a.validateLocale(l)?l:"en",a.setUserLocale(l);var d=Object(r.__spreadArrays)([a.setLocale(n,l)],t.map((function(e){return a.loadBundle(e)})));return e.all(d)}))}]})}).baseState("predictBase.predictAdvisorStudents",{url:"/predict/advisor/students?customFields&resetFTUE",require:function(){return Promise.all([n.e(94),n.e(22),n.e(34),n.e(90),n.e(82),n.e(131),n.e(559)]).then(n.bind(null,"NKO4"))},pageTitle:"predict.advisor.title",peekStates:["predictAdvisorStudentsFilter","predictMessagingPanel","predictAdvisorStudentProfilePanel","predictCourseStudentPanel"]}).baseState("predictBase.predictCourseBase",{url:"/predict/courses/:courseId",require:function(){return Promise.all([n.e(21),n.e(22),n.e(129),n.e(660)]).then(n.bind(null,"j0gv"))},pageTitle:"predict.course.title"}).baseState("predictBase.predictCourseStudentBase",{url:"/predict/instructor/students/:studentId/course/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(22),n.e(25),n.e(34),n.e(75),n.e(661)]).then(n.bind(null,"PPqB"))},peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentProfilePanel",{url:"/profile/:studentId",require:function(){return Promise.all([n.e(0),n.e(8),n.e(22),n.e(34),n.e(82),n.e(130),n.e(621)]).then(n.bind(null,"W7NY"))},panelClass:"full",peekStates:["predictMessagingPanel","predictCourseStudentPanel","predictFavoritesPanel","predictAdvisorStudentProfilePanel.course-performance","predictAdvisorStudentProfilePanel.advisor-notes","predictAdvisorStudentProfilePanel.interests"],pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.course-performance",{url:"/outline",views:{"student-details-tabs-content@":{require:function(){return Promise.all([n.e(22),n.e(597)]).then(n.bind(null,"fQnU"))}}},peekStates:["predictCourseStudentPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.advisor-notes",{url:"/notes-contributors",views:{"student-details-tabs-content@":{require:function(){return Promise.all([n.e(0),n.e(8),n.e(22),n.e(34),n.e(82),n.e(130),n.e(708)]).then(n.bind(null,"kgDa"))}}},peekStates:["predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.interests",{url:"/interests",views:{"student-details-tabs-content@":{require:function(){return n.e(590).then(n.bind(null,"clqd"))}}},peekStates:["predictFavoritesPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictCourseStudentPanel",{url:"/courses/:courseId/students/:studentId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(22),n.e(25),n.e(34),n.e(75),n.e(673)]).then(n.bind(null,"Wwzz"))},panelClass:"full",peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentsFilter",{url:"/filter",require:function(){return Promise.all([n.e(22),n.e(131),n.e(682)]).then(n.bind(null,"TRcT"))},panelClass:"peek",pageTitle:"predict.advisor.title"}).peekState("predictMessagingPanel",{url:"/messagingPanel?messageStudentId&messageCourseId&messageType&messageLaunchOrigin",require:function(){return Promise.all([n.e(22),n.e(572)]).then(n.bind(null,"G6j8"))},panelClass:"peek",pageTitle:"predict.messagingPanel.title"}).peekState("predictFavoritesPanel",{url:"/favorites/:favoriteId?favoriteCategory?city&state&region&country",require:function(){return n.e(620).then(n.bind(null,"pI+d"))},panelClass:"peek",pageTitle:"predict.favoritesPanel.title"})}])},IVtk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l}));var r,i,o=n("Q/M7"),s=n("mxgC");function a(e){var t=e.nextParams,n=t.action,r=t.courseId,o=t.contentId,s=t.attemptId;switch(n){case i.OpenDocument:c("ultra/courses/"+r+"/outline/edit/document/"+o+"?courseId="+r);break;case i.OpenAttempt:c("ultra/courses/"+r+"/outline/assessment/"+o+"/overview/attempt/"+s+"?courseId="+r);break;case i.ReviewAttempt:c("ultra/courses/"+r+"/outline/assessment/"+o+"/overview/attempt/"+s+"/review?courseId="+r);break;case i.ReviewFeedback:c("ultra/courses/"+r+"/outline/assessment/"+o+"/overview/attempt/"+s+"/review/feedback?courseId="+r);break;default:e.go("base.not-found")}}function c(e){var t=o.c(e);o.p(t)}function l(e,t){var n,i;if(Object(s.d)())try{var o=e.name&&e.name.split(".peek.").pop(),a=t.name&&t.name.split(".peek.").pop(),c=o&&u((n={},n[r.QuestionGoalAlignmentForStudent]=s.b.AttemptGoalAlignmentOpened,n[r.RubricEvaluation]=s.b.AttemptRubricOpened,n[r.RubricView]=s.b.AttemptRubricOpened,n[r.AssessmentSubmissionFeedback]=s.b.AttemptFeedbackOpened,n))[o]||a&&u((i={},i[r.QuestionGoalAlignmentForStudent]=s.b.AttemptGoalAlignmentClosed,i[r.RubricEvaluation]=s.b.AttemptRubricClosed,i[r.RubricView]=s.b.AttemptRubricClosed,i[r.AssessmentSubmissionFeedback]=s.b.AttemptFeedbackClosed,i))[a];c&&c()}catch(e){console.error(e)}}function u(e){return Object.keys(e).reduce((function(t,n){return t[n]=function(){Object(s.f)({type:e[n],status:s.a.Success})},t}),{})}!function(e){e.QuestionGoalAlignmentForStudent="question-goal-alignment-for-student",e.AssessmentSubmissionFeedback="assessment-submission-feedback",e.RubricEvaluation="rubric-evaluation",e.RubricView="rubric-view"}(r||(r={})),function(e){e.OpenAttempt="OPEN_ATTEMPT",e.OpenDocument="OPEN_DOCUMENT",e.ReviewAttempt="REVIEW_ATTEMPT",e.ReviewFeedback="REVIEW_FEEDBACK"}(i||(i={}))},Iftj:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return l})),n.d(t,"serviceName",(function(){return u})),n.d(t,"ScaleType",(function(){return d}));var r=n("D57K"),i=(n("QLzv"),n("nbDY")),o=n.n(i),s=n("yCC5"),a=n("Rjd/"),c=n("nkTj"),l="ultra.components.models.grade.gradeSchema",u=s.jb,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Score=new t("SCORE"),t.Percent=new t("PERCENT"),t.Text=new t("TEXT"),t.Complete=new t("COMPLETE"),t.Tabular=new t("TABULAR"),t}(o.a);a.a.factory(u,["restmod",c.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}},$extend:{Record:{getPossiblePoints:function(){if(d.Score.isEqualTo(this.scaleType))throw new Error("Possible points must be entered by the user for schemas with a scale type of Score");return 100}}}})}])},"Is+C":function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("4nF1"),c=n("X455"),l=n("12mu"),u=n("TnpK"),d=n("o5Lu"),p=n("8jzW"),m=n("Sa5G"),f=n("Q/M7"),h=n("fYJU"),g="ultra.components.services.scorm",v="scorm",b="geolocation *; microphone *; camera *; midi *; encrypted-media *",y=function(){function e(e,t,n,r,i,o,s,a,c,l,u){this.$q=e,this.$rootScope=t,this.$window=n,this.cacheFactory=r,this.contextCourseMembership=i,this.modalService=o,this.ultraState=s,this.gradeService=a,this.scoreProviderHelper=c,this.CourseModel=l,this.contextUser=u,this.scormAvailabilityCache={}}return e.prototype.isScormAvailable=function(e){var t=this,n=this.scormAvailabilityCache[e];return n?this.$q.when(n.toolEnabledSetting.isAvailable):this.CourseModel.$new(e).contentHandlers.$find(m.g.RusticiScorm.toString()).$allow([403]).$asPromise().then((function(n){return(t.scormAvailabilityCache[e]=n).toolEnabledSetting.isAvailable}))},e.prototype.scormLaunch=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,s,a,c;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=this.$q.defer(),[4,this.$q.all([this.getContent(e.courseId,e.content,e.contentId),e.showPreLaunchPanel?this.getMembership(e.courseId):null])];case 1:return n=r.sent(),s=n[0],a=n[1],e.showPreLaunchPanel&&this.isGradable(s)?s.canEdit()||this.isInstructorInCourse(a)?(c=o.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(m.B.Scorm,{courseId:e.courseId,contentId:e.contentId},p.a.GenerateStateParams)),this.ultraState.goPeekState(c.state,c.args).then((function(){t.resolve()})).catch((function(e){t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})}))):this.isStudentInCourse(a)&&this.ultraState.goPeekState("scorm-overview.student",{courseId:s.courseId,contentId:s.id}).then((function(){t.resolve()})).catch((function(e){t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})):this.launchScormLink(i.merge(e,{content:s}),t),[2,t.promise]}}))}))},e.prototype.launch=function(e,t,n,r){void 0===r&&(r=!1),e=f.c(e),e=f.a(e,"from_ultra","true"),r?this.$window.open(e):this.ultraState.goPeekState("scorm-launch-frame",{toolHref:e,courseId:t,contentId:n})},e.prototype.launchScormLink=function(e,t){var n;e.content&&(n=this.getLaunchLinkFromContent(e.content)),n&&(this.determineLaunchTarget(i.merge(e,{launchLink:n})),t.resolve())},e.prototype.determineLaunchTarget=function(e){e.content&&e.content.isScorm()&&this.launch(e.launchLink,e.content.courseId,e.content.id,e.content.launchInNewWindow)},e.prototype.getLaunchLinkFromContent=function(e){var t=e.contentDetail&&e.contentDetail[e.contentHandler.toString()];return t&&t.launchUrl||null},e.prototype.scormEditColumn=function(e){var t=this;this.getContent(e.courseId,e.ui.content,e.contentId).then((function(n){e.ui.content=n;var r=a.a.create(n).getEditState();t.ultraState.goPeekState(r,{contentId:n.id})}))},e.prototype.isStudentInCourse=function(e){return e.isStudentMembership()},e.prototype.isInstructorInCourse=function(e){return e&&e.isActAsInstructorMembership()},e.prototype.isGradable=function(e){return!!e.getScormGradebookItems().length},e.prototype.getContent=function(e,t,n){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():this.$q.when(null)},e.prototype.getMembership=function(e){return this.contextCourseMembership.courseMembership?this.$q.when(this.contextCourseMembership.courseMembership):this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()},e.prototype.loadScormGrade=function(e){var t=this,n=e.courseId,r=e.column,i=e.grade;return(i?i.$asPromise&&i.$asPromise()||this.$q.when(i):this.gradeService.loadGrade({gradeQueryParams:{},courseId:n,column:r,userId:this.contextUser.userId},!1)).then((function(e){return e&&e.attempts.$fetch({fields:"id,status,attemptDate"}).$asPromise().then((function(e){return e.length&&e.reduce((function(e,t){return e.attemptDate>t.attemptDate?e:t}))})).then((function(e){return e&&e.id})).then((function(r){if(!r)return e;var i=t.CourseModel.$new(n),o={expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",attemptId:r};return t.gradeService.loadAttempt(e,i,o)}))}))},e.$inject=["$q","$rootScope","$window","DSCacheFactory",c.d,l.b,u.d,d.g,p.c,s.o.serviceName,h.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(y);o.module(g,[c.a,u.b,p.b,d.f,s.R]).service(v,y).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},IyP6:function(e,t,n){},J0Qq:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.directives.bbDate",a=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var s,a=function(n){var s=t.bbLocalize.getFormatEnum(o.ILocaleDateFormat,i.format)||o.ILocaleDateFormat.Full,a=function(e){"bb-date"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)};null==n?a(""):t.bbLocalize.formatDate(n,s,e).then(a)},c=function(n){return n?new Date(t.$parse(n)(e)):null};"true"===i.autoUpdate?i.$observe("bbDate",(function(){s=c(i.bbDate),a(s)})):(s=t.$parse(n)(e)||c(i.bbDate),a(s))}},e.$inject=["$parse",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(a);i.module(s,[o.moduleName]).directive("bbDate",["$injector",function(e){return e.instantiate(a)}])},"JRp+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.conversion.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("conversion-analysis",{url:"/conversionAnalysis",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},require:function(){return Promise.all([n.e(78),n.e(700)]).then(n.bind(null,"0y0M"))},pageTitle:"ultra.convert.analysis.pageTitle"}).peekState("conversion-risk-analysis",{url:"/conversionRiskAnalysis",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},require:[function(){return Promise.all([n.e(133),n.e(699)]).then(n.bind(null,"VtI1"))},function(){return Promise.all([n.e(133),n.e(692)]).then(n.bind(null,"ubcj"))}],pageTitle:"ultra.convert.analysis.pageTitle"})}])},JURN:function(e,t,n){},JXhc:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s=n("hlSw"),a=n("TnpK"),c=n("3bn4"),l="ultra.course.content.assessment.question-goal-alignment",u="question-goal-alignment",d="question-goal-alignment-for-student",p=["course","goal-alignment","goal"],m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="/goalAlignment/:questionId/:questionIndex",t.panelClass="peek assessment-question-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentContent","currentCourse",o.serviceName,a.d,"$injector",function(t,n,r,i,o,a){return void 0!==n&&void 0===n.id?t.when([]):t.when(null).then((function(){if(void 0===n)return a.invoke(s.a.currentContent,null,{currentCourse:r,translations:{}}).then((function(e){n=e}))})).then((function(){return t.all([r.assessments.$buildRaw({id:n.getDeployedAssessment().assessment.id}).questions.$find(o.nextParams.questionId,{expand:"alignedGoals"}).$asPromise(),i.loadBundle("features/"+p.join("/"))]).then((function(t){var n=t[0];return e.setupGoalAlignableContent(n,i,o)}))}))}]},t.prototype.getPeekStateName=function(){return u},t.prototype.getOverrideSubTitle=function(){return[o.serviceName,a.d,function(e,t){return e.translateSync({locale:null,key:"components.directives.assessment-question.question-title",params:{index:t.nextParams.questionIndex},noWrap:!0})}]},t.prototype.setupGoalAlignableContent=function(e,t,n){return[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:p.join(".")+".goalsAlignedWithThisQuestion"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals:function(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map((function(t){return t.content=e,t}))}]},t.$inject=["$injector","$q"],t}(c.a),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentCourse","contentData",o.serviceName,a.d,function(t,n,r,o,s){var a=t.when(null);return r.courseContent.isGroupContent&&r.groupAttempt?a=n.gradebook.groupAttempts.$find(r.groupAttempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise():!r.courseContent.isGroupContent&&r.attempt&&(a=n.gradebook.attempts.$find(r.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),t.all([a,o.loadBundle("features/"+p.join("/")),o.loadBundle("components/directives/assessment/assessment-question")]).then((function(t){var n=t[0],a={};if(n){var c=n.getToolAttemptDetailItem(r.gradingColumn.scoreProviderHandle);(c&&c.questionAttempts||[]).forEach((function(e){e.question&&e.question.id===s.nextParams.questionId&&(a=i.extend(e.question,{getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+e.question.id},isCurrentUserEligibleToAlignGoals:function(){return!1}}))}))}return e.setupGoalAlignableContent(a,o,s)}))}]},t.prototype.getPeekStateName=function(){return d},t}(m);i.module(l,[a.b,o.moduleName]).config([a.c,function(e){[new m,new f].forEach((function(t){e.peekState(t.getPeekStateName(),t)}))}])},JbSi:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-medium-collab-session",use:"icon-medium-collab-session-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab-session"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},JrDC:function(e,t,n){"use strict";function r(e,t){if(t instanceof e)return t.$pk;if(!t.$scope||"object"!=typeof t.$scope)throw new Error("model_utility.findModelPkInScope could not find $scope object on "+t);return r(e,t.$scope)}n.d(t,"a",(function(){return r}))},"K/D1":function(e,t,n){"use strict";var r=n("D57K"),i=n("nsO7"),o=n("uC9d"),s=["DELETE","PUT","POST","PATCH","JSONP"],a="_\\d+_\\d+",c=function(){this.cacheTimes={DO_NOT_CACHE:0,INSTANT:500,SHORT:15e3,MEDIUM:6e4,LONG:6e5,PERPETUAL:1/0},this.rules=[{url:"calendars",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"cloudstorages",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:"courses/"+a,methods:["GET"],duration:this.cacheTimes.LONG},{url:"courses/"+a,methods:s,onUpdate:function(e,t){t(new RegExp("users/.*"))}},{url:"courses/"+a+"/contents/"+a,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/contents/ROOT/children",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/convertToUltra/conversionStatus",methods:["GET"],duration:this.cacheTimes.INSTANT,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/convertToUltra"),i=n.match(r);t(new RegExp("courses/"+i[1]))}},{url:"courses/"+a+"/tools",methods:["GET"],duration:this.cacheTimes.LONG},{url:"courses/"+a+"/assessments/"+a+"/questions",methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:"courses/"+a+"/discussionboards/default/forums/"+a+"/messages/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/discussionboards/default/forums/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/discussionboards/default/forums/"+i[2]+"/messages"))}},{url:"courses/"+a+"/gradebook/attempts/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/.*"))}},{url:"courses/"+a+"/gradebook/attempts/"+a+"/assessment/answers/"+a+"/grades",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/.*"))}},{url:"courses/"+a+"/gradebook/columns/"+a,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/grades",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/grades/"+a+"/attempts",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/.+",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook/columns/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/columns/"+i[2]+"/.*"))}},{url:"courses/"+a+"/gradebook/columns/"+a+"/summary",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/grades/bulkView",methods:["GET"],duration:this.cacheTimes.DO_NOT_CACHE},{url:"courses/"+a+"/gradebook/groupAttempts/"+a+"/activities",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook/groupAttempts/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/groupAttempts/"+i[2]+"/.*")),t(new RegExp("courses/"+i[1]+"/gradebook/columns/.*"))}},{url:"courses/"+a+"/memberships/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/memberships"),i=n.match(r);t(new RegExp("courses/"+i[1]+".*")),t(new RegExp("users/"+a+"/memberships"))}},{url:"courses/"+a+"/memberships",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"courses/"+a+"/users/"+a,methods:["GET"],duration:this.cacheTimes.LONG},{url:"users/"+a,methods:s,onUpdate:function(e,t){t(new RegExp("users/.*"))}},{url:"users/(?:me|"+a+")",methods:["GET"],duration:this.cacheTimes.LONG},{url:"users/"+a+"/memberships",methods:["GET"],duration:this.cacheTimes.LONG},{url:"terms",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:".+",methods:["GET"],duration:this.cacheTimes.INSTANT}]};function l(e){return void 0===e&&(e=""),Array.isArray(e)?e.sort().join(","):e.split(",").sort().join(",")}var u=function(){this.$get=[function(){return{}}]},d=function(){function e(e){var t=this;this.cacheRules=e,this.cachingEnabled=!0,this.cachedExpandedRequests=new Map,this.queuedRequests=new Map,this.requestCache=new Map,this.disableCaching=function(){t.cachingEnabled=!1},this.$get=["$q","$log",o.c,function(e,t,n){var r=this;n.listen((function(e){switch(e.type){case"clear":r.removeCacheEntries(e.pattern||".*")}}));return{request:function(n){if(!r.cachingEnabled||"GET"!==n.method||!r.isApiUrl(n.url)||n.cache)return n;var i=r.handleRequest(n);return i.url.match(/^blob/)?i:function(n){var i=r.makeKeyFromRequest(n);if(!r.queuedRequests.has(i)){var o=e.defer();return o.promise.finally((function(){r.queuedRequests.delete(i)})),r.queuedRequests.set(i,{pendingRequestConfig:o}),e.resolve(n)}return t.info("Easing "+i),r.queuedRequests.get(i).pendingRequestConfig.promise}(i).then((function(e){return e}))},requestError:function(n){return t.error("requestError: ",n),e.reject(n)},response:function(e){if(e.config.url.match(/^blob/)){var t=e.config.headers;return e.config.url=t.originalUrl,e.config.params=JSON.parse(t.originalParams),e}return r.cachingEnabled&&"GET"===e.config.method&&r.isApiUrl(e.config.url)&&!e.config.cache?r.handleResponse(e):e},responseError:function(t){if(!t||!t.config)return e.reject(t);var n=r.makeKeyFromResponse(t);return r.queuedRequests.has(n)&&r.queuedRequests.get(n).pendingRequestConfig.reject(t.data),e.reject(t)}}}],this.removeCacheEntries=function(e){t.requestCache.forEach((function(n,r){(e instanceof RegExp?e:new RegExp(e+"$")).test(n.baseUrl)&&(t.requestCache.delete(r),t.cachedExpandedRequests.delete(n.baseUrl),t.queuedRequests.has(r)&&(t.queuedRequests.get(r).pendingRequestConfig.reject("Canceled Easing: "+r),t.queuedRequests.delete(r)),URL.revokeObjectURL(n.documentUrl))}))},this.requestCachingRules=e.rules,setInterval((function(){var e=(new Date).getTime();t.requestCache.forEach((function(n){e>n.expires&&t.removeCacheEntries(n.baseUrl)}))}),this.cacheRules.cacheTimes.MEDIUM)}return e.prototype.getRule=function(e,t){return this.requestCachingRules.find((function(n){var r=n.urlRegex?n.urlRegex:new RegExp(n.url+"$","i");return n.methods.indexOf(t.toUpperCase())>-1&&r.test(e)}))},e.prototype.handleRequest=function(e){return this.resolveCachedEntry(e)||e},e.prototype.handleResponse=function(e){if(!this.isApiUrl(e.config.url)||e.config.url.match(/^blob/))return e;var t=e.config.method.toUpperCase(),n=e.config.url,i=this.getRule(n,t),o=this.makeKeyFromResponse(e);return i&&!this.requestCache.has(o)&&this.insertCacheEntry(Object(r.__assign)({},e),i.duration),this.resolveEasing(e),e},e.prototype.getCacheEntry=function(e){var t,n=this.makeKeyFromRequest(e),r=this.lookupExpandedCacheEntry(e);if(r?t=r:this.requestCache.has(n)&&(t=this.requestCache.get(n)),t){if((new Date).getTime()<t.expires)return t;this.removeCacheEntries(t.baseUrl)}return{}},e.prototype.getCleanUrl=function(e){return e.slice(e.indexOf("/learn/api/v1")+"/learn/api/v1".length+1)},e.prototype.insertCacheEntry=function(e,t){var n=this.makeKeyFromResponse(e),i=e.config.url,o={documentUrl:URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"})),baseUrl:i,expires:t+(new Date).getTime()};if(this.requestCache.set(n,o),e.config.params&&e.config.params.expand){var s=e.config.params.expand;if(this.cachedExpandedRequests.has(i)){var a=this.cachedExpandedRequests.get(i);this.cachedExpandedRequests.set(i,Object(r.__spreadArrays)(a,[{cacheKey:n,expand:s}]))}else this.cachedExpandedRequests.set(i,[{cacheKey:n,expand:s}])}},e.prototype.isApiUrl=function(e){return e.indexOf("/learn/api/v1")>-1},e.prototype.lookupExpandedCacheEntry=function(e){var t=e.url,n=e.params;if(n&&n.expand&&this.cachedExpandedRequests.has(t)){var r=this.cachedExpandedRequests.get(t).find((function(e){var t=n.expand.split(","),r=e.expand.split(",");return!i.difference(t,r).length}));if(r)return this.requestCache.get(r.cacheKey)}},e.prototype.makeKeyFromRequest=function(e){var t=this.getCleanUrl(e.url);e.params=e.params||{};var n=e.params,i=n.fields,o=n.expand,s=Object(r.__rest)(n,["fields","expand"]),a=l(i),c={url:t,expand:l(o),fields:a,rest:s};return JSON.stringify(c)},e.prototype.makeKeyFromResponse=function(e){return this.makeKeyFromRequest(e.config)},e.prototype.resolveCachedEntry=function(e){if(e.url.match(/^blob/))return e;var t=this.getCacheEntry(e);return t&&t.documentUrl?Object(r.__assign)(Object(r.__assign)({},e),{url:t.documentUrl,params:{},headers:{originalUrl:e.url,originalParams:JSON.stringify(e.params)}}):e},e.prototype.resolveEasing=function(e){var t=this.makeKeyFromResponse(e),n=this.queuedRequests.get(t);if(n){var r=this.resolveCachedEntry(e.config);n.pendingRequestConfig.resolve(r)}},e}();var p="ultra-session-event-existing-window",m="ultra-session-event-new-window",f=function(e){if(e.newValue)if(e.key===p)null==window.sessionStorage.getItem("ultra-session-updating-storage")&&(window.sessionStorage.setItem("ultra-session-updating-storage","updating"),setTimeout((function(){window.localStorage.setItem(m,JSON.stringify(window.sessionStorage)),window.localStorage.removeItem(m),window.sessionStorage.removeItem("ultra-session-updating-storage")}))),window.localStorage.setItem(m,JSON.stringify(window.sessionStorage));else if(e.key===m&&!window.sessionStorage.length)for(var t=JSON.parse(e.newValue),n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];window.sessionStorage.setItem(i,t[i])}},h=n("5MwF");n.d(t,"a",(function(){return g}));var g="ultra.components.services.learn.api.cache";angular.module("ultra.components.services.learn.api.cacheRules",[]).constant("learnApiCache.CacheRules",new c);var v=angular.module(g,["ultra.components.services.learn.api.cacheRules"]);h.a.features.learnApiCaching?v.provider("learnApiCacheService",["learnApiCache.CacheRules",d]).service(o.c,o.a).config(["$provide","$httpProvider","learnApiCacheServiceProvider",function(e,t,n){window.addEventListener("storage",(function(e){(function(e){return[p,m].some((function(t){return t===e.key}))})(e)&&n.disableCaching()})),window.addEventListener("storage",f,!1),localStorage.setItem(p,p),localStorage.removeItem(p);e.decorator("$http",["$delegate",function(e){var t=function(t){if(null!=t.cache)return e(t);var r=n.getRule(t.url,t.method.toUpperCase());return r&&r.onUpdate&&"function"==typeof r.onUpdate&&r.onUpdate(t,n.removeCacheEntries),-1!==s.indexOf(t.method.toUpperCase())&&n.removeCacheEntries(t.url),e(t)};return function(e,t){!function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.each(e,(function(e){t[e]=function(n,r){return t(angular.extend({},r||{},{method:e,url:n}))}}))}("delete","get","head","jsonp"),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.each(e,(function(e){t[e]=function(n,r,i){return t(angular.extend({},i||{},{method:e,url:n,data:r}))}}))}("post","put","patch"),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];i.each(n,(function(n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}))}("defaults","pendingRequests")}(e,t),t}]),URL&&Object.prototype.hasOwnProperty.call(URL,"createObjectURL")&&t.interceptors.push("learnApiCacheService")}]):v.provider("learnApiCacheService",[u]).service(o.c,o.b)},K3JI:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.components.directives.hoverMenuOpacity",o=function(){function t(){this.restrict="A",this.link=function(t,n){n.on("focus",".hover-menu a, .hover-menu button",(function(t){0===e("body.hide-focus-outline").length&&e(t.target).closest(".hover-menu").css({opacity:1})})).on("blur",".hover-menu a, .hover-menu button",(function(t){e(t.target).closest(".hover-menu").removeAttr("style")}))}}return t.$inject=["$injector"],t}();r.module(i,[]).directive("bbHoverMenuOpacity",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("5iHu"))},K4f8:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.IncorrectAnswers=new t("INCORRECT_ANSWERS"),t.InstructorFeedback=new t("INSTRUCTOR_FEEDBACK"),t.AllAnswers=new t("ALL_ANSWERS"),t.CorrectAnswers=new t("CORRECT_ANSWERS"),t.UserAnswers=new t("USER_ANSWERS"),t.Score=new t("SCORE"),t}(n.n(i).a);t.a=o},KiLF:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Continuous=new t("CONTINUOUS"),t.DateRange=new t("DATE_RANGE"),t.FixedNumDays=new t("FIXED_NUM_DAYS"),t}(n.n(i).a);t.a=o},Kpdw:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return b})),n.d(t,"serviceName",(function(){return y})),n.d(t,"CREATE_COLUMN_ID",(function(){return S})),n.d(t,"CalculateType",(function(){return C})),n.d(t,"AttemptAggregationModel",(function(){return k})),n.d(t,"CalculationType",(function(){return T})),n.d(t,"parseForumId",(function(){return I}));var r=n("D57K"),i=(n("QLzv"),n("nsO7")),o=n("nbDY"),s=n.n(o),a=n("Sa5G"),c=n("JfV0"),l=n("vYaK"),u=n("KrjC"),d=n("3uIF"),p=n("yCC5"),m=n("Rjd/"),f=n("wgY5"),h=n("XfOu"),g=n("fm95"),v=n("eUpQ"),b="ultra.components.services.models.grade.gradeColumn",y=p.fb,S="create",C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Item=new t("ITEM"),t.Category=new t("CATEGORY"),t}(s.a),w=Symbol("forceFetchSummary"),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.parseModel=function(t){return e.parse.call(this,t)},t.getDefault=function(){return t.Average},t.prototype.getLabelKey=function(){return"components.services.grade.aggregation-model."+this.toString().toLowerCase()},t.prototype.getStudentLabelKey=function(){return"course.content.assessment.overview.gradeBasedOn."+this.toString().toLowerCase()},t.Average=new t("AVERAGE"),t.First=new t("FIRST"),t.Highest=new t("HIGHEST"),t.Last=new t("LAST"),t.Lowest=new t("LOWEST"),t}(s.a),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NonCalculated=new t("NON_CALCULATED"),t.Total=new t("TOTAL"),t.Average=new t("AVERAGE"),t.WeightedTotal=new t("WEIGHTED_TOTAL"),t.MinMax=new t("MINMAX"),t.Custom=new t("CUSTOM"),t}(s.a);function I(e){var t=e.split("/");return t[t.length-1]}m.a.factory(y,["$http","$ngRedux","restmod","$rootScope","$q",l.serviceName,d.a,u.serviceName,function(e,t,n,o,s,l,u,d){return n.model().mix({grades:{hasMany:p.gb},summary:{hasOne:p.r,hooks:{"before-request":function(e){!this.$owner[w]&&this.$owner.isCalculated()&&(e.cache={get:function(){return{}}})}}},groupAssociations:{hasMany:p.L},anonymousGradingReleaseDate:{serialize:"date"},dueDate:{serialize:"date"},dateCreated:{serialize:"date"},dateModified:{serialize:"date"},peerReviewDueDate:{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$hooks:{"before-request":function(e){if(this.$url()===e.url&&"DELETE"!==e.method){e.params&&e.params.expand?i.includes(e.params.expand,"gradebookCategory")||(e.params.expand+=",gradebookCategory"):e.params=Object(r.__assign)({expand:"gradebookCategory"},e.params)}},"before-save":function(e){e.params||(e.params={}),e.params.expand=["externalGrade","gradebookCategory","columnSummary"]},"after-request":function(e){e.data&&e.data.rubricAssociations&&e.data.rubricAssociations.forEach((function(e){h.sortRubricData(e.rubricDefinition)})),e.config&&e.config.params&&e.config.params.expand&&-1!==e.config.params.expand.indexOf("associatedRubrics")&&t.dispatch(c.actions.gradebookColumn.setGradebookColumnInStore(e.data))},"after-feed":function(){Object.defineProperty(this,"columnName",{get:function(){return this.effectiveColumnName},set:function(e){return this.effectiveColumnName=e,this.effectiveColumnName}})}},$extend:{Record:{isTest:function(){return a.B.Test.isEqualTo(this.scoreProviderHandle)},isAssignment:function(){return a.B.UltraAssignment.isEqualTo(this.scoreProviderHandle)},isCalculated:function(){return!T.NonCalculated.isEqualTo(this.calculationType)},isOffline:function(){return this.userCreatedColumn},isAttemptBased:function(){return!this.isCalculated()&&!this.isOffline()&&!this.isAttendance()},isDiscussion:function(){return a.B.Discussion.isEqualTo(this.scoreProviderHandle)},isScorm:function(){return a.B.Scorm.isEqualTo(this.scoreProviderHandle)},isScormSCO:function(){var e=this;if(this.isScorm()){var t=this.ui&&this.ui.content||null,n=t&&!t.isConditionalReleaseLocked()&&t.getScormGradebookItems()||[],r=n&&n.find((function(t){return t.columnId===e.id}));return!(!r||r.root)}return!1},isAttendance:function(){return a.B.Attendance.isEqualTo(this.scoreProviderHandle)},isVisible:function(){return this.visible},isHidden:function(){return!this.visible},isVisibleToStudents:function(){return this.isVisible()},isHiddenFromStudents:function(){return this.isHidden()},isMultipleAttempts:function(){return this.multipleAttempts>1||this.isUnlimitedAttempts()},isSingleAttempt:function(){return 1===this.multipleAttempts},isUnlimitedAttempts:function(){return 0===this.multipleAttempts},isCollectExternalSubmissions:function(){return!!this.collectExternalSubmissions},getNumMissing:function(){return this.isOffline()?this.summary.numNeedsGrading:this.summary.numEligibleToBeGraded-this.summary.numStudentSubmissions()},getNumMissingIfLate:function(){return this.isCalculated()||!this.isLate()?NaN:this.getNumMissing()},getVisibilityAsStudent:function(){return this.isVisibleToStudents()?g.Visibility.Visible:g.Visibility.Hidden},setVisibility:function(e){switch(e){case g.Visibility.Visible:this.visible=!0;break;case g.Visibility.Hidden:this.visible=!1}},canEdit:function(){return this.permissions&&this.permissions.edit},postReadyGrades:function(){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},(function(e){this.ui.numOfGradesPosted=e.data.count})).$asPromise().then((function(e){return e.ui.numOfGradesPosted}))},postReadyGroupAttempts:function(e){var t=this;return this.$send({method:"POST",url:this.$url()+"/groupAssociations/"+e.groupAssociationId+"/postReadyGroupGrades",data:{}},(function(e){t.ui.numOfAttemptsPosted=e.data.count})).$asPromise().then((function(e){return e.ui.numOfAttemptsPosted}))},getGroupGrade:function(t,n){var r=this,i=n?{expand:"instructorFeedback,groupMembersGrades"}:null;return e.get(this.$url()+"/groupAssociations/"+t+"/grades",i&&{params:i}).then((function(e){var t=d.$buildRaw(e.data);return delete t.id,t.groupMembersGrades&&(t.groupMembersGrades=t.groupMembersGrades.map((function(e){return r.grades.$buildRaw(e)}))),t}))},getGroupAttemptByGroupAssociationId:function(e,t){void 0===t&&(t=!1);var n={expand:t?"attempts,toolAttemptDetail,viewUrl":"attempts,toolAttemptDetail",excludeUnavailableMembers:!0};return this.groupAssociations.$new(e).groupAttempts.$fetch(n).$asPromise().then((function(e){return e&&e[0]}))},getGradeIdToAttempt:function(e,t){var n;return this.withParams(e).$send({method:"GET",url:this.$url()+(t?"/groupAttempts":"/attempts")},(function(e){var r=this;Object.keys(e.data.lookup).forEach((function(n){e.data.lookup[n]=t?r.grades.$new(n).groupAttempts.$decode(e.data.lookup[n]):r.grades.$new(n).attempts.$decode(e.data.lookup[n])})),n=e.data})).$asPromise().then((function(){return n}))},getContentGroupIdToGroupAttempt:function(e){var t;return(e?this.withParams(e):this).$send({method:"GET",url:this.$url()+"/groupAttempts"},(function(e){var n=this;Object.keys(e.data.lookup).forEach((function(t){var r=e.data.lookup[t][0];r.submissionResults&&r.submissionResults.results["mdb-sa"]&&(r.originalityProcessed=r.submissionResults.results["mdb-sa"].originalityProcessed,r.originalityScore=r.submissionResults.results["mdb-sa"].originalityScore),e.data.lookup[t]=l.$new(n.courseId).gradebook.groupAttempts.$decode(e.data.lookup[t]),e.data.lookup[t][0].attempts&&(e.data.lookup[t][0].attempts=l.$new(n.courseId).gradebook.attempts.$decode(e.data.lookup[t][0].attempts))})),t=e.data})).$asPromise().then((function(){return t}))},hasEvaluations:function(){return this.getGradeIdToAttempt({}).then((function(e){var t=!1;return e&&e.lookup&&i.each(Object.keys(e.lookup),(function(n){return i.each(e.lookup[n],(function(e){return e&&e.rubricEvaluation&&(t=!0),!t})),!t})),t}))},createAttempt:function(e,t,n,r){return n&&(e.groupId=r),this.$send({method:"POST",url:this.$url()+(n?"/groupAttempts":"/attempts"),data:e.$wrap&&e.$wrap()||e,params:t},(function(e){this.createdAttempt=n?l.$new(this.courseId).gradebook.groupAttempts.$buildRaw(e.data):l.$new(this.courseId).gradebook.attempts.$buildRaw(e.data)})).$allow([403]).$asPromise().then((function(e){return e&&e.createdAttempt?e.createdAttempt:e}))},countAttempts:function(){var e=s.defer();return this.$send({method:"GET",url:this.$url()+"/attempts/count"},(function(t){var n=null;return t.data&&(n=t.data.count),e.resolve(n)}),(function(t){return e.reject(t)})).$allow([403]),e.promise},timeUntilDueDate:function(e){if(this.dueDate){var t=f(this.dueDate),n=f(v.a.getServerTime());return t.diff(n,e)}return null},daysUntilDueDate:function(){return this.timeUntilDueDate("days")},isLate:function(){return!!this.dueDate&&this.dueDate<=v.a.getServerTime()},isUserReconciler:function(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some((function(t){return t.userId===e&&t.canReconcile&&!t.isUnassigned})))},forceDelete:function(){var e=this;if(!this.contentId){return(a.B.PartnerCloud.isEqualTo(this.scoreProviderHandle)&&this.linkId?u.delete(this.courseId,this.linkId):this.withParams({onlyIfEmpty:!1}).$destroy().$asPromise()).then((function(){return o.$broadcast("bb-delete-column",e),e}))}throw new Error("Content based column must be deleted by deleting associated content")},hasRubricAssociation:function(){return null!=this.rubricAssociations&&this.rubricAssociations.length>0},getRubricAssociation:function(){return this.hasRubricAssociation()?this.rubricAssociations[0]:null},getAssociatedRubricId:function(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricId:null},getAssociatedRubric:function(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricDefinition:null},setRubricAssociation:function(e){this.rubricAssociations=e?[{rubricId:e}]:[]},forceResolveSummary:function(){var e=this;return this[w]=!0,this.summary.$resolve().$then((function(){delete e[w]}))},forceFetchSummary:function(e){var t=this;return void 0===e&&(e={}),this[w]=!0,this.summary.$fetch(e).$then((function(){delete t[w]}))},alwaysOverride:function(){var e=this,t=!1;return[a.B.Test,a.B.UltraAssignment,a.B.Discussion,a.B.Scorm].forEach((function(n){n.isEqualTo(e.scoreProviderHandle)&&(t=!0)})),t},isQuestionAnalysisAvailable:function(){return this.isAssignment()||this.isTest()},canSeeFinalGrade:function(e){return this.delegatedGrading?!this.anonymousGrading&&this.isUserReconciler(e.id):!this.anonymousGrading}},Collection:{getOverallColumn:function(){return this.$send({method:"GET",url:this.$url()+"/overall"},(function(e){this.overallList=e.data.results})).$asPromise()},attachRelatedContentsByScoreProviderHandle:function(e){var t=this;if(!this.length)return s.when(this);var n=l.$new(this[0].courseId),r=this.filter((function(t){return e.isEqualTo(t.scoreProviderHandle)})),i=new Set(r.map((function(e){return e.contentId}))),o=Array.from(i.values()).map((function(e){return n.contents.$find(e).$suppressErrorDialog().$asPromise()}));return s.all(o).then((function(e){return r.forEach((function(t){t.ui.content=e.find((function(e){return e.id===t.contentId}))})),t}))},indexOfItemById:function(e){return this.$indexOf((function(t){return t.id===e}))}}}})}])},KrjC:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return d})),n.d(t,"serviceName",(function(){return p}));n("QLzv");var r=n("nsO7"),i=n("wHJ2"),o=n("wgY5"),s=n("Sa5G"),a=n("yCC5"),c=n("Rjd/"),l=n("eUpQ"),u=n("nkTj"),d="ultra.components.services.models.gradeDetail",p=a.gb;c.a.factory(p,["restmod",u.d,function(e,t){return e.model().mix({attempts:{hasMany:a.cb,hooks:{"after-fetch-many":function(){var e=this;this.forEach((function(t){t.permissions=e.permissions}))}}},column:{ignore:"CU"},groupAttempts:{hasMany:a.hb},user:{belongsTo:a.Ac},ui:{mask:!0,init:function(){return{currentAttemptIndex:0,isCommentBoxShown:!1,areAllAttemptsDeleted:!1}}},lastOverrideDate:{serialize:"date"},$extend:{Record:{isMissing:function(e){return!(this.isGraded()||!(e||i.isUndefined(e)&&!this.isSubmitted())||!this.column||!this.column.dueDate)&&o(this.column.dueDate).isBefore(l.a.getServerTime())},isGraded:function(){return null!=this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade&&""!==this.displayGrade.grade)},isOverrideGrade:function(){return!s.s.NoOverride.isEqualTo(this.manualStatus)&&(null!=this.manualGrade||null!=this.manualScore)},isReadyToPost:function(){return s.s.NoOverride.isEqualTo(this.manualStatus)&&this.isGraded()&&!this.hasGradeBeenPosted||s.s.ReadyToPost.isEqualTo(this.manualStatus)},isPosted:function(){return!this.isCalculatedColumnGrade&&(s.s.NoOverride.isEqualTo(this.manualStatus)&&(this.hasGradeBeenPosted||!Object.prototype.hasOwnProperty.call(this,"hasGradeBeenPosted")&&this.isGraded())||s.s.IsPosted.isEqualTo(this.manualStatus))},isSubmitted:function(){return!(!this.column||!this.column.isAttemptBased())&&s.u.NeedsGrading.isEqualTo(this.status)},isUpcoming:function(){if(!this.isGraded()&&!this.isSubmitted()&&this.column){if(this.column.dueDate)return o(this.column.dueDate).isAfter(l.a.getServerTime());if(this.column.isAttemptBased())return!0}return!1},isInProgress:function(){return s.s.GradingInProgress.isEqualTo(this.manualStatus)},hasInstructorComments:function(){return!!this.isPosted()&&(this.column.isAttemptBased()&&(e=this.ui&&this.ui.attempt,t=this.attempts),e&&e.feedbackToUser?e.feedbackToUser&&e.feedbackToUser.displayText||this.hasSomeFeedbackToUser(t):t&&t.length?this.hasSomeFeedbackToUser(t):this.instructorFeedback&&this.instructorFeedback.displayText);var e,t},hasSomeFeedbackToUser:function(e){return r.some(e,(function(e){return!(!e.feedbackToUser||!e.feedbackToUser.displayText)}))},saveComment:function(e,t,n,i){var o=t?{userId:t}:{};return n&&(o=r.merge(o,n)),r.isString(e)?this.instructorFeedback?this.instructorFeedback.rawText=e:this.instructorFeedback={rawText:e}:this.instructorFeedback=e,i?this.$send({method:"PATCH",url:this.$url(),data:{instructorFeedback:this.instructorFeedback},params:o},(function(e){this.instructorFeedback=e.data.instructorFeedback})):this.withParams(o).$save(["instructorFeedback"])},hasAttempts:function(){return!!this.firstAttemptId},postReadyGrades:function(e){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},(function(e){this.ui.numOfGradesPosted=e.data.count})).$asPromise().then((function(e){return e.ui.numOfGradesPosted}))},getScore:function(){return this.displayGrade&&null!=this.displayGrade.score?this.displayGrade.score.toString():""},isPastDueZero:function(){return null!=this.displayGrade&&!0===this.displayGrade.scoredByAutomaticZero}},Collection:{},Model:{unpack:function(e,t){return t=this.$super(e,t),e.$isCollection?t.forEach((function(t){n(t,e.permissions)})):n(t,e.permissions),t;function n(e,t){e.permissions=t}}}}})}])},"LsF/":function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray" role="status">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.saving</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.success</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.error</span>\n  </div>\n</div>\n'},LvpZ:function(e,t,n){},"M+Ig":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.InstructorDynamic=new t("instructorDynamic"),t.DirectToCourse=new t("directToCourse"),t.ContentActivityInDetail=new t("telemetryContentActivityInDetail"),t.DiscussionForumInsights=new t("telemetryDiscussionForumInsights"),t.InstructorDetails=new t("telemetryInstructorDetails"),t.InstructorClass=new t("telemetryInstructorClass"),t.StudentHighPerformance=new t("telemetryStudentHighPerformance"),t.StudentLowActivity=new t("telemetryStudentLowActivity"),t.StudentLowGrades=new t("telemetryStudentLowGrades"),t.StudentFindAStudyPartner=new t("telemetryStudentFindAStudyPartner"),t.StudentProgress=new t("telemetryStudentProgress"),t}(n.n(i).a);t.a=o},MFWY:function(e,t,n){},MISG:function(e,t,n){},MOka:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("pjml"),o=n("emI2"),s=n("fYJU"),a=n("zPsu"),c=n("aHpC"),l=n("yC9S"),u=n("go4a"),d=n("JfV0"),p="ultra.service.stream.settings",m="streamSettings",f={Calendar:"CAL",NewContentAdded:"CON",NewAssessmentsAdded:"CON",CourseAvailable:"CRS",BlogEntryPosted:"DIS",BlogEntryEdited:"DIS",BlogEntryComment:"DIS",DiscussionReply:"DIS",NewDiscussionForum:"DIS",NewMessages:"MES",NewGradeableItems:"SUB",StudentActivityAvailable:"GRB",StudentGradeDataAvailable:"GRB",StudentsFallingBehind:"GRB",StudentsFallingBehindAbsent:"GRB",StudentsFallingBehindFailing:"GRB",StudentsFallingBehindAbsentFailing:"GRB",NoRecentActivity:"TEL",LowActivity:"TEL",HighActivity:"TEL",GradeAtRisk:"TEL",LowGrade:"TEL",GradeLowered:"TEL",PerformanceIncreased:"TEL",HighGrade:"TEL"},h=function(){function e(e,t,n,r,i,o){var s=this;this.$rootScope=e,this.$q=t,this.preferenceService=n,this.UserModel=r,this.currentUserService=i,this.store=o,this.userSettings=null,l.b.OnRootScope(this.$rootScope,"membership-hidden-status-update",(function(e,t){s._updateMembership(t),s.$rootScope.$broadcast("stream-settings-updated")})),this.subscribeToRedux()}return e.prototype.initializeSettings=function(){var e=this;return this.$q.all([this._getUserMemberships(),this.loadAdminNotificationSettings()]).then((function(){return e._loadUserSettings()}))},e.prototype.subscribeToRedux=function(){var e=this,t=this.store.connect((function(t){var n=d.select.notificationMethodSetting.getAdminNotificationMethodSettings(t),r=d.select.systemPreference.getSystemPreferenceByKey(t,a.SYSTEM_REGISTRY_KEY),i=e._transformRegistrySettings(r);return{adminNotificationSettings:n.concat(i)}}),(function(t){return{loadAdminNotificationSettings:function(){return e.$q.all([t(d.actions.notificationMethodSetting.loadAdminNotificationMethodSettings()),t(d.actions.systemPreference.loadSystemPreference({key:a.SYSTEM_REGISTRY_KEY}))])}}}))(this);this.$rootScope.$on("$destroy",t)},e.prototype._transformRegistrySettings=function(e){var t=a.defaultRegistrySettings;e&&e.value&&(t=JSON.parse(e.value));var n=[];return t.settings.forEach((function(e){n.push({context:d.ContextEnum.COURSE,source:a.NON_NAUTILUS_SOURCE,event:e.id,method:"DA",isEditable:e.isEditable,isEnabled:e.isEnabled})})),n},e.prototype._getUserMemberships=function(){var e=this;return this.userMemberships?this.$q.resolve(Object.values(this.userMemberships)):this.UserModel.$new(this.currentUserService.userId).memberships.$fetch({fields:"id,courseId,courseRole,role,courseCardColorIndex"}).$asPromise().then((function(t){return e.userMemberships=t.reduce((function(e,t){var n;return Object(r.__assign)(Object(r.__assign)({},e),((n={})[t.id]=t,n))}),{}),Object.values(e.userMemberships)}))},e.prototype.reloadStreamMemberships=function(){return this.userMemberships=null,this._getUserMemberships()},e.prototype.save=function(e){var t=this;if(!e)return this.$q.resolve();Object.keys(e).forEach((function(t){e[t].definition||(e[t].definition=a.allSettings.find((function(e){return e.id===t})))}));var n={version:3,settings:Object.keys(e).map((function(t){return{id:e[t].definition.id,isEnabled:e[t].isEnabled}}))};return this.preferenceService.setPreference("ultraui.stream.settings.v2",angular.toJson(n)).then((function(){return t._loadUserSettings()}))},e.prototype._loadLegacyUserSettings=function(){var e=this;return this.preferenceService.getPreference("ultraui.stream.settings",null).then((function(t){if(!t||!t.value)return!1;var n=angular.fromJson(t.value);return e.userSettings=a.allSettings.reduce((function(e,t){var i,o=f[t.id];return Object(r.__assign)(Object(r.__assign)({},e),((i={})[t.id]={definition:t,isEnabled:!!o&&"N"!==n[o]},i))}),{}),!0}))},e.prototype._loadUserSettings=function(){var e=this;return this.preferenceService.getPreference("ultraui.stream.settings.v2",null).then((function(t){if(!t||!t.value)return e._loadLegacyUserSettings().then((function(t){if(!t)return e._loadDefaultSettings()}));var n=angular.fromJson(t.value);e.userSettings={},n.settings.forEach((function(t){var n=a.allSettings.find((function(e){return e.id===t.id}));n&&(e.userSettings[t.id]={isEnabled:t.isEnabled,definition:n})}))}))},e.prototype._loadDefaultSettings=function(){var e=this;return this.loadAdminNotificationSettings().then((function(){e.userSettings=a.allSettings.reduce((function(t,n){var r=n.defaultSetting(e.adminNotificationSettings);return t[n.id]={isEnabled:r,definition:n},t}),{})}))},e.prototype.getUserSettings=function(){var e=this;return this._hasUserSettings()?this.$q.resolve(this.userSettings):this._loadUserSettings().then((function(){return e.userSettings}))},e.prototype._hasUserSettings=function(){return null!==this.userSettings},e.prototype._updateMembership=function(e){var t;this.userMemberships=Object(r.__assign)(Object(r.__assign)({},this.userMemberships),((t={})[e.id]=Object(r.__assign)(Object(r.__assign)({},this.userMemberships[e.id]),e),t))},e.prototype.hidden=function(e){if(!e)return!1;var t=!!this.userMemberships?Object.values(this.userMemberships).find((function(t){return t.course.$pk===e.courseId})):null;if(t&&t.userHasHidden)return!0;if(t&&(e.courseColorClass=Object(u.a)(t)),!this.userSettings||!this.adminNotificationSettings)return!1;for(var n=!1,r=0,i=Object.keys(this.userSettings);r<i.length;r++){var o=i[r],s=this.userSettings[o];if(s.definition.canHandle(e)&&(n=!0,s.definition.isStreamEntryVisible(s.isEnabled,this.adminNotificationSettings)))return!1}return n},e=Object(r.__decorate)([Object(r.__param)(0,Object(c.b)("$rootScope")),Object(r.__param)(1,Object(c.b)("$q")),Object(r.__param)(2,Object(c.b)(o.c)),Object(r.__param)(3,Object(c.b)(i.Qb.serviceName)),Object(r.__param)(4,Object(c.b)(s.b)),Object(r.__param)(5,Object(c.b)("$ngRedux"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h);angular.module(p,[o.b]).service(m,h)},MROq:function(e,t,n){var r={"./af":"8GSH","./af.js":"8GSH","./ar":"NcOb","./ar-dz":"1ors","./ar-dz.js":"1ors","./ar-kw":"Sc1Y","./ar-kw.js":"Sc1Y","./ar-ly":"GzvP","./ar-ly.js":"GzvP","./ar-ma":"hH25","./ar-ma.js":"hH25","./ar-sa":"u2jB","./ar-sa.js":"u2jB","./ar-tn":"5Mza","./ar-tn.js":"5Mza","./ar.js":"NcOb","./az":"ZVVJ","./az.js":"ZVVJ","./be":"kQaN","./be.js":"kQaN","./bg":"+n5x","./bg.js":"+n5x","./bn":"aIF2","./bn.js":"aIF2","./bo":"QWb5","./bo.js":"QWb5","./br":"iQoZ","./br.js":"iQoZ","./bs":"EL7g","./bs.js":"EL7g","./ca":"vd/2","./ca.js":"vd/2","./cs":"K+3W","./cs.js":"K+3W","./cv":"Jt3X","./cv.js":"Jt3X","./cy":"sWi3","./cy.js":"sWi3","./da":"YcFX","./da.js":"YcFX","./de":"BKZ+","./de-at":"Oq9h","./de-at.js":"Oq9h","./de-ch":"hHY4","./de-ch.js":"hHY4","./de.js":"BKZ+","./dv":"w8Ej","./dv.js":"w8Ej","./el":"tSbB","./el.js":"tSbB","./en-au":"HgyJ","./en-au.js":"HgyJ","./en-ca":"ZyTy","./en-ca.js":"ZyTy","./en-gb":"exaB","./en-gb.js":"exaB","./en-ie":"yKzn","./en-ie.js":"yKzn","./en-nz":"iDxo","./en-nz.js":"iDxo","./eo":"4bvN","./eo.js":"4bvN","./es":"GNPT","./es-do":"R7mU","./es-do.js":"R7mU","./es.js":"GNPT","./et":"ZOjb","./et.js":"ZOjb","./eu":"kFC9","./eu.js":"kFC9","./fa":"8Cju","./fa.js":"8Cju","./fi":"vcN1","./fi.js":"vcN1","./fo":"8Ygf","./fo.js":"8Ygf","./fr":"Y8Ij","./fr-ca":"t+Zl","./fr-ca.js":"t+Zl","./fr-ch":"SPXN","./fr-ch.js":"SPXN","./fr.js":"Y8Ij","./fy":"T3MF","./fy.js":"T3MF","./gd":"GJYX","./gd.js":"GJYX","./gl":"MdC8","./gl.js":"MdC8","./gom-latn":"5j0y","./gom-latn.js":"5j0y","./he":"ACAV","./he.js":"ACAV","./hi":"3WqV","./hi.js":"3WqV","./hr":"OnNk","./hr.js":"OnNk","./hu":"EQmw","./hu.js":"EQmw","./hy-am":"MNf7","./hy-am.js":"MNf7","./id":"0yow","./id.js":"0yow","./is":"TmOJ","./is.js":"TmOJ","./it":"xD/0","./it.js":"xD/0","./ja":"jOnb","./ja.js":"jOnb","./jv":"lOtj","./jv.js":"lOtj","./ka":"BAN/","./ka.js":"BAN/","./kk":"iNiw","./kk.js":"iNiw","./km":"TUxt","./km.js":"TUxt","./kn":"hQzt","./kn.js":"hQzt","./ko":"ZNZT","./ko.js":"ZNZT","./ky":"JO+T","./ky.js":"JO+T","./lb":"vn/h","./lb.js":"vn/h","./lo":"gnIm","./lo.js":"gnIm","./lt":"6PD3","./lt.js":"6PD3","./lv":"YKe2","./lv.js":"YKe2","./me":"d3TR","./me.js":"d3TR","./mi":"hTlv","./mi.js":"hTlv","./mk":"ffVN","./mk.js":"ffVN","./ml":"ejL1","./ml.js":"ejL1","./mr":"CPJk","./mr.js":"CPJk","./ms":"d5Hy","./ms-my":"t4T9","./ms-my.js":"t4T9","./ms.js":"d5Hy","./my":"LsNb","./my.js":"LsNb","./nb":"h+U8","./nb.js":"h+U8","./ne":"2JSI","./ne.js":"2JSI","./nl":"jsZ8","./nl-be":"+h6j","./nl-be.js":"+h6j","./nl.js":"jsZ8","./nn":"mh29","./nn.js":"mh29","./pa-in":"O6bP","./pa-in.js":"O6bP","./pl":"8Bez","./pl.js":"8Bez","./pt":"DDip","./pt-br":"uHm5","./pt-br.js":"uHm5","./pt.js":"DDip","./ro":"baBi","./ro.js":"baBi","./ru":"ecsu","./ru.js":"ecsu","./sd":"e9KM","./sd.js":"e9KM","./se":"CZRU","./se.js":"CZRU","./si":"TO58","./si.js":"TO58","./sk":"K+Lk","./sk.js":"K+Lk","./sl":"QK6v","./sl.js":"QK6v","./sq":"v3Qg","./sq.js":"v3Qg","./sr":"Ndyf","./sr-cyrl":"PGvg","./sr-cyrl.js":"PGvg","./sr.js":"Ndyf","./ss":"2B8G","./ss.js":"2B8G","./sv":"WF5B","./sv.js":"WF5B","./sw":"4VvY","./sw.js":"4VvY","./ta":"dw3T","./ta.js":"dw3T","./te":"4MAb","./te.js":"4MAb","./tet":"/hi0","./tet.js":"/hi0","./th":"OY2w","./th.js":"OY2w","./tl-ph":"UC+K","./tl-ph.js":"UC+K","./tlh":"cWLW","./tlh.js":"cWLW","./tr":"EqYs","./tr.js":"EqYs","./tzl":"fN8o","./tzl.js":"fN8o","./tzm":"6cYq","./tzm-latn":"pdAN","./tzm-latn.js":"pdAN","./tzm.js":"6cYq","./uk":"6Olw","./uk.js":"6Olw","./ur":"QNGR","./ur.js":"QNGR","./uz":"hLzJ","./uz-latn":"KqOT","./uz-latn.js":"KqOT","./uz.js":"hLzJ","./vi":"EnIJ","./vi.js":"EnIJ","./x-pseudo":"W7dU","./x-pseudo.js":"W7dU","./yo":"QDhB","./yo.js":"QDhB","./zh-cn":"bjMe","./zh-cn.js":"bjMe","./zh-hk":"JFCg","./zh-hk.js":"JFCg","./zh-tw":"xBDH","./zh-tw.js":"xBDH"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="MROq"},Mc6f:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("yC9S"),a=n("pjml"),c="ultra.components.services.grade.gradeNotation.Service",l="gradeNotationService",u=function(){function e(e,t,n){var r=this;this.$q=e,this.$rootScope=t,this.CourseModel=n,this.courseGradeNotationMap={},s.b.OnRootScope(t,"grade-notation-update",(function(e,t){r.CourseModel.$new(t).gradebook.performancecodes.$fetch().$then((function(e){r.courseGradeNotationMap[t]=e,r.$rootScope.$broadcast("grade-notation-cache-update",t)}))}))}return e.prototype.getGradeNotationsMap=function(e,t){var n=this;if(t&&this.courseGradeNotationMap[e])return this.$q.when(this.courseGradeNotationMap[e]);var r=this.$q.defer();return this.CourseModel.$new(e).gradebook.performancecodes.$fetch().$then((function(t){n.courseGradeNotationMap[e]=t,r.resolve(t)})),r.promise},e.prototype.isValidPerformanceCodeGrade=function(e,t){return!(!t||i.isEmpty(e))&&!!i.find(e,(function(e){return e.code===t}))},e.$inject=["$q","$rootScope",a.o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);o.module(c,[]).service(l,u)},N7x3:function(e,t,n){"use strict";(function(e){var r=n("wHJ2"),i=n("5MwF"),o=n("td+C"),s=n("YzQO"),a=n("gSji"),c=n("myse"),l=function(){function t(e){var t=this;this.integrationService=e,this.integrationForceClick="integration-force-click",this.onClick=function(e){if(!e.originalEvent||!e.originalEvent.manualFireFlag){var n=r.element(e.target),i=Object(s.b)(n)||Object(s.c)(n.parent());t._sendEventMessage(i,a.V.Click)}},this.onHover=function(e){var n=r.element(e.target),i=Object(s.b)(n);i!==t.lastHoverElementId&&(t.lastHoverElementId=i,t._sendEventMessage(i,a.V.Hover))},Object(c.subscribeToFramework)("Ultra",(function(e,n){e===c.AnalyticsEventTypes.CLICK_EVENT?t._sendEventMessage(n.analyticsId,a.V.Click):e===c.AnalyticsEventTypes.HOVER_EVENT&&t._sendEventMessage(n.analyticsId,a.V.Hover)}))}return t.prototype.addClickListener=function(){i.a.unitTesting||(e(document).on("click",this.onClick),e(document).on(this.integrationForceClick,this.onClick))},t.prototype.addHoverListener=function(){i.a.unitTesting||e(document).on("mouseover",this.onHover)},t.prototype._sendEventMessage=function(e,t){e&&this.integrationService.sendEventMessage({type:a.e,eventType:t,analyticsId:e})},t}();t.a=new l(o.a)}).call(this,n("5iHu"))},NAsp:function(e,t,n){var r={"./color/custom/accommodations.svg":"OuRL","./color/custom/processing-loader.svg":"0FVF","./color/large/advanced-in-a.svg":"pLey","./color/large/advanced-in-c.svg":"Z438","./color/large/advanced-in.svg":"SR14","./color/large/alert-a.svg":"lBpV","./color/large/alert-error-a.svg":"HNOh","./color/large/alert-error-c.svg":"EsEM","./color/large/alert-error.svg":"VP30","./color/large/announcement-a.svg":"as2i","./color/large/announcement-c.svg":"Uqk6","./color/large/announcement.svg":"WXcX","./color/large/assignment-a.svg":"UfZ0","./color/large/assignment-c.svg":"ahBo","./color/large/assignment.svg":"THM4","./color/large/attendance-a.svg":"T75u","./color/large/attendance.svg":"rHcX","./color/large/audio-a.svg":"wSeK","./color/large/audio-c.svg":"BJJv","./color/large/audio.svg":"nV7P","./color/large/blank-space-a.svg":"9gkN","./color/large/blank-space.svg":"HyY1","./color/large/blog-a.svg":"20am","./color/large/blog-c.svg":"0Jxw","./color/large/blog.svg":"vNHv","./color/large/calculation-a.svg":"6aPN","./color/large/calculation-c.svg":"6Uys","./color/large/calculation.svg":"UxkC","./color/large/calendar-a.svg":"2VWD","./color/large/calendar-c.svg":"mHAG","./color/large/calendar.svg":"pFqy","./color/large/certification-a.svg":"MDLd","./color/large/certification-c.svg":"8udu","./color/large/certification.svg":"sB2q","./color/large/chat-a.svg":"dvBt","./color/large/chat.svg":"OZeG","./color/large/check-circle-c.svg":"xn2B","./color/large/class-pulse-a.svg":"GM1v","./color/large/class-pulse-c.svg":"mgC8","./color/large/class-pulse-future-a.svg":"fyue","./color/large/class-pulse-future.svg":"dmal","./color/large/class-pulse.svg":"INCO","./color/large/collaborate-a.svg":"96rx","./color/large/collaborate-c.svg":"P0DE","./color/large/collaborate.svg":"GCtI","./color/large/coming-soon.svg":"RTBW","./color/large/content-collection-a.svg":"+pGI","./color/large/content-collection-c.svg":"p7qh","./color/large/content-collection.svg":"TyS5","./color/large/course-a.svg":"GLzS","./color/large/course-c.svg":"d4nf","./color/large/course-dynamic-a.svg":"LIT4","./color/large/course-dynamic-c.svg":"ywyO","./color/large/course-dynamic.svg":"b1lb","./color/large/course.svg":"ncmK","./color/large/cry-a.svg":"3nf8","./color/large/cry.svg":"C8or","./color/large/custom-item-a.svg":"Z57w","./color/large/custom-item-c.svg":"l60E","./color/large/custom-item.svg":"33vn","./color/large/database-connected.svg":"kxVa","./color/large/diploma-a.svg":"O8+x","./color/large/diploma-c.svg":"+K7B","./color/large/diploma.svg":"Borp","./color/large/discussion-a.svg":"lfBN","./color/large/discussion-c.svg":"HrOi","./color/large/discussion.svg":"BNZt","./color/large/divider-line-a.svg":"276J","./color/large/divider-line.svg":"2c8g","./color/large/document-2x-a.svg":"Ityz","./color/large/document-2x-c.svg":"aM1e","./color/large/document-2x.svg":"n+X3","./color/large/document-blank-a.svg":"xY9v","./color/large/document-blank-c.svg":"rGAd","./color/large/document-blank.svg":"B8OC","./color/large/document-multiple-a.svg":"UyC9","./color/large/document-multiple-c.svg":"IXBg","./color/large/document-multiple.svg":"CBFU","./color/large/document-text-a.svg":"YXpa","./color/large/document-text-c.svg":"U3y7","./color/large/document-text.svg":"7V3D","./color/large/enterprise-surveys-a.svg":"Oz06","./color/large/enterprise-surveys-c.svg":"9SzK","./color/large/enterprise-surveys.svg":"n5RG","./color/large/essay-a.svg":"E/4V","./color/large/essay-c.svg":"hH6Q","./color/large/essay-question-a.svg":"nyJN","./color/large/essay-question.svg":"ZuwY","./color/large/essay.svg":"9B2D","./color/large/exam-a.svg":"Jsyl","./color/large/exam-c.svg":"90a/","./color/large/exam.svg":"jUwU","./color/large/familiar-with-a.svg":"APfG","./color/large/familiar-with-c.svg":"Xjy6","./color/large/familiar-with.svg":"mqvq","./color/large/field-work-a.svg":"kGex","./color/large/field-work-c.svg":"+AWT","./color/large/field-work.svg":"k/zZ","./color/large/fill-in-the-blank-a.svg":"gxoc","./color/large/fill-in-the-blank.svg":"5fIK","./color/large/folder-a.svg":"Mylm","./color/large/folder-c.svg":"1aJo","./color/large/folder-open-a.svg":"7cP4","./color/large/folder-open-c.svg":"WrBD","./color/large/folder-open.svg":"0fxM","./color/large/folder.svg":"ryEa","./color/large/forum-a.svg":"qSMk","./color/large/forum-c.svg":"rMI4","./color/large/forum.svg":"3eZr","./color/large/frown-a.svg":"xOZT","./color/large/frown.svg":"W0ou","./color/large/goal-a.svg":"BhuS","./color/large/goal-c.svg":"O85z","./color/large/goal.svg":"GQF1","./color/large/good-at-a.svg":"yh0M","./color/large/good-at-c.svg":"0GA5","./color/large/good-at.svg":"T4Ay","./color/large/grade-not-associated-a.svg":"Kjgv","./color/large/grade-not-associated-c.svg":"CBvU","./color/large/grade-not-associated.svg":"ZYGR","./color/large/grades-a.svg":"R37G","./color/large/grades-c.svg":"yIkg","./color/large/grades.svg":"Prnn","./color/large/groups-a.svg":"sTol","./color/large/groups-c.svg":"ZB6f","./color/large/groups.svg":"bXMh","./color/large/happy-a.svg":"8DAQ","./color/large/happy.svg":"7+yx","./color/large/help-a.svg":"Hc3b","./color/large/help-c.svg":"BNMa","./color/large/help-light-bulb-c.svg":"xny2","./color/large/help-ticket-a.svg":"02uS","./color/large/help-ticket-c.svg":"zQ44","./color/large/help-ticket.svg":"CcyX","./color/large/help.svg":"lD7P","./color/large/homework-a.svg":"KjUe","./color/large/homework-c.svg":"oVds","./color/large/homework.svg":"3r/D","./color/large/individual-chat-a.svg":"WPk7","./color/large/individual-chat-c.svg":"fRAF","./color/large/individual-chat.svg":"8Nij","./color/large/institution-tools-illustration.svg":"ZIcv","./color/large/internship-a.svg":"DNw1","./color/large/internship-c.svg":"SgOG","./color/large/internship.svg":"4oHd","./color/large/jobs-a.svg":"MN/U","./color/large/jobs-c.svg":"TmfD","./color/large/jobs.svg":"eK9K","./color/large/journal-a.svg":"oido","./color/large/journal-c.svg":"hKAS","./color/large/journal.svg":"cLOB","./color/large/kudos-a.svg":"d7yD","./color/large/kudos-c.svg":"yuzQ","./color/large/kudos.svg":"WWGy","./color/large/labs-a.svg":"8Fwx","./color/large/labs-c.svg":"Sfmk","./color/large/labs.svg":"vhaM","./color/large/learning-a.svg":"kjWT","./color/large/learning-c.svg":"ywCF","./color/large/learning-module.svg":"WZpC","./color/large/learning.svg":"oFto","./color/large/link-a.svg":"CJaW","./color/large/link-c.svg":"5uJx","./color/large/link.svg":"1BYw","./color/large/lti-a.svg":"tFfg","./color/large/lti.svg":"rc4t","./color/large/message-a.svg":"PKhk","./color/large/message-c.svg":"ife9","./color/large/message.svg":"8cW6","./color/large/multiple-choice-a.svg":"WKc+","./color/large/multiple-choice.svg":"MVCW","./color/large/neutral-a.svg":"H2bT","./color/large/neutral.svg":"ayxv","./color/large/not-licensed.svg":"xJBL","./color/large/overall-grade-a.svg":"t5c1","./color/large/overall-grade-c.svg":"IJ5I","./color/large/overall-grade.svg":"liIJ","./color/large/participants-a.svg":"ccBX","./color/large/participants-c.svg":"2QdW","./color/large/participants.svg":"Jz7W","./color/large/pdf-a.svg":"mlWR","./color/large/pdf-c.svg":"8br1","./color/large/pdf.svg":"wQ8p","./color/large/photo-a.svg":"COXr","./color/large/photo-c.svg":"0h8u","./color/large/photo.svg":"Sd7M","./color/large/polling.svg":"ZPkp","./color/large/portfolios-a.svg":"zQ4o","./color/large/portfolios-c.svg":"lWc4","./color/large/portfolios.svg":"NT8M","./color/large/post-a.svg":"IkNe","./color/large/post-c.svg":"fDaC","./color/large/post.svg":"szfU","./color/large/presentation-a.svg":"9tHi","./color/large/presentation-c.svg":"QJaM","./color/large/presentation-event-a.svg":"QUo9","./color/large/presentation-event-c.svg":"T88+","./color/large/presentation-event.svg":"oYF4","./color/large/presentation.svg":"sgCM","./color/large/presenter-a.svg":"vnST","./color/large/presenter-c.svg":"FZr3","./color/large/presenter.svg":"WlpI","./color/large/question-bank.svg":"KFea","./color/large/quiz-a.svg":"+JEj","./color/large/quiz-c.svg":"1y62","./color/large/quiz.svg":"FfnC","./color/large/raise-hand-a.svg":"SqE4","./color/large/raise-hand-c.svg":"GKEI","./color/large/raise-hand.svg":"gc+6","./color/large/record-a.svg":"Y+bE","./color/large/record-c.svg":"AXLU","./color/large/record.svg":"CGKk","./color/large/reminder-a.svg":"EqYc","./color/large/reminder-c.svg":"YlxH","./color/large/reminder.svg":"J9Wn","./color/large/retention-center-a.svg":"RC05","./color/large/retention-center-c.svg":"VKlF","./color/large/retention-center.svg":"aC1a","./color/large/rubric-a.svg":"Jna/","./color/large/rubric-c.svg":"Zwyh","./color/large/rubric.svg":"LQCB","./color/large/scormengine.svg":"stFq","./color/large/settings-a.svg":"SIXn","./color/large/settings-c.svg":"0gDM","./color/large/settings.svg":"5Lv2","./color/large/share-file-a.svg":"ENOM","./color/large/share-file-c.svg":"nAd1","./color/large/share-file.svg":"bm0G","./color/large/smile-a.svg":"FQs8","./color/large/smile.svg":"K6jL","./color/large/spreadsheet-a.svg":"NRM2","./color/large/spreadsheet-c.svg":"8MR3","./color/large/spreadsheet.svg":"FEqA","./color/large/stop-recording-a.svg":"Uq0u","./color/large/stop-recording-c.svg":"TdYC","./color/large/stop-recording.svg":"rBlg","./color/large/support-a.svg":"aro8","./color/large/support-c.svg":"i57M","./color/large/support-call-a.svg":"CBaw","./color/large/support-call-c.svg":"29me","./color/large/support-call.svg":"Tt/h","./color/large/support-document-a.svg":"1FrO","./color/large/support-document-c.svg":"ICKK","./color/large/support-document.svg":"iYzH","./color/large/support.svg":"BqUr","./color/large/survey-a.svg":"6cFK","./color/large/survey-c.svg":"MnyZ","./color/large/survey.svg":"FlNS","./color/large/technical-diploma-a.svg":"yUzW","./color/large/technical-diploma-c.svg":"1vFb","./color/large/technical-diploma.svg":"/Kpj","./color/large/test-a.svg":"hhqX","./color/large/test-c.svg":"j0OV","./color/large/test.svg":"XXZk","./color/large/text-box-a.svg":"90sJ","./color/large/text-box.svg":"iD4Y","./color/large/textbook-a.svg":"EXfx","./color/large/textbook-c.svg":"M7lV","./color/large/textbook.svg":"0lS6","./color/large/true-false-a.svg":"JRnx","./color/large/true-false.svg":"bqYl","./color/large/user-card-a.svg":"iXfT","./color/large/user-card-c.svg":"dCge","./color/large/user-card.svg":"Ql1R","./color/large/video-a.svg":"a+f2","./color/large/video-c.svg":"sr/k","./color/large/video.svg":"vWWM","./color/large/whiteboard-a.svg":"lOzL","./color/large/whiteboard-c.svg":"ZMnq","./color/large/whiteboard.svg":"taLe","./color/large/wiki-a.svg":"JgGb","./color/large/wiki-c.svg":"6Ew5","./color/large/wiki.svg":"R2hg","./color/large/zip-a.svg":"os7W","./color/large/zip-c.svg":"AMJ7","./color/large/zip.svg":"VGqb","./color/medium/close-2pt.svg":"Q8up","./color/medium/connection-issue.svg":"drRh","./color/medium/hang-up.svg":"6Vd0","./color/medium/onedrive.svg":"OEId","./color/medium/page-help-bubble-active.svg":"sw9H","./color/medium/page-help-bubble.svg":"lRKW","./color/small/add-circle-extended-press.svg":"yjY9","./color/small/add-circle-press.svg":"9/3O","./color/small/audio-on-c.svg":"fW4K","./color/small/away-c.svg":"ShyA","./color/small/chat-c.svg":"/O0j","./color/small/check-circle-c.svg":"pHyo","./color/small/close-circle-c.svg":"8iVT","./color/small/connection-issue-c.svg":"/c0Q","./color/small/connection-issue.svg":"J8OM","./color/small/favorite-selected.svg":"sVv2","./color/small/feedback-c.svg":"WKfH","./color/small/goal-c.svg":"wVo0","./color/small/mobile-issues.svg":"8TQc","./color/small/past-due-date.svg":"TsMv","./color/small/recording.svg":"pjWD","./color/small/square-checked-c.svg":"HSs1","./color/small/time-stop-watch-a.svg":"OIel","./color/small/time-stop-watch.svg":"ZCx8","./solid/custom/sort-arrow-ascending.svg":"/8qJ","./solid/custom/sort-arrow-descending.svg":"10SD","./solid/custom/triangle-down.svg":"c1xu","./solid/custom/triangle-left.svg":"z11z","./solid/custom/triangle-right.svg":"p6mT","./solid/custom/triangle-up.svg":"SdTQ","./solid/small/ally-download.svg":"13oI","./stroke/custom/arrow-down.svg":"WMGI","./stroke/custom/arrow-up.svg":"/tFL","./stroke/custom/checkmark.svg":"CR7+","./stroke/custom/helpful-links-layout-left-hc-light.svg":"Brrq","./stroke/custom/helpful-links-layout-right-hc-light.svg":"SjLj","./stroke/custom/helpful-links-layout-text-hc-light.svg":"Qyx0","./stroke/custom/sort-arrows.svg":"dnFJ","./stroke/custom/toggle-chart.svg":"FjE1","./stroke/custom/toggle-grid.svg":"dLuH","./stroke/custom/toggle-table.svg":"l0AI","./stroke/custom/zoom-in.svg":"pyOV","./stroke/custom/zoom-out.svg":"iPBR","./stroke/inline/arrow-down.svg":"gG10","./stroke/inline/arrow-up.svg":"SILo","./stroke/inline/check.svg":"he71","./stroke/inline/sort-arrow-ascending.svg":"0lj0","./stroke/inline/sort-arrow-descending.svg":"5OWO","./stroke/large/attention.svg":"JyYz","./stroke/large/check-circle.svg":"avqp","./stroke/large/course-complete.svg":"EkpN","./stroke/large/download.svg":"Jyll","./stroke/large/exempt.svg":"afR0","./stroke/large/information.svg":"27Oe","./stroke/large/lock.svg":"1tai","./stroke/large/post-s.svg":"++Xq","./stroke/large/trash.svg":"BxLp","./stroke/large/unlock.svg":"VrxT","./stroke/large/upload.svg":"qMoD","./stroke/medium/accommodations.svg":"VGLC","./stroke/medium/account.svg":"8TR2","./stroke/medium/add-circle.svg":"ERW5","./stroke/medium/add-feedback.svg":"D40N","./stroke/medium/add-reminder.svg":"fOeM","./stroke/medium/admin-menu.svg":"fLgi","./stroke/medium/alert-error.svg":"Cgy4","./stroke/medium/app.svg":"1Jb1","./stroke/medium/arrow-left.svg":"0yuQ","./stroke/medium/arrow-right.svg":"cJXw","./stroke/medium/arrow.svg":"65zB","./stroke/medium/asl-interpreter.svg":"cKGK","./stroke/medium/assignment.svg":"RLoK","./stroke/medium/attempts.svg":"CmBn","./stroke/medium/attendance.svg":"g7vl","./stroke/medium/attention.svg":"mRyK","./stroke/medium/audio-on.svg":"0HCX","./stroke/medium/audio.svg":"IIWL","./stroke/medium/away.svg":"I4aR","./stroke/medium/back-arrow.svg":"YFue","./stroke/medium/back-to-session.svg":"kyvD","./stroke/medium/back.svg":"a647","./stroke/medium/beast-analytics.svg":"daAw","./stroke/medium/best-fit.svg":"L8sA","./stroke/medium/calculation.svg":"S29l","./stroke/medium/calendar.svg":"uAIC","./stroke/medium/call-on.svg":"GVn/","./stroke/medium/camera.svg":"HnIA","./stroke/medium/capture.svg":"PmZz","./stroke/medium/chat-transcript.svg":"4Yrn","./stroke/medium/chat.svg":"ZMge","./stroke/medium/check-circle.svg":"qK30","./stroke/medium/circle.svg":"bRfL","./stroke/medium/close-captioning.svg":"EtXv","./stroke/medium/close-circle.svg":"XzMV","./stroke/medium/close.svg":"sbbv","./stroke/medium/collab-session.svg":"MpNe","./stroke/medium/collab.svg":"bUel","./stroke/medium/connection-issue.svg":"KfuC","./stroke/medium/connection.svg":"n0lC","./stroke/medium/course-complete.svg":"XpGz","./stroke/medium/courses.svg":"JZHC","./stroke/medium/credit-card.svg":"0+o6","./stroke/medium/current.svg":"6s/a","./stroke/medium/curve-grade.svg":"HveL","./stroke/medium/discussion.svg":"VdwJ","./stroke/medium/documents.svg":"xFSc","./stroke/medium/down-arrow.svg":"Ri2K","./stroke/medium/download.svg":"UiGc","./stroke/medium/draw.svg":"JqCd","./stroke/medium/drop-pin.svg":"8YwD","./stroke/medium/duplicate.svg":"5C8M","./stroke/medium/edit-tool.svg":"9WoR","./stroke/medium/elective.svg":"s9RH","./stroke/medium/erase.svg":"b0fi","./stroke/medium/exam.svg":"H/3X","./stroke/medium/exempt.svg":"1Xl4","./stroke/medium/expand-app.svg":"2fku","./stroke/medium/export.svg":"NcT0","./stroke/medium/feedback.svg":"SdUk","./stroke/medium/filter-options.svg":"hpXv","./stroke/medium/focus.svg":"NbyP","./stroke/medium/folder-closed.svg":"0APo","./stroke/medium/forward-arrow.svg":"aAc7","./stroke/medium/full-screen.svg":"YMNP","./stroke/medium/goal.svg":"hoox","./stroke/medium/grade.svg":"9Z+X","./stroke/medium/grades.svg":"Bgua","./stroke/medium/grid-view.svg":"g7Bp","./stroke/medium/groups.svg":"/cjj","./stroke/medium/halloween.svg":"cAbK","./stroke/medium/hand-pointer.svg":"dtx/","./stroke/medium/hang-up.svg":"PSqB","./stroke/medium/help.svg":"yAc9","./stroke/medium/highlighter.svg":"KCO7","./stroke/medium/history.svg":"OhNG","./stroke/medium/image.svg":"n1Bw","./stroke/medium/import-export.svg":"TVur","./stroke/medium/import.svg":"pK6W","./stroke/medium/information.svg":"n8ST","./stroke/medium/institution.svg":"Xm/s","./stroke/medium/invisible.svg":"vPZ2","./stroke/medium/join-group-session.svg":"K+cJ","./stroke/medium/jump-to.svg":"skfG","./stroke/medium/language.svg":"Dq+u","./stroke/medium/leave-session.svg":"ztV+","./stroke/medium/lightbulb.svg":"ffqk","./stroke/medium/line.svg":"yVci","./stroke/medium/link.svg":"s+Fi","./stroke/medium/live-feedback.svg":"gUsr","./stroke/medium/location.svg":"MAFk","./stroke/medium/lock.svg":"NeZu","./stroke/medium/locked-view.svg":"HqKh","./stroke/medium/logout.svg":"+HDI","./stroke/medium/lower-hand.svg":"QjZS","./stroke/medium/main-menu.svg":"etGt","./stroke/medium/main-speaker.svg":"miOe","./stroke/medium/maximize.svg":"7muB","./stroke/medium/menu.svg":"3lUS","./stroke/medium/merge-windows.svg":"tLCE","./stroke/medium/messages.svg":"T2PE","./stroke/medium/minimize-app.svg":"23ax","./stroke/medium/minimize.svg":"yGeR","./stroke/medium/minus.svg":"xA3v","./stroke/medium/mobile-device.svg":"gdsn","./stroke/medium/mobile-issue.svg":"9YWV","./stroke/medium/mobile-issues.svg":"x91H","./stroke/medium/moderator.svg":"/Ghh","./stroke/medium/more.svg":"UoAW","./stroke/medium/move-item-up-down.svg":"gSSI","./stroke/medium/move-user.svg":"RdE8","./stroke/medium/multi-account.svg":"lhPh","./stroke/medium/mute-audio.svg":"0q/L","./stroke/medium/mute-phone.svg":"adLq","./stroke/medium/mute-video.svg":"FAVe","./stroke/medium/no-time-limit.svg":"mFhv","./stroke/medium/notes.svg":"AA9L","./stroke/medium/notification.svg":"hWS9","./stroke/medium/office-hours.svg":"AZRN","./stroke/medium/ok-connection.svg":"enbS","./stroke/medium/open-folder.svg":"YCIz","./stroke/medium/open-in-new-window.svg":"iX4Q","./stroke/medium/outline.svg":"4s+k","./stroke/medium/overall-grade.svg":"0UAW","./stroke/medium/paginate.svg":"bILe","./stroke/medium/paint-bucket.svg":"fRgH","./stroke/medium/panel-grip.svg":"Lx5L","./stroke/medium/partial-credit.svg":"dbat","./stroke/medium/password.svg":"Ig6M","./stroke/medium/pencil.svg":"9BJE","./stroke/medium/people.svg":"qssJ","./stroke/medium/play-start.svg":"5YT6","./stroke/medium/polling.svg":"oVMH","./stroke/medium/poor-connection.svg":"cn50","./stroke/medium/position-move.svg":"KCJs","./stroke/medium/post-first.svg":"3/ps","./stroke/medium/post.svg":"z84n","./stroke/medium/present.svg":"ogrl","./stroke/medium/presentation-menu.svg":"5awm","./stroke/medium/presenter.svg":"F4cD","./stroke/medium/print.svg":"gzx9","./stroke/medium/profile-user.svg":"tHxT","./stroke/medium/programs.svg":"rnhB","./stroke/medium/raise-hand.svg":"8Le8","./stroke/medium/record.svg":"Kw3I","./stroke/medium/rectangle.svg":"ryQW","./stroke/medium/redo.svg":"nXFp","./stroke/medium/refresh.svg":"c3te","./stroke/medium/reminder.svg":"ERht","./stroke/medium/report.svg":"9Qzo","./stroke/medium/reports.svg":"803s","./stroke/medium/return.svg":"FJfx","./stroke/medium/rubric.svg":"w+Yr","./stroke/medium/save.svg":"3FTl","./stroke/medium/search.svg":"c52B","./stroke/medium/select.svg":"BFbd","./stroke/medium/send.svg":"oiPd","./stroke/medium/settings.svg":"+hBK","./stroke/medium/shape-rectangle.svg":"Z4Uv","./stroke/medium/share-file.svg":"nwGu","./stroke/medium/share.svg":"A49z","./stroke/medium/speaker-view.svg":"AGo1","./stroke/medium/split-screen.svg":"4jkc","./stroke/medium/stop-action.svg":"Yobg","./stroke/medium/stop-recording.svg":"QV7s","./stroke/medium/stream.svg":"38lH","./stroke/medium/telephony.svg":"TAy2","./stroke/medium/test.svg":"ja10","./stroke/medium/text.svg":"6csa","./stroke/medium/three-bar-menu.svg":"zjGe","./stroke/medium/time-limit.svg":"0UiB","./stroke/medium/time.svg":"duWO","./stroke/medium/trash.svg":"Tziq","./stroke/medium/undo.svg":"2p1q","./stroke/medium/unlock.svg":"pLoT","./stroke/medium/up-arrow.svg":"ZxTA","./stroke/medium/upload-file.svg":"Wccl","./stroke/medium/upload.svg":"xBzL","./stroke/medium/user-focus.svg":"EZNX","./stroke/medium/vertical-menu.svg":"wzTk","./stroke/medium/video.svg":"3qpW","./stroke/medium/virtual-classroom.svg":"5TID","./stroke/medium/visible.svg":"yStb","./stroke/medium/visualization.svg":"MwiZ","./stroke/medium/whiteboard.svg":"UxWN","./stroke/small/accommodation.svg":"aM4X","./stroke/small/accommodations.svg":"SXCY","./stroke/small/account.svg":"KQP8","./stroke/small/activity-indicator.svg":"UnOk","./stroke/small/add-circle-extended.svg":"5KWE","./stroke/small/add-feedback.svg":"R3Nw","./stroke/small/add-plus.svg":"er+l","./stroke/small/add-reminder.svg":"drkH","./stroke/small/add.svg":"QSCl","./stroke/small/admin-menu.svg":"Ndma","./stroke/small/ally-score.svg":"joiD","./stroke/small/app.svg":"7nR5","./stroke/small/applause.svg":"ASdA","./stroke/small/approval.svg":"kr5Q","./stroke/small/arrow-down.svg":"UflX","./stroke/small/arrow-left.svg":"yJPd","./stroke/small/arrow-right.svg":"8/Uc","./stroke/small/arrow-up.svg":"3hVx","./stroke/small/arrow.svg":"ZOFS","./stroke/small/asl-interpreter.svg":"DIQu","./stroke/small/assessment-type.svg":"Vn7B","./stroke/small/assignment.svg":"3XtF","./stroke/small/attachment.svg":"E6UP","./stroke/small/attempts.svg":"rDgN","./stroke/small/attendance.svg":"+SO4","./stroke/small/attention.svg":"Gxl0","./stroke/small/audio-on.svg":"t6sY","./stroke/small/audio.svg":"JUdm","./stroke/small/away.svg":"07kN","./stroke/small/back-arrow.svg":"RWMf","./stroke/small/beast-analytics.svg":"lNwH","./stroke/small/best-fit.svg":"Gjzb","./stroke/small/bold.svg":"XNAZ","./stroke/small/bulleted_list.svg":"LEf/","./stroke/small/calculation.svg":"3YMJ","./stroke/small/calendar.svg":"Rhm1","./stroke/small/call-on.svg":"ZFnS","./stroke/small/camera.svg":"AmJs","./stroke/small/capture.svg":"DU9S","./stroke/small/chat-transcript.svg":"4ADj","./stroke/small/chat.svg":"I0ED","./stroke/small/check.svg":"+9S6","./stroke/small/circle.svg":"SBOG","./stroke/small/clear-all.svg":"Hheh","./stroke/small/clear.svg":"yPWz","./stroke/small/close-captioning.svg":"RNsJ","./stroke/small/close.svg":"UHrU","./stroke/small/collab-control.svg":"ZtRU","./stroke/small/collab.svg":"HItb","./stroke/small/complete.svg":"Bj7a","./stroke/small/confused.svg":"fGcJ","./stroke/small/connection-issue.svg":"1r22","./stroke/small/connection.svg":"Jo9U","./stroke/small/content-collection.svg":"Boxo","./stroke/small/content-market.svg":"0yhA","./stroke/small/course-complete.svg":"Qn8g","./stroke/small/courses.svg":"kmrc","./stroke/small/credit-card.svg":"s5Ft","./stroke/small/current.svg":"nOqf","./stroke/small/curve-grade.svg":"PPlD","./stroke/small/custom-content.svg":"BG7w","./stroke/small/disable.svg":"IkXK","./stroke/small/disapproval.svg":"KkWg","./stroke/small/discussion.svg":"PLde","./stroke/small/documents.svg":"LzZ4","./stroke/small/download.svg":"cJ/8","./stroke/small/draw.svg":"b85d","./stroke/small/drop-pin.svg":"xSRV","./stroke/small/duplicate.svg":"7VVB","./stroke/small/edit-tool.svg":"wYVw","./stroke/small/edit.svg":"EwXL","./stroke/small/elective.svg":"QNQD","./stroke/small/erase.svg":"InPb","./stroke/small/exam.svg":"xYAJ","./stroke/small/exclamation.svg":"H8Nq","./stroke/small/expand-app.svg":"vNWe","./stroke/small/expand.svg":"UW6p","./stroke/small/export.svg":"kJUd","./stroke/small/faster.svg":"Qkd3","./stroke/small/favorite-deselected.svg":"aaWY","./stroke/small/feedback.svg":"qgKe","./stroke/small/filter-options.svg":"ye9f","./stroke/small/flag.svg":"6Ico","./stroke/small/focus.svg":"t05C","./stroke/small/folder-closed.svg":"eapX","./stroke/small/format_paragraph.svg":"1LYb","./stroke/small/format_text.svg":"t/V7","./stroke/small/forward-arrow.svg":"mv2q","./stroke/small/full-screen.svg":"uHhh","./stroke/small/goal.svg":"plFP","./stroke/small/grade.svg":"ZhIA","./stroke/small/grades.svg":"s30y","./stroke/small/grid-view.svg":"9ibU","./stroke/small/grid.svg":"NL/t","./stroke/small/groups.svg":"XIzc","./stroke/small/halloween.svg":"RhaW","./stroke/small/hand-pointer.svg":"HdXP","./stroke/small/help.svg":"KTHN","./stroke/small/highlighter.svg":"YKZ9","./stroke/small/history.svg":"zCql","./stroke/small/image.svg":"LKXz","./stroke/small/import-export.svg":"na8z","./stroke/small/import.svg":"+3kY","./stroke/small/information.svg":"yXN4","./stroke/small/insert_formula.svg":"GSX/","./stroke/small/invisible.svg":"LRtU","./stroke/small/italicize.svg":"j8wH","./stroke/small/join-room.svg":"nr3I","./stroke/small/join-session.svg":"W8k6","./stroke/small/jump-to.svg":"taRR","./stroke/small/language.svg":"AxqY","./stroke/small/leave-session.svg":"7RDi","./stroke/small/lightbulb.svg":"7v6i","./stroke/small/line.svg":"Avap","./stroke/small/link.svg":"Chv6","./stroke/small/live-feedback.svg":"i6Dv","./stroke/small/location.svg":"DLAJ","./stroke/small/lock.svg":"gUiS","./stroke/small/locked-view.svg":"GSfB","./stroke/small/logout.svg":"2hRj","./stroke/small/lol.svg":"GatX","./stroke/small/lower-hand.svg":"4mUy","./stroke/small/main-menu.svg":"baJw","./stroke/small/main-speaker.svg":"g2Qi","./stroke/small/maximize.svg":"M109","./stroke/small/menu.svg":"1a/S","./stroke/small/merge-windows.svg":"qOkS","./stroke/small/messages.svg":"ecj2","./stroke/small/minimize-app.svg":"aR6k","./stroke/small/minimize.svg":"3pJM","./stroke/small/minus.svg":"sUq7","./stroke/small/mobile-device.svg":"ntmd","./stroke/small/mobile-issues.svg":"DyFM","./stroke/small/moderator.svg":"ed/e","./stroke/small/more.svg":"jfAU","./stroke/small/move-item-up-down.svg":"ahlU","./stroke/small/move-user.svg":"rvUR","./stroke/small/multi-account.svg":"N5Nh","./stroke/small/mute-audio.svg":"K9Oc","./stroke/small/mute-phone.svg":"wEmS","./stroke/small/mute-video.svg":"rEie","./stroke/small/no-time-limit.svg":"Hq9c","./stroke/small/notes.svg":"BtFV","./stroke/small/notifications.svg":"e22Y","./stroke/small/numbered_list.svg":"rvhq","./stroke/small/office-hours.svg":"XkDZ","./stroke/small/one-drive.svg":"gc0P","./stroke/small/open-folder.svg":"ialE","./stroke/small/open-in-new-window.svg":"Dug2","./stroke/small/outline.svg":"xMn1","./stroke/small/overall-grade.svg":"caHt","./stroke/small/paint-bucket.svg":"aHLu","./stroke/small/partial-credit.svg":"BapN","./stroke/small/password.svg":"BNEa","./stroke/small/people.svg":"4MuT","./stroke/small/personal-settings.svg":"6s6K","./stroke/small/play-start.svg":"tpAI","./stroke/small/play.svg":"wGVu","./stroke/small/polls.svg":"1iT/","./stroke/small/poor-connection.svg":"51h6","./stroke/small/position-move.svg":"qSBm","./stroke/small/post.svg":"nt+N","./stroke/small/presentation-menu.svg":"dJeZ","./stroke/small/presenter.svg":"4PPi","./stroke/small/print.svg":"e1Nv","./stroke/small/programs.svg":"Q6rj","./stroke/small/raise-hand.svg":"6auL","./stroke/small/record.svg":"SVUs","./stroke/small/rectangle.svg":"FcZT","./stroke/small/redo.svg":"0xSL","./stroke/small/refresh.svg":"64pZ","./stroke/small/reminder.svg":"tbZ/","./stroke/small/replies.svg":"g3cs","./stroke/small/reports.svg":"XKO7","./stroke/small/return.svg":"W+uP","./stroke/small/reuse.svg":"GM0s","./stroke/small/rubric.svg":"g7no","./stroke/small/save.svg":"EjcH","./stroke/small/search.svg":"Nlv2","./stroke/small/select.svg":"9irr","./stroke/small/send.svg":"+udw","./stroke/small/settings.svg":"wCOI","./stroke/small/share-file.svg":"vE1/","./stroke/small/share.svg":"gAzZ","./stroke/small/slower.svg":"u0ej","./stroke/small/smiley-face.svg":"Ku5/","./stroke/small/speaker-view.svg":"4dz/","./stroke/small/split-screen.svg":"nlpe","./stroke/small/square-checked.svg":"8cUy","./stroke/small/started.svg":"DiOL","./stroke/small/stop-action.svg":"91sB","./stroke/small/stop-recording.svg":"9Y+/","./stroke/small/stream.svg":"9peW","./stroke/small/streaming.svg":"yiD+","./stroke/small/strikethrough.svg":"Hnt6","./stroke/small/subscript.svg":"gCPt","./stroke/small/superscript.svg":"J/Tp","./stroke/small/telephony.svg":"9qUz","./stroke/small/test.svg":"62Vr","./stroke/small/text.svg":"he7v","./stroke/small/time-limit.svg":"4fdl","./stroke/small/time.svg":"c16V","./stroke/small/timer.svg":"5bSd","./stroke/small/trash.svg":"kycY","./stroke/small/type-size.svg":"as5R","./stroke/small/underline.svg":"kn/R","./stroke/small/undo.svg":"LiOJ","./stroke/small/unlinked.svg":"7tYg","./stroke/small/unlocked.svg":"8AVT","./stroke/small/upload-cloud.svg":"EVOf","./stroke/small/upload-file.svg":"zPwf","./stroke/small/upload.svg":"36KB","./stroke/small/user-focus.svg":"A0+f","./stroke/small/user.svg":"CCJi","./stroke/small/video.svg":"dm6y","./stroke/small/virtual-classroom.svg":"ih/T","./stroke/small/visible.svg":"HMmB","./stroke/small/volume.svg":"KQsT","./stroke/small/whiteboard.svg":"Sn/J"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="NAsp"},NMEb:function(e,t,n){"use strict";n("41sU");var r=n("wHJ2"),i=function(){function e(){}return e.convertToGrayscale=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=e.naturalWidth,i=e.naturalHeight;t.width=r,t.height=i,n.drawImage(e,0,0);for(var o,s=n.getImageData(0,0,r,i),a=s.data.length,c=0;c<a;c+=4)o=(s.data[c]+s.data[c+1]+s.data[c+2])/3,s.data[c]=o,s.data[c+1]=o,s.data[c+2]=o;return n.putImageData(s,0,0,0,0,s.width,s.height),t.toDataURL()},e}();n.d(t,"a",(function(){return o}));var o="ultra.components.directives.imageGrayscale",s=function(){function e(e,t,n){this.scope=e,this.element=t,this.attributes=n,"true"===this.attributes.bbImageGrayscale&&c()&&t.one("load",this.onLoadCallback())}return e.prototype.onLoadCallback=function(){var e=this;return function(){var t=i.convertToGrayscale(e.element[0]);e.element[0].src=t}},e}(),a=function(){this.restrict="A",this.link=function(e,t,n){return new s(e,t,n)}};function c(){var e=document.documentMode;return 10===e||11===e}var l=r.module(o,[]);c()&&l.directive("bbImageGrayscale",["$injector",function(e){return e.instantiate(a)}])},NXdT:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=(n("LNcM"),n("nh++"),n("nsO7")),o=n("zFCC"),s="bbIntersectionObservableDirective";function a(e,t){return void 0===t&&(t=null),function(n,r,o,s,a){var c=this,l=s[s.length-1],u=Object(i.once)((function(){e.call(c,n,r,o,s,a)})),d=u;t&&t>0?d=Object(i.debounce)((function(){u(),n.$evalAsync(i.noop)}),t):d.cancel=i.noop,l?l.link(r[0],n,(function(e,t,n){n.isIntersecting?d():d.cancel()})):u()}}function c(e){return void 0===e&&(e=null),function(t){var n=t,r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.apply(this,t),this.require=[].concat(this.require||[]).concat(["^^?"+o.a]),this.link=a(this.link||i.noop,e)};return r.prototype=n.prototype,Object.assign(r,t)}}!function(){function e(){}e.prototype.link=function(e,t,n,i){for(var o=[],s=4;s<arguments.length;s++)o[s-4]=arguments[s];return a(this.linkInView).apply(this,Object(r.__spreadArrays)([e,t,n,i],o))},e.prototype.getRequiredControllers=function(){return[]},Object.defineProperty(e.prototype,"require",{get:function(){return[].concat(this.getRequiredControllers()).concat(["^^?"+o.a])},set:function(e){},enumerable:!0,configurable:!0})}();angular.module(s,[]).directive("bbIntersectionObservable",["$compile",function(t){return{transclude:"element",priority:6e3,terminal:!0,require:"^^?"+o.a,restrict:"A",link:function(n,o,s,a,c){if(!a)return c((function(e,t){o.replaceWith(e)}));var l=Object(r.__assign)({placeholder:"div",debounce:0},n.$eval(s.bbIntersectionObservable||"{}")),u=e("<"+l.placeholder+' class="intersection-observable-placeholder"></'+l.placeholder+">");t(u)(n),o.replaceWith(u);var d=Object(i.debounce)(Object(i.once)((function(){c((function(e,t){a.unlink(u[0]),u.replaceWith(e)}))})),l.debounce);a.link(u[0],n,(function(e,t,n){n.isIntersecting?d():d.cancel()}))}}}])}).call(this,n("5iHu"))},Nrpd:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("wHJ2"),i=n("0JpG"),o=n("pjml"),s=n("TnpK"),a=n("MOka"),c=n("Sa5G"),l=n("5MwF"),u="ultra.base.notification-settings.routes";r.module(u,[i.moduleName,s.b]).config([s.c,function(e){e.peekState("notification-settings",{abstract:!0,require:function(){return n.e(609).then(n.bind(null,"gE0d"))},resolve:{mobileDistributorSettings:[o.U.serviceName,function(e){return e.$build().courseSettings.$new(c.y.Mobile).$fetch().$allow([400])}],isMobileDistributorActive:["$q","mobileDistributorSettings","memberships",function(e,t,n){var r=n.length>0,i=n.every((function(e){return e.isStudentMembership()}));return l.a.features.instructorPushNotifications||r&&i?t.$then((function(e){return!!e.settings})).$asPromise():e.resolve(!1)}],notificationGeneralSettings:[o.T.serviceName,function(e){return e.$build().$fetch().$asPromise()}],memberships:[a.b,function(e){return e.reloadStreamMemberships()}]}}).peekState("notification-settings.content",{url:"/notification/settings?tab",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/notifications-settings/base-notifications-settings")}],memberships:[a.b,function(e){return e.reloadStreamMemberships()}]},views:{"email-settings@":{require:function(){return n.e(686).then(n.bind(null,"IwlP"))}},"stream-settings@":{require:function(){return n.e(718).then(n.bind(null,"wgch"))},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/stream/base-stream")}]}},"sms-settings@":{require:function(){return Promise.all([n.e(29),n.e(46),n.e(664)]).then(n.bind(null,"EKn0"))}},"mobile-settings@":{require:function(){return n.e(687).then(n.bind(null,"pVU+"))}}}})}])},OAwL:function(e,t,n){},OBf2:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r,i=n("5MwF"),o=n("Q/M7"),s="cloud.account.tokens";!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Failed=2]="Failed"}(r||(r={}));var a=function(){},c=function(){function e(e,t,n,o,s){this.$q=e,this.bbLocalize=t,this.$timeout=n,this.bbScriptLoader=o,this.preference=s,this.credentials={},this.status=r.Uninitialized,this.enabledServices=i.a.kloudlessServices}return Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this.status===r.Initialized},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this,t=this.$q.defer(),n=this.loaderUrl||"https://kloudless.blackboardcdn.com/loader/js/loader.js",o=n.substring(0,n.indexOf("/loader"))+"/authenticator/js/kloudless-authenticator.js";if(this.status===r.Initialized)t.resolve();else if(this.status===r.Failed)t.resolve();else{var s,a=!1,c=r.Uninitialized,l=r.Uninitialized,u=function(){a||c!==r.Uninitialized&&l!==r.Uninitialized&&(c===r.Initialized?(e.status=r.Initialized,t.resolve()):(e.status=r.Failed,t.resolve()),a=!0,e.$timeout.cancel(s))};s=this.$timeout((function(){e.authenticator||(l=r.Failed,console.error("Authenticator initialization timed out. Disabling Authenticator Service.")),e.explorer||(c=r.Failed,console.error("Kloudless initialization timed out.  Disabling Kloudless Service.")),u()}),i.a.kloudlessInitializationTimeout||1e4),this.$q.all({Kloudless:this.bbScriptLoader.getScript(n,{exports:"Kloudless"}).then((function(t){e.explorer=t.explorer,c=r.Initialized,u()})),KloudlessAuth:this.bbScriptLoader.getScript(o,{exports:"Kloudless"}).then((function(t){e.authenticator=t.authenticator,l=r.Initialized,u()}))}).catch((function(){e.authenticator||(l=r.Failed,console.error("Failed to load kloudless authenticator. Disabling Authenticator Service.")),e.explorer||(c=r.Failed,console.error("Failed to load kloudless.  Disabling Kloudless Service.")),u()}))}return t.promise},e.prototype.getExplorer=function(e){var t=this,n=e?this.explorerInstance_multi:this.explorerInstance_single;if(!n){var r={app_id:this.clientId,retrieve_token:!0,multiselect:e,display_backdrop:!0,create_folder:!1,types:["files"]};(this.enabledServices||[]).length>0&&(r.services=this.enabledServices),this.apiUrl&&(r.base_url=o.i(this.apiUrl)),this.useLoaderExplorer&&(r.use_loader_explorer=this.useLoaderExplorer),r.inst_prov_type=this.instProvType,r.inst_domain=this.instDomain,r.persist="none",(n=this.explorer(r)).on("success",(function(e){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.resolve(e),t.currentChooserPromiseObject=null)})),n.on("cancel",(function(){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.resolve(),t.currentChooserPromiseObject=null)})),n.on("error",(function(e){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.reject(e),t.currentChooserPromiseObject=null)})),n.on("addAccount",(function(e){t.preference.getPreference(s).then((function(n){var r=t.deleteKloudlessAccount(JSON.parse(n.value),e.id);r.push(e),t.preference.setPreference(s,JSON.stringify(r))})).catch((function(){var n=[];n.push(e),t.preference.setPreference(s,JSON.stringify(n))}))})),n.on("deleteAccount",(function(e){t.preference.getPreference(s).then((function(n){var r=t.deleteKloudlessAccount(JSON.parse(n.value),e);t.preference.setPreference(s,JSON.stringify(r))}))})),e?this.explorerInstance_multi=n:this.explorerInstance_single=n}return n},e.prototype.openFilePicker=function(e,t){var n=this;if(this.currentChooserPromiseObject){var i=this.$q.defer();return i.reject(new Error("multiple explorer instances are not allowed")),i.promise}return this.currentChooserPromiseObject=this.$q.defer(),this.init().then((function(){if(n.status===r.Initialized){var i=n.getExplorer(t),o=n.bbLocalize.getLocale(e);return n.preference.getPreference(s,"[]",!0).then((function(e){var t=JSON.parse(e.value).map((function(e){return e.bearer_token.key}));i.update({locale:o,tokens:t}),i.choose()})).catch((function(e){console.error(e);i.update({locale:o,tokens:[]}),i.choose()}))}})),this.currentChooserPromiseObject.promise},e.prototype.getKloudlessInfo=function(){return{client_id:this.clientId,base_url:this.apiUrl}},e.prototype.deleteKloudlessAccount=function(e,t){return e.filter((function(e){return e.id!==t}))},e}()},OMme:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("wHJ2"),i=n("pjml"),o=n("vdfi"),s=n("bF8R"),a=n("0JpG"),c=n("JXhc"),l=n("TnpK"),u=n("Qbdf"),d=n("Sa5G"),p="base.proctoring-attempt",m="ultra.base.proctoring.routes";r.module(m,[a.moduleName,l.b,u.b]).config([l.c,u.c,function(t,r){var m,f;t.baseState(p,{url:"^/proctoring/attempt?courseId&contentId",peekStates:["conversations","message","assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-view",o.b,c.b],onEnter:function(){e("body").addClass("proctoring-attempt-open")},onExit:function(){e("body").removeClass("proctoring-attempt-open")},resolve:(m={},m[u.d]=r.resolve,m.contentData=[u.d,s.b,l.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],m.translations=[a.serviceName,function(e){return e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])}],m.currentContent=["contentData",function(e){return e.courseContent}],m.currentColumn=["contentData",function(e){return e.gradingColumn}],m.attempt=["$q",u.d,"contentData",i.C.serviceName,i.H.serviceName,function(e,t,n,r,o){var s=n.courseContent,a=n.groupAttempt||n.attempt,c=e.defer();if(a&&a.isInProgress())c.resolve(a);else{var l={scoreProviderHandle:d.B.Test,status:i.C.AttemptStatus.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":{type:i.d.AssessmentType.Test}}},u=s.isGroupContent?o.$build(l):r.$build(l);n.gradingColumn.createAttempt(u,{},s.isGroupContent,s.isGroupContent?s.assignedGroups[0].groupId:null).then((function(e){var n=e.id;s.isGroupContent?t.gradebook.groupAttempts.$find(n,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){c.resolve(e)})):t.gradebook.attempts.$find(n,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){c.resolve(e)}))}))}return c.promise}],m),require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(2),n.e(3),n.e(8),n.e(9),n.e(552)]).then(n.bind(null,"RTst"))},pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek"}).baseState("base.proctoring-review",{url:"^/proctoring/review?courseId&contentId&attemptId",peekStates:[],onEnter:function(){e("body").addClass("proctoring-attempt-open")},onExit:function(){e("body").removeClass("proctoring-attempt-open")},resolve:(f={translations:[a.serviceName,function(e){return e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])}]},f[u.d]=r.resolve,f.currentContent=[u.d,l.d,function(e,t){return e.contents.$find(t.nextParams.contentId).$asPromise()}],f.currentAttempt=[u.d,l.d,function(e,t){return e.gradebook.attempts.$find(t.nextParams.attemptId,{expand:"toolAttemptDetail,alignedGoals,viewUrl"}).$asPromise()}],f.currentGradedQuestionAttempts=["$q","currentAttempt",function(e,t){var n=e.defer();return t.assessment.gradedQuestionAttempts.$fetch({expand:"questionAttempt.question,questionAttempt.answerCorrectness"}).$asPromise().then((function(e){e.setPostStatusAndGroupAttemptId(t),n.resolve(e)})),n.promise}],f),require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(2),n.e(3),n.e(8),n.e(9),n.e(557)]).then(n.bind(null,"Mpwm"))},pageTitle:"components.services.proctoring.delivery.review.pageTitle"})}])}).call(this,n("5iHu"))},ORAk:function(e,t){e.exports='<div>\n    <div bb-dir>\n        <div ui-view="{0}" bb-offcanvas-pausal-scope></div>\n    </div>\n</div>'},OTLg:function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("vYaK"),a=n("f8ya"),c=function(){function e(e){this.content=e,this._groups=[],this._memberships=[],this.counts={count:0,withAccommodationCount:0,dueDateAccommodationCount:0,timeLimitAccommodationCount:0,maxLimit:0},this.refreshGroups()}return Object.defineProperty(e.prototype,"groups",{get:function(){return this._groups},set:function(e){var t=this;this.dueDateGroups=[],this.timeLimitGroups=[],this._groups=null!=e?e.filter((function(e){return e.accommodation=a.a.fromTypes(e.dueDateExceptionType,e.timeLimitExceptionType),e.accommodation.dueDate.hasAccommodation&&t.dueDateGroups.push(e),e.accommodation.timeLimit.hasAccommodation&&t.timeLimitGroups.push(e),e.accommodation.hasAccommodation})):[]},enumerable:!0,configurable:!0}),e.prototype.sortGroups=function(e){this._groups.sort(e),this.dueDateGroups.sort(e),this.timeLimitGroups.sort(e)},e.prototype.refreshGroups=function(){null!=this.content&&(this.groups=this.content.assignedGroups)},Object.defineProperty(e.prototype,"memberships",{get:function(){return this._memberships},set:function(e){var t=this;this.dueDateMembers=[],this.timeLimitMembers=[],this._memberships=null!=e?e.filter((function(e){var n=e.accommodation();return n.dueDate.hasAccommodation&&t.dueDateMembers.push(e),n.timeLimit.hasAccommodation&&t.timeLimitMembers.push(e),n.hasAccommodation})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroupsDueDate",{get:function(){return this.groups.filter((function(e){return e.accommodation.dueDate.hasAccommodation})).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroupsTimeLimit",{get:function(){return this.groups.filter((function(e){return e.accommodation.timeLimit.hasAccommodation})).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsers",{get:function(){return this.counts.withAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsersDueDate",{get:function(){return this.counts.dueDateAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsersTimeLimit",{get:function(){return this.counts.timeLimitAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGroupContent",{get:function(){if(null==this.content)return!1;var e=this.content.assignedGroups&&0!==this.content.assignedGroups.length;return this.content.isGroupContent||e||0!==this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstances",{get:function(){return this.isGroupContent?this.nGroups:this.nUsers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesDueDate",{get:function(){return this.isGroupContent?this.nGroupsDueDate:this.nUsersDueDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesTimeLimit",{get:function(){return this.isGroupContent?this.nGroupsTimeLimit:this.nUsersTimeLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesShown",{get:function(){if(this.isGroupContent){if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nGroups;if(this.showDueDateAccommodation)return this.nGroupsDueDate;if(this.showTimeLimitAccommodation)return this.nGroupsTimeLimit}else{if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nUsers;if(this.showDueDateAccommodation)return this.nUsersDueDate;if(this.showTimeLimitAccommodation)return this.nUsersTimeLimit}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAccommodation",{get:function(){return this.showDueDateAccommodation||this.showTimeLimitAccommodation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDueDateAccommodation",{get:function(){return null!=this.content&&(this.content.hasDueDate()&&this.content.getDueDate()&&this.hasDueDateAccommodation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeLimitAccommodation",{get:function(){return null!=this.content&&(this.content.getTimedTestDetail().hasTimeLimit&&this.hasTimeLimitAccommodation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return this.hasDueDateAccommodation||this.hasTimeLimitAccommodation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDueDateAccommodation",{get:function(){return this.nInstancesDueDate>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTimeLimitAccommodation",{get:function(){return this.nInstancesTimeLimit>0},enumerable:!0,configurable:!0}),e}();n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var l="ultra.services.accommodation.Service",u="accommodationService",d=["id","isAvailable","role","user.*","userId","courseRole","dueDateExceptionType","timeLimitExceptionType","permissions","user.rowStatus"],p=Object(r.__spreadArrays)(d,["displayOrder"]),m=["alignedGoals","assignedGroups","isGroupContent"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(function(){function e(e){this.courseModel=e,this._cache={},this._invalidCache={}}return e.prototype.createContentAccommodation=function(e){var t=new c(e);return null!=e&&e.id&&(e.assignedGroups&&!this._invalidCache[e.id]?t.refreshGroups():this.fetchGroupsOrCounts(t)),t},e.prototype.getContentAccommodation=function(e){return null==e?this.createContentAccommodation(e):((null==this._cache[e.id]||this._invalidCache[e.id])&&(this._cache[e.id]=this.createContentAccommodation(e),this._invalidCache[e.id]=!1),this._cache[e.id])},e.prototype.forceNewContentAccommodation=function(e){null!=e&&(this._invalidCache[e.id]=!0)},e.prototype.invalidateContentAccommodationOtherThan=function(e){var t=this;null!=e&&Object.keys(this._cache).forEach((function(n){n!==e.id&&(t._invalidCache[n]=!0)}))},e.prototype.refreshAccommodation=function(e){null!=e.content&&(e.isGroupContent?e.refreshGroups():this.fetchCount(e.content.courseId,e))},e.prototype.fetchGroupsOrCounts=function(e){var t=this;null!=e.content&&(null==e.content.isGroupContent||e.isGroupContent?e.content.$fetch({fields:m.join(","),expand:"selfEnrollmentGroups.group"}).$then((function(n){e.refreshGroups(),e.isGroupContent||t.fetchCount(n.courseId,e)})):this.fetchCount(e.content.courseId,e))},e.prototype.sortGroupsByTitle=function(e){e.sortGroups((function(e,t){return e.groupTitle.localeCompare(t.groupTitle)}))},e.prototype.fetchCount=function(e,t){this.courseModel.$new(e).memberships.getDetailsCount().then((function(e){t.counts=e}))},e.prototype.fetchMemberships=function(e,t){this.courseModel.$new(e).memberships.$refresh({fields:d.join(","),sort:"user.givenName"}).$then((function(e){return t.memberships=e}))},e.$inject=[s.serviceName],e}());i.module(l,[o.R]).service(u,f)},ObAk:function(e,t,n){"use strict";var r=n("gSji"),i=function(){var e=this;this.subscribeToEvents=function(t,n){t.subscriptions.forEach((function(t){if(e.checkIfValidSubscription(t)){var r=e.subscriptions.get(t)||new Set;r.add(n),e.subscriptions.set(t,r);var i=e.subscribeCallbacks.get(t);i&&i.forEach((function(e){return e(n)}))}else console.warn("Received subscription to invalid event type "+t)}))},this.unsubscribeFromEvents=function(t,n){t.subscriptions.forEach((function(t){if(e.subscriptions.has(t)){var r=e.subscriptions.get(t);r.delete(n),e.subscriptions.set(t,r);var i=e.unsubscribeCallbacks.get(t);i&&i.forEach((function(e){return e(n)}))}else console.warn("Integration is not subscribed to "+t+", not unsubscribing")}))},this.onSubscriptionEventCallback=function(t,n){var r=e.subscribeCallbacks.get(t)||[];return r.push(n),e.subscribeCallbacks.set(t,r),function(){return e.removeCallback(t,n,e.subscribeCallbacks)}},this.onUnsubscriptionEventCallback=function(t,n){var r=e.unsubscribeCallbacks.get(t)||[];return r.push(n),e.unsubscribeCallbacks.set(t,r),function(){return e.removeCallback(t,n,e.unsubscribeCallbacks)}},this.getSubscribedIntegrations=function(t){return e.subscriptions.get(t)||new Set},this.checkIfValidSubscription=function(e){return Object.values(r.V).some((function(t){return t===e}))},this.removeCallback=function(e,t,n){if(n.has(e)){var r=n.get(e);r.splice(r.indexOf(t),1),n.set(e,r)}},this.subscriptions=new Map,this.subscribeCallbacks=new Map,this.unsubscribeCallbacks=new Map};t.a=i},OcoR:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));n("3Yz5");var r=n("wHJ2"),i=n("Fvsw"),o=n("oQrK"),s=n("lEL+"),a=n("Ediv"),c=n("yC9S"),l="ultra.components.directives.firstVisit",u=function(){function t(e,t,n){var r=this;this.$q=e,this.bbContext=t,this.timeout=n,this.restrict="E",this.template=a,this.link=function(e,t,n){r.alterBodyStyles(e,"ftue-on");var i="ultraui.first.time."+n.path+"."+n.place+".visited";e.firstVisit=!1,e.loadImage=function(e,t,n,r){void 0===r&&(r=null);var i=n.inViewTarget;e&&"both"===t&&!i.src.match(new RegExp(r+"$"))&&(i.src=r)},r.bbContext.getPreference(i,"false").then((function(n){"false"===n.value?(e.firstVisit=!0,r.bbContext.setPreference(i,"true"),r.resizeWelcomeWindow(e,t)):"true"===n.value&&(e.firstVisit=!1)}))}}return t.prototype.alterBodyStyles=function(t,n){e("body").addClass(n),t.$on("$destroy",(function(){e("body").removeClass(n)}))},t.prototype.resizeWelcomeWindow=function(t,n){var r,i=this,s=function(){var e=n.find(".current-view"),t=e.offset().top,r=i.$q.defer(),o=i.$q.defer();n.closest("body").animate({scrollTop:t},{duration:500,always:function(){r.resolve()}}),n.closest("html").animate({scrollTop:t},{duration:500,always:function(){o.resolve()}}),i.$q.all([r.promise,o.promise]).then((function(){return e.find("a.ftue-img").focus()}))},a=function(t){var n=e(t.target).closest(".ftue-new-slide").next();e(n).addClass("current-view").siblings().removeClass("current-view"),s()};n.on("click",".scroll-button",a),o.a.detect().desktop()&&c.b.OnWindow("resize",(function(){i.timeout.cancel(r),r=i.timeout((function(){for(var t=n.find(".ftue-new-slide"),r=0;r<t.length;r++){var i=t.eq(r),o=i.find(".slide-content").height()+i.find(".slide-control").height()+parseInt(i.find(".slide-content").css("top"),10)+40;i.css("min-height",o);var a=e(window).height();a>o&&i.css("height",a)}s()}),t,250,!1)}),t),t.$on("$destroy",(function(){n.off("click",".scroll-button",a)}))},t.$inject=["$q",i.b,s.b],t}();r.module(l,[i.a,"angular-inview",s.a]).directive("bbFirstVisit",["$injector",function(e){return e.instantiate(u)}])}).call(this,n("5iHu"))},OmEq:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r="[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,24}\\s*",i=new RegExp("^"+r+",?$","i"),o=new RegExp("^"+r+"(,+\\s*\\n*"+r+")*,*\\s*$","i")},OvxF:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("T4UF"),n("67oV");var r=n("nsO7"),i=n("wHJ2"),o=n("0JpG"),s=n("XGja"),a=n("+4Px"),c=n("mkvA"),l="ultra.components.directives.modal",u=function(){function e(e,t,n,i,o){this.scope=e,this.element=t,this.attrs=n,this.transcludes=i,this.bbLocalize=o,this.ariaType="dialog",this.ariaType=e.modalAriaType?e.modalAriaType:this.ariaType,this.analyticsIdTagPrefix=e.analyticsIdTagPrefix||"";var s=e.modalTranslateOptions&&e.modalTranslateOptions();this.titleKey=e.modalTitleKey,this.titleString=o.translateSync(r.merge({key:e.modalTitleKey},s?s.title:{})),this.dismissKey=e.modalDismissKey,(e.modalDismissKey||s&&s.dismiss)&&(this.dismissString=o.translateSync(r.merge({key:e.modalDismissKey},s?s.dismiss:{})));var a=t.find("[name=modal-footer] button");t.find(".reveal-modal__footer").addClass("buttons-"+a.length+"-md")}return e.prototype.handleKeyDown=function(e){e.keyCode===a.u?(e.preventDefault(),e.shiftKey?s.c(this.element):s.b(this.element)):e.keyCode===a.g&&(e.stopPropagation(),this.dismiss())},e.prototype.dismiss=function(){this.scope.modalDismissCallback?this.scope.modalDismissCallback():this.scope.$parent.$dismiss()},e.$inject=["scope","element","attrs","transcludes",o.serviceName],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="E",this.template=c,this.transclude=!0,this.scope={modalDismissCallback:"&?",modalDismissKey:"@?",modalTitleKey:"@?",modalTranslateOptions:"&?",modalAriaType:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,n,r,i,o){e.modal=t.$injector.instantiate(u,{scope:e,element:n,attrs:r,transcludes:o})}}return e.$inject=["$injector","$rootScope"],e}();i.module(l,["multi-transclude"]).directive("bbModal",["$injector",function(e){return e.instantiate(d)}])},"Oyr+":function(e,t,n){"use strict";var r=n("D57K"),i=(n("juDU"),n("9RbK"),n("1dyP"),n("5k3c"),n("lhpd"),n("nsO7")),o=n("5iHu"),s=n("wHJ2"),a=n("nbDY"),c=n.n(a),l=n("X455"),u=n("0JpG"),d=(n("67oV"),n("0+Qs")),p=n("rxY8"),m=n("okL3"),f=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.bbLocalize=t,this.interval=n,this.$q=r,this.spinner=i,this.processingSpinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5},this.cancelUpload=function(e,t){e.stopImmediatePropagation(),e.preventDefault();var n=o.scope.inProgressFiles.filter((function(e){return e.id===t}))[0];o.cancelUploadFile(n)},this.scope.$on("cancel-upload-all",(function(e){o.scope.inProgressFiles.forEach((function(e){o.cancelUploadFile(e)}))}))}return e.prototype.cancelUploadFile=function(e){e.content&&this.scope.$root.$broadcast(G,e.content,H.DeleteContent),e.interval&&this.interval.cancel(e.interval);var t=this.scope.inProgressFiles.splice(this.scope.inProgressFiles.indexOf(e),1)[0];this.scope.$root.$broadcast(G,e.id,t,H.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.remove=function(e){i.remove(this.scope.inProgressFiles,(function(t){return t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId:!(!e.ui||!e.ui.id)&&t.id===e.ui.id})),this.scope.$root.$broadcast(G,this.scope.fileUploadDivId,0,e.id,H.Cancel,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.transformModelForDisplay=function(e){return{barId:e.file.id?e.file.id.replace(/\D/g,""):"",content:e.content,currentMimeType:e.currentMimeType,currentProgress:0,file:e.file,fileName:e.fileName,fileSize:e.file.size,id:e.id,interval:null,ui:e.ui}},e.prototype.setProgress=function(e,t,n){var r,o,s,a,c,l=this;if(n){c=i.find(this.scope.inProgressFiles,(function(e){return e.file.id===n}));var u="#file-progress-"+n.replace(/\D/g,"");a=this.scope.element.find(u+" .progress-circle .bar"),s=this.scope.element.find(u+" .processing-spinner .canvas")}else{c=this.scope.inProgressFiles.filter((function(t){return t.id===e}))[0];var d=this.scope.inProgressFiles.indexOf(c);a=this.scope.element.find(".progress-circle-svg .bar").eq(d),s=this.scope.element.find(".processing-spinner .canvas").eq(d)}if(c&&!(c.currentProgress>=t)){null!=c.interval&&this.interval.cancel(c.interval);var p=c.currentProgress;c.interval=this.interval((function(){c&&(c.currentProgress++,r=a.attr("stroke-dashoffset"),o=r-r*(.01*c.currentProgress),a.css({strokeDashoffset:o+"px"}),100===c.currentProgress&&(c.isProcessing||(l.spinner.initInlineLoader(s,l.processingSpinnerArgs).start(),c.isProcessing=!0),n?l.scope.$root.$broadcast(G,n,H.UploadProgressComplete):l.scope.$root.$broadcast(G,l.scope.fileUploadDivId,l.scope.inProgressFiles.indexOf(c),e,H.UploadProgressComplete),l.interval.cancel(c.interval)))}),this.scope,20,t-p)}},e.$inject=["scope",u.serviceName,d.b,"$q",p.b],e}(),h=function(){function e(e,t,n){var r=this;this.$injector=e,this.interval=t,this.bbLocalize=n,this.template=m,this.restrict="E",this.scope={displayResults:"=",progressId:"=",targetDiv:"@",primaryKey:"&?"},this.link=function(e,t,n){e.element=t,e.progress=r.$injector.instantiate(f,{scope:e}),e.progress.progressId=n.id||"directive-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.inProgressFiles=[],e.$on(G,(function(n,i,o,s,a){if(null!=o&&(null!=o.content&&o.content.ui.fileUploadId===e.progress.progressId||e.progress.progressId===o.progressId||e.targetDiv&&e.targetDiv===a))if(s!==H.Uploading||o.content)if(s===H.Uploaded)e.progress.displayResults||e.progress.remove(o);else if(s===H.Error)e.progress.remove(o);else if(s===H.CommenceUpload)if(null!=o.content){if(e.fileUploadDivId=i,t.attr("id")===o.targetElement.attr("id")){e.inProgressFiles.push(e.progress.transformModelForDisplay(o));var c=r.interval((function(){t.find(".progress-circle").length>0&&(e.$root.$broadcast(G,i,o,H.ProgressRenderComplete),r.interval.cancel(c))}),e,100,10)}}else o.progressId===e.progress.progressId&&(e.inProgressFiles.push(e.progress.transformModelForDisplay(o)),e.$root.$broadcast(G,i,o,H.ProgressRenderComplete));else s===H.Cancel&&e.progress.remove(o);else if(e.fileUploadDivId=i,e.inProgressFiles.push(e.progress.transformModelForDisplay(o)),e.progress.displayResults){e.lastPiesRendered=0;var l=r.interval((function(){var n=t.find(".progress-circle").length;if(n>e.lastPiesRendered){for(var o=e.lastPiesRendered;o<e.lastPiesRendered+n;o++)e.$root.$broadcast(G,i,o,e.inProgressFiles[o].id,H.ProgressRenderComplete),r.interval.cancel(l);r.interval.cancel(l)}e.lastPiesRendered=n}),e,100,10)}else e.$root.$broadcast(G,i,e.inProgressFiles.length-1,e.inProgressFiles[e.inProgressFiles.length-1].id,H.ProgressRenderComplete,e.targetDiv)})),e.$on(G,(function(t,n,r,i,o,s,a){(s&&s===e.targetDiv||i&&i.attr&&i.attr("id")===e.element.attr("id")&&o===H.UpdateProgress)&&e.progress.setProgress(n,r,a)})),e.progress.displayResults=!0,e.$watch("::displayResults",(function(t){e.progress.displayResults=t}))}}return e.$inject=["$injector",d.b,u.serviceName],e}();s.module("ultra.directives.bbProgress",[]).directive("bbProgress",["$injector",function(e){return e.instantiate(h)}]);var g=n("5MwF"),v=n("Vsv2"),b=n("k9iv"),y=n("b2lU"),S=n("A+IJ"),C=n("12mu"),w=n("pjml"),k=n("lEL+"),T=n("hkqm"),I=n("TnpK"),$=n("Q/M7"),E=n("GbAM"),P=n("fYJU"),A=n("RK4w"),x=n("8jry"),D=n("ByeC"),O=n("Za2G"),_=n("mhLG"),M=n("EN13"),N=n("YCUs"),R=n("ofgY"),L=n("W7eU"),j=n("Tfg2");n.d(t,"f",(function(){return U})),n.d(t,"e",(function(){return G})),n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return F})),n.d(t,"a",(function(){return q})),n.d(t,"c",(function(){return H}));var U="ultra.directives.bbFileUpload",G="bbFileUpload",B="thirdPartyFileSelectedEvent",F="fileSelected",q="dismissUploadModalEvent",H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.AllUploadsCompleted=new t("allUploadsCompleted"),t.AssignDropTarget=new t("assignDropTarget"),t.Cancel=new t("cancel"),t.CommenceUpload=new t("commenceUpload"),t.ContentCreated=new t("contentCreated"),t.Delete=new t("delete"),t.DeleteContent=new t("deleteContent"),t.Error=new t("error"),t.File=new t("file"),t.FileDrop=new t("fileDrop"),t.Folder=new t("folder"),t.LinkProgress=new t("linkProgress"),t.OutlineAddContentButtonFileSelected=new t("outlineAddContentButtonFileSelected"),t.ProgressRenderComplete=new t("progressRenderComplete"),t.UpdateFileTypes=new t("updateFileTypes"),t.UpdateProgress=new t("updateProgress"),t.Uploaded=new t("uploaded"),t.Uploading=new t("uploading"),t.UploadProgressComplete=new t("uploadProgressComplete"),t}(c.a),z=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorKey=n,r}return Object(r.__extends)(t,e),t.prototype.getErrorKey=function(){return this.errorKey},t.General=new t("generalFileUploadError","components.directives.fileUpload.errorFull"),t.Security=new t("securityFileUploadError","components.directives.fileUpload.errorSecurity"),t}(c.a),V=function(){function e(t,n,r,a,c,l,d,p,m,f,h,v,b,y,C,w,k,T){var I=this;if(this.scope=t,this.element=n,this.attrs=r,this.contextCourseMembership=a,this.bbLocalize=c,this.cloudDrive=l,this.interval=d,this.$modal=p,this.$http=m,this.timeout=f,this.$compile=h,this.Upload=v,this.ultraState=b,this.FileUtilityFactory=y,this.errorModal=C,this.toast=w,this.$q=k,this.contextUser=T,this.aborted=!1,this.alertedUserForFolderIncompatibility=!1,this.fileReviewVisible=!1,this.isMultipleUpload=!1,this.letMeChooseSelected=!1,this.progressVisible=!1,this.successVisible=!1,this.transcludeVisible=!0,this.uploadInProgress=!1,this.isUploadCompleteEventRegistered=!1,this.currentUploadCount=0,this.failedUploadCount=0,this.idCounter=0,this.originalUploadCount=0,this.successfulUploadCount=0,this.allowedFileTypes="",this.allowMultiple=!1,this.hideTranscludeDuringUpload=!0,this.id="",this.isContent=!1,this.monitorLeave=!1,this.useDefaultSuccessMethod=!1,this.isThirdPartyUpload=!1,this.model={fileLocation:null,files:[]},this.uploadingFiles=[],this.uploadsInProgress={},this.cancelUpload=function(e){var t=I.getUploadingFileIndexById(e);I.scope.isThirdPartyUpload&&t>=0?I.uploadingFiles.splice(t,1):I.uploadsInProgress[e]&&t>=0&&(I.abortUpload(e),I.aborted=!0,I.originalUploadCount--,I.resetFileInput(),t>=0&&I.uploadingFiles.splice(t,1),I.allowMultiple&&0!==I.model.files.length||I.hideTranscludeDuringUpload&&(I.fileReviewVisible=!1,I.transcludeVisible=!0)),I.uploadingFiles&&0!==I.uploadingFiles.length||(I.uploadInProgress=!1)},this.updateModel=function(e,t,n,r,i){var o=e.mimeType?e.mimeType:n,s=I.fileUtil.calculateSize(t.size),a={fileLocation:e.fileLocation,webLocation:e.webLocation,fileName:e.fileName,currentMimeType:o,fileSize:I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.sizeOutput",params:{label:s.sizeLabel,size:parseFloat(s.size.toFixed(2)).toString()}}),isMedia:e.isMedia,uploadDate:I.uploadDate,targetClass:r,ui:{position:i}};return I.allowMultiple?I.model.files.push(a):I.model.files[0]=a,I.model.fileLocation=e.fileLocation,I.currentFileName=a.fileName,a},this.success=function(e,t){I.currentUploadCount--,I.model.files=[],I.currentUploadCount<=0&&I.scope.$root.$broadcast(G,H.AllUploadsCompleted,null,null,null,I.scope.primaryKey&&I.scope.primaryKey()),"/v1/files"===I.attrs.url&&I.useDefaultSuccessMethod&&I.hideTranscludeDuringUpload&&(I.transcludeVisible=!0)},this.displayUploadError=function(e){I.scope.errorModalErrorKey=e?e.getErrorKey():z.General.getErrorKey(),I.modalInstance=I.$modal.open({template:L,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),I.modalInstance.result.then((function(){}),(function(){I.resetFileInput(),I.hideTranscludeDuringUpload&&(I.transcludeVisible=!0)}))},this.getMoreSupportURL=function(){return I.contextCourseMembership.isActAsInstructorMembership()||I.contextUser.userModel.isInstructor()?"http://help.blackboard.com/001_562en_US":"http://help.blackboard.com/001_563en_US"},this.progress=function(e,t,n){I.scope.$root.$broadcast(G,e,t,n,H.UpdateProgress,I.scope.targetDiv)},this.conductUpload=function(e,t,n){var r,o,s=0;if(o=n?I.uploadingFiles.filter((function(e){return e.id===n}))[0]:I.uploadingFiles.filter((function(t){return t.ui.primaryKey===e.ui.primaryKey}))[0],r=e.targetElement?e.targetElement:I.scope.targetElement,I.scope.isThirdPartyUpload)e&&(e.ui.index=t,e.ui.position=I.scope.position&&I.scope.position(),e.ui.targetDiv=I.scope.targetDiv,I.scope.thirdPartyDownloadHandler(e));else{var a=$.j()+g.a.apiBasePath+"/v1/files?expand=mimeType,isMedia";I.scope.fileLocation&&(a=a+"&fileLocation="+I.scope.fileLocation),I.scope.webLocation&&(a=a+"&webLocation="+I.scope.webLocation),I.scope.extraParams&&(a=a+"&"+i.map(I.scope.extraParams(),(function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)})).join("&")),I.uploadsInProgress[o.id]=I.Upload.upload({url:a,method:"POST",headers:{"Content-Type":e.type},data:e.data,file:e.file,fileName:e.fileName}).progress((function(e){100!==(s=parseInt((100*e.loaded/e.total).toString(),10))?o.currentProgress=s:o.currentProgress<100&&(o.currentProgress=99),I.progress(o.id,s,r)})).success((function(n,r,i,s){var a=I.interval((function(){if(100===o.currentProgress||0===o.currentProgress){var r=I.updateModel(n,e.file,e.currentMimeType,e.targetClass,I.scope.position&&I.scope.position());if(r.ui.originFileName=e.fileName,I.success(r,t),I.successfulUploadCount++,I.removeUploadingFile(e),(!I.uploadingFiles||0===I.uploadingFiles.length)&&(I.uploadInProgress=!1,I.failedUploadCount+I.successfulUploadCount===I.originalUploadCount)){var i=void 0;i=I.originalUploadCount>1?0===I.failedUploadCount?I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",params:{filesCount:I.originalUploadCount},noWrap:!0}):I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:I.originalUploadCount-I.failedUploadCount,filesCount:I.originalUploadCount},noWrap:!0})+" "+I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:I.failedUploadCount,filenameList:I.bbLocalize.formatItemsSync(I.failedUploadFilenames,I.failedUploadFilenames.length,null,I.scope,!1,{noWrap:!0})},noWrap:!0}):I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.singleFile.uploadSuccessful",noWrap:!0}),I.scope.$root.$broadcast(E.a,i)}r.ui.id=e.id,null!=e.content?I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,e.content,r,H.Uploaded,I.scope.targetDiv,I.isMultipleUpload):I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,r,H.Uploaded,I.scope.targetDiv,I.scope.primaryKey&&I.scope.primaryKey()),I.interval.cancel(a)}}),I.scope,100,5e3,!0)})).error((function(t){if(I.removeUploadingFile(e),I.failedUploadCount++,I.failedUploadFilenames.push(e.fileName),(!I.uploadingFiles||0===I.uploadingFiles.length)&&(I.uploadInProgress=!1,I.failedUploadCount+I.successfulUploadCount===I.originalUploadCount)){var n=void 0;n=I.originalUploadCount>1?I.failedUploadCount===I.originalUploadCount?I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFailed",noWrap:!0}):I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:I.originalUploadCount-I.failedUploadCount,filesCount:I.originalUploadCount},noWrap:!0})+" "+I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:I.failedUploadCount,filenameList:I.bbLocalize.formatItemsSync(I.failedUploadFilenames,I.failedUploadFilenames.length,null,I.scope,!1,{noWrap:!0})},noWrap:!0}):I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.singleFile.uploadFailed",noWrap:!0}),I.scope.$root.$broadcast(E.a,n)}if(I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,e,H.Error,I.scope.targetDiv,I.scope.primaryKey&&I.scope.primaryKey()),I.aborted)I.aborted=!1;else{var r=t&&422===t.status?z.Security:z.General;I.displayUploadError(r)}}))}},this.prepareToUpload=function(e,t,n,r){I.resetFileInput();var o=JSON.stringify({fileLocation:I.model.fileLocation}),a=e.type;a||(a=I.unknownMimeType);var c,l=e.name||e.filename;I.scope.isThirdPartyUpload?((c={id:e.id,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:l,targetClass:"img-icon-document",type:e.type}).ui=s.copy(e.ui),c.ui?c.ui.primaryKey=I.scope.primaryKey&&I.scope.primaryKey():c.ui={primaryKey:I.scope.primaryKey&&I.scope.primaryKey()},t&&I.isZipFile(l)&&(c.ui.needUnzip=t),c.ui.fileId=e.id,I.uploadingFiles.push(c),I.isUploadCompleteEventRegistered||(I.scope.$on("uploadComplete",(function(e,t){i.findIndex(I.uploadingFiles,(function(e){return t.ui.fileId===e.ui.fileId}))>=0&&(I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,t,H.Uploaded,I.scope.targetDiv,I.scope.primaryKey&&I.scope.primaryKey()),I.removeUploadingFile(t)),I.uploadingFiles&&0!==I.uploadingFiles.length||(I.uploadInProgress=!1)})),I.isUploadCompleteEventRegistered=!0),I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,c,H.Uploading,I.scope.targetDiv,I.scope.primaryKey&&I.scope.primaryKey())):((c={content:r,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:l,id:Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),progressId:null,targetClass:"img-icon-document",type:e.type}).ui={primaryKey:I.scope.primaryKey&&I.scope.primaryKey()},I.uploadingFiles.push(c),null!=r?I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,c,H.FileDrop,I.scope.targetDiv):I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,c,H.Uploading,I.scope.targetDiv,I.scope.primaryKey&&I.scope.primaryKey()))},this.uploadFiles=function(e,t){I.isContent||(I.fileReviewVisible=!0),I.hideTranscludeDuringUpload&&(I.transcludeVisible=!1),e.forEach((function(n){I.isContent?I.isFolder(n).then((function(e){e?(I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,n,H.Folder),I.scope.isChrome||I.alertedUserForFolderIncompatibility||(I.alertedUserForFolderIncompatibility=!0,I.errorModal.handleError(I.browserFolderWarning))):(I.uploadInProgress=!0,I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,n,H.File),I.currentUploadCount++)})):(I.uploadInProgress=!0,I.prepareToUpload(n,t,e.indexOf(n),null))}))},this.continueCurrentUpload=function(e,t){e.length>0&&I.uploadFiles(e,t)},this.uploadEnabled=function(){return(I.allowMultiple||I.allowMultipleSelects||0===I.uploadingFiles.length&&0===I.model.files.length)&&!I.scope.isThirdPartyUpload},this.fileUploadClick=function(){I.uploadEnabled()&&I.element.find(".fileUploadInput").trigger("click",!0)},this.modalCancelUpload=function(){I.modalInstance.dismiss()},this.addContent=function(e){e&&I.modalInstance.close(e)},this.closeModal=function(e){if(null===e||s.isUndefined(e))return I.modalInstance.close();e?I.modalInstance.close(e):(I.modalInstance.close(e),I.resetFileInput())},this.closeModalAndChooseFiles=function(){I.closeModal(!0),I.resetFileInput(),I.element.find(".file-upload-container div:first-child").eq(0).click()},this.containsPackageFile=function(e,t){t?(I.modalInstance=I.$modal.open({template:N,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),I.modalInstance.result.then((function(t){t&&I.continueCurrentUpload(e,t)}),(function(e){I.notifyUploadCancelled(),I.resetFileInput()}))):I.continueCurrentUpload(e)},this.containsZipFile=function(e){0!==e.filter((function(e){return I.isZipFile(e.name)})).length?(I.modalInstance=I.$modal.open({template:j,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),I.modalInstance.result.then((function(t){I.continueCurrentUpload(e,t)}),(function(e){I.notifyUploadCancelled(),I.resetFileInput()}))):I.containsPackageFile(e)},this.checkAllowedFileTypes=function(e){var t=I.validateFiles(e);t.length!==e.length?(I.validFiles=t,I.modalInstance=I.$modal.open({template:I.disallowedFileTypeErrorTemplate||x,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),I.modalInstance.result.then((function(e){I.scope.skipZipFileCheck&&I.scope.skipZipFileCheck()?I.continueCurrentUpload(t,!1):I.containsZipFile(t)}),(function(e){I.notifyUploadCancelled(),I.resetFileInput()}))):I.scope.skipZipFileCheck&&I.scope.skipZipFileCheck()?I.continueCurrentUpload(t,!1):I.containsZipFile(t)},this.removeFoldersIfBreaksDepthLimit=function(e){I.scope.depth&&I.scope.depth()>S.l?I.removeFolders(e,_):I.checkAllowedFileTypes(e)},this.removeFoldersIfDisallowed=function(e){I.scope.disallowFolderUploads&&I.scope.disallowFolderUploads()?I.removeFolders(e,D):I.removeFoldersIfBreaksDepthLimit(e)},this.removeFolders=function(e,t){var n={};I.$q.all(e.map((function(e){return I.isFolder(e).then((function(t){return t?n:e}))}))).then((function(r){var i=r.filter((function(e){return e!==n}));i.forEach((function(e){e.path=null})),i.length!==e.length?(I.scope.hasFiles=0!==i.length,I.modalInstance=I.$modal.open({template:t,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),I.modalInstance.result.then((function(e){I.checkAllowedFileTypes(i)}),(function(e){I.notifyUploadCancelled(),I.resetFileInput()}))):I.checkAllowedFileTypes(i)}))},this.ensurePlurality=function(e){e.length>1&&!I.allowMultiple?(I.uploadedFiles=e,I.modalInstance=I.$modal.open({template:O,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),I.modalInstance.result.then((function(t){var n=o('input[type="radio"][name="fileListing"]:checked').val();I.removeFoldersIfDisallowed([e[n]])}),(function(e){I.notifyUploadCancelled(),I.resetFileInput()}))):I.removeFoldersIfDisallowed(e)},this.onFileSelect=function(e,t,n,r,i,s){if(!(s&&(o(s.target).is(".js-no-file-drop")||o(s.target).is(".js-show-add-options"))||e&&e.length&&"Blob"===e[0].constructor.name))if(e.length){I.isMultipleUpload=e.length>1,I.scope.$root.$broadcast(G,I.scope.primaryKey&&I.scope.primaryKey(),H.AssignDropTarget),I.scope.$root.$broadcast(G,I.scope.primaryKey&&I.scope.primaryKey(),H.OutlineAddContentButtonFileSelected),I.setUploadDate(),I.ensurePlurality(e),I.originalUploadCount=e.length,I.failedUploadCount=I.successfulUploadCount=0,I.failedUploadFilenames=[];var a=void 0;a=I.originalUploadCount>1?I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",params:{filesCount:I.originalUploadCount},noWrap:!0}):I.bbLocalize.translateSync({locale:I.bbLocalize.getLocale(I.scope),key:"components.directives.fileUpload.aria.singleFile.uploadStarted",noWrap:!0}),I.scope.$root.$broadcast(E.a,a)}else I.throwModalForNonFileUpload()},this.confirmLeaveDuringUpload=function(t,n,r){!I.uploadInProgress&&!I.cloudDrive.isGettingFilesInfo||e.isLeaveConfirmModalOpened||(t.preventDefault(),I.modalInstance=I.$modal.open({template:A,scope:I.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),e.isLeaveConfirmModalOpened=!0,I.modalInstance.result.then((function(t){e.isLeaveConfirmModalOpened=!1,I.scope.isThirdPartyUpload||I.abortAllUploads(),I.aborted=!0,I.uploadInProgress=!1,I.uploadingFiles.forEach((function(e){I.scope.$root.$broadcast(G,I.scope.fileUploadDivId,e,H.Cancel,I.scope.targetDiv,I.scope.primaryKey&&I.scope.primaryKey())})),I.ultraState.go(n.name,r)}),(function(){e.isLeaveConfirmModalOpened=!1,I.scope.$root.$broadcast("$stateChangeAbort",{reason:"ABORTED_BY_FILE_UPLOAD"})})))},this.initialState=this.ultraState.current.name,this.allowMultipleSelects=t.$eval(t.allowMultipleSelects),this.scope.isChrome=/Chrome/.test(navigator.userAgent),this.disallowedFileTypeErrorTemplate=this.scope.disallowedFileTypeErrorTemplate,t.dragClass="drag",t.$on("bb-drag-start",(function(){t.dragClass=""})),t.$on("file-drag-restore",(function(){t.dragClass="drag"})),!t.isThirdPartyUpload){if(!r.url)throw new Error("'url' attribute required in file upload");if(this.url=r.url,!r.data)throw new Error("'data' attribute required in file upload")}this.element.find(".file-upload:first").on("click",(function(e,t){I.scope.clickEnabled&&!I.scope.clickEnabled()||t||I.fileUploadClick()})),["hideTranscludeDuringUpload","useDefaultSuccessMethod","allowedFileTypes","forceReselectDisallowedFiles","allowMultiple","isContent","fileUploadClick"].forEach((function(e){var t=I.scope.$watch(e,(function(n){null!=n&&(t(),I[e]=n)}))}));var P=this.scope.$watch("targetDiv",(function(e){if(null!=e)P(),I.scope.targetElement=n.find(e),0===I.scope.targetElement.length&&(I.scope.targetElement=o(e));else{I.progressVisible=!0;var r=I.interval((function(){var e=n.find(".file-upload-panel");e.length>0&&(I.scope.targetElement=e,I.interval.cancel(r))}),t,100,10)}})),M=this.scope.$watch("monitorLeave",(function(e){e&&(I.registerRouterStateChangeEventHandlers(),M())}));this.isThirdPartyUpload=t.isThirdPartyUpload,this.loadTranslations(),this.fileUtil=this.FileUtilityFactory()}return e.prototype.throwModalForNonFileUpload=function(){var e=this;this.modalInstance=this.$modal.open({template:M,scope:this.scope,resolve:{translations:[u.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),this.modalInstance.result.catch((function(t){e.notifyUploadCancelled(),e.resetFileInput()}))},e.prototype.endsWith=function(e,t){return e.lastIndexOf(t),e.lastIndexOf(t)===e.length-t.length},e.prototype.getUploadingFileIndexById=function(e){var t=this.uploadingFiles.filter((function(t){return t.id===e}))[0];return this.uploadingFiles.indexOf(t)},e.prototype.isFolder=function(e){var t=this,n=this.$q.defer();if("directory"===e.type)n.resolve(!0);else if(e instanceof Blob){var r=new FileReader;r.onload=function(){1===r.readyState&&r.abort(),n.resolve(!1)},r.onerror=function(){t.isLikelyAFile(e)&&(t.displayUploadError(),t.scope.$root.$broadcast(G,t.scope.fileUploadDivId,e,H.Error,t.scope.targetDiv,t.scope.primaryKey&&t.scope.primaryKey()),n.reject()),n.resolve(!0)},r.readAsText(this.sliceFileHelper(e))}else n.resolve(!1);return n.promise},e.prototype.sliceFileHelper=function(e){return e.slice(0,1)},e.prototype.isZipFile=function(e){return".zip"===e.substring(e.lastIndexOf(".")).toLowerCase()},e.prototype.isLikelyAFile=function(e){return"directory"!==e.type&&(""!==e.type||e.size>4096)},e.prototype.loadTranslations=function(){var e=this;this.bbLocalize.loadBundle("components/directives/file-upload").then((function(){e.browserFolderWarning=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.browserFolderWarning"}),e.cancelUploadText=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.cancelUploadText"}),e.unknownMimeType=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.unknownMimeType"}),e.uploaded=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.uploaded"}),e.uploading=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.uploading"})}))},e.prototype.notifyUploadCancelled=function(){this.scope.$root.$broadcast(G,this.scope.fileUploadDivId,null,H.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.removeUploadingFile=function(e){i.remove(this.uploadingFiles,(function(t){return t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId:e&&t.fileName===e.fileName})),delete this.uploadsInProgress[e.id]},e.prototype.resetFileInput=function(){for(var e=o(document.body).find(".fileUploadInput"),t=0;t<e.length;t++){e.eq(t)[0].value=""}},e.prototype.registerRouterStateChangeEventHandlers=function(){var e=this;this.scope.$on("$stateChangeStart",(function(t,n,r,i,o){i.name===n.name||n.name===e.initialState||e.isStateIgnored(i,n)||e.confirmLeaveDuringUpload(t,n,r)}))},e.prototype.isStateIgnored=function(e,t){if(this.scope.ignoredStates&&this.scope.ignoredStates())for(var n=0,r=this.scope.ignoredStates();n<r.length;n++){var i=r[n];if(e.name.indexOf(i)>=0||t.name.indexOf(i)>=0)return!0}return!1},e.prototype.setUploadDate=function(){var e=this;this.bbLocalize.formatDatetime(new Date,u.ILocaleDatetimeFormat.Short).then((function(t){e.uploadDate=t}))},e.prototype.validateFiles=function(e){if(""===this.allowedFileTypes)return e;var t=[],n=!1;this.allowedFileTypes.indexOf("/")>0?(n=!0,t[0]=this.allowedFileTypes.substr(0,this.allowedFileTypes.indexOf("/")),t[1]=this.allowedFileTypes.substr(this.allowedFileTypes.indexOf("/")+1)):t=this.allowedFileTypes.toLowerCase().split(",");for(var r=[],i=0;i<e.length;i++){var o=e[i];if(n){var s=[];s[0]=o.type.substr(0,this.allowedFileTypes.indexOf("/")),s[1]=o.type.substr(this.allowedFileTypes.indexOf("/")+1),t[0]!==s[0]||t[1]!==s[1]&&"*"!==t[1]||r.push(o)}else for(var a=0;a<t.length;a++)if("."!==t[a].charAt(0)&&(t[a]="."+t[a]),this.endsWith(o.name.toLowerCase(),t[a])){r.push(o);break}}return r},e.prototype.abortUpload=function(e){this.uploadsInProgress[e].abort(),delete this.uploadsInProgress[e]},e.prototype.abortAllUploads=function(){var e=this;Object.keys(this.uploadsInProgress).forEach((function(t){return e.abortUpload(t)}))},e.isLeaveConfirmModalOpened=!1,e}(),K=function(){function e(e,t,n,r,i,o,s,a,c,l,u,d,p,m,f){var h=this;this.contextCourseMembership=e,this.bbLocalize=t,this.cloudDrive=n,this.$modal=r,this.$http=i,this.interval=o,this.timeout=s,this.$compile=a,this.Upload=c,this.ultraStateService=l,this.FileUtilityFactory=u,this.errorModal=d,this.toast=p,this.$q=m,this.contextUser=f,this.replace=!1,this.transclude=!0,this.restrict="E",this.template=R,this.scope={allowedFileTypes:"@",allowMultiple:"=",allowMultipleSelects:"@",cancelUpload:"=",clickEnabled:"&?",confirmLeaveDuringUpload:"=",closeModal:"=",closeModalAndChooseFiles:"@",delete:"=",disableDrag:"&?",disallowFolderUploads:"&?",extensions:"=",fileUploadClick:"=",forceReselectDisallowedFiles:"&?",hideTranscludeDuringUpload:"=",isContent:"=",improperAmountOfFilesUpload:"=",isThirdPartyUpload:"=?",primaryKey:"&?",modalCancelUpload:"=",monitorLeave:"=",onFileSelect:"=",position:"&?",showUnzippedSelection:"=",skipZipFileCheck:"&?",targetDiv:"@",thirdPartyDownloadHandler:"=",uploadUnzippedFiles:"=",unzippedFileSelection:"=",uploadEnabled:"=",useDefaultSuccessMethod:"=",fileLocation:"@?",webLocation:"@?",ignoredStates:"&?",extraParams:"&?",depth:"&?",initialUpload:"=?",disallowedFileTypeErrorTemplate:"@?"},this.link=function(e,t,n,r){e.fileUploadDivId="fileUploadDiv-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.targetElement=t.find(".file-upload-panel"),e.fileUpload=new V(e,t,n,h.contextCourseMembership,h.bbLocalize,h.cloudDrive,h.interval,h.$modal,h.$http,h.timeout,h.$compile,h.Upload,h.ultraStateService,h.FileUtilityFactory,h.errorModal,h.toast,h.$q,h.contextUser),e.$on(B,(function(t,n,r){t.stopPropagation(),r&&r===(e.primaryKey&&e.primaryKey())&&e.fileUpload.onFileSelect(n),e.$emit(F,n,r)})),e.$on(q,(function(){e.fileUpload.modalInstance&&e.fileUpload.modalInstance.dismiss()})),e.$on(G,(function(t,n,r,i,o,s,a){if(n===e.fileUploadDivId)if(o===H.Cancel)e.fileUpload.cancelUpload(i);else if(o===H.ProgressRenderComplete)"number"==typeof r&&e.fileUpload.conductUpload(e.fileUpload.uploadingFiles.filter((function(e){return e.id===i}))[0],r,i);else if(o===H.UploadProgressComplete){var c=e.fileUpload.uploadingFiles.filter((function(e){return e.id===i}))[0];c&&(c.currentProgress=100)}})),e.$on(G,(function(n,r,i,o,s){r===(e.primaryKey&&e.primaryKey())&&s===H.UpdateFileTypes&&(e.fileUpload.allowedFileTypes=i,t.find("input").attr("accept",i),o())})),e.$on(G,(function(t,n,r,i){n===e.fileUploadDivId&&r&&r.fileName&&i===H.ProgressRenderComplete&&e.fileUpload.conductUpload(r,0,r.id)})),e.$on(G,(function(t,n,r,i){if(n===e.fileUploadDivId&&i===H.ContentCreated)var o=h.interval((function(){e.fileUpload.prepareToUpload(r.ui.file,!1,0,r),h.interval.cancel(o)}),e,100,20)})),e.$on(G,(function(t,n,r,i,o,s){if(n===e.fileUploadDivId&&s===H.LinkProgress)for(var a=0;a<e.fileUpload.uploadingFiles.length;a++)r.content?e.fileUpload.uploadingFiles[a].fileName===r.fileName&&e.fileUpload.uploadingFiles[a].file.path===r.file.path&&e.fileUpload.uploadingFiles[a].id===r.id&&(e.fileUpload.uploadingFiles[a].progressId=r.content.ui.fileUploadId,e.$root.$broadcast(G,e.fileUploadDivId,r,H.CommenceUpload)):e.fileUpload.uploadingFiles[a].fileName===r.fileName&&e.fileUpload.uploadingFiles[a].file.path===r.file.path&&e.fileUpload.uploadingFiles[a].id===r.id&&null==e.fileUpload.uploadingFiles[a].progressId&&(e.fileUpload.uploadingFiles[a].progressId=e.fileUpload.isContent?null:i,e.fileUpload.uploadingFiles[a].targetElement=o,e.$root.$broadcast(G,e.fileUploadDivId,r,H.CommenceUpload))})),e.initialUpload&&e.fileUpload.uploadFiles([e.initialUpload],!1)}}return e.$inject=[l.d,u.serviceName,v.c,C.b,"$http",d.b,k.b,"$compile","Upload",I.d,y.a,b.c,T.b,"$q",P.b],e}();s.module(U,["ngFileUpload",l.a,u.moduleName,v.b,d.a,C.a,w.R,y.b,k.a,"ultra.directives.bbProgress",b.b,T.a,I.b]).directive(G,["$injector",function(e){return e.instantiate(K)}])},P2dS:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("0+Qs"),c="ultra.components.services.gradebookColumnCategory.Service",l="gradeColumnCategoryService",u=function(){function e(t,n,r,i){var o=this;this.$q=t,this.$rootScope=n,this.CourseModel=r,this.interval=i,this.categoriesByCourse={},this.interval((function(){o.categoriesByCourse={}}),this.$rootScope,60*e.CLEAN_CACHE_CATEGORIES_INTERVAL*1e3)}return e.prototype.getIconByGradebookCategory=function(t,n){var r=null;if(null!=t){if(!1===n||s.E.GradeCategoryTitleEnum.Attendance.isEqualTo(t)){var i=s.E.GradeCategoryTitleEnum.parse(t);i&&(r=i.getIconName())}r||(r=e.DEFAULT_ICON_FOR_CATEGORY)}return r},e.prototype.getCategoryIcon=function(t){var n=e.DEFAULT_ICON_FOR_CATEGORY;return t&&t.title&&(n=this.getIconByGradebookCategory(t.title,t.isUserDefined)),n},e.prototype.loadGradeCategories=function(e){return this.CourseModel.$new(e).gradebook.categories.$fetch().$asPromise()},e.prototype.getOrLoadCategoriesForCourse=function(e,t){var n=this;if(t||!this.categoriesByCourse[e])return this.loadGradeCategories(e).then((function(t){return n.reorderCategories(t,0),n.categoriesByCourse[e]=t,t}));var r=this.$q.defer();return r.resolve(this.categoriesByCourse[e]),r.promise},e.prototype.getFilteredCategoriesForCourse=function(e,t){return this.getOrLoadCategoriesForCourse(e,!0).then((function(e){return i.filter(e,t)}))},e.prototype.updateCategoriesForCourse=function(e,t){if(this.categoriesByCourse[e]){var n=this.categoriesByCourse[e],r=i.findIndex(n,(function(e){return e.id===t.id}));-1===r?n.splice(0,0,t):n.splice(r,1,t)}},e.prototype.deleteCategoriesForCourse=function(e,t){if(this.categoriesByCourse[e]){var n=this.categoriesByCourse[e],r=i.findIndex(n,(function(e){return e.id===t.id}));r>-1&&n.splice(r,1)}},e.prototype.reorderCategories=function(e,t){for(var n=e.length,r=t;r<n;++r){var i=e[r];i.isUserDefined&&(e.splice(r,1),e.unshift(i))}},e.DEFAULT_ICON_FOR_CATEGORY="custom-item",e.CLEAN_CACHE_CATEGORIES_INTERVAL=5,e.$inject=["$q","$rootScope",s.o.serviceName,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);o.module(c,[a.a]).service(l,u)},P2rh:function(e,t,n){},P43K:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("wHJ2"),i=n("w9Zy"),o=n("fYJU"),s=n("pjml"),a=n("TnpK"),c=n("qhd3"),l="ultra.features.base.profile.update.basicProfile.routes";r.module(l,["ui.router",i.d,s.R,a.b]).config([a.c,function(e){e.peekState("update-profile",{url:"/update?focusField",require:function(){return Promise.all([n.e(29),n.e(46),n.e(92),n.e(694)]).then(n.bind(null,"SqGJ"))},pageTitle:"base.profile.update.sectionTitle",resolve:{currentUser:[c.serviceName,o.b,function(e,t){return e.$find(t.userId).$asPromise()}]}}).peekState("update-language",{url:"/language",require:function(){return n.e(653).then(n.bind(null,"Upnn"))},pageTitle:"base.profile.updateLanguage.pageTitle",resolve:{currentUser:[c.serviceName,o.b,function(e,t){return e.$find(t.userId).$asPromise()}]}})}])},PCGa:function(e,t,n){},PIK1:function(e,t,n){var r={"./ms-onedrive-ar":["j5W+",7,50],"./ms-onedrive-ar/":["j5W+",7,50],"./ms-onedrive-ar/index":["j5W+",7,50],"./ms-onedrive-ar/index.js":["j5W+",7,50],"./ms-onedrive-cs":["IAHg",7,51],"./ms-onedrive-cs/":["IAHg",7,51],"./ms-onedrive-cs/index":["IAHg",7,51],"./ms-onedrive-cs/index.js":["IAHg",7,51],"./ms-onedrive-cy-gb":["e4M4",7,52],"./ms-onedrive-cy-gb/":["e4M4",7,52],"./ms-onedrive-cy-gb/index":["e4M4",7,52],"./ms-onedrive-cy-gb/index.js":["e4M4",7,52],"./ms-onedrive-da":["pP1g",7,53],"./ms-onedrive-da/":["pP1g",7,53],"./ms-onedrive-da/index":["pP1g",7,53],"./ms-onedrive-da/index.js":["pP1g",7,53],"./ms-onedrive-de":["TaaX",7,54],"./ms-onedrive-de/":["TaaX",7,54],"./ms-onedrive-de/index":["TaaX",7,54],"./ms-onedrive-de/index.js":["TaaX",7,54],"./ms-onedrive-en":["In/i",7,56],"./ms-onedrive-en-GB":["W9kG",7,55],"./ms-onedrive-en-GB/":["W9kG",7,55],"./ms-onedrive-en-GB/index":["W9kG",7,55],"./ms-onedrive-en-GB/index.js":["W9kG",7,55],"./ms-onedrive-en/":["In/i",7,56],"./ms-onedrive-en/index":["In/i",7,56],"./ms-onedrive-en/index.js":["In/i",7,56],"./ms-onedrive-es":["HMPZ",7,57],"./ms-onedrive-es/":["HMPZ",7,57],"./ms-onedrive-es/index":["HMPZ",7,57],"./ms-onedrive-es/index.js":["HMPZ",7,57],"./ms-onedrive-fr":["3tZT",7,58],"./ms-onedrive-fr/":["3tZT",7,58],"./ms-onedrive-fr/index":["3tZT",7,58],"./ms-onedrive-fr/index.js":["3tZT",7,58],"./ms-onedrive-it":["m9d1",7,59],"./ms-onedrive-it/":["m9d1",7,59],"./ms-onedrive-it/index":["m9d1",7,59],"./ms-onedrive-it/index.js":["m9d1",7,59],"./ms-onedrive-ja":["zkQx",7,60],"./ms-onedrive-ja/":["zkQx",7,60],"./ms-onedrive-ja/index":["zkQx",7,60],"./ms-onedrive-ja/index.js":["zkQx",7,60],"./ms-onedrive-ko":["YyWV",7,61],"./ms-onedrive-ko/":["YyWV",7,61],"./ms-onedrive-ko/index":["YyWV",7,61],"./ms-onedrive-ko/index.js":["YyWV",7,61],"./ms-onedrive-ms":["wtVC",7,62],"./ms-onedrive-ms/":["wtVC",7,62],"./ms-onedrive-ms/index":["wtVC",7,62],"./ms-onedrive-ms/index.js":["wtVC",7,62],"./ms-onedrive-nl":["F6Lg",7,63],"./ms-onedrive-nl/":["F6Lg",7,63],"./ms-onedrive-nl/index":["F6Lg",7,63],"./ms-onedrive-nl/index.js":["F6Lg",7,63],"./ms-onedrive-pl":["3CIo",7,64],"./ms-onedrive-pl/":["3CIo",7,64],"./ms-onedrive-pl/index":["3CIo",7,64],"./ms-onedrive-pl/index.js":["3CIo",7,64],"./ms-onedrive-pt-br":["mkP+",7,65],"./ms-onedrive-pt-br/":["mkP+",7,65],"./ms-onedrive-pt-br/index":["mkP+",7,65],"./ms-onedrive-pt-br/index.js":["mkP+",7,65],"./ms-onedrive-ru":["w80r",7,66],"./ms-onedrive-ru/":["w80r",7,66],"./ms-onedrive-ru/index":["w80r",7,66],"./ms-onedrive-ru/index.js":["w80r",7,66],"./ms-onedrive-sv":["JE9R",7,67],"./ms-onedrive-sv/":["JE9R",7,67],"./ms-onedrive-sv/index":["JE9R",7,67],"./ms-onedrive-sv/index.js":["JE9R",7,67],"./ms-onedrive-th":["QpSs",7,68],"./ms-onedrive-th/":["QpSs",7,68],"./ms-onedrive-th/index":["QpSs",7,68],"./ms-onedrive-th/index.js":["QpSs",7,68],"./ms-onedrive-tr":["lRPW",7,69],"./ms-onedrive-tr/":["lRPW",7,69],"./ms-onedrive-tr/index":["lRPW",7,69],"./ms-onedrive-tr/index.js":["lRPW",7,69],"./ms-onedrive-zh-hans":["4ik0",7,70],"./ms-onedrive-zh-hans/":["4ik0",7,70],"./ms-onedrive-zh-hans/index":["4ik0",7,70],"./ms-onedrive-zh-hans/index.js":["4ik0",7,70],"./ms-onedrive-zh-hant":["sk9k",7,71],"./ms-onedrive-zh-hant/":["sk9k",7,71],"./ms-onedrive-zh-hant/index":["sk9k",7,71],"./ms-onedrive-zh-hant/index.js":["sk9k",7,71],"./package":["P6Br",3,240],"./package.json":["P6Br",3,240]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[2]).then((function(){return n.t(i,t[1])}))}i.keys=function(){return Object.keys(r)},i.id="PIK1",e.exports=i},PIPc:function(e,t){e.exports='\x3c!-- this button is for screenreader users only and should be placed at the end of an infinite scroll list in the DOM so that they know that more items can be loaded --\x3e\n<button class="sr-only load-more-items"\n        ng-click="infiniteScroll.loadMoreItems()"\n        ng-disabled="infiniteScroll.disabled || infiniteScroll.remainingCount <= 0"\n        bb-load-bundle="components/directives/infinite-scroll"\n        bb-translate translate-values="infiniteScroll.loadMoreLocalizationValues"\n        analytics-id="{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}">{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}</button>\n'},PSJS:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"MessageLifeCycleEnum",(function(){return u})),n.d(t,"MessageType",(function(){return d})),n.d(t,"serviceName",(function(){return p}));var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("yCC5"),a=n("Rjd/"),c=n("nkTj"),l=n("z6Q5"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Published=new t("PUBLISHED"),t.Deleted=new t("DELETED"),t.Drafted=new t("DRAFT"),t}(o.a),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.next=function(){var e=parseInt(this.toString(),0)+1,n=t.getKeys();return n.length<e&&(e=n.length-1),t[n[e]]},t.Discussion=new t("0"),t.Comment=new t("1"),t.Reply=new t("2"),t.ClassConversation=new t("3"),t}(o.a),p=s.P;a.a.factory(p,["restmod","$q",c.d,l.b,function(t,n,r,i){return t.model().mix({replies:{mask:!0},parent:{mask:!0},states:{hasOne:s.F},discussion:{mask:!0},type:{mask:!0},isAvailable:{mask:!0},user:{mask:!0},lastUpdateUser:{mask:!0},ui:{mask:!0,init:function(){return{isEdit:!1}}},postDate:{serialize:"date"},editDate:{serialize:"date"},"gradedColumn.dueDate":{serialize:"date"},$hooks:{"after-fetch-many":function(){"messages"===this.$scope.$partial&&this[0]&&(this[0].type=d.Discussion,this[0].parent=this[0],this[0].discussion=this[0],this[0].states.readStateInd=this[0].messageStatus.isRead)},"after-destroy":function(e){e.data&&this.$unwrap(e.data)}},$extend:{Record:{getReplies:function(e,t){var r=this;if(t&&0===this.messageStatus.numberOfChildren)return this.replies=this.$scope.$collection(),this.replies.$asPromise=function(){return n((function(e){return e(r.replies)}))},this.replies;var i=this;return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/replies",params:{sort:e.sort,limit:e.limit,offset:e.offset,userId:e.userId,groupId:e.groupId,messageLifecycle:e.messageLifecycle}},(function(e){this.$unwrap(e.data),i.replies=this,i.ui.count=e.data.paging.count,this.forEach((function(e){e.type=i.type.next(),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead}))}))},saveReply:function(t,n){void 0===n&&(n={});var r=this.$scope.$url()+"/"+this.id+"/replies?"+e.param(n);return this.$scope.$build().$send({method:"POST",url:r,data:t.$wrap()},(function(e){this.$unwrap(e.data),this.replies=this.$scope.$collection()}))},getRepliesCount:function(t){void 0===t&&(t={});var n=this.$scope.$url()+"/"+this.id+"/replies/count?"+e.param(t),r=this;return this.$scope.$build().$send({method:"GET",url:n},(function(e){r.ui.count=e.data.count}),(function(){r.ui.count=0}))},updateMessageStatus:function(t,n){void 0===n&&(n={});var r=this.$scope.$url()+"/"+this.id+"/states?"+e.param(n);return this.$scope.$build().$send({method:"PATCH",url:r,data:t.$wrap()},(function(e){return this.states=this.$unwrap(e.data),this.states}),(function(e){400===e.status||e.$response&&e.$response.status}))},copy:function(e){var t=this;Object.getOwnPropertyNames(e).filter((function(e){return"$"!==e[0]})).forEach((function(n){t[n]=e[n]}))}},Collection:{batchGetReplies:function(e){e&&Object.keys(e).forEach((function(t){t,"="+e[t]+"&"}));var t=n.defer(),r=[],o=function(t){var o=n.defer();return i.performBatch((function(){n.all(t.map((function(t){return t.getReplies(e,!0).$asPromise()}))).then(o.resolve)})),o.promise.then((function(e){return e.forEach((function(e,n){var i=t[n];e.forEach((function(e){e.type=i.type.next(),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead,r.push(e)}))})),r}))};return o(this).then(o).then(t.resolve),t.promise}}}})}])}.call(this,n("5iHu"))},PZ5L:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-course-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss.button"\n  >\n    components.services.error-modal.dismiss\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},PqsU:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-conflict.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-conflict.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},"Q/M7":function(e,t,n){"use strict";(function(e){var r;function i(){return r||void 0===window.location||(r=o(window.location.href)),r}function o(e){var t=/^[^\/]*\/\/[^\/]+/.exec(e);return t&&t[0]||e}function s(e){return 0===e.indexOf("https://")}function a(e){return/^[a-zA-Z]*:?\/\//.test(e)}function c(e,t){return e&&e.indexOf("//")<0&&("/"!==e[0]&&(e="/"+e),e=t?t+e:i()+e),e}function l(e){return e?/[^\?#]*/.exec(e)[0]:e}function u(e,t){var n="";return t&&e&&e.isClassic()&&(n=decodeURIComponent(t).trim()),n.length>0&&"/"===n[0]&&n||null}function d(e){e.match(/:\/\//)||(e="http://"+e),window.open(e,"_blank")}function p(e){window.location=e}function m(e){return e?e.replace(/^https?:/,""):""}function f(e){return e&&e.indexOf("://")>=0?e.substring(e.indexOf("://")+3):e}function h(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split("?")[0].split(":")[0]}function g(e){var t=e.indexOf("?");if(t<0)return e;var n=e.substring(t+1).split("&"),r={};return n.forEach((function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])})),r}function v(e,t,n){return e.indexOf(t+"=")<0?e+(e.indexOf("?")<0?"?":"&")+t+"="+n:e}function b(t,n,r){return encodeURIComponent(t+"/"+n+"?"+e.param(r))}function y(e){return c("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent(c(e)))}function S(e,t){var n=v(e,"isForcedDownload","true");return n=v(n,"downloadFileName",encodeURIComponent(t))}function C(e){var t=e.split("/");return t[t.length-1]}function w(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"n",(function(){return s})),n.d(t,"s",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"r",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"q",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return S})),n.d(t,"k",(function(){return C})),n.d(t,"m",(function(){return w}))}).call(this,n("5iHu"))},QaOk:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.arrowKeyNavigation",s="bb-arrow-key-container",a="["+s+"]",c="[bb-arrow-key-destination]",l=function(){function t(t){var n=this;this.$parse=t,this.restrict="A",this.link=function(t,r,o){var s=n.$parse(o.bbArrowKeyNavigation)(null);if("rows"!==s.layout&&"columns"!==s.layout&&"both"!==s.layout)throw new Error("bb-arrow-key-navigation directive is missing or has an invalid layout specified");if(s.tabDirection&&"vertical"!==s.tabDirection&&"horizontal"!==s.tabDirection)throw new Error("bb-arrow-key-navigation directive has an invalid tabDirection specified");r.on("keydown",(function(t){var o=e(t.target),a=t.keyCode;s.tabDirection&&a===i.u&&("vertical"===s.tabDirection?a=t.shiftKey?i.v:i.d:"horizontal"===s.tabDirection&&(a=t.shiftKey?i.j:i.s)),"rows"===s.layout&&(a=n.rotateKeyCode(a)),s.upEqualsLeft&&(a=n.upEqualsLeftKeyCode(a)),n.navigate(o,r,a,s.wrap,s.explicit)&&(n.body.removeClass("hide-focus-outline"),t.preventDefault(),t.stopPropagation())})),t.$on("$destroy",(function(){r.off()}))},this.body=e("body")}return t.prototype.navigate=function(e,t,n,r,o){var l;switch(n){case i.v:if(o){var u=parseInt(e.closest(a).attr("bb-arrow-key-container"),10),d=(p=t.find(this.containerWithValue(u)).find(c).filter(":visible")).index(e.closest(c));"0"===e.attr("tabindex")||0===d&&!r||(l=p.eq(d-1))}else!(l=e.closest(c).prev(c)).length&&r&&(l=e.closest(a).find(c).last());break;case i.d:if(o){var p;u=e.closest(a).attr("bb-arrow-key-container"),d=(p=t.find(this.containerWithValue(u)).find(c).filter(":visible")).index(e.closest(c));!(l=p.eq(d+1)).length&&r&&(l=p.first())}else!(l=e.closest(c).next(c)).length&&r&&(l=e.closest(a).find(c).first());break;case i.j:if(o){u=parseInt(e.closest(a).attr(s),10);var m=e.closest(c).attr("bb-arrow-key-destination");l=t.find(this.containerWithValue(u-1)).find(this.destinationWithValue(m)).first()}else{var f=e.closest(c).prevAll(c).length;(h=this.getPreviousContainer(e).find(c)).length?l=h.eq(f).add(h.last()).first():r&&f>0&&(l=e.closest(a).nextAll(a).last().find(c).eq(f))}break;case i.s:if(o){u=parseInt(e.closest(a).attr(s),10),m=e.closest(c).attr("bb-arrow-key-destination");l=t.find(this.containerWithValue(u+1)).find(this.destinationWithValue(m)).first()}else{var h;f=e.closest(c).prevAll(c).length;(h=this.getNextContainer(e).find(c)).length?l=h.eq(f).add(h.last()).first():r&&(l=e.closest(a).prevAll(a).last().find(c).eq(f))}}return!(!l||!l.length)&&(l.focus(),!0)},t.prototype.containerWithValue=function(e){return"["+s+'="'+e+'"]'},t.prototype.destinationWithValue=function(e){return'[bb-arrow-key-destination="'+e+'"]'},t.prototype.getPreviousContainer=function(e){return e.closest(a).prevAll(a).first()},t.prototype.getNextContainer=function(e){return e.closest(a).nextAll(a).first()},t.prototype.rotateKeyCode=function(e){switch(e){case i.v:return i.j;case i.d:return i.s;case i.j:return i.v;case i.s:return i.d}},t.prototype.upEqualsLeftKeyCode=function(e){switch(e){case i.j:return i.v;case i.s:return i.d;default:return e}},t.$inject=["$parse"],t}();r.module(o,[]).directive("bbArrowKeyNavigation",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},Qbdf:function(e,t,n){"use strict";var r=n("D57K"),i=n("pjml"),o=n("yC9S"),s=n("ZzR9"),a=n("nsO7"),c=function(e){function t(t){var n=e.call(this)||this;return n.courseId=t,n}return Object(r.__extends)(t,e),t}(function(){function e(){var e=this;this._cache={},this.hookUserModel=a.once((function(t){var n=e;return e.offHookUserModelFunc||(e.offHookUserModelFunc=t.$mixHook("after-feed",(function(){n.cache(this.id,this)}))),e.offHookUserModelFunc}))}return e.prototype.destroy=function(){this._cache={},this.offHookUserModel()},e.prototype.miss=function(e){var t=this;return e.filter((function(e){return!(e in t._cache)}))},e.prototype.hit=function(e){var t=[].concat(e),n=this.miss(t);return a.isEmpty(n)},e.prototype.get=function(e,t){var n=this._cache[e];return!n&&t?t:n},e.prototype.invalidate=function(e){delete this._cache[e]},e.prototype.cache=function(e,t){e&&t&&!t.isPlaceHolder&&(this._cache[e]=t)},e.prototype.fetchUsers=function(e,t,n){var r=this,i=n.defer(),o=this.miss([].concat(e));return a.isEmpty(o)?i.resolve(this):(this.offHookUserModelFunc||this.hookUserModel(t),t.findMany(o).$then((function(e){i.resolve(r)}))),i.promise},e.prototype.offHookUserModel=function(){this.offHookUserModelFunc&&(this.offHookUserModelFunc(),this.offHookUserModelFunc=void 0)},e}()),l=n("0JpG"),u=n("x+T+"),d=n("lVRt"),p=n("PZ5L");n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return v}));var m="ultra.service.course-context.course",f="currentCourseModel",h=f+"Provider",g=m+"."+f+".changed",v=d.b,b=function(){this.$get=["$injector",function(e){return e.instantiate(y)}],this.name=v,this.resolve=["$state",f,function(e,t){var n=e.nextParams.courseId;return t.load(n)}]},y=function(){function e(e,t,n,r,i,a){this.$q=e,this.$rootScope=t,this.bbLocalize=n,this.entitlementCache=r,this.CourseModel=i,this.UserModel=a;var c=this;o.b.OnRootScope(t,s.a.$stateHasCourseInContextChanged,(function(e,t,n){n&&!t&&c.clear()}))}return Object.defineProperty(e.prototype,"courseId",{get:function(){return this._courseId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"course",{get:function(){return this._courseModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewStatus",{get:function(){return this._previewStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usersCache",{get:function(){return this._usersCache},enumerable:!0,configurable:!0}),e.prototype.isInIframeOfPreviewMode=function(){return this.previewStatus&&this.previewStatus.previewing&&window.top!==window},e.prototype.load=function(e){var t=this;return e?e&&this.courseId===e&&this.course?this.course.$asPromise():this.loadCourse(e).then((function(n){return t.$q.all([t.loadLocalizationBundle(n),t.entitlementCache.loadCourseEntitlements(e)]).then((function(){return t.update(e,n),t._courseModel.studentPreview.$resolve().$asPromise().then((function(e){return t._previewStatus=e,e.courseMembershipId?t.course.memberships.$new(e.courseMembershipId).$fetch().$asPromise().then((function(n){return e.user=t.UserModel.$buildRaw(e.user),e.user.memberships.push(t.course.memberships.$buildRaw(n)),t._courseModel})):t._courseModel}))}))}),(function(e){return t.$q.reject(Object.assign(e||{},{goToBasePage:!0}))})):this.$q.when(null)},e.prototype.loadCourse=function(e){var t=this;return this.CourseModel.$find(e,{expand:"instructorsMembership, instructorsMembership.courseRole, effectiveAvailability, isChild"}).$allow([404]).$asPromise().then((function(n){var r=n.$response;if(r&&404===r.status){var i=new Error("Course "+e+" not found");return Object.assign(i,{goToBasePage:!0,errorModalConfig:{response:r,template:p}}),t.$q.reject(i)}return n}))},e.prototype.loadLocalizationBundle=function(e){var t;return t=e.isClassic()||!e.locale?this.bbLocalize.getLocale(this.$rootScope):e.locale,this.$q.all([this.bbLocalize.loadLocale(t),this.bbLocalize.loadBundle("features/course/course",t)])},e.prototype.clear=function(){this.update(null,null)},e.prototype.update=function(e,t){var n=this.courseId,r=this.course;this._courseId=e,this._courseModel=t,this._usersCache&&this._usersCache.courseId!==e&&(this._usersCache.destroy(),this._usersCache=null),e&&(this._usersCache=new c(e),this._usersCache.hookUserModel(this.UserModel)),this.$rootScope.$broadcast(g,{id:e,model:t},{id:n,model:r})},e.prototype.refreshStudentPreviewStatus=function(){return this._courseModel.studentPreview.$fetch()},e.$inject=["$q","$rootScope",l.serviceName,u.c,i.o.serviceName,i.Qb.serviceName],e}(),S=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(y),[i.R,l.moduleName,u.b]);angular.module(m,S).provider(f,b)},RDfZ:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));n("yDoS");var r=n("wHJ2"),i=n("Qbdf"),o=n("0JpG"),s=n("pjml"),a=n("lEL+"),c=n("TnpK"),l=n("oNH7"),u=n("H+SH"),d=n("CPVT"),p="ultra.directives.conversionStatusBar",m=function(){function t(t,n,r,i,o,s,a,c,l){var u=this;this.$scope=t,this.$rootScope=n,this.$q=r,this.$modal=i,this.CourseModel=o,this.ultraState=s,this.contextCourse=a,this.bbLocalize=c,this.timeout=l,this.displayGuidanceBackToClassic=!1,this.identifyCourse().then((function(e){u.course=e,u.courseId=u.course.id,u.showStatusBar=!1,u.course.canConvert()&&(u.showStatusBar=u.course.isUltraPreview())})),t.$on("confirmNewExperience",(function(){u.useTheNewExperience()})),t.$on("TOGGLE-PREVIEW",(function(e,t){u.inPreview=t,u.updateStatusClass(),u.showStatusBar=u.course.isUltraPreview()})),t.$on("$stateChangeSuccess",(function(){u.updateStatusClass()})),t.$on("$destroy",(function(){e("body").removeClass("has-conversion-status-bar")}))}return Object.defineProperty(t.prototype,"showStatusBar",{get:function(){return this._showStatusBar},set:function(e){var t=this._showStatusBar;this._showStatusBar=e,t!==e&&this.updateStatusClass()},enumerable:!0,configurable:!0}),t.prototype.updateStatusClass=function(){!this.showStatusBar||this.hideStatusBar()||this.inPreview?e("body").removeClass("has-conversion-status-bar"):e("body").addClass("has-conversion-status-bar")},t.prototype.identifyCourse=function(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()},t.prototype.useTheNewExperience=function(){var e=this;this.course.setUltraStatusDecided().then((function(){e.showStatusBar=!1,e.$rootScope.$broadcast("reloadCourse",e.courseId)}))},t.prototype.backToClassic=function(){var e=this;this.course.undoCourseConversion().then((function(t){var n=t.$response;if(200===n.status)e.ultraState.transitionTo(e.course.getBaseRoute()),e.$rootScope.$broadcast("convertToClassicCourse",e.course.id);else if(400===n.status||404===n.status){e.$modal.open({template:u,scope:e.$scope,resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}).result.then((function(){e.ultraState.transitionTo(e.course.getBaseRoute())}))}}))},t.prototype.hideStatusBar=function(){return(this.ultraState.current.name.match(/\.peek\./g)||[]).length>1},t.$inject=["scope","$rootScope","$q","$modal",s.o.serviceName,c.d,i.e,o.serviceName,a.b],t}(),f=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=l,this.scope={courseId:"@?"},this.link=function(e){e.conversionStatusBarController=t.$injector.instantiate(m,{scope:e})}}return e.$inject=["$injector"],e}();r.module(p,[i.b,o.moduleName,s.R,c.b,a.a,d.a]).directive("bbConversionStatusBar",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},"RJ/U":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s=n("Qbdf"),a="ultra.course.question-banks.routes";r.module(a,[i.moduleName,o.b,s.b]).config([o.c,s.c,function(e,t){var r;e.peekState("question-banks",{url:"/banks",resolve:(r={},r[s.d]=t.resolve,r.translations=[i.serviceName,function(e){return e.loadBundle("features/course/question-banks/question-banks")}],r),peekStates:["import-details"],peekViewName:"question-banks-peek",panelClass:"full",require:function(){return Promise.all([n.e(2),n.e(3),n.e(574)]).then(n.bind(null,"lXpl"))},pageTitle:"course.question-banks.pageTitle"}).peekState("import-details",{url:"/importDetails/{taskId:_[0-9]+_1}",require:function(){return n.e(626).then(n.bind(null,"zGGy"))},pageTitle:"course.question-banks.import-details.pageTitle"})}])},RK4w:function(e,t){e.exports='<bb-modal id="close-without-saving-modal" class="notification"\n          modal-title-key="components.directives.fileUpload.closeDuringUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.closeDuringUploadInstructions</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.closeDuringUploadClose">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadClose</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.closeDuringUploadGoBack">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadGoBack</bb-translate>\n  </button>\n</bb-modal>\n'},RNuw:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("nsO7"),i=n("wHJ2");function o(e,t,n,o){var s={};return e.$watch((function(){return t}),(function(t,a){var c=Object.keys(t).filter((function(e){return!Object.prototype.hasOwnProperty.call(s,e)&&t[e]&&Object.prototype.hasOwnProperty.call(t[e],"$viewValue")&&(!o||!(o.indexOf(e)>-1))}));i.forEach(c,(function(i){s[i]=e.$watch((function(){return t[i].$viewValue}),(function(e,o){!t[i].$dirty&&(null==o||Number.isNaN(Number(o)))||r.isEqual(e,o)||n(e,o)}))}));var l=Object.keys(a).filter((function(e){return!Object.prototype.hasOwnProperty.call(t,e)&&a[e]&&Object.prototype.hasOwnProperty.call(a[e],"$viewValue")}));i.forEach(l,(function(e){s[e](),delete s[e]}))}),!0),function(){i.forEach(s,(function(e){e()}))}}},RRs6:function(e,t,n){var r={"./ar-001/_combined.json":["bzSq",244],"./ar-AE/_combined.json":["kXUs",245],"./ar-BH/_combined.json":["uu8c",246],"./ar-DJ/_combined.json":["AXSJ",247],"./ar-DZ/_combined.json":["d2Tw",248],"./ar-EG/_combined.json":["HU5B",249],"./ar-EH/_combined.json":["Rf/8",250],"./ar-ER/_combined.json":["lMqs",251],"./ar-IL/_combined.json":["sCR2",252],"./ar-IQ/_combined.json":["s69u",253],"./ar-JO/_combined.json":["YeG1",254],"./ar-KM/_combined.json":["Nsqb",255],"./ar-KW/_combined.json":["v7VH",256],"./ar-LB/_combined.json":["4UZ5",257],"./ar-LY/_combined.json":["d5Iy",258],"./ar-MA/_combined.json":["dJ98",259],"./ar-MR/_combined.json":["kPIw",260],"./ar-OM/_combined.json":["QBE7",261],"./ar-PS/_combined.json":["oCQ2",262],"./ar-QA/_combined.json":["Hadl",263],"./ar-SA/_combined.json":["BWYe",264],"./ar-SD/_combined.json":["sZn0",265],"./ar-SO/_combined.json":["/pS2",266],"./ar-SS/_combined.json":["P5MV",267],"./ar-SY/_combined.json":["t6FV",268],"./ar-TD/_combined.json":["0dWw",269],"./ar-TN/_combined.json":["olD4",270],"./ar-YE/_combined.json":["cwri",271],"./ar/_combined.json":["Z7mm",243],"./bg-BG/_combined.json":["lhO/",273],"./bg/_combined.json":["XExx",272],"./ca-AD/_combined.json":["1TTF",275],"./ca-ES-VALENCIA/_combined.json":["x5id",277],"./ca-ES/_combined.json":["OeTV",276],"./ca-FR/_combined.json":["pD9U",278],"./ca-IT/_combined.json":["i92d",279],"./ca/_combined.json":["pXk6",274],"./cs-CZ/_combined.json":["/ACq",281],"./cs/_combined.json":["F5xB",280],"./cy-GB/_combined.json":["aQ0a",283],"./cy/_combined.json":["PtiR",282],"./da-DK/_combined.json":["06Qy",285],"./da-GL/_combined.json":["WpLh",286],"./da/_combined.json":["eYMN",284],"./dav-KE/_combined.json":["ZzyU",288],"./dav/_combined.json":["qiBt",287],"./de-AT/_combined.json":["ESfo",290],"./de-BE/_combined.json":["MZB8",291],"./de-CH/_combined.json":["RKx5",292],"./de-DE/_combined.json":["F/Ao",293],"./de-LI/_combined.json":["ZsKg",294],"./de-LU/_combined.json":["NQwb",295],"./de/_combined.json":["4uqP",289],"./en-001/_combined.json":["YHcT",297],"./en-150/_combined.json":["6nXF",298],"./en-AG/_combined.json":["Ma+m",299],"./en-AI/_combined.json":["Bb4Y",300],"./en-AS/_combined.json":["3DdZ",301],"./en-AU/_combined.json":["+YpM",302],"./en-BB/_combined.json":["0r6j",303],"./en-BE/_combined.json":["MYcT",304],"./en-BM/_combined.json":["Beag",305],"./en-BS/_combined.json":["4GKC",306],"./en-BW/_combined.json":["fyZ5",307],"./en-BZ/_combined.json":["KDbT",308],"./en-CA/_combined.json":["JPNH",309],"./en-CC/_combined.json":["wcBm",310],"./en-CK/_combined.json":["yKBd",311],"./en-CM/_combined.json":["wJ3H",312],"./en-CX/_combined.json":["nv2n",313],"./en-DG/_combined.json":["oaA8",314],"./en-DM/_combined.json":["PVF+",315],"./en-ER/_combined.json":["Ufgi",316],"./en-FJ/_combined.json":["xGrz",317],"./en-FK/_combined.json":["AVBD",318],"./en-FM/_combined.json":["GEpg",319],"./en-GB/_combined.json":["iETG",320],"./en-GD/_combined.json":["BwNK",321],"./en-GG/_combined.json":["m4mR",322],"./en-GH/_combined.json":["Ndt5",323],"./en-GI/_combined.json":["7qmt",324],"./en-GM/_combined.json":["LI3r",325],"./en-GU/_combined.json":["1mog",326],"./en-GY/_combined.json":["4oOp",327],"./en-HK/_combined.json":["kzZH",328],"./en-IE/_combined.json":["cZDf",329],"./en-IM/_combined.json":["FWGY",330],"./en-IN/_combined.json":["8QNH",331],"./en-IO/_combined.json":["Wk71",332],"./en-JE/_combined.json":["hL7Z",333],"./en-JM/_combined.json":["6RUH",334],"./en-KE/_combined.json":["imc3",335],"./en-KI/_combined.json":["ZLwJ",336],"./en-KN/_combined.json":["fY0N",337],"./en-KY/_combined.json":["2bN7",338],"./en-LC/_combined.json":["L5G8",339],"./en-LR/_combined.json":["uAu1",340],"./en-LS/_combined.json":["+9Km",341],"./en-MG/_combined.json":["pkMa",342],"./en-MH/_combined.json":["Pght",343],"./en-MO/_combined.json":["4brt",344],"./en-MP/_combined.json":["f3kU",345],"./en-MS/_combined.json":["Cner",346],"./en-MT/_combined.json":["CB9i",347],"./en-MU/_combined.json":["dcsm",348],"./en-MW/_combined.json":["vx0Y",349],"./en-MY/_combined.json":["4xdO",350],"./en-NA/_combined.json":["XOdH",351],"./en-NF/_combined.json":["3zUU",352],"./en-NG/_combined.json":["XcAH",353],"./en-NR/_combined.json":["1hF2",354],"./en-NU/_combined.json":["Rd4I",355],"./en-NZ/_combined.json":["Thfj",356],"./en-PG/_combined.json":["Pwz4",357],"./en-PH/_combined.json":["cBN5",358],"./en-PK/_combined.json":["Jp8X",359],"./en-PN/_combined.json":["kVcJ",360],"./en-PR/_combined.json":["C79j",361],"./en-PW/_combined.json":["IHQ7",362],"./en-RW/_combined.json":["3+fb",363],"./en-SB/_combined.json":["k36a",364],"./en-SC/_combined.json":["khir",365],"./en-SD/_combined.json":["ugPT",366],"./en-SG/_combined.json":["h5D0",367],"./en-SH/_combined.json":["kWBW",368],"./en-SL/_combined.json":["Dzhg",369],"./en-SS/_combined.json":["RUIe",370],"./en-SX/_combined.json":["wDR3",371],"./en-SZ/_combined.json":["3w4R",372],"./en-TC/_combined.json":["IcK3",373],"./en-TK/_combined.json":["FOhX",374],"./en-TO/_combined.json":["TCjz",375],"./en-TT/_combined.json":["fS+W",376],"./en-TV/_combined.json":["3onS",377],"./en-TZ/_combined.json":["5zt/",378],"./en-UG/_combined.json":["JPX0",379],"./en-UM/_combined.json":["Mb5E",380],"./en-US-POSIX/_combined.json":["jQAd",382],"./en-US/_combined.json":["yTKl",381],"./en-VC/_combined.json":["umMp",383],"./en-VG/_combined.json":["EDFe",384],"./en-VI/_combined.json":["Er4e",385],"./en-VU/_combined.json":["nrZT",386],"./en-WS/_combined.json":["4QLw",387],"./en-ZA/_combined.json":["wCbM",388],"./en-ZM/_combined.json":["/LDK",389],"./en-ZW/_combined.json":["Hw9p",390],"./en/_combined.json":["sNIU",296],"./es-419/_combined.json":["ZPZ1",392],"./es-AR/_combined.json":["Am5Z",393],"./es-BO/_combined.json":["tzf5",394],"./es-CL/_combined.json":["J0SI",395],"./es-CO/_combined.json":["UbmO",396],"./es-CR/_combined.json":["qt+y",397],"./es-CU/_combined.json":["QE7f",398],"./es-DO/_combined.json":["HYau",399],"./es-EA/_combined.json":["KcLf",400],"./es-EC/_combined.json":["S0/D",401],"./es-ES/_combined.json":["lVSm",402],"./es-GQ/_combined.json":["wsbn",403],"./es-GT/_combined.json":["OLUC",404],"./es-HN/_combined.json":["WoHz",405],"./es-IC/_combined.json":["n6S2",406],"./es-MX/_combined.json":["VjBw",407],"./es-NI/_combined.json":["gmAL",408],"./es-PA/_combined.json":["wD63",409],"./es-PE/_combined.json":["mjzo",410],"./es-PH/_combined.json":["QFbx",411],"./es-PR/_combined.json":["mQ8Z",412],"./es-PY/_combined.json":["1vOg",413],"./es-SV/_combined.json":["BCZi",414],"./es-US/_combined.json":["0mEl",415],"./es-UY/_combined.json":["AZ1f",416],"./es-VE/_combined.json":["Bfc6",417],"./es/_combined.json":["Iutf",391],"./fi-FI/_combined.json":["FkZD",419],"./fi/_combined.json":["JvJC",418],"./fr-BE/_combined.json":["Tkl0",421],"./fr-BF/_combined.json":["cxwg",422],"./fr-BI/_combined.json":["zeJq",423],"./fr-BJ/_combined.json":["al0q",424],"./fr-BL/_combined.json":["4cKm",425],"./fr-CA/_combined.json":["WBM3",426],"./fr-CD/_combined.json":["wmPG",427],"./fr-CF/_combined.json":["RhSx",428],"./fr-CG/_combined.json":["iqMf",429],"./fr-CH/_combined.json":["hUD0",430],"./fr-CI/_combined.json":["D+DA",431],"./fr-CM/_combined.json":["D5cn",432],"./fr-DJ/_combined.json":["a28n",433],"./fr-DZ/_combined.json":["0dq+",434],"./fr-FR/_combined.json":["6gRC",435],"./fr-GA/_combined.json":["7pVJ",436],"./fr-GF/_combined.json":["76IO",437],"./fr-GN/_combined.json":["FiR1",438],"./fr-GP/_combined.json":["j8tI",439],"./fr-GQ/_combined.json":["Kkty",440],"./fr-HT/_combined.json":["Celw",441],"./fr-KM/_combined.json":["VOt+",442],"./fr-LU/_combined.json":["d9qI",443],"./fr-MA/_combined.json":["fK3G",444],"./fr-MC/_combined.json":["PRyJ",445],"./fr-MF/_combined.json":["wbFQ",446],"./fr-MG/_combined.json":["VTW6",447],"./fr-ML/_combined.json":["fHIT",448],"./fr-MQ/_combined.json":["Fxzu",449],"./fr-MR/_combined.json":["bVZY",450],"./fr-MU/_combined.json":["uqex",451],"./fr-NC/_combined.json":["UU7a",452],"./fr-NE/_combined.json":["3i7k",453],"./fr-PF/_combined.json":["OujE",454],"./fr-PM/_combined.json":["HUZ+",455],"./fr-RE/_combined.json":["/OY7",456],"./fr-RW/_combined.json":["u1qL",457],"./fr-SC/_combined.json":["lkww",458],"./fr-SN/_combined.json":["5U+s",459],"./fr-SY/_combined.json":["lYx8",460],"./fr-TD/_combined.json":["wOiP",461],"./fr-TG/_combined.json":["F0gJ",462],"./fr-TN/_combined.json":["1qTE",463],"./fr-VU/_combined.json":["kGPb",464],"./fr-WF/_combined.json":["nN8O",465],"./fr-YT/_combined.json":["8MCW",466],"./fr/_combined.json":["foK4",420],"./ga-IE/_combined.json":["eG2/",468],"./ga/_combined.json":["s8KT",467],"./he-IL/_combined.json":["sMz+",470],"./he/_combined.json":["cQ2g",469],"./it-CH/_combined.json":["fzun",472],"./it-IT/_combined.json":["P9b0",473],"./it-SM/_combined.json":["NYQX",474],"./it/_combined.json":["/GVn",471],"./ja-JP/_combined.json":["/K1E",476],"./ja/_combined.json":["QmgJ",475],"./ko-KP/_combined.json":["IOaT",478],"./ko-KR/_combined.json":["7gcV",479],"./ko/_combined.json":["wQWN",477],"./kok-IN/_combined.json":["ICiQ",481],"./kok/_combined.json":["9ycP",480],"./ms-Latn-BN/_combined.json":["22hl",484],"./ms-Latn-MY/_combined.json":["ZuP2",485],"./ms-Latn-SG/_combined.json":["e91u",486],"./ms-Latn/_combined.json":["ukDk",483],"./ms/_combined.json":["s6EQ",482],"./nb-NO/_combined.json":["1R50",488],"./nb-SJ/_combined.json":["8W6M",489],"./nb/_combined.json":["9xWY",487],"./nl-AW/_combined.json":["O/ru",491],"./nl-BE/_combined.json":["i+Bd",492],"./nl-BQ/_combined.json":["T2Ti",493],"./nl-CW/_combined.json":["9yzq",494],"./nl-NL/_combined.json":["iCPS",495],"./nl-SR/_combined.json":["Zt0n",496],"./nl-SX/_combined.json":["kWFG",497],"./nl/_combined.json":["7I+W",490],"./nn-NO/_combined.json":["FQcW",499],"./nn/_combined.json":["B4Kb",498],"./pl-PL/_combined.json":["R1Tu",501],"./pl/_combined.json":["kVtb",500],"./pt-AO/_combined.json":["B3/k",503],"./pt-BR/_combined.json":["1X4n",504],"./pt-CV/_combined.json":["iEac",505],"./pt-GW/_combined.json":["/Ul8",506],"./pt-MO/_combined.json":["p9ZG",507],"./pt-MZ/_combined.json":["XskY",508],"./pt-PT/_combined.json":["MDaI",509],"./pt-ST/_combined.json":["OvaG",510],"./pt-TL/_combined.json":["wSWv",511],"./pt/_combined.json":["VMFA",502],"./ru-BY/_combined.json":["iiA/",513],"./ru-KG/_combined.json":["IZwx",514],"./ru-KZ/_combined.json":["YFdG",515],"./ru-MD/_combined.json":["UW08",516],"./ru-RU/_combined.json":["jUNN",517],"./ru-UA/_combined.json":["OYM5",518],"./ru/_combined.json":["rJfS",512],"./sv-AX/_combined.json":["BHCm",520],"./sv-FI/_combined.json":["oV3l",521],"./sv-SE/_combined.json":["9OhI",522],"./sv/_combined.json":["Q4W9",519],"./th-TH/_combined.json":["l+x3",524],"./th/_combined.json":["3Oph",523],"./tr-CY/_combined.json":["v8bW",526],"./tr-TR/_combined.json":["jg1M",527],"./tr/_combined.json":["C2yj",525],"./vi-VN/_combined.json":["5jb1",529],"./vi/_combined.json":["RzWr",528],"./zh-Hans-CN/_combined.json":["XLN1",532],"./zh-Hans-HK/_combined.json":["v9E7",533],"./zh-Hans-MO/_combined.json":["4fh/",534],"./zh-Hans-SG/_combined.json":["ZXIt",535],"./zh-Hans/_combined.json":["KSkj",531],"./zh-Hant-HK/_combined.json":["4hpr",537],"./zh-Hant-MO/_combined.json":["CAr/",538],"./zh-Hant-TW/_combined.json":["A9p9",539],"./zh-Hant/_combined.json":["eH5n",536],"./zh/_combined.json":["1qkM",530]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,3)}))}i.keys=function(){return Object.keys(r)},i.id="RRs6",e.exports=i},"Rjd/":function(e,t,n){"use strict";n("QLzv"),n("qY1S");var r=n("wHJ2"),i=n("nkTj"),o=n("z6Q5"),s=r.module("ultra.models",["restmod","angular-data.DSCacheFactory",i.e,o.a]);t.a=s},RphD:function(e,t){},SBFF:function(e,t){e.exports='<div ng-show="isShown" class="guidance-container stop-click-propagation" aria-hidden="true">\n  <p ng-show="title" ng-transclude="title" class="guidance-title"></p>\n  <p ng-transclude></p>\n</div>'},SSV0:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},Sa5G:function(e,t,n){"use strict";var r,i=n("817J"),o=n("D57K"),s=n("nbDY"),a=n.n(s),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Text=new t("textBlock"),t.File=new t("fileBlock"),t.AttemptFile=new t("attemptFileBlock"),t}(a.a),l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.stringToEnum=function(e){var n=null;switch(e){case t.SingleText.toString():n=t.SingleText;break;case t.SingleFile.toString():n=t.SingleFile;break;default:n=t.TextAndFiles}return n},t.SingleText=new t("SingleText"),t.SingleFile=new t("SingleFile"),t.TextAndFiles=new t("TextAndFiles")}(a.a),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.prototype.getOptionValue=function(){switch(this){case t.Add:return"+";case t.Subtract:return"-";case t.Multiply:return"*";case t.Divide:return"/";case t.Open_Parenthesis:return"(";case t.Close_Parenthesis:return")";case t.Value:return"value"}},t.Add=new t("ADD"),t.Subtract=new t("SUBTRACT"),t.Multiply=new t("MULTIPLY"),t.Divide=new t("DIVIDE"),t.Open_Parenthesis=new t("OPEN_PARENTHESIS"),t.Close_Parenthesis=new t("CLOSE_PARENTHESIS"),t.Value=new t("VALUE")}(a.a),n("7CA4"),n("Y3OE")),u=n("pqmn"),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.keys=n,r.keys.buttonKey||(r.keys.buttonKey="base.courses.conversion.ok"),r}return Object(o.__extends)(t,e),t.ConversionInProgress=new t("ConversionInProgress",{titleKey:"base.courses.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.courses.conversion.beingConvertedAlert"}),t.ConversionComplete=new t("ConversionComplete",{titleKey:"base.courses.conversion.hasBeenConverted",bodyKey:"base.courses.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.courses.conversion.hasBeenConvertedAlert"}),t.OrgConversionInProgress=new t("OrgConversionInProgress",{titleKey:"base.organizations.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.organizations.conversion.beingConvertedAlert"}),t.OrgConversionComplete=new t("OrgConversionComplete",{titleKey:"base.organizations.conversion.hasBeenConverted",bodyKey:"base.organizations.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.organizations.conversion.hasBeenConvertedAlert"}),t.StudentTryAgain=new t("StudentTryAgain",{titleKey:"base.courses.noAccess.studentCurrentlyNoAccess",bodyKey:"base.courses.noAccess.studentTryAgain"}),t.StudentNoLongerAccessible=new t("StudentNoLongerAccessible",{titleKey:"base.courses.noAccess.studentCourseHasEnded",bodyKey:"base.courses.noAccess.studentNoLongerAccess"}),t.ParticipantTryAgain=new t("ParticipantTryAgain",{titleKey:"base.organizations.noAccess.studentCurrentlyNoAccess",bodyKey:"base.organizations.noAccess.studentTryAgain"}),t.ParticipantNoLongerAccessible=new t("ParitcipantNoLongerAccessible",{titleKey:"base.organizations.noAccess.studentCourseHasEnded",bodyKey:"base.organizations.noAccess.studentNoLongerAccess"}),t.None=new t("None",{titleKey:"",bodyKey:""}),t}(a.a),p=n("1y/X"),m=(n("a8V0"),n("lCpV")),f=(n("r6n2"),n("VJfD")),h=n("K4f8"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Contains=new t("CONTAINS"),t.Exact=new t("EXACT"),t.Matches=new t("MATCHES"),t}(a.a);!function(e){e.CUSTOM="CUSTOM"}(r||(r={}));var v,b=r,y=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.Assignment=new t("Assignment"),t.Test=new t("Test"),t.Exam=new t("Exam"),t.Homework=new t("Homework"),t.Presentation=new t("Presentation"),t.Quiz=new t("Quiz")}(a.a),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.ReadyToPost=new t("READY_TO_POST"),t.IsPosted=new t("IS_POSTED"),t.NoOverride=new t("NO_OVERRIDE"),t.GradingInProgress=new t("GRADING_IN_PROGRESS"),t}(a.a)),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.AttemptScore=new t("a"),t.None=new t("-"),t.OverrideScore=new t("m"),t}(a.a),C=n("BOxd"),w=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.Letter=new t("Letter"),t.Percentage=new t("Percentage"),t.Points=new t("Points"),t.Text=new t("Text")}(a.a),n("dtd2")),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Email=new t("email"),t.Mobile=new t("mobile"),t.SMS=new t("sms"),t.Voice=new t("voice"),t.Dashboard=new t("dashboard"),t}(a.a),T=n("A0nf"),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Available=new t("AVAILABLE"),t.Opened=new t("OPENED"),t.Started=new t("STARTED"),t.Saved=new t("SAVED"),t.Submitted=new t("SUBMITTED"),t}(a.a);n("KiLF");!function(e){e.ViewPostedCourseAnnouncement="course.announcements.VIEW",e.ViewUnpostedCourseAnnouncement="course.announcements.admin.VIEW",e.CreateCourseAnnouncement="course.announcements.CREATE",e.ModifyCourseAnnouncement="course.announcements.MODIFY",e.DeleteCourseAnnouncement="course.announcements.DELETE",e.ViewPostedSystemAnnouncement="system.announcements.VIEW",e.ViewUnpostedSystemAnnouncement="system.announcements.admin.VIEW",e.CreateSystemAnnouncement="system.announcements.CREATE",e.ModifySystemAnnouncement="system.announcements.MODIFY",e.DeleteSystemAnnouncement="system.announcements.DELETE"}(v||(v={}));var $,E=v;!function(e){e.ModifyException="course.assessment.exceptions.MODIFY",e.ViewException="course.assessment.exceptions.VIEW"}($||($={}));var P,A=$;!function(e){e.ViewCalendar="course.calendar.VIEW"}(P||(P={}));var x,D=P;!function(e){e.CreateContent="course.content.CREATE",e.DeleteContent="course.content.DELETE",e.ModifyContent="course.content.MODIFY",e.ViewContent="course.content.VIEW",e.ViewAsDesigner="course.content.designer.VIEW",e.DeployAssessment="course.content.assessment.deploy.EXECUTE",e.ModifyContentAvailability="course.content.availability.MODIFY"}(x||(x={}));var O,_=x;!function(e){e.DeleteAdaptiveRelease="course.adaptiverelease.DELETE",e.ModifyAdaptiveRelease="course.adaptiverelease.MODIFY",e.ViewAdaptiveRelease="course.adaptiverelease.VIEW",e.ModifyAdaptiveReleaseDates="course.adaptiverelease.dates.MODIFY",e.DeleteAssessment="course.assessment.DELETE",e.ModifyAssessment="course.assessment.MODIFY",e.ViewAssessment="course.assessment.VIEW",e.ModifyAttendance="course.attendance.MODIFY",e.ViewAttendance="course.attendance.VIEW",e.ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",e.ModifyTimeLimitAccomodation="course.timelimit-exception.MODIFY",e.ModifyDueDateException="course.duedate-exception.MODIFY"}(O||(O={}));var M,N=O;!function(e){e.ModifyRubrics="course.rubrics.MODIFY",e.ViewRubrics="course.rubrics.VIEW"}(M||(M={}));var R,L=M;!function(e){e.EmailAllUsers="course.email-all-users.EXECUTE"}(R||(R={}));var j,U=R,G=n("d2bc");!function(e){e.CreateGroups="course.groups.CREATE",e.DeleteGroups="course.groups.DELETE",e.ModifyGroups="course.groups.MODIFY",e.ViewGroups="course.groups.VIEW",e.ViewGroupsAsAdmin="course.groups.admin.VIEW",e.ManageGroupMembership="course.group-user.manage.EXECUTE"}(j||(j={}));var B,F=j;!function(e){e.ViewAdmin="system.admin.VIEW",e.ViewAdminTop="system.administration.top.VIEW"}(B||(B={}));var q,H=B;!function(e){e.CreatePortalOptionsModuleManagement="system.portaloptions.managemodules.CREATE",e.ModifyPortalOptionsModuleManagement="system.portaloptions.managemodules.MODIFY",e.ViewBrand="system.portaloptions.brand.VIEW",e.CreateBrand="system.portaloptions.brand.CREATE",e.ModifyBrand="system.portaloptions.brand.MODIFY",e.DeleteBrand="system.portaloptions.brand.DELETE",e.ModifyUltraThemeData="system.ultra.themedata.MODIFY"}(q||(q={}));var z=q,V=n("JfV0");n.d(t,"A",(function(){return V.QuestionType})),n.d(t,"z",(function(){return V.QuestionSubType})),n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return l.a})),n.d(t,"h",(function(){return u.a})),n.d(t,"i",(function(){return d})),n.d(t,"k",(function(){return p.a})),n.d(t,"m",(function(){return m.a})),n.d(t,"p",(function(){return f.a})),n.d(t,"q",(function(){return h.a})),n.d(t,"o",(function(){return g})),n.d(t,"r",(function(){return b})),n.d(t,"t",(function(){return S})),n.d(t,"s",(function(){return y})),n.d(t,"u",(function(){return C.a})),n.d(t,"x",(function(){return w.a})),n.d(t,"y",(function(){return k})),n.d(t,"B",(function(){return T.a})),n.d(t,"E",(function(){return I})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return A})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return _})),n.d(t,"j",(function(){return N})),n.d(t,"l",(function(){return L})),n.d(t,"n",(function(){return U})),n.d(t,"v",(function(){return G.a})),n.d(t,"w",(function(){return F})),n.d(t,"C",(function(){return H})),n.d(t,"D",(function(){return z}))},SeO5:function(e,t){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.accessDenied.title"\n          analytics-id-tag-prefix="base.stream.modal.accessDenied">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.accessDenied.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},Sjpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("TnpK"),o="ultra.features.base.profile.privacy.routes";r.module(o,["ui.router",i.b]).config([i.c,function(e){e.peekState("privacy",{url:"/privacy",require:function(){return Promise.all([n.e(29),n.e(46),n.e(140)]).then(n.bind(null,"0OB5"))},pageTitle:"base.profile.updatePrivacySettings.pageTitle"})}])},TAnh:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("JURN");var r=n("wHJ2"),i=n("4GL6"),o=n("e6jQ"),s=n("usTV"),a="ultra.components.directives.squareToggle",c=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.oneControlId=o.a(),this.twoControlId=o.a()}return e.prototype.handleKeyUp=function(e){13!==e.keyCode&&32!==e.keyCode||(this.scope.property=e.target.value)},e.prototype.handleClick=function(e){this.scope.property=e.target.value},e.$inject=["scope","element","attrs"],e}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.scope={oneIconClass:"@",oneAriaLabel:"@",oneAriaControls:"@?",oneViewValue:"@",oneTooltipTemplate:"@?",oneTooltipScope:"&?",property:"=",twoIconClass:"@",twoAriaLabel:"@",twoAriaControls:"@?",twoViewValue:"@",twoTooltipTemplate:"@?",twoTooltipScope:"&?",analyticsIdTagPrefix:"@?"},this.compile=function(e,n){return r.isDefined(n.oneTooltipTemplate)&&e.find("input.input-one").attr("bb-complex-tooltip",""),r.isDefined(n.twoTooltipTemplate)&&e.find("input.input-two").attr("bb-complex-tooltip",""),{post:function(e,n,r){e.squareToggle=t.$injector.instantiate(c,{scope:e,element:n,attrs:r})}}}}return e.$inject=["$injector"],e}();r.module(a,[i.b]).directive("bbSquareToggle",["$injector",function(e){return e.instantiate(l)}])},TB6y:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=(n("9RbK"),n("cf0z"),n("KCTV"),n("aHpC")),o=n("5iHu"),s=n("nsO7"),a=n("wHJ2"),c=n("e6jQ"),l=n("lUN/"),u=n("lEL+"),d=n("+4Px"),p=n("7+Tq"),m=n("d7QB"),f="ultra.directives.bbFoundation";window.Foundation.libs.dropdown.dirs._base=function(e){var t,n=this.offsetParent().offset(),r=e.offset();r.top-=n.top,r.left-=n.left,r.missRight=!1,r.missTop=!1,r.missLeft=!1,r.leftRightFlag=!1,t=document.getElementsByClassName("row")[0]?document.getElementsByClassName("row")[0].clientWidth:window.innerWidth;var i=(window.innerWidth-t)/2;if(!this.hasClass("mega")){var o=this.outerWidth(),s=e.offset();s.top<=this.outerHeight()&&(r.missTop=!0,window.innerWidth-i,r.leftRightFlag=!0),s.left-i+o>t?(r.missRight=!0,r.missLeft=!1):s.left-i-o<=0&&(r.missLeft=!0,r.missRight=!1)}return this.toggleClass("miss-right",r.missRight),this.toggleClass("miss-left",r.missLeft),r};var h=window.Foundation.libs.dropdown.adjust_pip;window.Foundation.libs.dropdown.adjust_pip=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.hasClass("disable-pip-adjustment")||h.apply(this,Object(r.__spreadArrays)([e],t))};var g=function(e,t,n,r){e.$on("$destroy",(function(){window.Foundation.scope===t[0]&&(window.Foundation.scope=null),s.forEach(window.Foundation.libs,(function(e){e.scope===t[0]&&(e.scope=null),delete e.bindings,delete e.settings.callback}))}));["small","small-only","medium","medium-only","large","large-only","xlarge","xlarge-only","xxlarge"].forEach((function(e){window.Foundation.media_queries[e]=o(".foundation-mq-"+e).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")})),l.a();var i=function(e){e.each((function(t,r){var i=o(r),s=i.hasClass("active"),a=i.children("a").first(),c=i.children(".content").first(),l=o("body");c.attr("aria-hidden",!s+""),a.attr({"aria-selected":s,"aria-expanded":s});var u=i.find(':tabbable[role!="tab"]').add(i.find('[tabindex="-1"]')).add(i.find("input")).not(i.children("a").first());s?u.attr("tabindex",0):u.attr("tabindex","-1"),n||(a.on("keydown",(function(n){if(n.keyCode===d.v||n.keyCode===d.j){var r=0===t?e.length-1:t-1;o(e.get(r)).children("a").first().focus()}else if(n.keyCode===d.d||n.keyCode===d.s){var i=t===e.length-1?0:t+1;o(e.get(i)).children("a").first().focus()}else n.keyCode===d.i?o(e.get(0)).children("a").first().focus():n.keyCode===d.e&&o(e.get(e.length-1)).children("a").first().focus();l.removeClass("hide-focus-outline")})),c.on("keydown",(function(n){if(n.ctrlKey&&n.keyCode===d.v)a.focus();else if(n.ctrlKey&&n.keyCode===d.q){var r=0===t?e.length-1:t-1;o(e.get(r)).children("a").first().focus()}else if(n.ctrlKey&&n.keyCode===d.p){var i=t===e.length-1?0:t+1;o(e.get(i)).children("a").first().focus()}l.removeClass("hide-focus-outline")}))),i.addClass("accordion-complete")}))},a=t.find(".accordion");a.length>0&&a.each((function(e,t){var n=o(t),r=n.find(".accordion-navigation:not(.accordion-complete)");n.attr("role","tablist"),r.each((function(t,n){var r=o(n),i=r.children("a").first(),s=r.children(".content").first();i.attr("role","tab"),s.attr("role","tabpanel");var a=c.a(),l="accordion"+e+"-"+a+"-header"+t,u="accordion"+e+"-"+a+"-panel"+t;i.attr("id",l),s.attr("id",u),i.attr("href","#"+u),i.attr("aria-controls",u),s.attr("aria-labelledby",l)})),i(r)})),r(t,e),t.foundation({accordion:{multi_expand:!0,callback:function(e){e.closest(".accordion").removeAttr("aria-multiselectable");var t=e.closest(".accordion").children(".accordion-navigation");i(t)}},dropdown:{}})},v=function(){function e(e,t){var n=this;this.dropdownInit=e,this.integrationEventEmitterService=t,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,r){n.onDestroyHandler=n.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(r.rubricOverride);e.$on("$destroy",(function(){n.onDestroyHandler&&n.onDestroyHandler()})),g(e,t,i,n.dropdownInit)},this.onDestroyHandler=null}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(p.b)),Object(r.__param)(1,Object(i.b)(m.serviceName))],e)}(),b=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",(function(){r.onDestroyHandler&&r.onDestroyHandler()})),r.timeout((function(){g(e,t,i,r.dropdownInit)}),e,0,!1)},this.onDestroyHandler=null}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(u.b)),Object(r.__param)(1,Object(i.b)(p.b)),Object(r.__param)(2,Object(i.b)(m.serviceName))],e)}(),y=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",(function(){r.onDestroyHandler&&r.onDestroyHandler()}));var o=e.$watch(n.bbFoundationWait,(function(n){n&&(o(),r.timeout((function(){g(e,t,i,r.dropdownInit)}),e,0,!1))}))}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(u.b)),Object(r.__param)(1,Object(i.b)(p.b)),Object(r.__param)(2,Object(i.b)(m.serviceName))],e)}(),S=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",(function(){r.onDestroyHandler&&r.onDestroyHandler()})),e.$watch(n.bbFoundationWaitContinuous,(function(n){n&&r.timeout((function(){g(e,t,i,r.dropdownInit)}),e,0,!1)}),null!=n.bbDeepWatch&&n.bbDeepWatch)}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(u.b)),Object(r.__param)(1,Object(i.b)(p.b)),Object(r.__param)(2,Object(i.b)(m.serviceName))],e)}();a.module(f,[u.a,p.a,m.moduleName]).directive("bbFoundation",["$injector",function(e){return e.instantiate(v)}]).directive("bbFoundationDefer",["$injector",function(e){return e.instantiate(b)}]).directive("bbFoundationWait",["$injector",function(e){return e.instantiate(y)}]).directive("bbFoundationWaitContinuous",["$injector",function(e){return e.instantiate(S)}])},TFjq:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-something-broke-modal"\n          modal-title-key="components.services.error-modal.error-something-broke.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-something-broke">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-something-broke.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>'},TT9l:function(e,t,n){"use strict";var r=n("ERkP"),i=n("7nmT"),o=n("e6jQ"),s=n("5LAh"),a=(n("n88p"),function(){var e=r.useState(Object(o.b)())[0],t=r.useState(!1),n=t[0],i=t[1],a=r.useRef();return r.createElement("div",{ref:a,className:"course-banner-integration-container"+(n?"":" no-integration-content")},r.createElement(s.d,{portalId:e,selector:"course.banner.top",onContentsChanged:function(e){i(!!e),a.current.dispatchEvent(new CustomEvent("banner-resize",{bubbles:!0}))}}))});n.d(t,"a",(function(){return c}));var c=new(function(){function e(){var e=this;this.subscriptions=[],this.createBanner=function(){if(e.currentBanner)return e.currentBanner;var t=document.createElement("div");return i.render(r.createElement(a,null),t),e.currentBanner=t,e.notifySubscribers(),e.currentBanner},this.destroyBanner=function(){e.currentBanner?(i.unmountComponentAtNode(e.currentBanner),e.currentBanner=null,e.notifySubscribers()):console.warn("There is no integration banner present to unmount.")},this.currentPanelBanner=function(){if(e.bannerStack.length)return e.bannerStack[e.bannerStack.length-1].state},this.pushBanner=function(t){e.bannerStack.push(t),1!==e.bannerStack.length&&e.bannerStack[e.bannerStack.length-2].orphan()},this.popBanner=function(t){e.bannerStack=e.bannerStack.filter((function(e){return e.state.stateName!==t})),e.bannerStack.length?e.bannerStack[e.bannerStack.length-1].adopt(e.currentBanner):e.destroyBanner()},this.bannerStack=[]}return e.prototype.watchBanner=function(e){var t=this;return this.subscriptions.push(e),setTimeout((function(){return e(t.currentBanner)})),function(){return t.subscriptions=t.subscriptions.filter((function(t){return t!==e}))}},e.prototype.notifySubscribers=function(){var e=this;this.subscriptions.forEach((function(t){return t(e.currentBanner)}))},e}())},Tfg2:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.zipTitle"\n          modal-dismiss-key="components.directives.fileUpload.takeMeBack"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.zipFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" ng-click="fileUpload.closeModal(true)" class="button js-primary-button" analytics-id="components.directives.fileUpload.unzipFile">\n    <bb-translate>components.directives.fileUpload.unzipFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" ng-click="fileUpload.closeModal(false)" class="button button--secondary js-secondary-button" analytics-id="components.directives.fileUpload.uploadAsZip">\n    <bb-translate>components.directives.fileUpload.uploadAsZip</bb-translate>\n  </button>\n</bb-modal>\n'},Thlp:function(e,t,n){},TnpK:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return I})),n.d(t,"c",(function(){return $})),n.d(t,"a",(function(){return P}));var r=n("D57K"),i=(n("JzsJ"),n("KUD0"),n("nsO7")),o=n("wHJ2"),s=n("yC9S"),a=n("t6zR"),c=n("0JpG"),l=n("yA26"),u=n("w9Zy"),d=n("5MwF"),p=n("Fvsw"),m=n("lVRt"),f=n("jhBu"),h=n("lEL+"),g=n("k9iv"),v=n("ZzR9"),b=n("Q/M7"),y=n("IVtk"),S=n("ORAk"),C=n("TT9l"),w=n("nmzr"),k=n("6fZB"),T="ultra.router",I="ultraState",$=I+"Provider",E="DefaultBasePage",P=".peek.";function A(e){e&&Object.keys(e).forEach((function(t){var n=e[t];Array.isArray(n)&&(e[t]=Array.from(new Set(n)),1===e[t].length&&(e[t]=n[0]))}))}function x(e,t){var n=/^(\^)?(\??)(\w+)/.exec(e),r={searchParents:!1,optional:!1,name:t};return n&&(r.searchParents="^"===n[1],r.optional="?"===n[2],r.name=n[3]?n[3]:t),r}var D=function(){function t(t,n){var c,l,m=this;this.$stateProvider=t,this.addedStates={},this.initAllStates=!1,this.$get=["$rootScope","$state","$injector","$sce",u.e,p.b,E,h.b,g.c,function(t,n,r,i,o,c,l,u,p){m.$state=n,m.$rootScope=t,m.defaultBasePage=l,m.context=c,m.timeout=u;var f=m.baseStates.map((function(e){return e.name}));if(s.b.OnRootScope(t,v.a.$stateChangeSuccess,(function(e,t){-1!==f.indexOf(t.name)&&(c.basePage=t.name,sessionStorage.setItem(a.a.getBasePageStorageKey(),c.basePage))})),s.b.OnRootScope(t,v.a.$stateChangeSuccess,(function(e,t,n,r,i){if(!(r.name&&t.name&&r.name.split(P).length<t.name.split(P).length)){var s=""===r.name,a=r.panelClass||"peek",c=t.panelClass||"peek";m.timeout((function(){"peek"!==a||"full"!==c||s||o.expandTopPanel(),"full"===a&&"peek"===c&&o.shrinkTopPanel()}),m.$rootScope,0,!1)}})),s.b.OnRootScope(t,v.a.$stateChangeStart,(function(e,t,i,o,s){n.next=t,A(i),n.nextParams=i,o&&(n.prev={name:o.name}),A(s),n.prevParams=s,t.routingFunction&&(e.preventDefault(),r.invoke(t.routingFunction))})),s.b.OnRootScope(t,v.a.$stateChangeError,(function(t,r,o,s,a,c){if(c.errorModalConfig&&p.openModal(c.modalConfig),c&&c.userNotEntitled)n.go(l);else if(c.goToBasePage)n.goCurrentBasePage();else{if(b.m("inPreviewMode",window.location.href)){var u=i.trustAsResourceUrl(b.c("/ultra/courses/"+n.nextParams.courseId+"/outline/?inPreviewMode=true"));e(window.parent.document).find("#preview-iframe").attr("src",u)}if(!d.a.production)throw console.error("$stateChangeError when moving from "+s.name+" to "+r.name),c}})),m.initAllStates)m.createAllStates();else{m.registerPeekStates(n.get(m.defaultBasePage));var h=n.get(sessionStorage.getItem(a.a.getBasePageStorageKey())||m.defaultBasePage);h&&h.name!==m.defaultBasePage&&m.registerPeekStates(h)}return n}],this.baseStates=[],this.peekStates={},this.absoluteUrls=[],t.decorator("resolve",(function(e,t){var n=t?t(e):e.resolve;return n.childrenStates&&n.childrenStates.length>0&&n.childrenStates.push(i.once(n.childrenStates.pop())),n})),t.decorator("resolve",(function(e,t){for(var n=t?t(e):e.resolve,o=function(e){var t=n[e],o=x(e,e);o.optional&&(delete n[e],e=o.name,n[e]=t);var s=function(e){if(i.isString(e))return e;var t=e[e.length-1];return i.isString(t)?t:""}(t);if(s){var a=x(s,e);a.searchParents?n[e]=[a.name,function(e){return e&&e.isLazy?e():e}]:console.error("Illegal resolve format. Did you forget to prepend ^?")}if(o.optional){var c=n[e],l=c.slice?c.slice(0,c.length-1):[];n[e]=Object(r.__spreadArrays)(["$injector"],l,[function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=i.once((function(){for(var n={},r=0;r<l.length;r++)n[l[r]]=t[r];return e.invoke(c,void 0,n)}));return r.isLazy=!0,r}])}},s=0,a=Object.keys(n);s<a.length;s++){o(a[s])}return n})),t.decorator("url",(function(e,t){var r=t(e);return r&&(r.exec=function(t){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var a=this.regexp.source;new RegExp(a.substr(0,a.length-1)+"/").test(t)&&n.invoke(e.resolve.childrenStates||[o.noop]);var c=i?[t].concat(i):[t];return r.constructor.prototype.exec.apply(this,c)}),r})),c=t.state,l=m,t.state=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.addedStates["string"==typeof e[0]?e[0]:e[0].name]=!0,c.apply(this,e)}}return t.prototype.baseState=function(e,t){var r=this;return window.top!==window&&b.m("inPreviewMode",window.location.href)&&(t.require=function(){return n.e(693).then(n.bind(null,"shLZ"))},t.peekViewName=void 0),t=this.getStateWithName(e,t),this.baseStates.push(t),(t.resolve=t.resolve||{}).childrenStates=[function(){r.registerPeekStates(t)}],this.$stateProvider.state(t),this},t.prototype.peekState=function(e,t){var n=(t=this.getStateWithName(e,t)).name.split(".")[0];return this.peekStates[n]=this.peekStates[n]&&this.peekStates[n].concat(t)||[t],this},t.prototype.state=function(e,t){return t=this.getStateWithName(e,t),this.$stateProvider.state(t),this},t.prototype.registerPeekStates=function(e){var r=this;if(e&&e.peekStates){var i,o={};if(o.name=e.name+".peek",!Object.prototype.hasOwnProperty.call(this.addedStates,o.name)&&null==this.$state.get(o.name))o.onExit=[u.e,I,function(e,t){i&&C.a.popBanner(o.name),e.close(o.name)}],o.resolve={offCanvasArgs:[I,function(n){var s=t.getPanelStateNameFromNextState(n.next.name,o.name),a=n.get(s),c=C.a.currentPanelBanner(),l=c&&"full"!==c.panelClass&&"full"===a.panelClass;return(2===s.split(P).length||l)&&(i=C.a.createBanner()),{banner:i,panelClass:a&&a.panelClass||"peek",pageTitle:a&&a.pageTitle,template:S.replace("{0}",r._getPanelName(e)),close:function(){return r.$rootScope.bbOffcanvasOpened&&n.go(e.name),!1},stateName:o.name,overlay:null==a||null==a.overlay||a.overlay}}]},e.peekViewName?(o.views={},o.views[e.peekViewName]={require:function(){return Promise.resolve().then(n.bind(null,"yA26"))}}):o.require=function(){return Promise.resolve().then(n.bind(null,"yA26"))},this.$stateProvider.state(o);this.createAllPeekStates(e,e.peekStates)}},t.prototype.createAllPeekStates=function(e,t){var n=this,r=e.name+P;t.forEach((function(t){(n.peekStates[t]||[]).forEach((function(t){n._checkAbsoluteUrl(t);var i=r+t.name;if(!Object.prototype.hasOwnProperty.call(n.addedStates,i)&&null==n.$state.get(i)){var s=o.copy(t);s.name=i,s.abstract||(s.urlHandler=["$location",I,"$match",function(e,t,r){var o,s=function(e){var t=e.split("."),n=i.split(".");return t.forEach((function(e,t){n[t]=e})),n.join(".")};(o=n._isAbsoluteUrl(e.url())?s(sessionStorage.getItem(a.a.getBasePageStorageKey())||n.defaultBasePage):i)!==t.current.name&&(t.get(o)||(o=s(n.defaultBasePage)),t.transitionTo(o,r,{location:!1}))}]),s.views||(s.views={},s.views[n._getPanelName(e)]={template:s.template,controller:s.controller,require:s.require}),delete s.template,delete s.controller,delete s.require,s.getPageTitle&&(s.pageTitle=s.getPageTitle());var c=function(){s.peekStates&&s.peekStates.length>0&&("full"===s.panelClass||s.allowChildPeekStates?n.registerPeekStates(s):n.createAllPeekStates(e,s.peekStates))};if(n.initAllStates)n.$stateProvider.state(s),c();else(s.resolve=s.resolve||{}).childrenStates=[c],n.$stateProvider.state(s),s.peekStates&&s.peekStates.length>0&&"full"!==s.panelClass&&!s.allowChildPeekStates&&n.createAllPeekStates(e,s.peekStates)}}))}))},t.getPanelStateNameFromNextState=function(e,t){var n=e.indexOf(P,t.length);return-1!==n?e.substr(0,n):e},t.prototype._getPanelName=function(e){return e.name.split(".").join("-").concat("-panel@")},t.prototype._checkAbsoluteUrl=function(e){var t=this;if(e.url&&0===e.url.indexOf("^")){var n=e.url.match(/\/:[a-zA-Z]+/),r=e.url;n&&(r=r.substring(0,n.index));var i=(r=r.substring(1)).match(/\(\?:([^\)]*)/);i?i[1].split("|").forEach((function(e){t.absoluteUrls.push("/"+e)})):-1===this.absoluteUrls.indexOf(r)&&this.absoluteUrls.push(r)}},t.prototype._isAbsoluteUrl=function(e){return i.find(this.absoluteUrls,(function(t){return 0===e.indexOf(t)}))},t.prototype.createAllStates=function(){var e=this;this.baseStates&&this.baseStates.length>0&&this.baseStates.forEach((function(t){e.registerPeekStates(t)}))},t.prototype.createAllStatesOnInit=function(){this.initAllStates=!0},t.prototype.getStateWithName=function(e,t){return o.isObject(e)?t=e:t.name=e,this._initStateEntitlements(t),t},t.prototype._initStateEntitlements=function(e){this._initSystemEntitlementChecks(e),this._initCourseEntitlementChecks(e)},t.prototype._initSystemEntitlementChecks=function(e){var t=this;e.systemEntitlement&&(e.resolve||(e.resolve={}),e.resolve.systemEntitlement=["$q",f.b,function(n,r){return r.hasSystemEntitlement(e.systemEntitlement).then(t._configureStateChangeCallback(n))}])},t.prototype._configureStateChangeCallback=function(e){return function(t){var n=e.defer();return t?n.resolve():n.reject({userNotEntitled:!0}),n.promise}},t.prototype._ensureCourseIdParam=function(e,t){return t.nextParams.courseId?e.resolve():e.reject("Cannot check course entitlements when the state does not have a courseId parameter.")},t.prototype._guardEntitlementInjectable=function(e){var t=this,n=Array.isArray(e)?e.slice(0,e.length-1):[];return Object(r.__spreadArrays)(["$q","$injector",I],n,[function(r,o,s){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var l=i.zipObject(n,a);return t._ensureCourseIdParam(r,s).then((function(){try{return o.invoke(e,void 0,l)}catch(e){return r.reject(e)}})).then(t._configureStateChangeCallback(r)).catch((function(){return r.reject({userNotEntitled:!0})}))}])},t.prototype._getDefaultEntitlementInjectable=function(e){return[f.b,I,function(t,n){return"string"==typeof e?t.hasCourseEntitlement(e,n.nextParams.courseId):t.hasAnyCourseEntitlement(e,n.nextParams.courseId)}]},t.prototype._initCourseEntitlementChecks=function(e){var t;e.courseEntitlement&&(t=this._getDefaultEntitlementInjectable(e.courseEntitlement)),e.resolve&&Object.prototype.hasOwnProperty.call(e.resolve,"courseEntitlement")&&(t=e.resolve.courseEntitlement),t&&(e.resolve||(e.resolve={}),e.resolve.courseEntitlement=this._guardEntitlementInjectable(t))},t.$inject=["$stateProvider","$injector"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(D);o.module(T,["ui.router","oc.lazyLoad",p.a,u.d,l.moduleName,h.a]).provider(I,D).constant(E,d.a.defaultBasePage).config(["$provide","$ocLazyLoadProvider",function(e,t){e.decorator("$state",["$injector","$delegate","$resolve","$q","$$animateJs","$ocLazyLoad",p.b,u.e,function(e,t,n,s,a,l,d,p){t.goPeekState=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return p.getTopElement().then((function(n){var r=n&&n.name||d.basePage;return t.getPeekStateName(e[0],r).then((function(n){return e[0]=n,t.go.apply(t,e)}))}))},t.leavePeekState=function(e){null==e&&(e=t.current.name);var n=e.lastIndexOf(P);return-1!==n?t.go(e.substring(0,n)):s.when()},t.peekHref=function(e,n,r){return(r?s.when(new u.a(null,null,r)):p.getTopElement()).then((function(i){return r=i&&i.name||d.basePage,t.getPeekStateName(e,r).then((function(e){return t.href(e,n)}))}))},t.isPeekPanelOpen=function(){return-1!==t.current.name.indexOf(".peek.")},t.getPeekStateName=function(n,r){return r===d.basePage?s.when(r+P+n):p.getElement(r).then((function(){var e=D.getPanelStateNameFromNextState(t.current.name,r),i=e.lastIndexOf(P),o=t.current.name.substring(i+P.length).split(".")[0],s=n.split(".")[0];if(o===s)return t.current.name.substring(0,i+P.length)+n;var a=e.indexOf(n);if(-1!==a)return e.substring(0,a+n.length);var c=t.get(e);return"full"===c.panelClass||c.allowChildPeekStates&&-1!==c.peekStates.indexOf(s)?e+P+n:e.substring(0,i+P.length)+n})).then((function(n){var r=function(n){if(!t.get(n.join("."))){var i=n.pop();r(n),n.push(i)}e.invoke((t.get(n.join("."))&&t.get(n.join(".")).resolve||{}).childrenStates||[o.noop])};return r(n.replace(/\n/g,"").replace(/(^[^\(\)]*)\(.*\)$/,"$1").split(".")),n}))},t.goCurrentBasePage=function(){return t.go(t.getBaseState())},t.goToRoute=function(e){return t.go(e)},t.getBaseState=function(){return d.basePage},t.search=function(e,n){var r=t.params;if(o.isString(e)&&n?r[e]=n:Object.keys(e).forEach((function(t){r[t]=e[t]})),t.current.name)return t.go(t.current.name,r)},t.getCurrentUrlParams=function(){var e=t.$current.url.parameters(),n=Object.create(null);return e.forEach((function(e){t.params[e]&&(n[e]=t.params[e])})),n},t.requireAllStates=function(){var e=this,t=this.get(),n=[];return t.forEach((function(t){t&&null!=t.name&&n.push(e.requireState(t.name))})),s.all(n)},t.requireState=function(e){for(var t=this,n=e.split("."),r=[],a=0;a<n.length;a++)r.push(n.slice(0,a+1).join("."));var u=function(){var e=r.shift();if(null==e)return!0;var n=t.get(e);if(!n)return u();var a=[],d=[];if(n.require&&(o.isArray(n.require)||(n.require=[n.require]),a=a.concat(n.require),d.push(n)),n.views&&o.isObject(n.views)&&Object.keys(n.views).forEach((function(e){var t=n.views[e];t.require&&(o.isArray(t.require)||(t.require=[t.require]),a=a.concat(t.require),d.push(t))})),a.length<1)return u();var p=s.defer(),m=[],f=new Map,h=a.map((function(e){return e().then((function(t){return f.set(e,t),t}))}));return s.all(i.compact(h)).then((function(){d.forEach((function(e){o.isArray(e.require)&&(e.require.forEach((function(t){var r=f.get(t),i=r.panelDefinition||{},s=i&&i.moduleName||r.moduleName;s&&m.push(l.load({name:s}));var a=i&&i.template||r.template;a&&!e.template&&(e.template=a);var u=i&&i.templateProvider||r.templateProvider;u&&(e.templateProvider=u);var d=i&&i.controllerName||r.controllerName;d&&!e.controller&&(e.controller=d);var p=i&&i.resolve;p&&(e.resolve=o.extend(e.resolve||{},p));var h=i&&i.translations;h&&(e.resolve=o.extend(e.resolve||{},{loadedTranslations:["$q",c.serviceName,function(e,t){return e.all(h.map((function(e){return t.loadBundle(e)})))}]}));var g=i&&i.pageTitle;g&&!n.pageTitle&&(n.pageTitle=g)})),e.require=!1)})),s.all(i.compact(m)).then((function(){p.resolve(u())}),(function(e){p.reject(e)}))}),(function(e){p.reject(e)})),p.promise};return u()};var f=t.transitionTo;t.transitionTo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,r=e[0];return o.isObject(r)&&(r=r.self.name),s.all([this.requireState(r)]).then((function(){return f.apply(n,e)}))};var h,g=t.href;return t.href=function(e,t,n){return g(e,t,o.extend(n||{},{absolute:!0}))},t.getCurrentResolvedValues=function(){return t.$current&&t.$current.locals&&t.$current.locals.resolve?t.$current.locals.resolve.$$values:{}},t.hasCourseInContext=function(e){if(!e||!e.name)return!1;if("resolve"in e&&m.b in e.resolve)return!0;var n=t.get(i.dropRight(e.name.split(".")).join("."));return t.hasCourseInContext(n)},w.router.setRouteHandler((h=t,{goPeekState:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(k.a)(h.goPeekState.apply(h,Object(r.__spreadArrays)([e],t)))},goToRoute:function(e){return Object(k.a)(h.goToRoute(e))},getPeekHref:function(e,t,n){return Object(k.a)(h.peekHref(e,t,n))}})),t}])}]),o.module(T).run(["$rootScope",I,p.b,E,function(e,t,n,r){var i=sessionStorage.getItem(a.a.getBasePageStorageKey());n.basePage=i||r,e.$on(v.a.$stateChangeSuccess,(function(n,r,i,o,s){var a=t.hasCourseInContext(o),c=t.hasCourseInContext(r);a!==c&&e.$broadcast(v.a.$stateHasCourseInContextChanged,c,a),y.c(r,o)}))}])}).call(this,n("5iHu"))},U8wS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("5MwF"),o=n("TnpK"),s="ultra.data-ui.routes";r.module(s,[o.b]).config([o.c,function(e){e.baseState("base.dataUi",{url:"^/data-ui",require:function(){return n.e(649).then(n.bind(null,"gNT0"))},onEnter:[o.d,function(e){i.a.production&&e.go("base.not-found")}]})}])},UC5D:function(e,t,n){},UD9g:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("pjml"),c=n("TnpK"),l=n("3bn4"),u="ultra.course.engagement.course-no-grade-content-goal-alignment",d="ultra.course.engagement.course-no-grade-content-goal-alignment.service",p="no-grade-content-goal-alignment",m=["course","goal-alignment","goal"],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelClass="peek no-grade-content-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q",s.serviceName,"$injector",c.d,a.o.serviceName,function(t,n,r,i,o){var s,a,c=null;return i.nextParams&&i.nextParams.contentId&&(c=i.nextParams.contentId),i.nextParams&&i.nextParams.id&&(c=i.nextParams.id),c&&"create"!==c?o.$find(i.nextParams.courseId).$asPromise().then((function(e){return s=e,e.contents.$find(c).$asPromise()})).then((function(e){a=e})).then((function(){return t.all([s.contents.$find(a.id,{expand:"alignedGoals,permissions"}).$asPromise(),n.loadBundle("features/"+m.join("/"))]).then((function(t){var r=t[0];return e.groupGoals(s.contents.$buildRaw(r),n)}))})):t.when([])}]},t.prototype.getPeekStateName=function(){return p},t.prototype.groupGoals=function(e,t){var n="alignedGoalsDefaultTitle";return e.isDiscussion()?n="goalsAlignedWithDiscussion":e.isDocument()?n="goalsAlignedWithDocument":e.isFile()?n="goalsAlignedWithFile":e.isLink()?n="goalsAlignedWithLink":e.isLtiLink()&&(n="goalsAlignedWithLtiLink"),[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:m.join(".")+"."+n})},getContentIdForGoalAlignment:o.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:o.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map((function(t){return t.content=e,t})):[],coreContent:e}]},t.prototype.getOverrideSubTitle=function(){return[c.d,a.o.serviceName,function(e,t){var n=null;return e.nextParams&&e.nextParams.contentId&&(n=e.nextParams.contentId),e.nextParams&&e.nextParams.id&&(n=e.nextParams.id),n?t.$find(e.nextParams.courseId).$asPromise().then((function(e){return e.contents.$find(n).$asPromise()})).then((function(e){return e.title})):""}]},t.$inject=["$injector","$q"],t}(l.a);o.module(u,[c.b,s.moduleName]).config([c.c,function(e){var t=new f;e.peekState(t.getPeekStateName(),t)}]).service(d,["$injector",s.serviceName,function(e){return{resolveGoalAlignableContents:function(){return e.invoke((new f).resolveGoalAlignableContent(),null,{}).then((function(e){return[e,i.flatten(i.compact(e.map((function(e){return e.alignedGoals})))).length]}))}}}])},UP3t:function(e,t){e.exports='<div class="bb-course-catalog-link" ng-if="shouldDisplayCatalogLink">\n  <a href="javascript:void(0);"\n     class="catalog-anchor-tag"\n     ng-if="!isExternalCatalog"\n     ng-click="handleCatalogLink()"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.link\'}"\n     analytics-id="base.baseCourses.courseCatalog.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.link</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n  <a class="catalog-anchor-tag"\n     ng-if="isExternalCatalog"\n     href="{{ ::externalCatalogUrl }}"\n     target="_blank"\n     rel="noopener noreferrer"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.externalLink\'}"\n     analytics-id="base.baseCourses.courseCatalog.externalLink.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.externalLink</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n</div>'},UiBk:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("X455"),a=n("8W6D"),c=n("pjml"),l=n("p7NW"),u=n("2Tae"),d=n("TnpK"),p=n("gkef"),m="ultra.course.rubrics.router";r.module(m,[i.moduleName,d.b,p.a,u.b,o.b,s.a]).config([d.c,o.c,s.b,function(e,t,r){var m,f,h;e.peekState("rubric",{abstract:!0,url:"/rubric",resolve:(m={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric"),t.loadBundle("features/course/goal-alignment/goal")])}]},m[o.d]=t.resolve,m.mode=function(){return a.a.NONE},m)}).peekState("rubric.mode",{url:"?rubricId&mode",panelClass:"full",pageTitle:"course.rubric.title",peekStates:[u.a],peekViewName:"rubric-grid-peek@",require:function(){return Promise.all([n.e(94),n.e(1),n.e(2),n.e(3),n.e(90),n.e(568)]).then(n.bind(null,"gAA+"))},resolve:{currentRubric:[o.d,l.c,d.d,function(e,t,n){switch(n.nextParams&&n.nextParams.mode.toLowerCase()){case a.a.CREATE.toString():return t.generateDefaultRubric(e);case a.a.EDIT.toString():return n.nextParams.rubricId?e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise():null;case a.a.COPY.toString():return e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise().then((function(e){return t.createRubricCopy(e)}));default:return null}}],hasEvaluations:["currentColumn",d.d,function(e,t){return(t.nextParams&&t.nextParams.mode.toLowerCase())===a.a.EDIT.toString()&&(e?e.hasEvaluations():null)}],mode:[d.d,function(e){switch(e.nextParams&&e.nextParams.mode.toLowerCase()){case a.a.CREATE.toString():return a.a.CREATE;case a.a.EDIT.toString():return a.a.EDIT;case a.a.COPY.toString():return a.a.COPY;default:return a.a.NONE}}]}}).peekState("rubric-evaluation",{url:"/rubric-evaluation?userId",panelClass:"peek",pageTitle:"course.rubricEvaluation.title",params:{columnId:null,groupId:null,userId:{array:!1}},require:function(){return Promise.all([n.e(19),n.e(604)]).then(n.bind(null,"iguP"))},resolve:(f={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric")])}],currentContent:["currentContent",function(e){return e}]},f[o.d]=t.resolve,f.currentColumn=[d.d,"currentColumn",o.d,function(e,t,n){var r=e.nextParams.columnId;return r?r&&r!==c.F.CREATE_COLUMN_ID?n.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():void 0:t}],f[s.c]=r.resolve,f.offCanvasArgs=["offCanvasArgs",p.b,function(e,t){return e.overlay=!t.isLargeBreakpoint(),e}],f)}).peekState("rubric-view",{url:"/rubric-view",panelClass:"peek",pageTitle:"course.rubricView.title",params:{columnId:null},require:function(){return n.e(630).then(n.bind(null,"l3UH"))},resolve:(h={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/directives/rubric/rubric-view"),t.loadBundle("components/services/rubric")])}],currentContent:["currentContent",function(e){return e}]},h[o.d]=t.resolve,h.currentColumn=[d.d,"currentColumn",o.d,function(e,t,n){var r=e.nextParams.columnId;return r?r&&r!==c.F.CREATE_COLUMN_ID?n.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():void 0:t}],h.offCanvasArgs=["offCanvasArgs",p.b,function(e,t){return e.overlay=!t.isLargeBreakpoint(),e}],h)})}])},UioO:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.components.directives.bbDatetime",a=function(){function e(e,t,n){var r=this;this.$parse=e,this.$q=t,this.bbLocalize=n,this.restrict="E",this.scope={value:"&"},this.link=function(e,t,n){var s=n.format,a=n.timezoneFormat;e.$watch((function(){return e.value()}),(function(n){var c=o.ILocaleDatetimeFormat.Short,l=o.ILocaleTimezoneFormat.Short;if(!i.isDate(n))return t.html("");(s&&(c=r.bbLocalize.getFormatEnum(o.ILocaleDatetimeFormat,s)),a&&(l=r.bbLocalize.getFormatEnum(o.ILocaleTimezoneFormat,a)),s&&a)?r.bbLocalize.translate({locale:r.bbLocalize.getLocale(e),key:"components.directives.datetime.datetimeWithTimezone."+s.toUpperCase()+"_datetime_"+a.toUpperCase()+"_timezone",params:{datetime:n},noWrap:!0,noEscape:!0}).then((function(e){t.html(e)})):(a?r.bbLocalize.formatTimezone(n,l):r.bbLocalize.formatDatetime(n,c,e)).then((function(e){t.html(e)}))}),!0)}}return e.$inject=["$parse","$q",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(a);i.module(s,[o.moduleName]).directive("bbDatetime",["$injector",function(e){return e.instantiate(a)}])},Us01:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("0JpG"),o="ultra.directives.bbTranslate",s=function(){function e(e,t,n,i,o,s,a,c,l){var u,d=this;(this.$parse=e,this.$rootScope=t,this.bbLocalize=n,this.$interpolate=i,this.scope=o,this.iElement=s,this.iAttr=a,this.rawKey=c,this.translateValuesExist=l,this.interpolateParams={},this.analyticsIdSet=!1,this.intSym="{{",a.bbTranslate=a.bbTranslate||s.text(),s.text(""),a.bbTranslate&&!a.bbTranslate.match(this.intSym)&&this.onAttrUpdate(a.bbTranslate),this.attrWatcher=a.$observe("bbTranslate",this.onAttrUpdate.bind(this)),this.translateValuesExist)&&a.$observe("translateValues",(function(e){if(e){u&&u();var t=d.$parse(e);u=o.$parent.$watch(t.bind(null,o.$parent),(function(e){r.extend(d.interpolateParams,e),d.updateTranslation()}),!0)}}));var p=this.$rootScope.$on("$translateChangeSuccess",(function(){return d.updateTranslation()}));o.$on("$destroy",(function(){return p()}))}return e.prototype.shouldUnwatch=function(e){return e.indexOf(this.intSym)<0&&this.rawKey.indexOf(this.intSym)<0||(e.indexOf("::")>=0&&this.rawKey.indexOf("::")>=0||void 0)},e.prototype.unwatch=function(){this.attrWatcher(),this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher()},e.prototype.onTranslationIdUpdate=function(e){e&&(e=e.replace(/^\s+|\s+$/g,""),this.updateTranslation(e))},e.prototype.onAttrUpdate=function(e){var t=this;if(e!==this.bbTranslateAttrValue)if(this.bbTranslateAttrValue=e,e.match(this.intSym)){this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher();var n=this.$interpolate(e);this.interpolatedAttrWatcher=this.scope.$watch((function(){return n(t.scope)}),this.onTranslationIdUpdate.bind(this))}else this.onTranslationIdUpdate(e)},e.prototype.updateTranslation=function(e){var t=this;void 0===e&&(e=this.translationId),e&&(this.translationId=e,this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.scope),key:e,params:this.interpolateParams}).then((function(n){n===e?t.iElement.text(n):t.iElement.html(n),t.shouldUnwatch(t.bbTranslateAttrValue)&&t.unwatch()}),(function(){t.iElement.text(e)})))},e.$inject=["$parse","$rootScope",i.serviceName,"$interpolate","scope","iElement","iAttr","rawKey","translateValuesExist"],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.scope=!0,this.compile=function(e,n){var r=n.bbTranslate=(n.bbTranslate||e.text()||"").replace(/^[\s\n]+|[\s\n]+$/g,"");if(r){var i=n.translateValues?n.translateValues:void 0;return function(e,n,o){return t.$injector.instantiate(s,{scope:e,iElement:n,iAttr:o,rawKey:r,translateValuesExist:i})}}}}return e.$inject=["$injector"],e}();r.module(o,[i.moduleName]).directive("bbTranslate",["$injector",function(e){return e.instantiate(a)}])},V17J:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.components.directives.accessibility.enterKeyUpFocus",s=function(){function t(t){this.injector=t,this.restrict="A",this.link=function(t,n,r){n.on("keydown",(function(e){e.keyCode!==i.f||r.bbTriggerEnterKeydown||e.preventDefault()})),n.on("keyup",(function(n){if(n.keyCode===i.f&&(n.preventDefault(),n.stopPropagation(),t.$apply((function(){t.$eval(r.ngClick||r.bbClick,{$event:n}),t.$eval(r.ngBlur,{$event:n})})),r.bbEnterKeyUpFocus)){var o=e(r.bbEnterKeyUpFocus);if(r.indexToFocus){var s=Number(r.indexToFocus);o.eq(s).focus()}else o.focus()}}))}}return t.$inject=["$injector"],t}();r.module(o,[]).directive("bbEnterKeyUpFocus",["$injector",function(e){return e.instantiate(s)}])}).call(this,n("5iHu"))},V6ed:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));n("MISG");var r=n("9zo4"),i=n("wHJ2"),o=n("nsO7"),s=n("+4Px"),a=n("lUN/"),c=n("lEL+"),l="ultra.directives.accessibility.hideFocusOutline",u="hide-focus-outline",d="is-focusVisible",p=function(){function t(e){this.bbTimeout=e,this.restrict="A",this.link=function(e,n,r){a.a(),n.addClass(u),n.removeClass(d),t.instanceCount+=1,t.ensureEvents(n),e.$on("$destroy",(function(){t.instanceCount-=1,0===t.instanceCount&&t.unregisterEvents(),n.off()}))}}return t.enableFocusOutline=function(){e(document.body).removeClass(u),e(document.body).addClass(d)},t.ensureEvents=function(n){function i(e){e.keyCode===s.u&&(t.enableFocusOutline(),r.a.isLastNavigationByKeyboard=!0)}t.eventHandlers||(t.eventHandlers={keyup:i,keydown:i,mousedown:o.debounce((function(t){n.addClass(u),n.removeClass(d),r.a.isLastNavigationByKeyboard=!1,r.a.lastClickedElement=e(t.target).closest(":tabbable"),o.delay((function(){r.a.lastClickedElement&&0===r.a.lastClickedElement.parents("body").length&&(r.a.lastClickedElement=void 0)}),800)}),200)},Object.keys(t.eventHandlers).forEach((function(e){document.addEventListener(e,t.eventHandlers[e],!0)})))},t.unregisterEvents=function(){Object.keys(t.eventHandlers).forEach((function(e){document.removeEventListener(e,t.eventHandlers[e],!0)})),t.eventHandlers=null},t.$inject=[c.b],t.instanceCount=0,t.eventHandlers=null,t}();i.module(l,[c.a]).directive("bbFocusHelper",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("5iHu"))},VJfD:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NoneSpecified=new t("ns"),t.AfterSubmission=new t("as"),t.AfterSubmissionHideResults=new t("ashr"),t.OnSpecifiedDate=new t("osd"),t.AfterDueDate=new t("add"),t.AfterAvailEndDate=new t("aaed"),t.AfterAttemptGraded=new t("aag"),t}(n.n(i).a);t.a=o},VdDF:function(e,t,n){"use strict";var r,i=n("RZND"),o=n("wgY5"),s=function(){function e(){}return e.isWithinDateRange=function(e,t,n){void 0===n&&(n=!0);var r=!0,i=!0;return t.start&&(r=n?t.start<=e:t.start<e),t.end&&(i=n?t.end>=e:t.end>e),r&&i},e.testWithinDateRange=function(t,n,r){void 0===r&&(r=!0);var i=function(e){var t=new Date(e.getTime());return t.setSeconds(0,0),t},s={when:t&&i(t),range:{start:n&&n.start&&i(n.start),end:n&&n.end&&i(n.end)}},a=!s.when||!s.range||e.isWithinDateRange(s.when,{end:s.range.end,start:s.range.start},r),c=!0;if(!a){var l=!0;s.range.start&&e.isSameDay(s.range.start,s.when)&&(l=r?o(s.when).isSameOrAfter(s.range.start,"minute"):o(s.when).isAfter(s.range.start,"minute"));var u=!0;s.range.end&&e.isSameDay(s.range.end,s.when)&&(u=r?o(s.when).isSameOrBefore(s.range.end,"minute"):o(s.when).isBefore(s.range.end,"minute")),c=l&&u}return{isValidDate:!c||a,isValidTime:c}},e.isSameDay=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},e.getCurrentTimeZoneId=function(){return r||(r=i.determine().name()),r},e.parseStringToDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:null==e||""===e?null:new Date(e)},e.convertToLocalDate=function(t){var n=e.parseStringToDate(t);return null!==n&&n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},e.parseDateToISOString=function(e){return null==e||Number.isNaN(Number(e.getDate()))?"":e.toISOString()},e.compareDates=function(e,t,n){return void 0===n&&(n=!0),e&&t?[e,t].sort((function(e,t){return e.getTime()-t.getTime()}))[n?0:1]:e||t},e.breakdownSeconds=function(e){var t=Math.floor(e%60),n=e/60,r=Math.floor(n%60),i=n/60,o=Math.floor(i%24);return{days:Math.floor(i/24),hours:o,minutes:r,seconds:t}},e}();t.a=s},VfFK:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.attendance.routes";r.module(s,[o.b]).config([o.c,function(e){e.peekState("attendance",{url:"/attendance?courseId&attendanceView&meetingId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},reloadOnSearch:!1,require:function(){return Promise.all([n.e(40),n.e(720)]).then(n.bind(null,"kmhM"))},pageTitle:"course.attendance.pageTitle",panelClass:"full",peekStates:["attendance-settings","attendance-student-records"]}).peekState("attendance-settings",{url:"/settings",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(40),n.e(719)]).then(n.bind(null,"qT3r"))},pageTitle:"course.attendance.settings.pageTitle"}).peekState("attendance-student-records",{url:"/studentRecords/:membershipId?userId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(40),n.e(158)]).then(n.bind(null,"OYHs"))},pageTitle:"course.attendance.studentRecords.pageTitle"}).peekState("attendance-student-view",{url:"/attendanceGrade?courseId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(40),n.e(158)]).then(n.bind(null,"OYHs"))},pageTitle:"course.attendance.studentRecords.pageTitle"})}])},Vsv2:function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("nbDY"),s=n.n(o),a=n("HAJP"),c=n("0JpG"),l=n("pjml"),u=n("gkef"),d=n("emI2"),p=n("5MwF"),m=n("Q/M7"),f=function(){function e(e,t){this.$q=e,this.bbLocalize=t,this.oneDriveLocaleStrMapper={ms_MY:"ms",cs_CZ:"cs",cy_GB:"cy-gb",da_DK:"da",de_DE:"de",en_GB:"en-GB",en_US:"en",es_ES:"es",fr_FR:"fr",it_IT:"it",nl_NL:"nl",pl_PL:"pl",pt_BR:"pt-br",sv_SE:"sv",tr_TR:"tr",ru_RU:"ru",ar_SA:"ar",th_TH:"th",zh_CN:"zh-hans",zh_TW:"zh-hant",ja_JP:"ja",ko_KR:"ko"},this.isInitialized=!1}return e.prototype.isConnected=function(){return this.isInitialized&&!!this.getAccessToken()},e.prototype.init=function(){var e=this,t=this.$q.defer(),r=this.bbLocalize.getAppLocale(),i="ms-onedrive-"+(this.oneDriveLocaleStrMapper[r]||"en");return n("PIK1")("./"+i).then((function(n){e.WL=n,e.WL?e.WL.init({redirect_uri:m.j()+p.a.basePath+"/fixed/onedrive/onedrive-callback.html",client_id:e.clientId,scope:["wl.signin","wl.basic","wl.emails","wl.skydrive"],logging:!1}).then((function(n){n&&"unknown"!==n.status&&(e.isInitialized=!0),t.resolve(n)}),(function(e){t.reject(e)})):t.reject()})),t.promise},e.prototype.logout=function(){var e=this,t=this.$q.defer();return this.WL.logout().then((function(n){t.resolve(n),e.accessToken=null,e.driveUserInfo=null}),(function(e){t.reject(e)})),t.promise},e.prototype.login=function(){var e=this,t=this.$q.defer();return this.WL.login({scope:["wl.signin","wl.basic","wl.emails"]}).then((function(n){e.accessToken=e.WL.getSession()&&e.WL.getSession().access_token,t.resolve(n)}),(function(e){t.reject(e)})),t.promise},e.prototype.openFilePicker=function(e,t){var n=this.$q.defer();return this.WL.fileDialog({mode:"open",select:!1===t?"single":"multi"}).then((function(e){n.resolve(e)}),(function(e){n.reject()})),n.promise},e.prototype.getAccessToken=function(){return this.accessToken||(this.accessToken=this.WL.getSession()&&this.WL.getSession().access_token),this.accessToken},e}(),h=n("OBf2"),g=n("aHpC");n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return y}));var v="ultra.service.cloud.drive",b="cloudDrive",y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.ONE_DRIVE=new t("OneDrive"),t.KLOUDLESS=new t("Kloudless"),t}(s.a),S=function(){function e(e,t,n,r,i,o,s){this.$q=e,this.$timeout=t,this.bbLocalize=n,this.CloudDriveModel=r,this.windowSize=i,this.bbScriptLoader=o,this.preferences=s,this.cloudDriveStorage={},this.isGettingFilesInfo=!1,this.isShowOneDrive=!0,this.currentLocale=this.bbLocalize.getAppLocale(),this.isShowOneDrive=!window.Modernizr.touch||i.isLargeBreakpoint()}return e.prototype.cloudDriveStorageFactory=function(e){var t;switch(e.name){case y.ONE_DRIVE.toString():t=new f(this.$q,this.bbLocalize);break;case y.KLOUDLESS.toString():t=new h.b(this.$q,this.bbLocalize,this.$timeout,this.bbScriptLoader,this.preferences)}return t&&(t.clientId=e.clientId,t.redirectUrl=e.redirectUrl,t.provider=e.name,t.apiUrl=e.apiUrl,t.loaderUrl=e.loaderUrl,t.useLoaderExplorer=e.useLoaderExplorer,t.persist=e.persist,t.tokens=e.tokens,t.instProvType=e.instProvType,t.instDomain=e.instDomain),t},e.prototype.getCloudDrivesInfo=function(){var e=this,t=this.$q.defer();return this.cloudDrivesInfo?t.resolve():this.CloudDriveModel.$collection().$fetch().$then((function(n){e.cloudDrivesInfo=n,i.forEach(e.cloudDrivesInfo,(function(t){e.cloudDriveStorage[t.name]=e.cloudDriveStorageFactory(t)})),t.resolve()}),(function(e){t.reject(e)})),t.promise},e.prototype.initializeCloudDrive=function(e){var t=this,n=this.$q.defer();return this.getCloudDrivesInfo().then((function(){t.cloudDriveStorage[e.toString()]?t.cloudDriveStorage[e.toString()].isInitialized&&t.currentLocale===t.bbLocalize.getAppLocale()?n.resolve(t.cloudDriveStorage[e.toString()]):(t.currentLocale=t.bbLocalize.getAppLocale(),t.cloudDriveStorage[e.toString()].init().then((function(){n.resolve(t.cloudDriveStorage[e.toString()])}))):n.reject("No such cloud drive!")})),n.promise},e.prototype.isCloudServiceAvailable=function(e){var t=this.$q.defer();return this.initializeCloudDrive(e).then((function(e){t.resolve(e.isInitialized)})).catch((function(){t.resolve(!1)})),t.promise},e.prototype.getDriveUserInfo=function(e){var t=this.$q.defer(),n=this.cloudDriveStorage[e.toString()].driveUserInfo,r=this.cloudDriveStorage[e.toString()].accessToken;return n?t.resolve(n):r?t.resolve(this.CloudDriveModel.$new(e.toString()).me.$fetch({accessToken:r}).$asPromise()):t.resolve(),t.promise},e=Object(r.__decorate)([Object(r.__param)(0,Object(g.b)("$q")),Object(r.__param)(1,Object(g.b)("$timeout")),Object(r.__param)(2,Object(g.b)(c.serviceName)),Object(r.__param)(3,Object(g.b)(l.j.serviceName)),Object(r.__param)(4,Object(g.b)(u.b)),Object(r.__param)(5,Object(g.b)(a.b)),Object(r.__param)(6,Object(g.b)(d.c))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(S);i.module(v,[l.R,u.a,a.a,d.b]).service(b,S)},"W/rt":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-persist-question.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-persist-question">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-persist-question.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-persist-question.alt"\n          bb-translate>components.services.error-modal.error-persist-question.alt</button>\n</bb-modal>\n'},W7eU:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.errorTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>{{::errorModalErrorKey}}</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},WShm:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.directives.validate.date",a="bbValidateDate",c=function(){function e(e,t){var n=this;this.$parse=e,this.bbLocalize=t,this.require="ngModel",this.restrict="A",this.getISODate=function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},this.getDateParser=function(e,t,r,i){return function(s){if(i.$isEmpty(s))return i.$setValidity("date",!0),null;var a;try{a=n.bbLocalize.parseDateSync(s,o.ILocaleDateFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("date",!1),i.$modelValue}return i.$setValidity("date",!0),"date"!==r.type&&(s=n.bbLocalize.formatDateSync(a,o.ILocaleDateFormat.Short,e))!==i.$viewValue&&(i.$setViewValue(s),t.is(":focus")||i.$render()),a}},this.getMinDateValidator=function(e,t,r,i){return function(t){var s=n.$parse(r.min)(e),a=i.$isEmpty(t)||t.getTime()>s.getTime();return a?delete i.$error.minDate:i.$error.minDate={dateMin:n.bbLocalize.formatDateSync(s,o.ILocaleDateFormat.Short)},a}},this.getMaxDateValidator=function(e,t,r,i){return function(t){var s=n.$parse(r.max)(e),a=i.$isEmpty(t)||t.getTime()<s.getTime();return a?delete i.$error.maxDate:i.$error.maxDate={dateMax:n.bbLocalize.formatDateSync(s,o.ILocaleDateFormat.Short)},a}},this.getDateFormatter=function(e,t,r,i){return function(){i.$setValidity("date",!0);var t=i.$modelValue;return i.$isEmpty(t)?"":"date"===r.type?n.getISODate(t):n.bbLocalize.formatDateSync(t,o.ILocaleDateFormat.Short,e)}},this.link=function(e,t,r,i){i.$parsers.push(n.getDateParser(e,t,r,i)),i.$formatters.push(n.getDateFormatter(e,t,r,i)),r.min&&(i.$validators.minDateValidator=n.getMinDateValidator(e,t,r,i)),r.max&&(i.$validators.maxDateValidator=n.getMaxDateValidator(e,t,r,i)),t.on("blur",(function(){i.$render()}))}}return e.$inject=["$parse",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(s,[o.moduleName]).directive(a,["$parse",o.serviceName,function(e,t){return new c(e,t)}])},"X/qj":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("wHJ2"),o=n("Fvsw"),s=n("Qbdf"),a=n("fYJU"),c=n("jhBu"),l=n("Sa5G"),u=n("aHpC"),d=n("d2bc"),p="ultra.components.services.gradebookPermission",m="gradebookPermission",f=function(){function e(e,t,n,r){this.context=e,this.currentCourse=t,this.currentUser=n,this.entitlementService=r}return e.prototype.isEntitled=function(e,t){return this.entitlementService.isEntitled(e,t)},e.prototype.canDeanonymizeGrades=function(e){return this.isEntitled("course.gradebook-deanonymize.EXECUTE",e)},e.prototype.canEnterFeedback=function(e){return this.isEntitled("course.gradebook-grades.feedback.EXECUTE",e)},e.prototype.canEnterGrades=function(e){return this.canExecute(e)},e.prototype.canViewAssessmentException=function(e){return this.isEntitled(l.b.ViewException,e)},e.prototype.canDelegatedEnterAttemptFeedback=function(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterFeedback()},e.prototype.canDelegatedEnterAttemptGrades=function(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterGrades()},e.prototype.canDelegatedModifyAttempt=function(e,t){return!e.delegatedGrading||(!t||(!!e.isUserReconciler(this.currentUser.userId)||!t.isReconciled()))},e.prototype.canExecute=function(e){return this.isEntitled("course.gradebook-grades.EXECUTE",e)},e.prototype.canModify=function(e){return this.isEntitled("course.gradebook.MODIFY",e)},e.prototype.canModifyItemDueDate=function(e){return this.isEntitled("course.gradebook-item.duedate.MODIFY",e)},e.prototype.canObserve=function(e){return this.isEntitled("observer.gradebook.VIEW",e)},e.prototype.canOverrideGrades=function(e){return this.canExecute(e)},e.prototype.canPostGrades=function(e,t){var n=t||this.context.column,r=e||this.currentCourse.courseId;return n&&n.delegatedGrading?n.isUserReconciler(this.currentUser.userId)&&this.isEntitled("course.gradebook-grades.publish.EXECUTE",r):this.isEntitled("course.gradebook-grades.publish.EXECUTE",r)},e.prototype.canView=function(e){return this.isEntitled("course.gradebook-metadata.VIEW",e)},e.prototype.canViewAttempts=function(e){return this.isEntitled("course.gradebook.attempts.VIEW",e)},e.prototype.canViewGrades=function(e){return this.isEntitled("course.gradebook-grades.VIEW",e)},e.prototype.canViewBulkDownload=function(e){return this.isEntitled(d.a.ViewGrades,e)},e=Object(r.__decorate)([Object(r.__param)(0,Object(u.b)(o.b)),Object(r.__param)(1,Object(u.b)(s.e)),Object(r.__param)(2,Object(u.b)(a.b)),Object(r.__param)(3,Object(u.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(f);i.module(p,[c.a,s.b,o.a]).service(m,f)},X455:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var r=n("D57K"),i=n("pjml"),o=n("yC9S"),s=n("fYJU"),a=n("Qbdf"),c=n("lVRt"),l="ultra.service.course-context.membership",u="currentCourseMembership",d=u+"Provider",p=c.a,m=function(){this.$get=["$injector",function(e){return e.instantiate(f)}],this.name=p,this.resolve=[c.b,u,function(e,t){return t.load(e)}]},f=function(){function e(e,t,n,r,i){this.$q=e,this.$rootScope=t,this.currentUser=n,this.CourseModel=r,this.contextCourse=i;var s=this;o.b.OnRootScope(t,a.a,(function(e,t,n){null!=t&&null!==t.id||s.clear()}))}return Object.defineProperty(e.prototype,"courseMembership",{get:function(){return this._courseMembership},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._courseMembership=null},e.prototype.load=function(e){var t=this;return e?this.currentUser.userId?this.courseMembership&&this.courseMembership.course?e.id!==this.courseMembership.course.id?this.$q.reject(new Error("Cannot resolve course membership because given course does not match the one for the current course membership")):this.courseMembership.$asPromise():e.users.$find(this.currentUser.userId,{expand:"courseRole"}).$allow(["400-499"]).$asPromise().then((function(e){return t._courseMembership=e,t._courseMembership.isInStudentPreview=function(){return t.contextCourse.isInIframeOfPreviewMode()},e})):this.$q.reject(new Error("Cannot resolve course membership because currentUser service has no userId")):this.$q.reject(new Error("Cannot load course membership because no course model was provided"))},e.prototype.availabilityHasBeenBypassed=function(){return this._courseMembership&&this.courseMembership.availabilityHasBeenBypassed()},e.prototype.courseIsAvailable=function(){return this.courseMembership&&this.courseMembership.courseIsAvailable()},e.prototype.courseIsOpen=function(){return this.courseMembership&&this.courseMembership.courseIsOpen()},e.prototype.courseIsPrivate=function(){return this.courseMembership&&this.courseMembership.courseIsPrivate()},e.prototype.isStudentMembership=function(){return this.courseMembership&&this.courseMembership.isStudentMembership()},e.prototype.isGuestMembership=function(){return this.courseMembership&&this.courseMembership.isGuestMembership()},e.prototype.isStudentOrGuestMembership=function(){return this.courseMembership&&this.courseMembership.isStudentOrGuestMembership()},e.prototype.isActAsInstructorMembership=function(){return this.courseMembership&&this.courseMembership.isActAsInstructorMembership()},e.prototype.isTeachingAssistantMembership=function(){return this.courseMembership&&this.courseMembership.isTeachingAssistantMembership()},e.prototype.isInRoleBucket=function(e){return this.courseMembership&&this.courseMembership.isInRoleBucket(e)},e.prototype.isDueDateExcepted=function(){return this.courseMembership&&this.courseMembership.isDueDateExcepted()},e.$inject=["$q","$rootScope",s.b,i.o.serviceName,a.e],e}(),h=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(f),[i.R,s.a,a.b]);angular.module(l,h).provider(u,m)},XGja:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("5iHu"),i=n("lUN/");function o(e,t){i.a();var n=e?e.find(":tabbable"):r(":tabbable"),o=t||r(document.activeElement),s=0;if(1===o.length){var a=n.index(o);a+1<n.length&&(s=a+1)}n.eq(s).focus()}function s(e,t){i.a();var n=e?e.find(":tabbable"):r(":tabbable"),o=t||r(document.activeElement),s=n.length-1;if(1===o.length){var a=n.index(o);a>0&&(s=a-1)}n.eq(s).focus()}function a(e,t){i.a(),e.is(":tabbable")||null!=e.attr("tabindex")?e.is(":tabbable")&&"-1"===e.attr("tabindex")&&e.removeAttr("tabindex"):e.attr("tabindex","-1"),t?t(e):e.focus()}},XLiA:function(e,t,n){},XfOu:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return a})),n.d(t,"ILearnRubricType",(function(){return r})),n.d(t,"sortRubricData",(function(){return c}));n("QLzv");var r,i=n("yCC5"),o=n("Rjd/"),s=n("nkTj"),a=i.Xb;function c(e){e.columnHeaders&&e.columnHeaders.length>0&&e.columnHeaders.sort((function(e,t){return e.position-t.position})),e.rows&&e.rows.length>0&&(e.rows.sort((function(e,t){return e.position-t.position})),e.rows.forEach((function(e){e.cells&&e.cells.length>0&&e.cells.sort((function(e,t){return e.position-t.position}))})))}function l(e){e.rows&&e.rows.length>0&&e.rows.forEach((function(t){t.isCurrentUserEligibleToAlignGoals=function(){return!0===e.permissions.edit&&!e.readOnly},t.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+t.id},t.getContentTitleForGoalAlignment=function(){return t.header}}))}!function(e){e.PERCENTAGE="PERCENTAGE",e.PERCENTAGE_RANGE="PERCENTAGE_RANGE"}(r||(r={})),o.a.factory(a,["restmod",s.d,function(e,t){return e.model().mix({$extend:{Record:{canDelete:function(){return this.permissions&&this.permissions.delete},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.edit},getContentIdForGoalAlignment:function(){return"blackboard.plugin.rubric.api.core.data.Rubric;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},saveAlignedGoals:function(e,t){var n,r=this;return t&&(n=t.map((function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}}))),e&&(this.rows=this.rows.map((function(t){return t.id===e&&(t.alignedGoals=n),t}))),this.$send({method:"PATCH",url:this.$url(),data:{rows:this.rows}}).$then((function(){r.$getPreviousVersion()&&(r.$getPreviousVersion().rows=r.rows)}))}}},$hooks:{"after-request":function(e){e&&e.data&&(e.data.rows&&e.data.columnHeaders?(c(e.data),l(e.data)):e.data.results&&e.data.results.length>0&&e.data.results.forEach((function(e){e.rows&&e.columnHeaders&&(c(e),l(e))})))},"before-save":function(e){e.data.columnHeaders&&e.data.columnHeaders.forEach((function(e,t){e.position=t})),e.data.rows&&e.data.rows.forEach((function(e,t){e.position=t,e.cells.forEach((function(e,t){e.position=t}))}))}}})}])},"Xq/A":function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("g66W");var a=n("DsaG"),c=n("Q/M7"),l=n("e6jQ");n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p}));var u="ultra.services.bbml-editor",d="bbMLEditorService",p=function(){function e(e,t,n){this.$q=e,this.DSCacheFactory=t,this.fileViewer=n}return Object.defineProperty(e,"VERSION_INDICATOR_PREFIX",{get:function(){return'\x3c!-- {"bbMLEditorVersion":'},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CURRENT_VERSION_INDICATOR",{get:function(){return e.VERSION_INDICATOR_PREFIX+"1} --\x3e"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EMBEDDED_LINK_PREFIX",{get:function(){return"https://"},enumerable:!0,configurable:!0}),e.prototype.getBbMLFileType=function(e){return e.dataset&&e.dataset.bbtype?e.dataset.bbtype:"file"},e.prototype.convertBbMLToContentBlocks=function(t){var n,r=[],i=!1;n=t,s.k(n,p.VERSION_INDICATOR_PREFIX)&&(i=!0);var o=document.createElement("div");o.innerHTML=t;for(var a=0;a<o.children.length;a++){var c=o.children[a];if("A"===c.tagName&&"file"===this.getBbMLFileType(c))r.push(this.convertBbMLToFileBlock(c));else if("DIV"===c.tagName){var l=this.getBlockIdFromBbML(c),u=c.innerHTML.trim();u&&r.push({textBlock:u,id:l})}}return i||0!==r.length||(this.contains(t,e.EMBEDDED_LINK_PREFIX)||(i=!0),r.push({textBlock:t,id:this.generateBlockId()})),{contentBlocks:r,isBbmlEditorCompliant:i}},e.prototype.contains=function(e,t){return(e||"").indexOf(t)>-1},e.prototype.convertBbMLToFileBlock=function(e){var t,n={file:{}};if(e.dataset&&e.dataset.bbfile)try{var r=JSON.parse(e.dataset.bbfile);n.isDecorative=r.isDecorative,n.alternativeText=r.alternativeText,n.linkName=r.linkName,n.currentMimeType=r.mimeType,r.render&&(n.ui={isRenderedInline:"inline"===r.render}),r.bbFileUuid&&(n.viewerData||(n.viewerData={bbFileUuid:r.bbFileUuid}),n.viewerData.bbFileUuid=r.bbFileUuid),r.viewerUuid&&(n.viewerData.viewerUuid=r.viewerUuid),r.viewerUrl&&(n.viewerData.viewerUrl=r.viewerUrl),r.viewerTimeToWait&&(n.viewerData.viewerTimeToWait=parseInt(r.viewerTimeToWait+"",10))}catch(e){}n.linkName||(n.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),n.currentMimeType||(n.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1)),n.ui||(n.ui={isRenderedInline:this.fileViewer.shouldRenderInlineByDefault(n)}),t=this.getBlockIdFromBbML(e);var i=e.href;return 0===i.indexOf("http://localhost")&&(i=c.c(i.substr("http://localhost".length))),n.downloadUrl=i,this.fileViewer.initUiField(n),{fileBlock:n,id:t}},e.prototype.getBlockIdFromBbML=function(e){return e.dataset&&e.dataset.bbid?e.dataset.bbid:e.id?e.id:this.generateBlockId()},e.prototype.convertContentBlocksToBbML=function(t,n){var r=document.createElement("div");if(t.forEach((function(e){if("fileBlock"in e){var t=document.createElement("a");if(t.href=e.fileBlock.downloadUrl,e.fileBlock.ui){var n={};e.fileBlock.ui.isRenderedInline?n.render="inline":n.render="attachment",null!=e.fileBlock.isDecorative&&(n.isDecorative=e.fileBlock.isDecorative),e.fileBlock.alternativeText&&(n.alternativeText=e.fileBlock.alternativeText),e.fileBlock.linkName&&(n.linkName=e.fileBlock.linkName),e.fileBlock.currentMimeType&&(n.mimeType=e.fileBlock.currentMimeType),e.fileBlock.viewerData&&(e.fileBlock.viewerData.bbFileUuid&&(n.bbFileUuid=e.fileBlock.viewerData.bbFileUuid),e.fileBlock.viewerData.viewerUuid&&(n.viewerUuid=e.fileBlock.viewerData.viewerUuid)),t.dataset.bbfile=JSON.stringify(n)}t.dataset.bbid=e.id,t.innerHTML=e.fileBlock.linkName,r.appendChild(t)}else if("textBlock"in e&&e.textBlock){var i=document.createElement("div");i.dataset.bbid=e.id,i.innerHTML=e.textBlock,r.appendChild(i)}e.isNewToBbML&&delete e.isNewToBbML})),r.innerHTML){var i="";return n&&t&&t.length&&(i=e.CURRENT_VERSION_INDICATOR),i+r.innerHTML}return r.innerHTML},e.prototype.generateBlockId=function(){return"bbml-editor-id_"+l.b()},e.prototype.writeBbMLLink=function(e,t,n){if(0!==n.length){n.length>1&&"<ul>",n.forEach((function(e){n.length>1&&"<li>","lti"===e.type?'<a data-bbfile="'+e.data+'" data-bbtype="lti" href="#">'+e.title+"</a>":'<a href="'+e.url+'" target="_blank">'+e.title+"</a>",n.length>1&&"</li>"})),n.length>1&&"</ul>"}},e.$inject=["$q","DSCacheFactory",a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(p);i.module(u,["angular-data.DSCacheFactory",o.R,a.a]).service(d,p)},XseH:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));n("my/J");var r=n("nsO7"),i=n("wHJ2"),o=n("H8CZ"),s="ultra.components.directives.hasFooter",a=function(){function t(t,n,i){var s=this;this.scope=t,this.element=n,this.attrs=i,this.domChanged=function(){var t=s.element.find("footer:not(.notification)").filter(":visible").filter((function(){return e(this).height()>0})),n=s.element.find(".import-status-bar").filter(":visible").filter((function(){return e(this).height()>0}));t.length>0||n.length>0?(e(s.element).addClass("has-footer"),e(s.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").addClass("has-footer-in-preview-mode")):(e(s.element).removeClass("has-footer"),e(s.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"))};var a=r.debounce(this.domChanged,100,{leading:!0,trailing:!0});this.observer=new MutationObserver(a),this.observer.observe(n[0],{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),o.b(this.element,a),o.a(this.element,a),this.scope.$on("$destroy",(function(){s.observer.disconnect(),o.b(s.element,a),o.a(s.element,a)}))}return t.$inject=["scope","element","attrs"],t}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.link=function(e,n,r){e.hasfooter=t.$injector.instantiate(a,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbHasFooter",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("5iHu"))},"Y/dt":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return a}));var r="EVENT_ATTEMPT_SAVING_START",i="EVENT_ATTEMPT_SAVING_DONE",o="EVENT_ATTEMPT_SUBMITTING_START",s="EVENT_ATTEMPT_SUBMITTING_DONE",a="EVENT_ATTEMPT_TRIGGER_SAVE"},Y3OE:function(e,t,n){"use strict";var r=n("JfV0");t.a=r.ContentHandler},Y88D:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.components.directives.accessibility.clickFocus",o=function(){function t(t,n){var r=this;this.injector=t,this.timeout=n,this.restrict="A",this.link=function(t,n,i){i.bbClickFocus.length&&n.on("click",(function(){r.timeout((function(){if(i.indexToFocus){var t=Number(i.indexToFocus);e(i.bbClickFocus).eq(t).focus()}else{e(i.bbClickFocus).focus()}}),120)}))}}return t.$inject=["$injector","$timeout"],t}();r.module(i,[]).directive("bbClickFocus",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("5iHu"))},YCUs:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.packageTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.packageFull</bb-translate>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button button--secondary js-secondary-button dismiss-message expand" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.takeMeBack">\n          <bb-translate>components.directives.fileUpload.takeMeBack</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(true)" class="button button--secondary js-secondary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.addAllContent\'}" analytics-id="components.directives.fileUpload.addAllContent">\n          <bb-translate>components.directives.fileUpload.addAllContent</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(false)" class="button js-primary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.letMeChoose\'}" analytics-id="components.directives.fileUpload.letMeChoose">\n          <bb-translate>components.directives.fileUpload.letMeChoose</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"YOs/":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));n("IyP6");var r=n("nsO7"),i=n("wHJ2"),o=n("e6jQ"),s=n("lr7J"),a=n("0JpG"),c=n("en1n"),l=n("o2qC"),u="ultra.components.directives.table";function d(e,t,n){var r=e+"("+t+")";return n&&(r+=","+n+"("+t+")"),r}var p=function(){function e(e,t,n,o){var a=this;this.scope=e,this.element=t,this.$q=n,this.localizeService=o,this.fetchingMoreRows=!1,this.initialDataLoaded=!1,this.throttledShowMore=r.throttle((function(){var e=a.scope.config();if(a.scope.tableData().length<e.totalCount&&!a.fetchingMoreRows){a.fetchingMoreRows=!0;var t=a.$q.defer();a.scope.$emit("table.showMore",{instanceId:e.instanceId,callback:function(e){t.resolve(e)}}),a.scope.$root.$broadcast(s.a,e.instanceId+"-scroll-tray",t.promise),t.promise.then((function(){a.fetchingMoreRows=!1}))}}),500);var c=this.scope.$watch("config()",(function(e){i.isDefined(e)&&(c(),a.init())}))}return e.prototype.init=function(){var e=this,t=this.scope.config();t.instanceId=t.instanceId||o.a(),t.currentSortDirection=t.currentSortDirection||"asc",t.currentSortColumnIndex=t.currentSortColumnIndex||0,t.columns.forEach((function(e){i.isUndefined(e.visible)&&(e.visible=!0)}));var n=this.scope.$watchCollection("tableData()",(function(t){i.isArray(t)&&(e.initialDataLoaded=!0,n())}));if(t.customBreakpointFn){var s=r.throttle((function(e){t.customBreakpointFn(e)}),500);this.scope.$watch((function(){return c.d()}),(function(e){s(e)}))}this.addEventListeners(),this.setCaption()},e.prototype.addEventListeners=function(){var e=this;this.element.on("click","tr th.sortable-header",(function(t){var n=i.element(t.currentTarget).attr("data-heading-index");if(i.isDefined(n)){var r=parseInt(n,10);e.sort(r)}}))},e.prototype.setCaption=function(){var e=this,t=this.scope.config();this.localizeService.loadBundle("components/directives/table").then((function(){var n=e.localizeService.translateSync({locale:e.localizeService.getLocale(e.scope),key:"components.directives.table.caption",params:{caption:t.title,column:t.columns[t.currentSortColumnIndex].heading,direction:e.localizeService.translateSync({locale:e.localizeService.getLocale(e.scope),key:"components.directives.table."+t.currentSortDirection})},noWrap:!0});e.element.find("caption").text(n)}))},e.prototype.sort=function(e){var t=this,n=this.scope.config();this.initialDataLoaded=!1,n.currentSortColumnIndex===e?n.currentSortDirection="asc"===n.currentSortDirection?"desc":"asc":n.currentSortDirection="asc",n.currentSortColumnIndex=e,this.scope.$emit("table.sorted",{instanceId:n.instanceId,columnIndex:n.currentSortColumnIndex,sortDirection:n.currentSortDirection,callback:function(){t.initialDataLoaded=!0,t.setCaption()}})},e.prototype.showMore=function(){this.throttledShowMore()},e.$inject=["scope","element","$q",a.serviceName],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=l,this.transclude=!0,this.scope={config:"&",tableData:"&"},this.controller=["$scope",function(e){this.getConfig=function(){return e.config()}}],this.link=function(e,n){e.table=t.$injector.instantiate(p,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(u,[s.b,a.moduleName]).directive("bbTable",["$injector",function(e){return e.instantiate(m)}])},YQEa:function(e,t,n){},"YVo+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("w9Zy"),o=n("TnpK"),s="profile.update-password.routes";r.module(s,[i.d,o.b]).config([o.c,function(e){e.peekState("update-password",{url:"/password/update",require:function(){return n.e(640).then(n.bind(null,"aJE6"))},pageTitle:"base.profile.update-password.pageTitle"})}])},YfM7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("5MwF"),o=n("TnpK"),s="ultra.base.demo.routes";r.module(s,[o.b]).config([o.c,function(e){i.a.features.componentDemos&&e.peekState("demoComponent",{url:"/component/:componentId",require:function(){return n.e(675).then(n.bind(null,"YZN4"))},panelClass:"full",pageTitle:"Sample Component"})}])},YzQO:function(e,t,n){"use strict";function r(e){return!(!e||!e.length)&&(e.hasClass("bb-editor")||!!e.attr("analytics-on")||r(e.parent()))}function i(e){if(e&&e.length)return e.attr("analytics-id")||e.find("[analytics-id]").attr("analytics-id")}function o(e){if(e&&e.length)switch((e.prop("tagName")||"").toLowerCase()){case"a":case"input":case"button":return i(e);default:return o(e.parent())}}function s(e){if(e&&e.length)return e.attr("analytics-context")||s(e.parent())}n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}))},ZBYA:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s="ultraUi.components.services.predict.institutionPreference",a="predictInstitutionPreference",c=function(){function e(e,t){this.$rootScope=e,this.predictInstitutionPreferenceModel=t}return e.prototype.getInstitutionPreference=function(e){return this.predictInstitutionPreferenceModel.getInstitutionPreference(e)},e.$inject=["$rootScope",o.gb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(s,[o.R]).service(a,c)},ZMjE:function(e,t){e.exports='<div class="import-status-bar import-course-error" ng-class="{\'below\': contentImportStatusBarController.hideStatusBar()}"\n     ng-if="display" bb-load-bundle="components/directives/import-status-bar">\n  <div class="row">\n      <div bb-first-time-container>\n        <div class="columns guidance-wrapper import-status-bar-message">\n          <span class="successful-import-message ellipsis" bb-focus bb-translate ng-if="contentImportStatusBarController.notCarriedForwardItemsCount === 0">\n            course.import.statusBar.success\n          </span>\n          <bb-guidance component-key="importAnalysis" page-container-selector=".course-outline"\n                       class="guidance-element-overlay push-right push-top" ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0">\n            <bb-translate>course.import.statusBar.tooltip.main</bb-translate>\n          </bb-guidance>\n          <a bb-focus \n             href="javascript:void(0);" \n             class="not-copied-details" \n             ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0"\n             ng-class="{\'not-carry-details-warn\': contentImportStatusBarController.notCarriedForwardItemsCount > 0}"\n             ng-click="contentImportStatusBarController.goToImportReport()"\n             analytics-id="course.import.statusBar.importReport.link">\n            <div class="status-bar-alarm" bb-guidance-target component-key="importAnalysis">\n                <bb-translate class="ellipsis" translate-values="{ count: contentImportStatusBarController.notCarriedForwardItemsCount }">\n                  course.import.statusBar.itemsCount.plural\n                </bb-translate>\n            </div>\n          </a>\n        </div>\n      </div>\n    <div class="columns confirm-column right">\n      <button class="button default js-import-confirm" \n              ng-click="contentImportStatusBarController.confirm()"\n              analytics-id="course.import.statusBar.confirm.button">\n        <span bb-translate="course.import.statusBar.confirm"></span>\n      </button>\n      \x3c!-- POST v1 --\x3e\n      \x3c!--<button tabindex="0" class="right inverse undo-import" ng-click="contentImportStatusBarController.undo()">--\x3e\n      \x3c!--<span>Undo Import</span>--\x3e\n      \x3c!--</button>--\x3e\n    </div>\n  </div>\n</div>'},ZQey:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nbDY"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.courseStatus=t,n}return Object(r.__extends)(t,e),t.Open=new t("OPEN"),t.Complete=new t("COMPLETE"),t.Private=new t("PRIVATE"),t.OpenTermClassic=new t("OPEN_CLASSIC"),t.PrivateTermClassic=new t("PRIVATE"),t.TermOpen=new t("OPEN"),t.TermComplete=new t("COMPLETE"),t.TermPrivate=new t("PRIVATE"),t.OpenClassic=new t("OPEN_CLASSIC"),t}(n.n(i).a)},Za2G:function(e,t){e.exports='<bb-modal class="notification" \n          modal-title-key="components.directives.fileUpload.improperAmountOfFilesTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.improperAmountOfFilesFull</bb-translate>\n    </p>\n    <div class="file-list">\n      <div ng-repeat="file in fileUpload.uploadedFiles">\n        <input ng-if="$index===0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" checked analytics-id="components.directives.checked.input.radio">\n        <input ng-if="$index!==0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" analytics-id="components.directives.not.checked.input.radio">\n        <label class="toggle-label" for="{{\'fileListing\' + $index}}" style="white-space: nowrap">{{file.name}}</label><br />\n      </div>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadSelectedFile">\n    <bb-translate>components.directives.fileUpload.uploadSelectedFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},"ZzN+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("pjml"),a=n("0+Qs"),c="ultra.service.course.conversion",l="courseConversion",u=function(){function e(e,t,n,r,i,o){this.interval=e,this.CourseModel=t,this.$modal=n,this.$q=r,this.$rootScope=i,this.ScheduledTaskModel=o,this.showPreviewAlert=!0,this.taskCache={},this.queuedTaskCache={}}return e.prototype._getConversionTask=function(e){return this.ScheduledTaskModel.$find(e)},e.prototype.isPreview=function(e){return!e.isOpen()&&e.isUltraPreview()},e.prototype.isConversionComplete=function(e){return!e||(s.sb.QueueTaskStatus.Complete.isEqualTo(e)||s.sb.QueueTaskStatus.CompleteErrors.isEqualTo(e))},e.prototype.isConversionSuccess=function(e){return!e||s.sb.QueueTaskStatus.Complete.isEqualTo(e)},e.prototype.setCheckConversionIntervalIfNotExist=function(e,t){this.taskCache[e.courseId]||this.setCheckConversionInterval(e,t)},e.prototype.setCheckConversionInterval=function(e,t){var n=this,r=this.cancelConversionInterval(e);this.removeQueuedTaskFromCache(e),void 0===t&&r&&(t=r.onCompleteCallback),e.refreshConvertToUltraStatus().then((function(r){n.queuedTaskCache[e.courseId]=r.ui.convertToUltraTaskId,n._getConversionTask(n.queuedTaskCache[e.courseId]).$then((function(r){n.setUpIntervalToPollForConversionTaskCompletion(r,e,t)}))}))},e.prototype.setUpIntervalToPollForConversionTaskCompletion=function(e,t,n){var r=this,i=e.taskTitle;if(i&&(i.indexOf("ConvertTOUltraQueuedOperation")>=0||i.indexOf("UndoUltraQueuedOperation")>=0)){var s;if(s=function(){r._getConversionTask(e.taskId).$then((function(e){var n=e.taskStatus.toString(),i=r.isConversionComplete(n),o=r.isConversionSuccess(n);if(i){var s=r.cancelConversionInterval(t);r.removeQueuedTaskFromCache(t),s&&s.onCompleteCallback&&s.onCompleteCallback(n,{complete:i,success:o,taskId:e.taskId,taskTitle:e.taskTitle})}}))},!this.taskCache[t.courseId]){var a=o.a.production?6e4:6e3;this.taskCache[t.courseId]={interval:this.interval((function(){s()}),this.$rootScope,a),onCompleteCallback:n}}}},e.prototype.cancelConversionInterval=function(e){var t=this.taskCache[e.courseId];return t&&(this.interval.cancel(t.interval),this.taskCache[e.courseId]=null),t},e.prototype.removeQueuedTaskFromCache=function(e){delete this.queuedTaskCache[e.courseId]},e.$inject=[a.b,s.o.serviceName,"$modal","$q","$rootScope",s.sb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(c,[s.R,a.a]).service(l,u)},ZzR9:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.$stateChangeError="$stateChangeError",e.$stateChangeStart="$stateChangeStart",e.$stateChangeSuccess="$stateChangeSuccess",e.$stateNotFound="$stateNotFound",e.$stateHasCourseInContextChanged="$stateHasCourseInContextChanged"}(r||(r={}))},ZzYr:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("TnpK"),o=n("Qbdf"),s=n("aHpC"),a=n("wHJ2"),c="ultra.components.directives.courseOrgTokenReplacementDirective",l=[{coursePrefix:"base.baseCourses",orgPrefix:"base.baseOrganizations"},{coursePrefix:"base.courses",orgPrefix:"base.organizations"},{coursePrefix:"course",orgPrefix:"organization"},{coursePrefix:"components.directives.message",orgPrefix:"components.directives.message.organization"},{coursePrefix:"components.directives.learning-module.ghost-panel",orgPrefix:"components.directives.learning-module.orgs-ghost-panel"},{coursePrefix:"components.directives.calendar",orgPrefix:"components.directives.calendar.organization"},{coursePrefix:"components.directives.content-visibility",orgPrefix:"components.directives.content-visibility.organization"},{coursePrefix:"components.directives.grade",orgPrefix:"components.directives.grade.organization"}],u=function(){function e(e,t,n,r,i){var o=this;this.element=e,this.attributes=t,this.scope=n,this.ultraState=r,this.currentCourse=i;try{if((r.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&(t.bbTranslate&&(t.bbTranslate=this.replaceToken(t.bbTranslate),e.attr("bb-translate",this.replaceToken(t.bbTranslate))),t.bbTranslateAttrs)){var s=t.bbTranslateAttrs;a.forEach(this.scope.$eval(s),(function(e){s=s.replace(e,o.replaceToken(e))})),t.bbTranslateAttrs=s,e.attr("bb-translate-attrs",s)}}catch(e){}}return e.prototype.replaceToken=function(e){if(e){var t=l.find((function(t){return e.startsWith(t.coursePrefix)}));if(t)return e.replace(t.coursePrefix,t.orgPrefix)}return e},e}(),d=function(){function e(e,t){var n=this;this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=function(){return function(e,t,r){return new u(t,r,e,n.ultraState,n.currentCourse)}}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)(i.d)),Object(r.__param)(1,Object(s.b)(o.e))],e)}();a.module(c,[i.b]).directive("courseOrgTokenResolver",["$injector",function(e){return e.instantiate(d)}])},a8V0:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Assessment=new t("Assessment"),t.Section=new t("Section"),t.Item=new t("Item"),t}(n.n(i).a);t.a=o},aD4H:function(e,t){e.exports='<ng-form name="baseForm" bb-autosave save-func="saveForm.save()" validation-func="saveForm.validate()" delay-autosave="delayAutosave()"\n         debounce-save-destination="debounceSaveDestination()" novalidate>\n    <div ng-transclude />\n    <bb-save-buttons validate-save="saveForm.validate()"\n                     save-action="saveForm.saveClicked()"\n                     cancel-action="saveForm.cancelClicked()"\n                     delete-action="saveForm.deleteClicked()"\n                     hide-save="hideFooter"\n                     hide-cancel="hideFooter"\n                     mousedown-action="saveForm.mouseDown()"\n                     can-delete="canDelete"\n                     display-delete-after-saving="displayDeleteAfterSaving()"\n                     delete-confirmation-resource-type="{{deleteConfirmationResourceType}}"\n                     must-show-delete-confirmation="true"\n                     choices="choices"\n                     analytics-id-tag-prefix="{{::analyticsIdTagPrefix}}.saveForm">\n                          \x3c!-- TODO: will update the above “must-show-delete-confirmation” after PR #818 (update confirmation needed) is merged --\x3e\n    </bb-save-buttons>\n</ng-form>\n'},aHpC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var r=n("nsO7");function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Symbol(e.name);return function(n,i,o){var s=o.value;o.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return this[r]=this[r]||e.apply(null,[s].concat(t||[])),this[r].apply(this,n)}}}var o=function(e){return i(r.debounce,e)},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,n,i){var o=i.value,s=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")"),a=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")");i.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this,c=i.$scope||i.scope;if(!c)throw new Error("NO_SCOPE_FOUND");return Object(r.isEmpty)(e)||(i[a]=i[a]||Object(r.once)((function(){c.$watchGroup(e,(function(){i[s]=null}))})),i[a]()),i[s]=i[s]||Object(r.once)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.apply(i,e)})),i[s].apply(i,t)}}},a=function(e){if(!e)throw new Error("Empty name is not accepted");return function(t,n,r){if("function"!=typeof t)throw new Error("@Inject only supports constructor arguments");t.$inject=t.$inject||[],t.$inject[r]=e}},c=function(){return function(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,i=r.apply(this,e),o=n.$injector;if(!o)throw new Error("$injector NotFound, the decorator requires $injector to be injected into class.");o.invoke(["$rootScope","$q",function(e,t){t.when(i).then((function(){return e.$applyAsync()}))}])}}}},abE0:function(e,t){e.exports='<bb-modal class="notification" modal-translate-options="modalTranslateOptions"\n          modal-aria-type="{{modalAriaType}}"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p ng-bind-html="::modalStrings.instructions"></p>\n    <div ng-show="confirmationNeeded.choices && confirmationNeeded.choices.length > 0" ng-repeat="choice in confirmationNeeded.choices">\n      <input id="{{choice.key}}" ng-disabled="choice.isDisable" ng-model="choice.value" type="checkbox" analytics-id="components.directives.confirmationNeeded.input.checkbox"/>\n      <label for="{{choice.key}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="okAction()" analytics-id="primary.button.okAction.button">{{::modalStrings.ok}}</button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" analytics-id="secondary.button.cancelAction.button">{{::modalStrings.cancel}}</button>\n</bb-modal>\n'},adx1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nsO7"),o=function(){function e(){this.events=Object.create(null)}return e.prototype.$onEvent=function(e,t){var n=this;return this.events[e]=this.events[e]||[],this.events[e].push(t),i.once((function(){i.remove(n.events[e],(function(e){return e===t}))}))},e.prototype.$emitEvent=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o={type:e};(this.events[e]||[]).forEach((function(e){e.call.apply(e,Object(r.__spreadArrays)([t,o],n))}))},e}()},aohr:function(e,t,n){"use strict";var r;!function(e){e.CcAdvisors="CC_ADVISORS",e.DisableAdvisorViewAllStudents="DISABLE_ADVISOR_VIEW_ALL_STUDENTS",e.EmailBranding="EMAIL_BRANDING",e.EmailSender="EMAIL_SENDER",e.EnableLogOut="ENABLE_LOG_OUT",e.InstructorViewMajorDegreeColumn="INSTRUCTOR_VIEW_MAJOR_DEGREE_COLUMN",e.OverrideLanguagePack="OVERRIDE_LANGUAGE_PACK",e.TypeaheadCourseLimit="TYPEAHEAD_COURSE_LIMIT",e.TypeaheadStudentLimit="TYPEAHEAD_STUDENT_LIMIT"}(r||(r={})),t.a=r},b2lU:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n("0JpG"),i="fileUtility",o="FileUtilFactory",s=function(){function e(e,t){var n=this;this.bbLocalize=e,this.$q=t,this.bytes="components.directives.fileUpload.bytes",this.GB="components.directives.fileUpload.GB",this.KB="components.directives.fileUpload.KB",this.MB="components.directives.fileUpload.MB",this.calculateSize=function(e){var t=n.bytes;return e>1024&&(e/=1024,t=n.KB,e>1024&&(e/=1024,t=n.MB,e>1024&&(e/=1024,t=n.GB))),{size:e,sizeLabel:t}}}return e.$inject=[r.serviceName,"$q"],e}();angular.module(i,[r.moduleName]).factory(o,["$injector",function(e){return function(){return e.instantiate(s)}}])},bF8R:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("fYJU"),c=n("o5Lu"),l=n("Bu0u"),u=n("1y/X"),d=n("0JpG"),p="ultra.components.services.courseContent",m="courseContent",f=function(){function e(e,t,n,r,i,o,s){this.$q=e,this.$rootScope=t,this.$log=n,this.grade=r,this.contextUser=i,this.UserModel=o,this.bbLocalize=s,this.contentDataResult=new h}return e.prototype.loadContentAndGrades=function(e){var t,n=this;if(e.content)t=e.content.$asPromise&&e.content.$asPromise()||this.$q.when(e.content);else{if(!e.contentId)throw new l.a({message:"Content or contentId must be provided."});var r="assignedGroups,selfEnrollmentGroups.group,extensionAttributes"+(e.contentExtraExpand?","+e.contentExtraExpand:"");t=e.course.contents.$find(e.contentId,{expand:r}).$asPromise()}if(!this.contextUser.userId)throw new l.a({message:"There is no userId in the context."});return t.then((function(t){var r=new h;return r.courseContent=t,r.groupMembers=[],e.column?r.gradingColumn=e.column:r.gradingColumn=e.course.gradebook.columns.$buildRaw(t.getAssociatedGradingColumn(e.columnId)),r.gradingColumn.rubricAssociations||r.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then((function(e){r.gradingColumn.rubricAssociations=e.rubricAssociations})),n.grade.loadGrade({attemptQueryParams:{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",overrideAggregationModel:s.F.AttemptAggregationModel.Last},gradeQueryParams:{expand:"attemptsLeft"},courseId:e.course.id,column:r.gradingColumn,content:r.courseContent,userId:n.contextUser.userId},!0).then((function(o){if(r.submitter=n.contextUser.userModel,o){if(r.gradeDetail=o,r.attempt=o.ui.attempt,r.groupAttempt=o.ui.groupAttempt,t.isGroupContent)return n.getGroupMembers(e.course,t,r.groupAttempt).then((function(e){return r.groupMembers=e,r.groupAttempt&&(r.submitter=i.find(e,(function(e){return e.id===r.groupAttempt.submittedBy})),!r.submitter&&(r.submitter=null,r.groupAttempt.submittedBy))?n.UserModel.$find(r.groupAttempt.submittedBy).$then((function(e){r.submitter=e||null}),(function(e){return n.$log.error(e.$response)})).$asPromise().then((function(){return r})):r}))}else if(t.isGroupContent)return n.getGroupMembers(e.course,t).then((function(e){return r.groupMembers=e,r}));return r}))}))},e.prototype.getGroupMembers=function(e,t,n){var r=this;return t.assignedGroups&&t.assignedGroups.length>0?e.groups.$find(t.assignedGroups[0].groupId,{expand:"memberships",excludeUnavailableMembers:!0}).$asPromise().then((function(t){return e.memberships.$refresh({fields:"id, user, courseRole",roleBucket:u.a.TAKING.toString()}).$asPromise().then((function(e){return r.sortGroupMembers(e,t)}))})):this.$q.when([])},e.prototype.sortGroupMembers=function(e,t){var n=this,r={},i=[],o=t.memberships||t.members;e.forEach((function(e){e.user&&(e.user.ui=e.user.ui||{},r[e.user.id]=e.user)}));var s=[];return o.forEach((function(e){var t=e.userId||e,i=r[t];if(i){var o=n.bbLocalize.formatUsername(i,d.ILocaleUsernameFormat.Short,n.$rootScope);s.push(o),o.then((function(e){i.ui.formatUserName=e}))}})),this.$q.all(s).then((function(){return(o=o.filter((function(e){return!!r[e.userId||e]}))).sort((function(e,t){var n=e.userId||e,i=t.userId||t;return r[n].ui.formatUserName.localeCompare(r[i].ui.formatUserName)})),o.forEach((function(e){var t=e.userId||e;r[t]&&(i.push(r[t]),delete r[t])})),i}))},e.$inject=["$q","$rootScope","$log",c.g,a.b,s.Qb.serviceName,d.serviceName],e}(),h=function(){};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(f);o.module(p,[s.R,a.a]).service(m,f)},bTsL:function(e,t){e.exports='<div class="dropdown-directive">\n  <select id="{{::listId}}" ng-if="::dropdown.useNativeSelect()" ng-model="dropdown.selectedItem"\n          ng-options="item.name disable when item.isHeader for item in itemList"\n          ng-class="{\'drowdown-group\': listKind === \'group\'}"\n          ng-change="dropdown.clickItem($event)" analytics-id="directives.dropdown.item.select">\n    \x3c!--for the listkind=group, ios mobile will show a blank option--\x3e\n    <option ng-if="dropdown.shouldHaveBlankOption(listKind)" class="default-option" value="" analytics-id="directive.dropdown.option"></option>\n  </select>\n\n  <ul ng-attr-role="{{dropdown.getRole()}}"\n      ng-class="{\'feature-filter\': listKind !== \'custom\', \'selection-full-width\': selectionFullWidth(), \'force-above\': forceAbove}"\n      id="{{::listId}}" ng-if="::!dropdown.useNativeSelect()" class="f-dropdown ignore-accordion" data-dropdown-content\n      aria-hidden="true" aria-autoclose="true" tabindex="-1">\n    <li class="list-header" ng-if="listHeader">\n      <a href="javascript:void(0);"\n         analytics-id="{{::analyticsIdTagPrefix}}.listHeader.link"\n      >\n        {{listHeader}}\n      </a>\n    </li>\n    <li role="presentation" ng-repeat="item in itemList" ng-if="listKind === \'filter\'"\n        ng-class="{\'item-selected\': selectedItem === item}"\n        class="{{item.extraClass}}"\n    >\n      <a href="javascript:void(0);" \n         role="option" \n         aria-selected="{{selectedItem === item}}" \n         aria-setsize="{{itemList.length}}" \n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         class="js-filter-id-{{::item.index}}" \n         data-filter-id="{{::item.nature.toString()}}"\n         ng-click="dropdown.selectItem(item)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name.split(\' \').join(\'\')}}.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n        <i></i>\n      </a>\n    </li>\n    <li ng-repeat="item in itemList" ng-if="listKind === \'avatar-list\'">\n      <a href="javascript:void(0);" \n         class="item-container"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.avatar.link">\n        <div class="info-container">\n          <div class="avatar-container">\n            <bb-avatar user="item" inactive="!dropdown.isUserCourseAvailable(item.id)"></bb-avatar>\n          </div>\n          <div class="username-container">\n            <bb-username user="item" format="short"></bb-username>\n            <div ng-if="selectedItem === item" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </div>\n      </a>\n    </li>\n    <li role="presentation" ng-if="listKind === \'group\'" ng-repeat="item in itemList"\n        ng-class="{\'group-header-li\': item.isHeader }">\n      <a href="javascript:void(0);" \n         role="option" \n         aria-setsize="{{itemList.length}}" \n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         ng-class="{\'group-header\': item.isHeader}" \n         ng-attr-tabindex="{{ item.isHeader ? -1 : 0 }}"\n         ng-click="dropdown.selectItem(item, $event)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.group.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n      </a>\n    </li>\n    <div bb-dropdown-transclude></div>\n  </ul>\n</div>\n'},bd3f:function(e,t){e.exports='<p class="sr-only read-info-polite" role="alert" aria-live="polite">{{readInfo.message}}</p>\n<p class="sr-only read-info-assertive" role="alert" aria-live="assertive">{{readInfo.alertMessage}}</p>'},bd9L:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("wHJ2"),o=n("nbDY"),s=n.n(o),a=n("+brj"),c=n("7/CN"),l=n("RNuw"),u=n("lEL+"),d="ultra.directives.autosave",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Change=new t("change"),t.Saving=new t("saving"),t.Saved=new t("saved"),t.SaveFailure=new t("saveFailure"),t.ValidationFailure=new t("validationFailure"),t}(s.a),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.BrowserLocalStorage=new t("browserLocalStorage"),t.BrowserSessionStorage=new t("browserSessionStorage"),t.Server=new t("server"),t}(s.a),f=function(){function e(e,t,n,r,i){switch(this.$q=e,this.scope=t,this.formController=n,this.browserStorage=r,this.timeout=i,this.timeoutMillis=2e3,this.startAutoSubmit=!1,this.saveTo=this.scope.debounceSaveDestination&&m.parse(this.scope.debounceSaveDestination())||m.Server,this.saveTo){case m.BrowserSessionStorage:this.browserStorageDestination=a.a.SessionStorage;break;case m.BrowserLocalStorage:this.browserStorageDestination=a.a.LocalStorage}this.checkForDirectiveConfigErrors(),t.timeoutMillis?this.timeoutMillis=t.timeoutMillis():this.browserStorageDestination&&(this.timeoutMillis=1e3),this.setupListeners(),this.browserStorageDestination&&this.restoreFromBrowser(),this.setupWatcher()}return e.prototype.setupListeners=function(){var e=this;this.scope.$on("bb-autosave-interrupt-timer",(function(){e.timeout.cancel(e.autoSaveTimeout)})),this.scope.$on("bb-autosave-save-trigger-debounce",(function(){e.scope.delayAutosave&&e.scope.delayAutosave()||e.debounceSave()})),this.scope.$on("bb-autosave-save-to-server-now",(function(){e.scope.delayAutosave&&e.scope.delayAutosave()||(e.timeout.cancel(e.autoSaveTimeout),e.saveToServerNow())})),this.scope.$on("bb-autosave-save-to-browser-now",(function(){e.scope.delayAutosave&&e.scope.delayAutosave()||(e.scope.$emit("bb-autosave-form",p.Change),e.timeout.cancel(e.autoSaveTimeout),e.saveToBrowserNow())})),this.scope.$on("bb-autosave-browser-restore",(function(){e.restoreFromBrowser()})),this.scope.$on("bb-autosave-browser-delete",(function(){e.deleteFromBrowser()})),this.scope.$on("bb-start-auto-submission",(function(t,n){e.startAutoSubmit=!0,n.resolve()})),this.scope.$on("bb-cancel-auto-submission",(function(){e.startAutoSubmit=!1}))},e.prototype.setupWatcher=function(){var e=this,t=function(t,n){if(!e.scope.delayAutosave||!e.scope.delayAutosave()){if(null===t&&""===n)return;e.debounceSave()}};if(!this.scope.delayAutosave||!this.scope.delayAutosave())return l.a(this.scope,this.formController,t);var n=this.scope.$watch((function(){return e.scope.delayAutosave()}),(function(r){null==r||r||(l.a(e.scope,e.formController,t),n())}))},e.prototype.checkForDirectiveConfigErrors=function(){if(this.saveTo.isEqualTo(m.Server)&&(!this.scope.saveFunc||!this.scope.validationFunc))throw new Error("saving to the server requires save-func and validate to be defined")},e.prototype.isValid=function(){return this.formController.$valid&&this.scope.validationFunc()},e.prototype.debounceSave=function(){var e=this;this.startAutoSubmit||(this.scope.$emit("bb-autosave-form",p.Change),this.scope.$emit("bb-autosave-form-to-browser",p.Change),this.timeout.cancel(this.autoSaveTimeout),this.autoSaveTimeout=this.timeout((function(){e.saveTo.isEqualTo(m.Server)?e.saveToServerNow():e.browserStorageDestination&&e.saveToBrowserNow()}),this.scope,this.timeoutMillis))},e.prototype.saveToServerNow=function(){var e=this;if(this.startAutoSubmit||!c.a()){if(!this.scope.saveFunc||!this.scope.validationFunc)throw new Error("saving to the server requires save-func and validate to be defined");this.isValid()?(this.scope.$emit("bb-autosave-form",p.Saving),this.scope.saveFunc().then((function(t){e.scope.$emit("bb-autosave-form",p.Saved,t),e.browserStorageDestination&&e.deleteFromBrowser()}),(function(t){e.scope.$emit("bb-autosave-form",p.SaveFailure,t)}))):this.scope.$emit("bb-autosave-form",p.ValidationFailure)}},e.prototype.saveToBrowserNow=function(){var e=this;if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");this.scope.$emit("bb-autosave-form-to-browser",p.Saving),this.browserStorage.serializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then((function(t){e.scope.$emit("bb-autosave-form-to-browser",p.Saved,t)}))},e.prototype.restoreFromBrowser=function(){var e=this;if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deserializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then((function(t){if(t)return e.scope.$root.$broadcast("bb-autosave-browser-restore-data",t),t}))},e.prototype.deleteFromBrowser=function(){if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deleteCurrentRouteScopes(this.browserStorageDestination)},e.$inject=["$q","scope","formController",a.c,u.b],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.require="^form",this.scope={debounceSaveDestination:"&?",delayAutosave:"&?",saveFunc:"&?",timeoutMillis:"&?",validationFunc:"&?"},this.link=function(e,n,r,i){e.autoSave=t.$injector.instantiate(f,{scope:e,formController:i})}}return e.$inject=["$injector"],e}();i.module(d,[u.a,a.b]).directive("bbAutosave",["$injector",function(e){return e.instantiate(h)}])},cFWd:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));n("LvpZ");var r=n("nsO7"),i=n("wHJ2"),o=n("oQrK"),s=n("lEL+"),a=n("bTsL"),c=n("yC9S"),l="ultra.components.directives.dropdown",u=function(){function t(e,t,n,s){var a,l=this;(this.scope=e,this.element=t,this.$window=n,this.timeout=s,this.RESIZE_DELAY=150,this.isMobile=!1,this.isIos=!1,this.setMaxHeight=function(){var e=l.element.offset().top,t=i.element(l.$window).height(),n=34;"avatar-list"===l.scope.listKind&&(n=57);var r=Math.max(Math.floor((l.scope.forceAbove?e:t-e)/n),2);l.scope.simplifiedMaxItemsPerPage&&l.scope.simplifiedMaxItemsPerPage()>0&&(r=Math.min(r,l.scope.simplifiedMaxItemsPerPage())),l.element.find(".dropdown-directive").css({maxHeight:n*r+2})},this.element.addClass("bb-dropdown"),this.isMobile=!o.a.detect().desktop(),this.isIos=o.a.detect().ios(),this.selectedItem=this.scope.selectedItem,e.$watch("::selectedItem",(function(e){l.selectedItem=e})),this.useNativeSelect())||(this.element.on("opened.fndtn.dropdown",(function(){l.setMaxHeight(),l.scope.$applyAsync(),a=c.b.OnWindow("resize",r.debounce(l.setMaxHeight,l.RESIZE_DELAY),e),(l.scope.onOpen||i.noop)()})),this.element.on("closed.fndtn.dropdown",(function(){a(),(l.scope.onClose||i.noop)()})))}return t.prototype.selectItem=function(e,t){e.isHeader?t.stopPropagation():this.scope.clickFunction({item:e})},t.prototype.getRole=function(){return"menu"===this.scope.listKind?"menu":"listbox"},t.prototype.clickItem=function(t){this.selectedItem&&(this.scope.selectedItem=this.selectedItem,e(t.target).blur(),this.scope.clickFunction({item:this.selectedItem}))},t.prototype.useNativeSelect=function(){return this.isMobile&&"avatar-list"!==this.scope.listKind&&"custom"!==this.scope.listKind&&"region"!==this.scope.listKind},t.prototype.isUserCourseAvailable=function(e){var t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])},t.prototype.shouldHaveBlankOption=function(e){return this.isIos&&"group"===e},t.$inject=["scope","element","$window",s.b],t}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.transclude=!0,this.scope={listId:"@",itemList:"=",listKind:"@",selectedItem:"=?",selectedText:"@?",listHeader:"@?",clickFunction:"&?",onOpen:"&?",onClose:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectionFullWidth:"&?",simplifiedMaxItemsPerPage:"&?",forceAbove:"=?",analyticsIdTagPrefix:"@?"},this.link=function(e,n,r,i,o){e.dropdown=t.$injector.instantiate(u,{scope:e,element:n})}}return e.$inject=["$injector"],e}(),p=function(){function e(e){this.$injector=e,this.restrict="EA",this.link=function(e,t,n,r,i){"custom"===e.listKind||"region"===e.listKind?i((function(n,r){r.dropdown=e.dropdown,t.replaceWith(n)})):t.remove()}}return e.$inject=["$injector"],e}();i.module(l,[s.a]).directive("bbDropdown",["$injector",function(e){return e.instantiate(d)}]).directive("bbDropdownTransclude",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("5iHu"))},cGmE:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},cKE6:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-large-post",use:"icon-large-post-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-post"><g fill="none" fill-rule="evenodd"><path fill="#E0E0E0" d="M9.548 18.726V31.85l8.47-5.893-2.022-1.889L35.415 5.824z" /><path stroke="#767676" stroke-linejoin="round" d="M35.414 5.825l-25.866 12.9V31.85l8.47-5.892-2.022-1.889z" /><path fill="#FFF" d="M15.667 23.575l9.208 9.088a.926.926 0 0 0 1.533-.373L35.452 5.8 15.667 23.575z" /><path stroke="#767676" stroke-linejoin="round" d="M15.667 23.575l9.208 9.088a.926.926 0 0 0 1.533-.373L35.452 5.8 15.667 23.575z" /><path fill="#FFF" d="M9.034 18.65L35.451 5.8 3.36 11.65c-.796.146-1.05 1.184-.415 1.696l6.09 5.304z" /><path stroke="#767676" stroke-linejoin="round" d="M9.034 18.65L35.451 5.8 3.36 11.65c-.796.146-1.05 1.184-.415 1.696l6.09 5.304zm.586 13.2l6.047-8.269" /></g></symbol>'});i.add(o);e.exports=o},cMqb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("9zo4"),i=n("wHJ2"),o=n("w9Zy"),s=n("XGja"),a="ultra.directives.accessibility.focus",c=function(){function e(e,t){var n=this;this.bbOffcanvas=e,this._accessibility=t,this.restrict="A",this.link=function(e,t,r){var o=r.keepTriggerFocus,a=e.$watch(r.bbFocus,(function(e){null!=e&&"true"!==i.lowercase(e.toString())||!n._accessibility.isElementInActivePanel(t)||(s.a(t,n.bbOffcanvas.safeFocus.bind(n.bbOffcanvas)),"true"!==o&&a())}))}}return e.$inject=[o.e,r.c],e}();i.module(a,[o.d]).directive("bbFocus",["$injector",function(e){return e.instantiate(c)}])},cQcs:function(e,t){e.exports='<div class="reveal-modal-bg fade"\n     ng-class="{in: animate, dark: darkenBackdrop}"\n     ng-click="close($event)"\n     style="display: block"\n     analytics-id="components.services.backdrop"\n></div>'},cYWG:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("nsO7"),o=n("5MwF"),s="ultra.components.services.angular.http.ease",a="shelfLifeInEase",c=function(){function e(e,t){this.$q=e,this.$log=t,this._queue={},this._queueSeq=0,this.delay=500}return e.prototype.enqueue=function(e){var t=this;e.shelfLifeInEase=(e.params||{})[a]||this.delay,(e.params||{})[a]=void 0;var n=this.$q.defer(),r=(new Date).getTime();if(!i.some(this._queue,(function(i,o){return!!i&&(i.completedAt&&r-i.completedAt>i.shelfLifeInEase?(t._queue[o]=void 0,!1):((i.originalUrl||i.url)===(e.originalUrl||e.url)&&(s=t.isServableBy(i,e)),!!s&&(i.httpEaseResponseQ.promise.then((function(e){t.$q.when(s(e)).then((function(e){n.resolve(e)}))})),!0)));var s}))){var o="x"+this._queueSeq++;e.originalUrl=e.url,e.httpEaseResponseQ=this.$q.defer(),e.httpEaseResponseQ.promise.finally((function(){e.completedAt=(new Date).getTime()})),this._queue[o]=e,n.resolve()}return n.promise},e.prototype.getHttpInterceptor=function(){var e=this,t=function(t){return function(n){var r=n.config||n;return e.isDebouncable(r)?t(r,n):e.$q.when(n)}};return{request:t((function(t){return t.cache?t:e.enqueue(t).then((function(e){return void 0===e?t:i.extend(t,{method:"JSONP",cache:{get:function(){return e}}})}))})),responseError:function(t){var n=t.config;return n.httpEaseResponseQ&&n.httpEaseResponseQ.resolve([t.status,JSON.parse(JSON.stringify(t.data)),{}]),e.$q.reject(t)},response:t((function(t,n){return t.httpEaseResponseQ&&t.httpEaseResponseQ.resolve([n.status,void 0===n.data?void 0:JSON.parse(JSON.stringify(n.data)),{}]),e.$q.when(n)}))}},e.prototype.isDebouncable=function(e){return o.a.features.httpEase&&"GET"===e.method&&new RegExp("^(http.+)?(/learn/api/.*)$").test(e.url)},e.prototype.isServableBy=function(e,t){if(!(e.method===t.method))return null;var n,r,o=(n=function(e){var t=[];return i(e).keys().sortBy().value().forEach((function(n){"expand"!==n&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))})),t.join("&")})(e.params)===n(t.params),s=(r={},((e.params||{}).expand||"").split(",").forEach((function(e){""!==e&&(r[e]=e)})),((t.params||{}).expand||"").split(",").every((function(e){return""===e||Object.prototype.hasOwnProperty.call(r,e)})));if(o&&s)return this.$log.debug("Eased "+t.url,e,t),function(e){return e};this.$log.warn('Concurrent Requests Captured - "'+t.method+" "+t.url+'" (with different parameters). Please consider to merge them for performance')},e.$inject=["$q","$log"],e}();e=r.module(s,["ng"]);o.a.features.learnApiCaching||e.config(["$httpProvider",function(e){e.interceptors.push(["$injector",function(e){return e.instantiate(c).getHttpInterceptor()}])}])},cacA:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("Qbdf"),o=n("X455"),s=n("0JpG"),a=n("TnpK"),c="ultra.base.messages.routes";r.module(c,[i.b,o.a,a.b]).config([a.c,i.c,o.b,function(e,t,r){var a;e.peekState("create-message",{url:"/create?courseId&{allowReplies:bool}",resolve:(a={},a[i.d]=t.resolve,a[o.c]=r.resolve,a),require:function(){return Promise.all([n.e(0),n.e(8),n.e(33),n.e(48)]).then(n.bind(null,"BrlV"))},pageTitle:"components.directives.message.newMessage"}).peekState("edit-message",{url:"/edit/:conversationId?courseId&offset&count",require:function(){return Promise.all([n.e(0),n.e(8),n.e(33),n.e(48)]).then(n.bind(null,"BrlV"))},pageTitle:"components.directives.message.message"}).peekState("message",{url:"/message?courseId&recipientIds&conversationPerRecipient",onExit:["$rootScope","$stateParams",function(e,t){var n,r;n=e,r=t.courseId,n.$broadcast("bb-message-refresh",r)}],resolve:{translations:[s.serviceName,function(e){return e.loadBundle("features/base/messages/base-messages")}]},require:function(){return Promise.all([n.e(0),n.e(8),n.e(33),n.e(48)]).then(n.bind(null,"BrlV"))},pageTitle:"base.messages.newMessage"})}])},cwoR:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.system-content-market.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("system-content-market",{url:"/systemcontentmarket",require:function(){return Promise.all([n.e(84),n.e(619)]).then(n.bind(null,"tcBX"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/system-content-market/system-content-market"),t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])}]},panelClass:"full",pageTitle:"base.systemContentMarket.title",params:{mode:null}})}])},d2bc:function(e,t,n){"use strict";var r;!function(e){e.ModifyGradebook="course.gradebook.MODIFY",e.ModifyItemDueDate="course.gradebook-item.duedate.MODIFY",e.ViewAttempts="course.gradebook.attempts.VIEW",e.ViewGradebookMetaData="course.gradebook-metadata.VIEW",e.ViewGrades="course.gradebook-grades.VIEW",e.ExportGradebookData="course.gradebook-data.export.EXECUTE"}(r||(r={})),t.a=r},d7QB:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return s})),n.d(t,"serviceName",(function(){return a})),n.d(t,"IntegrationEventEmitterService",(function(){return c})),n.d(t,"Service",(function(){return l}));var r=n("D57K"),i=n("wHJ2"),o=n("N7x3"),s="ultra.components.services.event-emitter",a="integration-event-emitter",c=function(){function e(){var e=this;this.emitIntegrationEvent=function(t){t.originalEvent||(t.originalEvent=t.originalEvent||{}),t.originalEvent.manualFireFlag||(e._triggerForceClick(t.target),t.originalEvent.manualFireFlag=!0)},this.addIntegrationEventClickListener=function(t){return t.on("click",e.emitIntegrationEventOnClickHandler),function(){t.off("click",t.selector,e.emitIntegrationEventOnClickHandler)}},this.emitIntegrationEventOnClickHandler=function(t){return e.emitIntegrationEvent(t)}}return e.prototype._triggerForceClick=function(e){i.element(e).trigger(o.a.integrationForceClick)},e}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(c);i.module(s,[]).service(a,c)},d8yC:function(e,t,n){"use strict";function r(e){var t=[],n=0;e.forEach((function(e,r){n+=Math.floor(e),t.push({integer:Math.floor(e),remainder:e-Math.floor(e),index:r})}));var r=100-n;if(r>0){t.sort((function(e,t){return t.remainder-e.remainder}));for(var i=0;r>0;)t[i].integer>0||t[i].remainder>0?(t[i].integer+=1,i++,r-=1):i++,i===t.length&&(i=0);t.sort((function(e,t){return e.index-t.index}))}return t.map((function(e){return e.integer}))}function i(e,t){var n=e.toString(),r=n.indexOf(".");if(r>0&&n.length-r-1>t){var i=n.slice(0,r+t+1);return parseFloat(i)}return e}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},dtd2:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Outline=new t("outline"),t.Inline=new t("inline"),t}(n.n(i).a);t.a=o},e6ZA:function(e,t,n){"use strict";n.r(t);n("BfLg"),n("Ddvy"),n("OkIp"),n("dY8P"),n("r4fA"),n("juDU"),n("9RbK"),n("1dyP"),n("RB+a"),n("nsGK"),n("LNcM"),n("T4UF"),n("FNJT"),n("zhNR"),n("abLi"),n("1wt3"),n("rEGj"),n("7sec"),n("qY1S"),n("lGTS"),n("Jsos"),n("bZMm");var r=new Map,i=function(){function e(e){this.name=e,this.id="$BroadcastChannel$"+e+"$",r.has(this.id)||r.set(this.id,new Set),r.get(this.id).add(this),this.onStorage=this._onStorage.bind(this),window.addEventListener("storage",this.onStorage),this.messageChannel=new MessageChannel}return e.prototype.close=function(){window.removeEventListener("storage",this.onStorage);var e=r.get(this.id);e.delete(this),e.size||r.delete(this.id)},e.prototype._onStorage=function(e){var t=e.key,n=e.newValue;if(e.storageArea===window.localStorage&&null!==n&&t.substring(0,this.id.length)===this.id)try{var r=JSON.parse(n);this.dispatchEvent(new MessageEvent("message",{data:r}))}catch(e){this.dispatchEvent(new ErrorEvent("messageerror",{error:e,message:"Failed to deserialize incoming message."}))}},e.prototype.postMessage=function(e){var t=this;e=JSON.stringify(e);var n=""+this.id+Date.now()+"$"+Math.random();window.localStorage.setItem(n,e),setTimeout((function(){return window.localStorage.removeItem(n)}),500),r.get(this.id).forEach((function(n){n!==t&&n.dispatchEvent(new MessageEvent("message",{data:JSON.parse(e)}))}))},Object.defineProperty(e.prototype,"onmessage",{get:function(){return this.messageChannel.port1.onmessage},set:function(e){this.messageChannel.port1.onmessage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onmessageerror",{get:function(){return this.messageChannel.port1.onmessageerror},set:function(e){return this.messageChannel.port1.onmessageerror=e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.messageChannel.port1.addEventListener.apply(this.messageChannel.port1,e)},e.prototype.removeEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.messageChannel.port1.removeEventListener.apply(this.messageChannel.port1,e)},e.prototype.dispatchEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.messageChannel.port1.dispatchEvent.apply(this.messageChannel.port1,e)},e}();"BroadcastChannel"in window||(window.BroadcastChannel=i);var o=n("5iHu"),s=n("wHJ2"),a=n("ssIi"),c=n("V8Kl"),l=n("In+A"),u=n("lEL+"),d="ultra.components.directives.animatedGif",p=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="E",this.link=function(e,t,r){var i=s.element('<img role="presentation" alt="" style="width:0; height:0">');i.attr("src",t.attr("src")),t.append(i),n.timeout((function(){t.attr("alt")&&i.attr("alt",t.attr("alt"))}),e,0,!1);var o=function(){i.off("load",o),i.attr("src",""),i.addClass("animated-gif"),n.timeout((function(){i.removeAttr("style"),i.attr("src",t.attr("src"))}),e,250,!1)};i.on("load",o)}}return e.$inject=["$injector",u.b],e}();s.module(d,[u.a]).directive("bbAnimatedGif",["$injector",function(e){return e.instantiate(p)}]);var m=n("jciN"),f=(n("4MCF"),n("p95z"),n("5MwF")),h=n("Qbdf"),g=n("YzQO"),v=n("pjml"),b=n("w9mJ"),y=n("myse"),S="ultra.bb.angulartics",C=function(e){},w=function(e,t){};s.module(S,["angulartics","angulartics.scroll",v.R,b.a,h.b]).config(["$analyticsProvider",function(e){e.registerPageTrack((function(e){C(e)})),e.registerEventTrack((function(e,t){w(e,t)})),o.fn.extend({waypoint:function(){return this.each((function(){o(this).triggerHandler("scrollby")}))}})}]).run(["$timeout",v.b.serviceName,b.b,h.e,function(e,t,n,r){var i=n.getQueue("telemetry"),a=1e3;function c(n){i.enqueue((function(){return e((function(){return t.$create(n)}),a,!1)}))}function l(){return r.course?{id:r.course.id,uuid:r.course.uuid,batchUid:r.course.batchUid,ultraStatus:r.course.ultraStatus}:null}function u(e){if(e){if("{"===e[0])try{return JSON.parse(e)}catch(e){}return{value:e}}}Object(y.subscribeToFramework)("UltraTelemetry",(function(e,t){e===y.AnalyticsEventTypes.CLICK_EVENT&&c({action:"click",analyticsId:t.analyticsId,url:document.URL,applicationId:f.a.telemetryAppId,course:l()})})),C=function(e){c({action:"pageview",analyticsId:e,url:document.URL,applicationId:f.a.telemetryAppId,course:l(),screenDimension:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}})},w=function(e,t){!t.id||"click"!==t.eventType&&"scrollby"!==t.eventType||c({action:t.eventType,analyticsId:t.id,url:document.URL,context:u(t.context),applicationId:f.a.telemetryAppId,course:l()})},o(document).on("click",(function(e){var t=s.element(e.target);if(!Object(g.d)(t)){var n=Object(g.b)(t)||Object(g.c)(t.parent());if(!n)return;var r=u(Object(g.a)(t));c({action:"click",analyticsId:n,url:document.URL,context:r,applicationId:f.a.telemetryAppId,course:l()})}}))}]);var k=n("/KQw"),T=n("lmMM"),I=n("0JpG"),$="ultra.components.directives.dir",E=function(){function e(e){var t=this;this.bbLocalize=e,this.restrict="A",this.link=function(e,n,r){e.$watch("locale",(function(){r.attr=r.attr||"dir",r.rtl=r.rtl||"rtl",r.ltr=r.ltr||"ltr",t.bbLocalize.isRTL(e)?n.attr(r.attr,r.rtl):n.attr(r.attr,r.ltr)}))}}return e.$inject=[I.serviceName],e}();s.module($,[]).directive("bbDir",["$injector",function(e){return e.instantiate(E)}]);var P=n("Xq/A"),A=n("07uq"),x=n("Us01"),D=n("t3AZ"),O=n("J0Qq"),_=n("D57K"),M="ultra.directives.bbTime",N=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var o,s=function(n){var o=t.bbLocalize.getFormatEnum(I.ILocaleTimeFormat,i.format)||I.ILocaleTimeFormat.Short;if("true"===i.epoch){var s=new Date(0);s.setUTCSeconds(n),n=s}var a=function(e){"bb-time"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)};null==n?a(""):t.bbLocalize.formatTime(n,o,e).then(a)};"true"===i.autoUpdate?i.$observe("bbTime",(function(){o=new Date(t.$parse(i.bbTime)(e)),s(o)})):(o=t.$parse(n)(e)||new Date(t.$parse(i.bbTime)(e)),s(o))}},e.$inject=["$parse",I.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(N);s.module(M,[I.moduleName]).directive("bbTime",["$injector",function(e){return e.instantiate(N)}]);var R=n("UioO"),L="ultra.directives.bbNumber",j=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var o=t.$parse(n)(e);t.bbLocalize.formatNumber(o,e).then((function(e){"bb-number"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)}))}},e.$inject=["$parse",I.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(j);s.module(L,[I.moduleName]).directive("bbNumber",["$injector",function(e){return e.instantiate(j)}]);var U=n("Oyr+"),G=n("bd9L"),B=n("pIXs"),F=n("43zP"),q=n("aD4H"),H="ultra.directives.saveForm",z=function(){function e(e,t){var n=this;this.scope=e,this.$q=t,this.queuedSave=!1,e.editMode?(e.$broadcast("bb-save-button",G.a.Saved),this.autoSaveState=F.a.Saved):this.autoSaveState=F.a.NotSaved,e.$on("bb-autosave-form",(function(t,r,i){switch(e.$broadcast("bb-save-button",r,i),r){case G.a.Change:n.autoSaveState=F.a.NotSaved;break;case G.a.Saving:n.autoSaveState=F.a.Saving;break;case G.a.Saved:n.autoSaveState=F.a.Saved;break;case G.a.SaveFailure:case G.a.ValidationFailure:}}))}return e.prototype.validate=function(){return this.scope.validate()&&this.scope.baseForm&&this.scope.baseForm.$valid},e.prototype.save=function(){var e=this;if(this.validate()){if(this.savePromise)this.queuedSave||(this.queuedSave=!0,this.savePromise=this.savePromise.finally((function(){return e.savePromise=null,e.queuedSave=!1,e.save()})));else{this.autoSaveState=F.a.Saving;var t=this.scope.save();this.savePromise=t.then((function(t){return e.autoSaveState=F.a.Saved,t}))}return this.savePromise}},e.prototype.saveClicked=function(){var e=this;if(this.autoSaveState===F.a.NotSaved)return this.save().then((function(){e.scope.$emit("autosave-button-click",{target:"save"}),e.scope.showAlertMessage&&e.scope.showAlertMessage()}));this.scope.$emit("autosave-button-click",{target:"save"})},e.prototype.cancelClicked=function(){var e=this;if(this.scope.cancel){var t=this.scope.cancel();t?t.then((function(){e.scope.$emit("autosave-button-click",{target:"cancel"})})):this.scope.$emit("autosave-button-click",{target:"cancel"})}},e.prototype.deleteClicked=function(){var e=this;if(this.scope.delete){var t=this.scope.delete();t?t.then((function(){e.scope.$emit("autosave-button-click",{target:"delete"})})):this.scope.$emit("autosave-button-click",{target:"delete"})}},e.prototype.mouseDown=function(){this.scope.$emit("bb-autosave-interrupt-timer"),this.scope.$emit("autosave-button-click",{target:"mouseDown"})},e}(),V=function(){function e(e){var t=this;this.$q=e,this.transclude=!0,this.restrict="E",this.scope={save:"&",cancel:"&?",validate:"&",delete:"&?",canDelete:"=",deleteConfirmationResourceType:"@?",choices:"=?",editMode:"=",hideFooter:"=",baseForm:"=?",delayAutosave:"&?",displayDeleteAfterSaving:"&?",debounceSaveDestination:"&?",showAlertMessage:"&?",analyticsIdTagPrefix:"@"},this.link=function(e,n){e.saveForm=new z(e,t.$q)},this.template=q}return e.$inject=["$q"],e}();s.module(H,[G.b,B.a]).directive("bbSaveForm",["$injector",function(e){return e.instantiate(V)}]);var K=n("gZo5"),J="ultra.services.security",W="xsrf",Q="X-Blackboard-XSRF",Y="xsrf-token-changed",Z=function(){function e(e,t){var n=this;this.$rootScope=e,this.crossWindowMessaging=t,this.xsrfCallbacks=new Set,e.$on(Y,(function(e,t){return n.updateToken(t)})),e.$on("$destroy",(function(){n.xsrfCallbacks.clear()}))}return e.prototype.registerXsrfCallback=function(e){this.xsrfCallbacks.add(e),this.token&&this.invokeXsrfCallback(e)},e.prototype.unregisterXsrfCallback=function(e){return this.xsrfCallbacks.delete(e)},e.prototype.getToken=function(){return this.token},e.prototype.updateToken=function(e){var t=this;return this.token===e?this.token:(this.token=e,this.xsrfCallbacks.forEach((function(e){return t.invokeXsrfCallback(e)})),this.crossWindowMessaging.postMessage(Y,this.token),this.token)},e.prototype.invokeXsrfCallback=function(e){try{e(this.token)}catch(e){}},e.$inject=["$rootScope",K.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(Z);s.module(J,[K.a]).service(W,Z);var X=n("Fvsw"),ee=n("fYJU"),te=n("t6zR"),ne=n("QaOk"),re=n("Y88D"),ie=n("FR7u"),oe=n("+g6d"),se=n("RDfZ"),ae=n("V17J"),ce=n("tcaZ"),le=n("V6ed"),ue=n("P2dS"),de=n("g66W"),pe=n("TnpK"),me=n("w9Zy"),fe=n("SBFF"),he="ultra.components.directives.bbGuidance",ge=/[_-]/g;Object(l.registerComponentType)({name:l.BB_GUIDANCE_FTUE_TYPE,priority:l.BB_GUIDANCE_PRIORITY_NUMBER});var ve=function(){function e(e,t,n,r){var i=this;this.ultraState=e,this.offCanvas=t,this.timeout=n,this.$document=r,this.require="^bbFirstTimeContainer",this.replace=!0,this.restrict="E",this.scope={componentKey:"@",pageContainerSelector:"@?",alwaysShow:"@",displayPriority:"&?",broadcastGuidanceHideEvent:"@?",onGuidanceEnabledEvent:"@?",disableHideInPanelState:"@?",forceShowInPanelState:"@?"},this.transclude={title:"?bbGuidanceTitle"},this.template=fe,this.link=function(e,t,n,r){if(!e.componentKey)throw new Error("'component-key' attribute required in bb-guidance");e.componentKey=de.a(e.componentKey,ge);var s=t.closest(".bb-offcanvas-panel").attr("data-base-state-name"),a=!!e.onGuidanceEnabledEvent,c=new l.DefaultGuidanceComponent(t.get(0),l.BB_GUIDANCE_FTUE_TYPE,e.componentKey,r.manager,r.firstTimeHelper,l.guidanceConnector,e.displayPriority&&e.displayPriority(),a);c.setShouldShow((function(){var n=o(t).parent().is(":visible"),i=!!e.pageContainerSelector&&o(e.pageContainerSelector).is(":visible");return n||i?r.firstTimeHelper.shouldShow(c.componentKey,s,e.$eval(e.alwaysShow)):Promise.resolve(!1)})),e.isShown=c.shown,c.onShownChanged((function(t){e.$applyAsync((function(){e.isShown=t}))})),c.registerToManager();var u,d=function(t){o(t.target).parents().addBack();var n=!!e.disableHideInPanelState&&i.ultraState.includes(e.disableHideInPanelState);!e.isShown||i.ultraState.transition||n||(c.hide(),i.$document[0].removeEventListener("click",d,!0),e.broadcastGuidanceHideEvent&&e.$root.$broadcast(e.broadcastGuidanceHideEvent))},p=function(){c.showComponent(),i.$document[0].addEventListener("click",d,!0)};u=null,e.onGuidanceEnabledEvent?(u=e.$root.$on(e.onGuidanceEnabledEvent,(function(){p()})),u=e.$root.$on("show-guidance-component",(function(){i.timeout((function(){p()}),e,600)})),r.firstTimeHelper.shouldShow("predict.wizard").then((function(t){var n=!!e.forceShowInPanelState&&i.ultraState.includes(e.forceShowInPanelState);t&&!n||p()}))):i.$document[0].addEventListener("click",d,!0),e.$on("$destroy",(function(){c.deregisterFromManager(),i.$document[0].removeEventListener("click",d,!0),u&&u()}))},this.ultraState=e}return e.$inject=[pe.d,me.e,u.b,"$document"],e}();s.module(he,[pe.b,ce.a]).directive("bbGuidance",["$injector",function(e){return e.instantiate(ve)}]);var be="ultra.components.directives.guidanceTarget",ye=function(){function e(e,t,n){this.element=e,this.componentKey=t,this.containerController=n,this.manager=n.manager}return Object.defineProperty(e.prototype,"multiTargetSupport",{get:function(){return this.containerController.firstTimeHelper.hasMultiTargetSupport(this.componentKey)},enumerable:!0,configurable:!0}),e.prototype.registerToManager=function(){this.manager&&(this.hideImpl(),this.manager.registerTarget(this))},e.prototype.deregisterToManager=function(){this.manager&&this.manager.deregisterTarget(this)},e.prototype.onShown=function(){this.showImpl()},e.prototype.onHidden=function(){this.hideImpl()},e.prototype.showImpl=function(){this.element.addClass("is-guided")},e.prototype.hideImpl=function(){this.element.removeClass("is-guided")},e}(),Se=function(){this.require="^bbFirstTimeContainer",this.restrict="A",this.link=function(e,t,n,r){if("false"!==n.showGuidanceTarget){var i=n.componentKey,o=n.componentKeyList,s=[],a=function(e,n){var r=new ye(t,e,n);r.registerToManager(),s.push(r)};if(!i&&!o)throw new Error("'component-key' or 'component-key-list' attribute required in bb-guidance-target");if(o)var c=e.$watch(o,(function(e){e&&e.length>0&&(e.forEach((function(e){e=de.a(e,ge),a(e,r)})),c())}));if(i&&(i=de.a(i,ge),a(i,r)),"true"!==n.keepGuidanceWhenFocusout){var l=function(){e.$root.$broadcast("hide-ftue-component",i)};t.on("focusout",l),t.on("keypress",l),e.$on("$destroy",(function(){t.off("focusout",l),t.off("keypress",l)}))}e.$on("$destroy",(function(){s.forEach((function(e){return e.deregisterToManager()}))}))}}};s.module(be,[ce.a]).directive("bbGuidanceTarget",["$injector",function(e){return e.instantiate(Se)}]);var Ce=n("XseH"),we=n("iVgd"),ke=n("/qpZ"),Te="ultra.components.directives.keyHideFtue",Ie=function(){this.restrict="A",this.link=function(e,t,n){var r=n.bbKeyHideFtue;if(!r)throw new Error("'bb-key-hide-ftue' attribute should have value");var i=function(){e.$root.$broadcast("hide-ftue-component",r)};t.on("focusout",i),t.on("keypress",i),e.$on("$destroy",(function(){t.off("focusout",i),t.off("keypress",i)}))}};s.module(Te,[]).directive("bbKeyHideFtue",["$injector",function(e){return e.instantiate(Ie)}]);var $e=n("cMqb"),Ee=n("A4xO"),Pe=n("+4Px"),Ae="ultra.directives.accessibility.focusPrev";var xe=function(){this.restrict="A",this.link=function(e,t,n){var r="true"===n.bbFocusPrevOneTimeOnly;!function(e,t,n){e.on("keydown.focusPrev",(function(r){if(r.keyCode===Pe.u&&r.shiftKey&&t){var i=s.element(t);i.length>=1&&-1!==i.prop("tabindex")&&(i.first().focus(),r.preventDefault(),n&&e.off("keydown.focusPrev"))}}))}(t,n.bbFocusPrev,r)}};s.module(Ae,[]).directive("bbFocusPrev",["$injector",function(e){return e.instantiate(xe)}]);var De=n("i8dz"),Oe=n("K3JI"),_e=n("GbAM"),Me=n("vhkR"),Ne=n("OvxF"),Re=n("TB6y"),Le=(n("zJ62"),n("ZMjE")),je="ultra.directives.contentImportStatusBar",Ue=function(){function e(e,t,n,r,i,o,a,c,l){var u=this;this.$scope=e,this.$rootScope=t,this.element=n,this.$q=r,this.CourseModel=i,this.ultraState=o,this.context=a,this.bbLocalize=c,this.contextCourse=l,this.identifyCourse().then((function(t){u.course=t,u.baseState=o.current.name,n.detach().appendTo(s.element(".side-panel-content")),e.$on("$destroy",(function(){s.element(".side-panel-content > "+n.get(0).tagName).length>0&&s.element(".side-panel-content > "+n.get(0).tagName).remove()})),e.$watch("taskId",(function(){e.taskId&&u.getItemsCount().then((function(e){u.notCarriedForwardItemsCount=e}))}))}))}return e.prototype.identifyCourse=function(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()},e.prototype.confirm=function(){var e=this,t="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(t,"false").then((function(){e.$scope.display=!1}))},e.prototype.undo=function(){var e=this,t="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(t,"true").then((function(){e.$scope.display=!1}))},e.prototype.goToImportReport=function(){this.ultraState.goPeekState("content-manage.import-report",{id:this.$scope.taskId})},e.prototype.hideStatusBar=function(){return-1!==this.ultraState.current.name.indexOf(this.baseState)&&this.ultraState.current.name.length>this.baseState.length},e.prototype.getItemsCount=function(){return this.course.getImportCopyTaskStatus(this.$scope.taskId).then((function(e){var t=e.$response.data.conversionReportTORest;return t?t.filter((function(e){return!v.n.ConversionReportStatus.Success.isEqualTo(e.ultraConversionStatus)})).length:0}))},e.$inject=["scope","$rootScope","element","$q",v.o.serviceName,pe.d,X.b,I.serviceName,h.e],e}(),Ge=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=Le,this.scope={display:"=",taskId:"=",courseId:"@?"},this.link=function(e,n){e.contentImportStatusBarController=t.$injector.instantiate(Ue,{scope:e,element:n})}}return e.$inject=["$injector"],e}();s.module(je,[X.a,I.moduleName,v.R,pe.b]).directive("bbContentImportStatusBar",["$injector",function(e){return e.instantiate(Ge)}]);var Be=n("yA26"),Fe="ultra.components.directives.ultraState.peekSref",qe=function(){function e(e,t,n,r){var i=this;this.$parse=e,this.uiSrefDirective=t,this.ultraState=n,this.context=r,this.restrict=this.uiSrefDirective[0].restrict,this.scope=!0,this.require=this.uiSrefDirective[0].require,this.link=function(e,t,n,r){var o=i.$parse(n.bbPeekSref)(e)||n.bbPeekSref,s=t.closest("[data-base-state-name]").data("baseStateName")||i.context.basePage;i.ultraState.getPeekStateName(o,s).then((function(o){n.uiSref=o,i.uiSrefDirective[0].compile(t,n,void 0)(e,t,n,r)}))}}return e.$inject=["$parse","uiSrefDirective",pe.d,X.b],e}();s.module(Fe,["ui.router",X.a,pe.b]).directive("bbPeekSref",["$injector",function(e){return e.instantiate(qe)}]);var He="ultra.directives.preventClick",ze=function(){function e(e,t){var n=this;this.$parse=e,this.$rootScope=t,this.priority=101,this.restrict="A",this.compile=function(e,t){var r=n.$parse(t.bbPreventClickIf);return{pre:function(e,t){t.on("click",(function(t){function i(){if(r(e,{$event:t}))return t.stopImmediatePropagation(),t.preventDefault(),!1}n.$rootScope.$$phase?e.$evalAsync(i):e.$apply(i)}))}}}}return e.$inject=["$parse","$rootScope"],e}();s.module(He,[]).directive("bbPreventClickIf",["$injector",function(e){return e.instantiate(ze)}]);var Ve=n("yC9S"),Ke=n("bd3f"),Je="ultra.components.directives.accessibility.readInfo",We=function(){function e(e,t,n,r){var i=this;this.scope=e,this.element=t,this.attrs=n,this.timeout=r,this.message="",this.alertMessage="",Ve.b.OnRootScope(e,"read-info-directive",(function(t,n){i.message=n,r((function(){i.message=""}),e,1e3)})),Ve.b.OnRootScope(e,"read-info-directive-alert",(function(t,n,o){void 0!==o?(i.alertMessage="",r((function(){i.alertMessage=n}),e,o)):(i.alertMessage=n,r((function(){i.alertMessage=""}),e,1e3))}))}return e.$inject=["scope","element","attrs",u.b],e}(),Qe=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="A",this.link=function(e,t,r){t.append(n.$compile(Ke)(e)),e.readInfo=n.$injector.instantiate(We,{scope:e,element:t,attrs:r})}}return e.$inject=["$injector","$compile"],e}();s.module(Je,[u.a]).directive("bbReadInfo",["$injector",function(e){return e.instantiate(Qe)}]);n("P2rh");var Ye=n("7/0s"),Ze="ultra.components.directives.accessibility.skipLink",Xe=function(){this.restrict="E",this.scope={bbSkipLinkTarget:"@",bbSkipLinkFocusNext:"@?"},this.template=Ye,this.link=function(e,t,n){t.find(".skip-link").on("click",(function(){var e=t.closest(".bb-offcanvas-panel");e.length||(e=t.closest("#site-wrap"));var r=e.find(n.bbSkipLinkTarget).first();r.focus(),r.is(document.activeElement)||null!=r.attr("tabindex")||(r.attr("tabindex","-1"),r.focus())}))}};s.module(Ze,[]).directive("bbSkipLink",["$injector",function(e){return e.instantiate(Xe)}]);var et,tt,nt,rt,it=n("TAnh"),ot=n("YOs/"),st=n("Dwp2"),at=n("fGgA"),ct=n("4HBD"),lt=n("3vti"),ut=n("cFWd"),dt=n("HDxW"),pt=n("zXZW"),mt=n("nsX6"),ft=n("OcoR"),ht=n("td+C"),gt=n("5LAh"),vt=n("gSji"),bt=(n("J++8"),n("e6jQ")),yt=new(function(){function e(e,t){var n=this;this.integrationService=e,this.portalManager=t,this.sendNewPortal=function(e){n.integrationService.sendEventMessage({type:vt.e,eventType:vt.V.PortalNew,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendRemovedPortal=function(e){n.integrationService.sendEventMessage({type:vt.e,eventType:vt.V.PortalRemove,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendCallbackPortal=function(e){n.integrationService.sendMessage({type:vt.d.PortalCallback,callbackId:e.callbackId,portalId:e.portalId,event:e.event},e.owningIntegrationId)},this.sendRenderFailure=function(e){e.requestingIntegrationId?n.integrationService.sendMessage({type:vt.x,portalId:e.portalId,status:vt.N.Failure,error:e.error,errorMessage:e.errorMessage},e.requestingIntegrationId):console.warn("Unable to send error to targetless portal")},this.onPortalEvent=function(e,t){switch(e){case vt.U.NewPortal:n.sendNewPortal(t);break;case vt.U.RemovedPortal:n.sendRemovedPortal(t);break;case vt.U.CallbackPortal:n.sendCallbackPortal(t);break;case vt.U.FailedValidationPortal:n.sendRenderFailure(t)}},this.updatePortal=function(e,t){if(e){var r=e.portalId,i=e.contents;n.portalManager.updatePortal({portalId:r,contents:i,requestingIntegrationId:t.id},(function(){var e=n.portalManager.getPortalData(r).getOwningIntegrationId();if(e&&e!==t.id)return{portalId:r,error:vt.z.Authorization,errorMessage:"Portal "+r+" is already owned by "+e+" -- not allowing render from "+t.id,requestingIntegrationId:t.id}}))&&(n.portalManager.setPortalOwnership(r,t.id),n.sendRenderSuccess(t.id,r))}},this.sendRenderSuccess=function(e,t){n.integrationService.sendMessage({type:vt.x,portalId:t,status:vt.N.Success},e)}}return e.prototype.init=function(){this.integrationContainer=document.querySelector(".integration-react-container"),this.portalManager.addPortalListener(this.onPortalEvent),this.integrationService.addIntegrationMessageType(vt.y,this.updatePortal)},e.prototype.generateUniqueDomElement=function(){var e=bt.b(),t=document.createElement("div");return t.id=e,this.integrationContainer.appendChild(t),t},e.prototype.getIntegrationContainer=function(){return this.integrationContainer},e}())(ht.a,gt.e),St=n("ERkP"),Ct=n("7nmT"),wt=n("MC1S"),kt=n("wWlP"),Tt=n("caKH"),It=function(e){var t=e.integrationId,n=e.contents,r=e.portalId;return St.createElement(gt.d,{portalType:Et,initialOwningIntegrationId:t,initialContents:n,portalId:r})},$t=n("8unJ"),Et="modal",Pt=((et={})[vt.O.Small]=wt.DialogType.small,et[vt.O.Large]=wt.DialogType.large,et[vt.O.Medium]=wt.DialogType.normal,et),At=new(function(){function e(e,t,n){var r=this;this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.modalWhitelist=new Map,this.isValidModalElement=function(e){if(!vt.D.has(e.props.width))return console.warn("Invalid prop `width` of value "+e.props.width+" supplied to "+e.tag+", expected one of ["+Object.values(vt.C)+"]."),!1;if(!e.children)return console.warn("Children are needed for "+vt.m.Modal+", but no value for `children` was given."),!1;if("string"==typeof e.children)return console.warn("Incorrect children value: expected `Array` but received `string`."),!1;var t=[vt.m.ModalHeader,vt.m.ModalBody,vt.m.ModalFooter];if(e.children.length!==t.length)return console.warn("Incorrect number of children elements: expected "+t.length+", but received "+e.children.length+"."),!1;for(var n=0;n<t.length;n++){var i=e.children[n];if(i.tag!==t[n])return console.warn("Incorrect order of children: position "+n+" expected "+t[n]+", but received "+i.tag+"."),!1;if(!r.componentManager.isValidComponent(Et,t[n],i))return!1}return!0},this.onPortalModal=function(e,t){if(r.isValidRequestParameters(e,t)){var n=kt.a.length()>0,i=Tt.ModalManager.getInstance().isModalDisplaying();if(r.componentManager.overMaxComponents(Et)||i||n)return console.error("A modal is already open; not opening another one."),void r.sendModalMessage(t,null,e.modalId,vt.N.Failure,vt.n.ModalAlreadyOpenError,"A modal is already open; not opening another one.");if(r.componentManager.isValidComponent(Et,vt.m.Modal,e.contents)){r.modalId=e.modalId,r.owningIntegration=t;var o=bt.b();r.currentModal=r.integrationPortalService.generateUniqueDomElement();var s={owningIntegrationId:t.id,portalId:o,element:r.currentModal};return r.render(s,e.contents).then((function(){r.sendModalMessage(t,s.portalId,r.modalId,vt.N.Success)}))}r.sendModalMessage(t,null,e.modalId,vt.N.Failure,vt.n.FailedComponentValidationError,"Component validation failed; not rendering "+vt.m.Modal+".")}},this.isValidRequestParameters=function(e,t){return e.type&&e.type===vt.B.ModalNew?e.modalId?!!e.contents||(console.warn("Not a valid new modal request, `contents` were not provided."),r.sendModalMessage(t,null,e.modalId,vt.N.Failure,vt.n.MissingContentsError,"Not a valid new modal request, `contents` were not provided."),!1):(console.warn("Not a valid new modal request, `modalId` must be a unique non-empty value."),r.sendModalMessage(t,null,e.modalId,vt.N.Failure,vt.n.InvalidIdError,"Not a valid new modal request, `modalId` must be a unique non-empty value."),!1):(console.warn("Not a valid new modal request, `type` must be "+vt.B.ModalNew+"."),r.sendModalMessage(t,null,e.modalId,vt.N.Failure,vt.n.InvalidRequestTypeError,"Not a valid new modal request, `type` must be "+vt.B.ModalNew+"."),!1)},this.render=function(e,t){return new Promise((function(n){Ct.render(St.createElement($t.Locale,{babelfishInstance:r.bbLocalize.intl,babelfishFormatInstance:r.bbLocalize.frmt,locale:r.bbLocalize.getLocale(null)},St.createElement(It,{integrationId:e.owningIntegrationId,portalId:e.portalId,contents:t})),e.element,(function(){n()}))}))},this.onPortalModalClose=function(e,t){return r.owningIntegration&&r.owningIntegration.id!==t.id?(console.warn("The integration "+t.id+" does not own the modal of "+e.modalId+"; not closing modal"),void r.sendModalCloseResponseMessage(t,e.modalId,vt.N.Failure,vt.n.WrongOwnerError,"The integration "+t.id+" does not own the modal of "+e.modalId+"; not closing modal")):r.modalId!==e.modalId?(console.warn("No modal has an id of "+e.modalId),void r.sendModalCloseResponseMessage(t,e.modalId,vt.N.Failure,vt.n.ModalNotFoundError,"No modal has an id of "+e.modalId)):void r.closePortalModal(e.modalId,t)},this.closePortalModal=function(e,t){r.currentModal&&(Ct.unmountComponentAtNode(r.currentModal),r.sendModalCloseResponseMessage(t||r.owningIntegration,e||r.modalId,vt.N.Success))},this.sendModalMessage=function(e,t,n,i,o,s){r.integrationService.sendMessage(Object(_.__assign)(Object(_.__assign)({type:vt.B.ModalResponse,status:i,portalId:t,modalId:n},o&&{error:o}),s&&{errorMessage:s}),e)},this.sendModalCloseResponseMessage=function(e,t,n,i,o){r.integrationService.sendMessage(Object(_.__assign)(Object(_.__assign)({type:vt.B.ModalCloseResponse,status:n,modalId:t},i&&{error:i}),o&&{errorMessage:o}),e)}}return e.prototype.init=function(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(vt.B.ModalNew,this.onPortalModal),this.integrationService.addIntegrationMessageType(vt.B.ModalClose,this.onPortalModalClose),this.initializeWhitelist()},e.prototype.initializeWhitelist=function(){var e=this;this.modalWhitelist.set(vt.m.Modal,{props:{width:!0},isValid:function(t){return e.isValidModalElement(t)},render:function(t,n,r){var i=n.width,o=Object(_.__rest)(n,["width"]),s=Pt[i];return St.createElement(Tt.UltraModalDialog,Object(_.__assign)({},o,{dialogContentProps:{type:s},hidden:!1,onDismiss:function(){return e.closePortalModal()}}),r)}}),this.modalWhitelist.set(vt.m.ModalHeader,{props:{title:!1},isValid:function(e){return e.props&&e.props.title&&"string"!=typeof e.props.title&&console.warn("Invalid prop `title` value: expected `string` but received `"+typeof e.props.title+"`, defaulting to no title."),!0},render:function(t,n,r){return St.createElement(wt.DialogHeader,Object(_.__assign)({},n,{analyticsId:"integration.modal.header",showCloseButton:!0,onDismiss:function(){return e.closePortalModal()}}),r)}}),this.modalWhitelist.set(vt.m.ModalBody,{isValid:function(e){return!0},render:function(e,t,n){return St.createElement("div",{key:t.key},n)}}),this.modalWhitelist.set(vt.m.ModalFooter,{isValid:function(e){return!0},render:function(e,t,n){return St.createElement(wt.DialogFooter,Object(_.__assign)({},t),n)}}),this.componentManager.addComponentType(Et,1,this.modalWhitelist)},e}())(ht.a,yt,gt.b),xt=n("q/wk"),Dt=n("N7x3"),Ot=n("x9Ok"),_t=n("Zwiy"),Mt=(n("09tz"),function(e){var t=e.panelType,n=e.panelTitle,r=e.integrationId,i=e.showPanel,o=e.portalId,s=e.onPanelClose,a=e.stackIndex,c=e.useCustomPadding;return St.createElement(_t.BbPanel,{isOpen:i,onDismiss:function(){return s(o,r)},type:t,stackIndex:a,analyticsId:"components.directives.integration.integrationPanel",excludeContentPadding:c},St.createElement(_t.BbPanelHeader,{title:n}),St.createElement("div",{className:"integration-panel"},St.createElement("div",{className:"integration-panel-contents"},St.createElement(gt.d,{portalId:o,initialOwningIntegrationId:r,portalType:Nt,skipCustomValidation:!0}))))}),Nt="panel",Rt=function(e){switch(e){case vt.M.Full:return wt.BbPanelType.full;case vt.M.Small:return wt.BbPanelType.peek;default:return console.warn("Received unknown panel type "+e),null}},Lt=new(function(){function e(e,t,n,r){var i=this;this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=r,this.onPortalPanel=function(e,t){var n=e.panelTitle,r=e.correlationId,o=e.useCustomPadding;if(i.componentManager.overMaxComponents(Nt))return console.warn("Panel is already open; not opening another one"),void i.sendPanelMessage(t,null,vt.N.Failure,r);if(!n)return console.warn("Received a panel event without a panelTitle; not opening panel"),void i.sendPanelMessage(t,null,vt.N.Failure,r);if(null!==Rt(e.panelType)){var s=bt.b();if(!i.updatePanelAttributes(e,s))return console.warn("Received a panel event without proper attributes or with a missing callback id."),void i.sendPanelMessage(t,null,vt.N.Failure,r);var a=i.integrationPortalService.generateUniqueDomElement();return a.className="integration-panel",i.currentPanelData={element:a,panelType:e.panelType,panelTitle:e.panelTitle,owningIntegrationId:t.id,portalId:s,useCustomPadding:o||!1},i.renderPanel(i.currentPanelData,!0).then((function(){i.sendPanelMessage(t,i.currentPanelData.portalId,vt.N.Success,r)}))}i.sendPanelMessage(t,null,vt.N.Failure,r)},this.updatePanelAttributes=function(e,t){var n=e.attributes;if(!n)return!0;var r={},o=Object.keys(n).filter((function(e){return!n[e]||!n[e].callbackId}));return o.length>0?(console.warn("Panel attributes ["+o.join(",")+"] are missing callbackId parameters"),!1):(Object.keys(n).forEach((function(e){var t,i=n[e];r=Object(_.__assign)(Object(_.__assign)({},r),((t={})[e]={callbackId:i.callbackId},t))})),i.panelAttributesEvents.set(t,{portalId:t,subscribedAttributes:r}),!0)},this.renderPanel=function(e,t){var n=document.getElementsByClassName("bb-offcanvas-panel").length+1,r=Rt(e.panelType);return new Promise((function(o){Ct.render(St.createElement($t.Locale,{locale:i.bbLocalize.getLocale(null),babelfishInstance:i.bbLocalize.intl,babelfishFormatInstance:i.bbLocalize.frmt},St.createElement(Mt,{panelType:r,panelTitle:e.panelTitle,integrationId:e.owningIntegrationId,showPanel:t,portalId:e.portalId,onPanelClose:i.onPanelCloseAction,stackIndex:n,useCustomPadding:e.useCustomPadding})),e.element,(function(){o()}))}))},this.onPortalPanelClose=function(e,t){var n=t.id,r=i.portalManager.getPortalData(e.id);if(r){if(r.getOwningIntegrationId()===n)return i.renderPanel(i.currentPanelData,!1).then((function(){i.onPanelCloseAction(e.id,n)}));console.warn("The integration "+n+" does not own the portalId of "+e.id+"; not closing anything")}else console.warn("no panel has an id of "+e.id)},this.onPanelCloseAction=function(e,t){var n=i.portalManager.getPortalData(e);if(n){var r=vt.K.onClose,o=i.panelAttributesEvents.get(n.portalId),s=o&&o.subscribedAttributes[r],a=i.integrationService.findIntegration(t);if(i.portalManager.removePortal({portalId:e,owningIntegrationId:t}),i.removePanel(i.currentPanelData.element),i.currentPanelData=null,s&&a){var c={type:vt.d.PortalCallback,callbackId:o.subscribedAttributes[r].callbackId,portalId:n.portalId,event:r};i.integrationService.sendMessage(c,a)}}},this.sendPanelMessage=function(e,t,n,r){i.integrationService.sendMessage({type:vt.L.PanelResponse,status:n,portalId:t,correlationId:r},e)},this.panelAttributesEvents=new Map}return e.prototype.init=function(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(vt.L.PanelNew,this.onPortalPanel),this.integrationService.addIntegrationMessageType(vt.L.PanelClose,this.onPortalPanelClose),this.componentManager.addComponentType(Nt,1)},e.prototype.removePanel=function(e){if(e){setTimeout((function(){Ct.unmountComponentAtNode(e),e.remove()}),500)}},e}())(ht.a,yt,gt.b,gt.e),jt=function(e){var t=e.component,n=e.contents,r=St.useState(t.shown),i=r[0],o=r[1];return St.useEffect((function(){return o(t.shown),t.addListener(o),function(){t.removeListener(o)}}),[t]),i&&St.createElement(gt.d,{portalType:Yt,initialOwningIntegrationId:t.integrationId,initialContents:n,portalId:t.portalId})},Ut=n("uFyr"),Gt=n("jGf1"),Bt=n("xkx/"),Ft=((tt={})[vt.O.Small]=250,tt[vt.O.Medium]=300,tt[vt.O.Large]=500,tt),qt=((nt={})[vt.s.Light]=Bt.DefaultPalette.white,nt[vt.s.Dark]=Bt.DefaultPalette.neutralDark,nt),Ht=((rt={})[vt.F.BottomLeft]=Gt.ScreenPosition.bottomLeft,rt[vt.F.BottomRight]=Gt.ScreenPosition.bottomRight,rt[vt.F.TopLeft]=Gt.ScreenPosition.topLeft,rt[vt.F.TopRight]=Gt.ScreenPosition.topRight,rt),zt=function(e,t){var n=Ft[vt.O.Medium];return!e.isSmallBreakpoint()||Ft[t]<=n?Ft[t]:(console.warn("Requested prop `size` is greater than current breakpoint size: reducing `size` to medium breakpoint."),n)},Vt=function(e){if(e.isSmallBreakpoint())return wt.DirectionalHint.bottomCenter},Kt=function(e,t){if(e.isSmallBreakpoint())return Object(Gt.getScreenPositionPoint)(Gt.ScreenPosition.bottomCenter);if(t.selector.type===vt.I.Region){var n=Ht[t.selector.value];return Object(Gt.getScreenPositionPoint)(n)}return t.targetElementFinder()},Jt=function(e){return e.isLargeBreakpoint()?vt.q.Large:e.isMediumBreakpoint()?vt.q.Medium:vt.q.Small},Wt=Object(Ut.windowResizingResponsiveComponentWrapper)((function(e){var t=e.children,n=e.hideBeak,r=e.key,i=e.notificationData,o=e.onDismiss,s=e.size,a=e.theme,c=e.UltraWindowSize,l=Kt(c,i),u=Jt(c),d=zt(c,s),p=qt[a],m=Vt(c);return St.createElement(wt.Callout,{key:r,target:l,onDismiss:o,calloutWidth:d,setInitialFocus:!0,isBeakVisible:!n,directionalHint:m,className:"integration-notification-"+a,backgroundColor:p,minPagePadding:u,allowDismissOnFocusTarget:!0},St.createElement("div",{tabIndex:0},t))})),Qt=(n("Thlp"),function(){function e(e,t){var n=this;this.notificationData=e,this.guidanceManager=t,this.componentType="IntegrationNotification",this.priority=2*l.DEFAULT_PRIORITY,this.isInitialHide=!1,this._shown=!1,this.listeners=[],this.shouldShow=function(){return new Promise((function(e,t){e(!!n.notificationData.targetElementFinder())}))},this.addListener=function(e){n.listeners.push(e)},this.removeListener=function(e){var t=n.listeners.indexOf(e);-1!==t&&n.listeners.splice(t,1)},this.onShown=function(){n.setShown(!0)},this.onHidden=function(e){n.setShown(!1)},this.dispose=function(){n.listeners=[],n.guidanceManager.deregisterComponent(n)},this.componentKey="integration.notification."+e.portalId,this.notificationId=e.notificationId,this.portalId=e.portalId,this.integrationId=e.owningIntegrationId,this.data=e,this.guidanceManager.registerComponent(this),this.guidanceManager.startQueue()}return Object.defineProperty(e.prototype,"shown",{get:function(){return this._shown},enumerable:!0,configurable:!0}),e.prototype.setShown=function(e){this.shown!==e&&(this._shown=e,this.listeners.forEach((function(t){return t(e)})))},e}()),Yt="notification",Zt=new(function(){function e(e,t,n,r){var i=this;this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.ftueManager=r,this.notificationWhitelist=new Map,this.isValidNotificationElement=function(e){return vt.P.has(e.props.size)?(e.props.theme&&!vt.t.has(e.props.theme)&&console.warn("Invalid prop `theme` of value "+e.props.theme+" supplied to "+e.tag+", expected one of ["+Object.values(vt.s)+"];\n        defaulting to "+vt.s.Light+" theme."),e.props.hideBeak&&"boolean"!=typeof e.props.hideBeak&&console.warn("Invalid prop `hideBeak` value: expected a `boolean` but received `"+typeof e.props.hideBeak+"`; defaulting to a visible beak."),!0):(console.warn("Invalid prop `size` of value "+e.props.size+" supplied to "+e.tag+", expected one of ["+Object.values(vt.O)+"]."),!1)},this.findElementByAnalyticsId=function(e){if(!e)return null;var t=document.querySelector('[data-analytics-id="'+e+'"]');return t||document.querySelector('[analytics-id="'+e+'"]')},this.createFTUEComponent=function(e,t){var n=new Qt(t,i.ftueManager),r={component:n,element:t.element};return n.addListener((function(n){if(n){if(!t.targetElementFinder())return i.closeNotification(t.portalId),void i.sendNotificationStatus(e,t.portalId,t.notificationId,vt.r.Failed);i.currentNotification=r,i.sendNotificationStatus(e,t.portalId,t.notificationId,vt.r.Visible)}else i.sendNotificationStatus(e,t.portalId,t.notificationId,vt.r.Removed)})),i.notificationMap.set(t.portalId,r),n},this.onPortalNotification=function(e,t){if(!e.selector||!vt.J.has(e.selector.type))return console.warn("Invalid selector type provided "+(e.selector&&e.selector.type)),void i.sendNotificationResponseMessage(t,null,vt.H.Failure,vt.p.InvalidSelectorError,"Invalid selector type provided "+(e.selector&&e.selector.type));if(e.selector.type===vt.I.Region&&!vt.G.has(e.selector.value))return console.warn("Invalid selector value provided "+(e.selector&&e.selector.value)),void i.sendNotificationResponseMessage(t,null,vt.H.Failure,vt.p.InvalidSelectorError,"Invalid selector value provided "+(e.selector&&e.selector.value));if(i.componentManager.isValidComponent(Yt,vt.o.Notification,e.contents)){var n=i.getTargetElementFinder(e.selector,t);if(n){var r={element:i.integrationPortalService.generateUniqueDomElement(),portalId:bt.b(),notificationId:bt.b(),owningIntegrationId:t.id,targetElementFinder:n,selector:e.selector},o=i.createFTUEComponent(t,r);return i.render(o,r.element,e.contents).then((function(){i.sendNotificationResponseMessage(t,r.notificationId,vt.H.Success),i.sendNotificationStatus(t,r.portalId,r.notificationId,vt.r.Queued)}))}}else i.sendNotificationResponseMessage(t,null,vt.H.Failure,vt.p.FailedComponentValidationError,"Component validation failed; not rendering "+vt.o.Notification+".")},this.removeNotificationFromQueue=function(e){e.dispose(),i.notificationMap.delete(e.portalId)},this.onPortalNotificationClose=function(e,t){var n=i.findNotification(e.notificationId);return n?n.integrationId!==t.id?(console.warn(t.id+" does not have ownership of the current notification"),void i.sendCloseNotificationResponse(t,e.notificationId,vt.H.Failure,vt.p.NoOwnershipError,t.id+" does not have ownership of the current notification--not closing notification")):(i.currentNotification&&i.currentNotification.component.notificationId===e.notificationId?i.closeNotification():(i.removeNotificationFromQueue(n),i.sendNotificationStatus(t,n.portalId,n.notificationId,vt.r.Removed)),void i.sendCloseNotificationResponse(t,e.notificationId,vt.H.Success)):(console.warn("Notification not found"),void i.sendCloseNotificationResponse(t,e.notificationId,vt.H.Failure,vt.p.NotificationNotFoundError,"Notification not found"))},this.render=function(e,t,n){return new Promise((function(r){Ct.render(St.createElement($t.Locale,{babelfishInstance:i.bbLocalize.intl,babelfishFormatInstance:i.bbLocalize.frmt,locale:i.bbLocalize.getLocale(null)},St.createElement(jt,{component:e,contents:n})),t,(function(){r()}))}))},this.sendCloseNotificationResponse=function(e,t,n,r,o){i.integrationService.sendMessage(Object(_.__assign)(Object(_.__assign)({type:vt.E.NotificationCloseResponse,notificationId:t,status:n},r&&{error:r}),o&&{errorMessage:o}),e)},this.sendNotificationResponseMessage=function(e,t,n,r,o){i.integrationService.sendMessage(Object(_.__assign)(Object(_.__assign)({type:vt.E.NotificationResponse,status:n,notificationId:t},r&&{error:r}),o&&{errorMessage:o}),e)},this.sendNotificationStatus=function(e,t,n,r){i.integrationService.sendMessage({type:vt.E.NotificationStatus,status:r,notificationId:n,portalId:t},e)},this.closeNotification=function(e){if(i.currentNotification||e){var t=i.currentNotification;e&&(t=i.notificationMap.get(e)),t&&(Ct.unmountComponentAtNode(t.element),setTimeout((function(){i.removeNotificationFromQueue(t.component),i.currentNotification=void 0}),500))}},this.notificationMap=new Map}return e.prototype.init=function(e){var t=this;this.bbLocalize=e,this.integrationService.addIntegrationMessageType(vt.E.NotificationNew,this.onPortalNotification),this.integrationService.addIntegrationMessageType(vt.E.NotificationClose,this.onPortalNotificationClose),this.notificationWhitelist.set(vt.o.Notification,{props:{size:!0,theme:!1,hideBeak:!1,directionalHint:!1},isValid:function(e){return t.isValidNotificationElement(e)},render:function(e,n,r){var i=n.key,o=n.size,s=n.theme,a=void 0===s?vt.s.Light:s,c=n.hideBeak,l=t.notificationMap.get(e);return St.createElement(Wt,{size:o,hideBeak:c,key:i,notificationData:l.component.data,onDismiss:function(){t.closeNotification(e)},theme:a},r)}}),this.componentManager.addComponentType(Yt,0,this.notificationWhitelist)},e.prototype.getTargetElementFinder=function(e,t){var n=this;if(e.type===vt.I.Region)return function(){return n.integrationPortalService.getIntegrationContainer()};var r=function(){return n.findElementByAnalyticsId(e.value)};if(r())return r;console.warn("Invalid notification target"),this.sendNotificationResponseMessage(t,null,vt.H.Failure,vt.p.InvalidTargetError,"Invalid notification target")},e.prototype.findNotification=function(e){var t=Array.from(this.notificationMap.values()).find((function(t){return t.component.notificationId===e}));if(t)return t.component},e}())(ht.a,yt,gt.b,l.guidanceManager),Xt=function(e){xt.a.init(),yt.init(),Lt.init(e),At.init(e),Zt.init(e),Dt.a.addHoverListener(),Dt.a.addClickListener(),Ot.b.subscribe((function(e,t){ht.a.sendEventMessage({type:vt.e,eventType:vt.V.Route,routeName:e,routeData:t})}),Ot.a.Changed),Ot.b.subscribe((function(e,t){ht.a.sendEventMessage({type:vt.e,eventType:vt.V.RouteChanging,routeName:e,routeData:t})}),Ot.a.Changing)},en=function(){function e(e,t){var n=this;this.routeListener=e,this._started=!0,this.handleRouteChanging=function(){n.started=!1},this.handleRouteChanged=function(){n.started=!0},this.onStateChanged=function(e){n.startedCallback=e},t.addWatcher(this)}return e.prototype.start=function(){this.routeListener.subscribe(this.handleRouteChanging,Ot.a.Changing),this.routeListener.subscribe(this.handleRouteChanged,Ot.a.Changed)},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.startedCallback&&this.startedCallback(e)},enumerable:!0,configurable:!0}),e}(),tn=n("0+Qs"),nn=n("4HXK"),rn=n("eUpQ"),on=n("6Ksg"),sn=n("vT39"),an=n("WShm"),cn=n("OmEq"),ln=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.email=function(e){return cn.b.test(e)||!e}}};s.module("ultra.directives.validate.emailAddress",[]).directive("bbValidateEmailAddress",["$injector",function(e){return e.instantiate(ln)}]);var un=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.email=function(e){return!e||cn.a.test(e)}}};s.module("ultra.directives.validate.emailAddresses",[]).directive("bbValidateEmailAddresses",["$injector",function(e){return e.instantiate(un)}]);var dn=function(){this.require="?ngModel",this.link=function(e,t,n,r){r&&(t.on("focusin",(function(){r.$focused=!0,e.$root.$$phase||e.$$phase||e.$root.$digest()})),t.on("focusout",(function(){r.$focused=!1,e.$root.$$phase||e.$$phase||e.$root.$digest()})))}};s.module("ultra.directives.validate.input",[]).directive("input",["$injector",function(e){return e.instantiate(dn)}]).directive("textarea",["$injector",function(e){return e.instantiate(dn)}]);var pn=function(){function e(){var e=this;this.require="ngModel",this.restrict="A",this.link=function(t,n,r,i){i.$validators.kvp=e.getKVPValidator(t,n,r,i)}}return e.prototype.getKVPValidator=function(e,t,n,r){return function(e,t){var n=t+"";if(""===n)return!0;var r=!0;return n.split("\n").forEach((function(e){e.trim().length>0&&r&&(2!==e.split("=").length&&(r=!1))})),r}},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(pn);s.module("ultra.directives.validate.kvp",[]).directive("bbValidateKeyValuePair",["$injector",function(e){return e.instantiate(pn)}]);var mn=n("f4B+"),fn="bbValidateMaxlength",hn=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getMaxlengthValidator=function(e,t,n,r){return function(e){var t=o("<textarea/>").val(e).text()||e;if(null==t)return!0;var i=n[fn];if(null==i||""===i)return!0;var s=t.length;"true"===(!!n.maxlengthAfterEscape&&n.maxlengthAfterEscape)&&(s=mn.a.HTML(t).length);var a=n.maxlengthNotice?n.maxlengthNotice:Math.floor(.9*i).toString();return a.match(/\%$/)&&(a=a.replace(/\D/,""),a=Math.floor(i*(1-a/100)).toString()),s>i?(delete r.$warning.maxlengthWarning,r.$error.maxlength={maxlength:i,diff:s-i},r.$errorImmediate.maxlengthImmediate={maxlength:i,diff:s-i},!1):s>=a?(delete r.$error.maxlength,delete r.$errorImmediate.maxlengthImmediate,r.$warning.maxlengthWarning={maxlength:i,left:i-s},!0):(delete r.$error.maxlength,delete r.$errorImmediate.maxlengthImmediate,delete r.$warning.maxlengthWarning,!0)}},this.link=function(e,n,r,i){i.$validators.maxlengthValidator=t.getMaxlengthValidator(e,n,r,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(hn);s.module("ultra.directives.validate.maxlength",[I.moduleName]).directive(fn,[I.serviceName,function(e){return new hn(e)}]);var gn=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.selectionStart=0,this.selectionEnd=0,this.oldViewValue="",this.getNumberParser=function(e,n,r,i){return function(n){if(i.$isEmpty(n))return i.$setValidity("numberInvalid",!0),n;var o=t.regroup(e,i),s=t.bbLocalize.parseNumberSync(o,e);if(Number.isNaN(s))return i.$setValidity("numberInvalid",!1),s;i.$setValidity("numberInvalid",!0);var a=t.bbLocalize.getDecimalStringForScope(e),c=s.toString(),l=c.split(String(a)),u=r&&r.maxDecimal?Number(r.maxDecimal):I.Service.defaultDecimalPrecision;return l.length>1&&l[1].length>u&&(c=l[0]+a+l[1].substring(0,u),s=parseFloat(c),t.reformatFromModel(i,s)),t.updateSelection(e,i,t.target,t.key),s}},this.getMinValidator=function(e,t,n,r){return function(e){var t=parseFloat(n.min),i=r.$isEmpty(e);if(!i&&Number.isNaN(Number(e)))return delete r.$error.numberSmall,!1;var o=i||e>=t;return o?delete r.$error.numberSmall:r.$error.numberSmall={min:t},o}},this.getMaxValidator=function(e,t,n,r){return function(e){var t=parseFloat(n.max),i=r.$isEmpty(e);if(!i&&Number.isNaN(Number(e)))return delete r.$error.numberLarge,!1;var o=i||e<=t;return o?delete r.$error.numberLarge:r.$error.numberLarge={max:t},o}},this.getNumberFormatter=function(e,n,r,i){return function(n){var o=n||i.$modelValue;if(i.$setValidity("numberInvalid",!0),o||0===o){var s=r&&r.maxDecimal?r.maxDecimal:I.Service.defaultDecimalPrecision;return t.bbLocalize.formatNumberSync(parseFloat(o),e,{maximumFractionDigits:s,useGrouping:!0})}return""}},this.regroup=function(e,n){var r=t.bbLocalize.regroupNumberSync(n.$viewValue,e);return n.$viewValue!==r&&(n.$viewValue=r,n.$render(),n.$validate()),r},this.reformatFromModel=function(e,t){t=t||e.$modelValue;for(var n=e.$formatters,r=n.length,i=t;r--;)i=n[r](i);e.$viewValue!==i&&(e.$viewValue=i,e.$render(),e.$validate())},this.allowInput=function(e,n,r,i){if(!n||!n.key)return!1;var o=i.$viewValue,s=n.target,a=s.selectionStart,c=s.selectionEnd,l=t.bbLocalize.getGroupingStringForScope(e),u=t.bbLocalize.getDecimalStringForScope(e),d=t.bbLocalize.parseNumberSync(o,e),p=r&&r.maxDecimal?Number(r.maxDecimal):I.Service.defaultDecimalPrecision,m=c-a>1,f=n.key===l,h=c-a==0&&"Backspace"===n.key&&o[a-1]===l,g=c-a==0&&"Delete"===n.key&&o[a]===l,v=c-a==1&&o[a]===l&&("Backspace"===n.key||"Delete"===n.key),b=c-a==0&&!Number.isNaN(Number(n.key))&&t.target.selectionStart>o.indexOf(u)&&o.split(u)[1]&&o.split(u)[1].length>=p;m||Number.isNaN(d)||!(h||g||f||v||b)||n.preventDefault()},this.updateSelection=function(e,n,r,i){if(i&&-1===["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Shift","Meta","Tab","End","Home","-"].indexOf(i)){var o=Math.max(0,t.selectionEnd+n.$viewValue.length-t.oldViewValue.length);r.selectionStart=o,r.selectionEnd=o}},this.link=function(e,n,r,i){n.on("blur",(function(){i.$valid&&t.reformatFromModel(i)})),n.on("focus",(function(){n.select()})),n.on("keydown",(function(n){t.target=n.target,t.key=n.key,t.selectionStart=t.target.selectionStart,t.selectionEnd=t.target.selectionEnd,t.oldViewValue=i.$viewValue,t.allowInput(e,n,r,i)})),i.$parsers.push(t.getNumberParser(e,n,r,i)),i.$formatters.push(t.getNumberFormatter(e,n,r,i)),r.min&&(i.$validators.minValidator=t.getMinValidator(e,n,r,i),r.$observe("min",(function(){i.$validate()}))),r.max&&(i.$validators.maxValidator=t.getMaxValidator(e,n,r,i),r.$observe("max",(function(){i.$validate()})))}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(gn);s.module("ultra.directives.validate.number",[I.moduleName]).directive("bbValidateNumber",[I.serviceName,function(e){return new gn(e)}]);var vn=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.phoneNumber=function(e){return/^\+?\d+$/.test(e)||!e}}};s.module("ultra.directives.validate.phoneNumber",[]).directive("bbValidatePhoneNumber",["$injector",function(e){return e.instantiate(vn)}]);var bn=n("xqn/"),yn=new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i"),Sn=(new RegExp("^(http://|https://)"),function(){function e(){var e=this;this.require="ngModel",this.restrict="A",this.link=function(t,n,r,i){i.$validators.url=e.getUrlValidator(t,n,r,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}return e.prototype.getUrlValidator=function(e,t,n,r){return function(e){if(!e)return r.$error.urlInvalid&&delete r.$error.urlInvalid,!0;var t=e+"";return yn.test(t)?(delete r.$error.urlInvalid,!0):(r.$error.urlInvalid=!0,!1)}},e}());!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_.__extends)(t,e)}(Sn);s.module("ultra.directives.validate.url",[]).directive("bbValidateUrl",["$injector",function(e){return e.instantiate(Sn)}]);var Cn=n("lDJ8"),wn=[on.b,sn.a,an.b,"ultra.directives.validate.emailAddress","ultra.directives.validate.emailAddresses","ultra.directives.validate.input","ultra.directives.validate.kvp","ultra.directives.validate.maxlength","ultra.directives.validate.number","ultra.directives.validate.phoneNumber",bn.b,"ultra.directives.validate.url",Cn.a],kn=n("2qV7"),Tn=n("Q/M7"),In=n("HtY7"),$n=n("H8CZ"),En="ultra.components.directives.preventEventBubbling",Pn=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n,n.bbPreventEventBubbling&&t.on(n.bbPreventEventBubbling,(function(e){e.stopPropagation()}))}return e.$inject=["scope","element","attrs"],e}(),An=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.link=function(e,n,r){e.bbPreventEventBubbling=t.$injector.instantiate(Pn,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(En,[]).directive("bbPreventEventBubbling",["$injector",function(e){return e.instantiate(An)}]);n("/mDi");var xn="ultra.components.directives.sizeToFitTextArea",Dn=function(){function e(e,t,n,r){var i=this;if(this.scope=e,this.element=t,this.attrs=n,this.timeout=r,this.defaultHeight=null!=this.scope.defaultHeight?parseInt(this.scope.defaultHeight,10):37,"textarea"!==t[0].tagName.toLowerCase())throw new Error("This directive is only for use as an attribute on textareas");this.maxHeight=this.scope.maxHeight?parseInt(this.scope.maxHeight,10):null,t.addClass("size-to-fit-textarea"),null!=e.textareaModel?this.scope.$watch("textareaModel",(function(e,t){e!==t&&i.sizeToFit()})):t.keyup(this.sizeToFit.bind(this)),this.timeout((function(){i.minHeight="true"===i.scope.initialHeightLock?i.element.get(0).clientHeight:null,i.sizeToFit()}),this.scope,0,!1)}return e.prototype.sizeToFit=function(){var e=this.element.get(0);e.clientHeight===e.scrollHeight&&(e.style.height=this.defaultHeight+"px");var t=e.clientHeight;(!this.maxHeight||this.maxHeight>t)&&(t=Math.max(e.scrollHeight,t,this.minHeight),this.scope.maxHeight&&(t=Math.min(this.maxHeight,t)),t>e.clientHeight&&(e.style.height=t+"px"))},e.$inject=["scope","element","attrs",u.b],e}(),On=function(){function e(e){var t=this;this.$injector=e,this.replace=!1,this.restrict="A",this.priority=1,this.terminal=!1,this.scope={defaultHeight:"@",maxHeight:"@",initialHeightLock:"@",textareaModel:"=?"},this.link=function(e,n,r){e.sizetofittextarea=t.$injector.instantiate(Dn,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(xn,[u.a]).directive("bbSizeToFitTextarea",["$injector",function(e){return e.instantiate(On)}]);var _n="ultra.components.directives.bbPreventDrag",Mn=function(){function e(e){this.$rootScope=e,this.restrict="A",this.link=function(e,t){t.attr("draggable","false"),t.on("dragstart",(function(e){var t=e.originalEvent.target;if(!(t.ownerDocument.activeElement.className.includes("bb-editor")||t.getAttribute&&"true"===t.getAttribute("draggable")))return!1}))}}return e.$inject=["$rootScope"],e}();s.module(_n,[]).directive("bbPreventDrag",["$injector",function(e){return e.instantiate(Mn)}]);n("i2kg"),n("my/J");var Nn=n("nsO7"),Rn="ultra.components.directives.formlabel",Ln="bbFormLabelDecorator",jn=function(){function e(t,n,r){var i=this;this.$q=t,this.$log=n,this.timeout=r,this.restrict="A",this.scope=!0,this.waitForElement=function(t,n){null==n.elementInspectStartAt&&(n.elementInspectStartAt=(new Date).getTime());var r=i.$q.defer();return i.timeout((function(){return s.element(document.getElementById(t))}),n,50).then((function(o){o.length>0?r.resolve(o):(new Date).getTime()-n.elementInspectStartAt>e.elementInspectTimeout?r.reject("Cannot find element #"+t+" in "+e.elementInspectTimeout+"ms"):i.waitForElement(t,n).then((function(e){r.resolve(e)})).catch((function(e){r.reject(e)}))})),r.promise},this.link=function(t,n,r){var o=t.$eval(r[Ln])||{},a=r.for;a&&i.waitForElement(a,t).then((function(e){var n=function(){t.attrsElement=Nn.mapValues(Nn.keyBy(e[0].attributes,"nodeName"),(function(e){return e.nodeValue}))};o.autoupdate&&(t.domObserver=new MutationObserver(n),t.domObserver.observe(e[0],{childList:!1,attributes:!0,subtree:!1})),n()})).catch((function(e){i.$log.warn(e)})),t.$watchGroup(Nn.compact(["attrsElement",r[Ln]]),(function(t){e.decorators.forEach((function(e){e(n,s.extend({},t[0],t[1]))}))})),t.$on("$destroy",(function(){void 0!==t.domObserver&&t.domObserver.disconnect()}))}}return e.elementInspectTimeout=1e4,e.$inject=["$q","$log","timeout"],e.decorators=[function(e,t){var n=t.required;!0===n||["true","required",""].indexOf(n)>=0?e.addClass("required"):e.removeClass("required")}],e}();s.module(Rn,[]).directive(Ln,["$injector",function(e){return e.instantiate(jn)}]);var Un=n("+e2k"),Gn=(n("lhRd"),n("GGEJ")),Bn=(n("JbSi"),n("0Y4C"),"ultra.components.directives.collabSessionIcon"),Fn=(function(){function e(e,t,n){this.$scope=e,this.$element=t,this.bbLocalize=n}e.prototype.$onChanges=function(e){var t=this;this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.runningSessionFlag?"components.directives.collab-session-icon.aria-label.active-collab":"components.directives.collab-session-icon.aria-label.inactive-collab"}).then((function(e){t.$element.attr("aria-label",e)}))},e.$inject=["$scope","$element",I.serviceName],e=Object(_.__decorate)([Object(Ve.a)({moduleName:Bn,componentName:"bbCollabSessionIcon",template:Gn,bindings:{runningSessionFlag:"<"},requireModules:[I.moduleName]})],e)}(),"ultra.directives.elementimage.accessibility"),qn="aria-label",Hn=["components","directives","element-image","element-image-accessibility"],zn=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.restrict="C",this.link=function(e,t,r){if(!t.attr(qn)){var i=t.attr("class"),o=function(r){var i=/\bimg-icon-[\w-]+\b/.exec(r);null===i?t.removeAttr(qn):(n.loadBundle.then((function(){t.attr(qn,n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(e),key:Hn.join(".")+"."+i[0].replace(/-[aco]$/,"")}))})),e.$digest())};requestAnimationFrame((function(){o(i)}));var s=new MutationObserver(Nn.debounce((function(){requestAnimationFrame((function(){var e=t.attr("class");i!==e&&o(i=e)}))}),100,{leading:!0}));s.observe(t[0],{attributes:!0,attributeFilter:["class"]}),e.$on("$destroy",(function(){s.disconnect()}))}},this.loadBundle=t.loadBundle(Hn.join("/"))}return e.$inject=["$injector",I.serviceName],e}();s.module(Fn,[I.moduleName]).directive("elementImage",["$injector",function(e){return e.instantiate(zn)}]);var Vn=n("cYWG"),Kn=n("K/D1"),Jn=["scheduledTasks","telemetry"],Wn=null,Qn=function(){function e(){this.pendingRequests=[],this.httpRequestLog=[],this.registerWebRequestListener()}return e.prototype.registerWebRequestListener=function(){var e=this;window.addEventListener("message",(function(t){t.source===window&&t.data&&t.data.type&&t.data.details&&e.handleWebRequestMessage(t.data.type,t.data.details)}))},e.prototype.handleWebRequestMessage=function(e,t){if(this.isMonitoredUrl(t.url))switch(e){case"onBeforeRequest":this.onRequestStarted(t);break;case"onCompleted":case"onErrorOccurred":this.onRequestCompleted(t)}},e.prototype.isMonitoredUrl=function(e){return e&&e.indexOf("/learn/api/v1")>=0&&0===Jn.filter((function(t){return e.indexOf(t)>-1})).length},e.prototype.onRequestStarted=function(e){this.pendingRequests.push(e)},e.prototype.onRequestCompleted=function(e){var t=Nn.findIndex(this.pendingRequests,(function(t){return t.requestId===e.requestId}));if(t>-1){var n=this.pendingRequests[t],r={requestId:e.requestId,type:e.type,method:e.method,url:e.url,statusCode:e.statusCode,elapsedTime:e.timeStamp-n.timeStamp,requestBody:n.requestBody,error:e.error};this.httpRequestLog.push(r),this.pendingRequests.splice(t,1)}},e.prototype.dumpHttpRequestLog=function(){var e={};window.httpRequestLog.forEach((function(t){var n=t.method+" "+t.url;null==e[n]&&(e[n]=[]),e[n].push(t.params)}));for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];console.log(r+" ["+i.length+"]",i)}}},e.prototype.clearHttpRequestLog=function(){this.httpRequestLog.length=0},e}();var Yn=n("oQrK"),Zn="ultra.services.zoomUtility";s.module(Zn,[]),Yn.a.detect().mobile()&&o(document).on("mouseover","input, textarea, select, .editor-element",(function(){o(this).css("font-size","16px")}));n("rkMR");var Xn=n("gkef"),er=n("90v0"),tr="ultraUi.components.directives.conversion.previewHeader",nr=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.element=t,this.attrs=n,this.windowSize=r,this.contextCourse=i;var s=e.course,a=r.isMediumBreakpoint()||r.isLargeBreakpoint();this.scope.shouldShowHeader=a&&s.isUltraPreview(),this.scope.hasExceptionReport=!!s.ultraConversionReportId,e.$on("reloadCourse",(function(e,t){t===s.id&&(o.scope.shouldShowHeader=s.isUltraPreview())}))}return e.$inject=["scope","element","attrs",Xn.b,h.e],e}(),rr=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=er,this.scope={course:"="},this.link=function(e,n,r){e.previewHeader=t.$injector.instantiate(nr,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(tr,[]).directive("bbPreviewHeader",["$injector",function(e){return e.instantiate(rr)}]);var ir=[{symbol:"d",base:86400,label:"days"},{symbol:"h",base:3600,label:"hours"},{symbol:"m",base:60,label:"minutes"},{symbol:"s",base:1,label:"seconds"}];s.module("ultra.service.filters.timespan",[I.moduleName]).filter("timeSpan",["$log",I.serviceName,function(e,t){var n={};return ir.forEach((function(e){n[e.symbol]=e})),function(r,i,o){void 0===i&&(i="hm");var s={},a={};return Nn.forEach(i,(function(t){var r=t.toLowerCase();Object.prototype.hasOwnProperty.call(n,r)?a[r]=r!==t:e.error(r+" is not supported!")})),Nn(n).filter((function(e){return Object.prototype.hasOwnProperty.call(a,e.symbol)})).forEach((function(e){var i=e.symbol,c=1===Nn.size(a),l=Math.floor(r/n[i].base),u=n[i].label;(l>0||!0===a[i]||c&&0===Nn.size(s))&&(s[u]=t.translateSync({locale:t.getLocale(o),key:"global.timeSpan."+u+".plural",params:{v:l},noEscape:!0})),r%=n[i].base,delete a[i]})),Nn.defaults(s,{days:"",hours:"",minutes:"",seconds:""}),t.translateSync({locale:t.getLocale(o),key:"global.timeSpan.oneline",params:s,noWrap:!0,noEscape:!0}).trim().replace(/\s+/g," ")}}]);var or=["ultra.service.filters.timespan"],sr=n("0fB1"),ar=n("z6Q5"),cr="ultra.service.batch-utility-rest-api.directive";s.module(cr,[ar.a,u.a]).directive("bbBatchScope",[ar.b,u.b,function(e,t){return{restrict:"A",link:function(n){var r,i;n.$on("BEFORE_REQUEST",(function(o,s){o.stopPropagation(),s.params=s.params||{},s.params[ar.c]||(r=r||e.newToken(),s.params[ar.c]=r),r&&(t.cancel(i),i=t((function(){r.send(),r=null}),n))}))}}}]);var lr=n("gCXj"),ur=n("BXiQ"),dr=(n("A3SN"),n("tb/u")),pr="ultra.directives.user-avatar-group";s.module(pr,[ur.a]).directive("bbUserAvatarGroup",(function(){return{restrict:"E",template:dr,scope:{users:"=?"},link:function(e,t){t.addClass("avatar element-image"),e.$watch("users",(function(t){t&&(e.displayUsers=Object(Nn.compact)([e.users[0],e.users.length>2?{id:"_groupedusers_"+(e.users.length-1),getInitials:function(){return"+"+(e.users.length-1)},avatar:{permanentUrl:"default"},lastModifiedAt:""}:e.users[1]]))}))}}}));var mr,fr=n("zFCC"),hr=n("NXdT"),gr=n("/jNt"),vr=n("JfV0");n.d(t,"userId",(function(){return mr})),n.d(t,"moduleName",(function(){return yr})),n.d(t,"useAbsoluteUrl",(function(){return kr})),n.d(t,"appInjector",(function(){return Sr})),n.d(t,"init",(function(){return $r}));var br,yr="ultra";window.Foundation.libs.reveal.settings.dismiss_modal_class="close-reveal-modal, .reveal-close",!Wn&&(br=Tn.j(),!f.a.production||br.indexOf("perf-ultra")>-1||br.indexOf("mylearn.int.bbpd.io")>-1)&&(Wn=new Qn,window.httpRequestLog=Wn.httpRequestLog,window.pendingRequests=Wn.pendingRequests,window.dumpHttpRequestLog=Wn.dumpHttpRequestLog,window.clearHttpRequestLog=Wn.clearHttpRequestLog,window.disableFtueGuidance=function(){f.a.disableAllFtueGuidance=!0});var Sr,Cr=["angulartics","angulartics.scroll","ngAnimate","ngAria","ngMessages","ngSanitize","ui.router","angular-data.DSCacheFactory","fng","ngRedux",d,m.a,S,ne.a,cr,k.a,In.a,re.a,ie.a,oe.a,T.c,se.a,O.a,R.a,$,ut.a,ae.a,U.f,ce.a,$e.a,le.b,Ee.b,Ae,Rn,Re.a,De.a,ue.a,he,be,Ce.a,Oe.a,je,Te,we.a,ke.a,_e.c,Me.b,P.b,Ne.a,A.a,L,Be.moduleName,Fe,He,Je,H,Ze,lt.b,it.a,ot.b,st.a,M,at.b,D.a,x.a,ct.a,J,X.a,dt.a,pt.a,mt.a,ft.a,En,_n,Ot.c,tn.a,nn.a,u.a,v.R,xn,Un.a,Bn,Fn,kn.a,pe.b,Kn.a,Vn.b,Zn,tr,sr.a,lr.a,ur.a,pr,gr.c,fr.b,hr.b].concat(wn).concat(or);function wr(){return s.module(yr,Cr).config([I.providerName,function(e){e.setOptions({production:f.a.production})}]).config(["$locationProvider",pe.c,"$urlRouterProvider",function(e,t,n){e.html5Mode(!0),n.rule((function(e,t){var n=t.url();if(n){var r=Tn.r(n);return"/"===r[r.length-1]?r.substring(0,r.length-1):void 0}})),n.otherwise((function(e,t){var n=t.url(),r=e.get(pe.d);"/"===Tn.r(n)?e.get(X.b).getLandingPage().then((function(e){return r.go(e)})):r.go("base.not-found")}))}]).config(["$ocLazyLoadProvider",function(e){e.config({loadedModules:[yr]})}]).config(["$animateProvider",function(e){e.classNameFilter(/angular-animate/)}]).config(["$compileProvider",function(e){e.debugInfoEnabled(!f.a.production),e.preAssignBindingsEnabled(!1)}]).config(["$httpProvider",function(e){e.useApplyAsync(!0),Tr(e)}]).config(["DSCacheFactoryProvider",function(e){e.setCacheDefaults({capacity:1e3,maxAge:18e5,deleteOnExpire:"passive"})}]).config(["$ariaProvider",function(e){e.config({bindRoleForClick:!1,bindKeypress:!1,ariaRequired:!1,ariaInvalid:!1,tabindex:!1})}]).config(["$logProvider",function(e){e.debugEnabled(!f.a.production)}]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$$digestPaused",{get:function(){return Object.prototype.hasOwnProperty.call(this,"$$__digestPaused")&&null!=this.$$__digestPaused?this.$$__digestPaused:(this.$parent||{}).$$digestPaused}}),e}])}]).config(["$ngReduxProvider",function(e){var t=window,n=[c.default],r=[];if(!f.a.production){var i=Object(a.createLogger)({level:"info",collapsed:!0});n.push(i),t.__REDUX_DEVTOOLS_EXTENSION__&&r.push(t.__REDUX_DEVTOOLS_EXTENSION__&&t.__REDUX_DEVTOOLS_EXTENSION__())}e.createStoreWith(vr.rootReducer,n,r)}])}function kr(e){return e&&e.url&&(e.url.indexOf("/api/")>=0||e.url.indexOf("/partner-cloud/app/")>=0)}function Tr(e){e.interceptors.push((function(){return{request:function(e){return kr(e)&&(e.url=Tn.c(e.url)),e}}}))}function Ir(e){e.run(["$rootScope","$ngRedux",I.serviceName,dt.b,W,function(e,t,n,r,i){var o;i.registerXsrfCallback((function(e){Object(vr.configure)({apiBasePath:f.a.apiBasePath,xsrf:e})}));var s=t.connect((function(e){return{}}),vr.actions.app)((function(e,t){o=t}));e.$on("destroy",s),e.$on("$stateChangeSuccess",(function(t,r,i,s){o&&o.handleStateChangeSuccess({toState:r,toParams:i});var a="base.recentActivity";s.name&&(a=s.name),e.previousState=a,e.index=Object.create(null),e.index.locale=(n.getLocale(e)||"").replace("_","-");var c=r.pageTitle||"base.ultra";n.translate({locale:e.index.locale,key:c}).then((function(t){e.index.title=t}))}));var a=r.subscribe();e.$on("destroy",a)}]).run(["$http",X.b,W,function(e,t,n){n.registerXsrfCallback((function(t){var n;e.defaults.headers.common[Q]=t,s.element.ajaxSetup({headers:(n={},n[Q]=t,n)})})),s.element.ajaxPrefilter((function(e){kr(e)&&(e.url=Tn.c(e.url))}))}]).run(["$rootScope",X.b,ee.b,function(e,t,n){e.context=t,e.$on("bbCurrentUserModified",(function(){n.userModel.$fetch()}))}]).run(["$rootScope",function(e){e.Modernizr=window.Modernizr}])}function $r(){var e=this;Tn.m("inPreviewMode",window.location.href)&&o("body").addClass("in-preview-mode"),s.element(document).ready((function(){s.module("pre-bootstrap-ultra",["ng",X.a]).config(["$httpProvider",function(e){Tr(e)}]);var t=s.injector(["pre-bootstrap-ultra"]),n=t.get(X.b),r=t.get(ee.b),i=t.get("$http"),a=t.get(u.b),c=t.get("$q");o(document).foundation(),/Android/.test(navigator.appVersion)&&"function"==typeof document.activeElement.scrollIntoViewIfNeeded&&window.addEventListener("resize",(function(){"INPUT"===document.activeElement.tagName&&a((function(){document.activeElement.scrollIntoViewIfNeeded()}),e.scope,0,!1)}));var d=Tn.j(),p=window.__initialContext.xsrf?c.when({data:{xsrfToken:window.__initialContext.xsrf}}):i.get(d+f.a.apiBasePath+"/v1/utilities/xsrfToken");c.all([r.userModel.$asPromise(),p,n.getSystemInfo().$asPromise()]).then((function(e){var t=e[0];mr=t.id;var n=e[2];te.a.userId=mr,rn.a.setClientOffset(n.now.getTime()-(new Date).getTime());var i=o("base"),a=i.attr("href");i.attr("href",f.a.basePath+"/");var c=(Sr=s.bootstrap(document.documentElement,[yr],{strictDi:!0})).get(X.b),u=Sr.get(W);Sr.get(Ot.d).addRouteListener(),new en(Ot.b,l.guidanceConnector).start(),u.updateToken(e[1].data.xsrfToken),r._setUserId(mr),u.registerXsrfCallback((function(e){c.sessionId=e,c.xsrfToken=e})),ht.a.init(window),Xt(Sr.get(I.serviceName)),i.attr("href",a)})).catch((function(e){401===e.status&&(window.location.href="/?new_loc="+encodeURIComponent(window.location.pathname+(window.location.search||"")+(window.location.hash||"")))})).finally((function(){var e=function(){var e=o("#initial-load-area");if(e&&e.length>0){if(window.__e2eTestingEnabled)return void e.remove();e.addClass("fade-out"),$n.b(e,(function(t){if(!t.data.noTransitions&&"opacity"!==t.originalEvent.propertyName)return!1;e.remove()}))}};if(window.__e2eTestingEnabled)e();else if(Sr){var t,n=Sr.get("$rootScope"),r=n.$on("$stateChangeSuccess",(function(){e(),r(),t()}));t=n.$on("$stateChangeError",(function(){e(),t(),r()})),n.$on("hideInitialLoadingArea",(function(){e()}))}else e()}))}))}f.a.production?(Ir(wr()),$r()):Promise.all([n.e(545),n.e(242)]).then(function(){Promise.resolve().then(n.bind(null,"tWb8")).then((function(e){Cr=Cr.concat(e.modules);var t=wr();Ir(t),e.init(t),$r()}))}.bind(null,n)).catch((function(){}))},e6jQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=0;function i(){return"id_"+ ++r}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},eUpQ:function(e,t,n){"use strict";var r=function(){function e(){}return e.getServerTime=function(){return new Date((new Date).getTime()+e.clientTimeDifferenceMS)},e.setClientOffset=function(t){e.clientTimeDifferenceMS=t},e.clientTimeDifferenceMS=0,e}();t.a=r},emI2:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("pjml"),o=n("aHpC"),s="ultra.service.preference",a="preferenceService",c=250,l=function(){function e(e,t){this.$q=e,this.MyPreferenceModel=t,this.preferences={}}return e.prototype.getPreference=function(e,t,n){var r=this,i=this.$q.defer();return n||!Object.prototype.hasOwnProperty.call(this.preferences,e)?this.MyPreferenceModel.$find(e).$allow([404]).$asPromise().then((function(n){if(n.$response&&404===n.$response.status){if(void 0===t)return void i.reject(n);r._addPreferenceToCache(e,t),i.resolve(r.preferences[e])}else r.preferences[n.key]=n,i.resolve(n)}),(function(e){i.reject(e)})):i.resolve(this.preferences[e]),i.promise},e.prototype._addPreferenceToCache=function(e,t,n){var r=this.MyPreferenceModel.$new(e);r.key=e,r.value=t,r.isRequired=!n,this.preferences[e]=r},e.prototype.setPreference=function(e,t,n){if(e.length>c)throw new Error("Preference key is too long!");return this._addPreferenceToCache(e,t,n),this.preferences[e].$save().$asPromise()},e=Object(r.__decorate)([Object(r.__param)(0,Object(o.b)("$q")),Object(r.__param)(1,Object(o.b)(i.S.serviceName))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);angular.module(s,[i.R]).service(a,l)},en1n:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"j",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"k",(function(){return T}));var r,i=n("D57K"),o=(n("9RbK"),n("5iHu")),s=n("nbDY"),a=n.n(s),c=n("xkx/"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Small=new t("small"),t.Medium=new t("medium"),t.Large=new t("large"),t.Xlarge=new t("xlarge"),t.Xxlarge=new t("xxlarge"),t}(a.a),u=function(){if(!r){var e=o(".foundation-mq-small").width(),t=o(".foundation-mq-medium").width(),n=o(".foundation-mq-large").width(),i=o(".foundation-mq-xlarge").width(),s=o(".foundation-mq-xxlarge").width();r={small:{start:e,end:t},medium:{start:t,end:n},large:{start:n,end:i},xlarge:{start:i,end:s},xxlarge:{start:s,end:999999999}}}return r},d=u,p=null;o(window).resize((function(){p=null}));var m=function(){return null==p&&(p=o(window).width()),p},f=m;function h(){var e=d(),t=f();return t>=e.small.start&&t<e.small.end?l.Small:t>=e.medium.start&&t<e.medium.end?l.Medium:t>=e.large.start&&t<e.large.end?l.Large:t>=e.xlarge.start&&t<e.xlarge.end?l.Xlarge:l.Xxlarge}function g(){return h().isEqualTo(l.Small)}function v(){return h().isEqualTo(l.Medium)}function b(){return h().isEqualTo(l.Large)}function y(){return h().isEqualTo(l.Xlarge)}function S(){return h().isEqualTo(l.Xxlarge)}function C(){return b()||y()||S()}function w(e){return e.replace("@media","").trim()}var k={smallUp:window.matchMedia(w(c.BbMediaQueries.smallUp)),smallOnly:window.matchMedia(w(c.BbMediaQueries.smallOnly)),mediumUp:window.matchMedia(w(c.BbMediaQueries.mediumUp)),mediumOnly:window.matchMedia(w(c.BbMediaQueries.mediumOnly)),largeUp:window.matchMedia(w(c.BbMediaQueries.largeUp)),largeOnly:window.matchMedia(w(c.BbMediaQueries.largeOnly)),xlargeUp:window.matchMedia(w(c.BbMediaQueries.xLargeUp)),xlargeOnly:window.matchMedia(w(c.BbMediaQueries.xLargeOnly)),xxlargeUp:window.matchMedia(w(c.BbMediaQueries.xXLargeUp))},T={smallUp:k.smallUp,smallOnly:k.smallOnly,mediumUp:k.mediumUp,mediumOnly:k.mediumOnly,largeUp:k.largeUp,largeOnly:k.largeOnly,xlargeUp:k.xlargeUp,xlargeOnly:k.xlargeOnly,xxlargeUp:k.xxlargeUp,"small-up":k.smallUp,"small-only":k.smallOnly,"medium-up":k.mediumUp,"medium-only":k.mediumOnly,"large-up":k.largeUp,"large-only":k.largeOnly,"xlarge-up":k.xlargeUp,"xlarge-only":k.xlargeOnly,"xxlarge-up":k.xxlargeUp}},"f4B+":function(e,t,n){"use strict";var r=n("D57K"),i=n("5iHu"),o=n("BqZm"),s=n.n(o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.text=function(e){return i("<div></div>").html(e).text()},t}(s.a);Object.setPrototypeOf(a,s.a),t.a=a},f8ya:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return p}));var r,i,o,s=n("D57K");!function(e){e.Add="Add",e.Delete="Delete",e.ValueChange="ValueChange",e.NoChange="NoChange"}(r||(r={})),function(e){e.NoAccommodation="Normal",e.Limited="Limited",e.Unlimited="Unlimited"}(i||(i={})),function(e){e.Unlimited="Unlimited",e.OneAndAHalf="150",e.Two="200",e.NoAccommodation="Default"}(o||(o={}));var a=function(){function e(e){this.type=e}return e.prototype.equals=function(e){return null==e?this.hasNoAccommodation():this===e||this.type===e.type},e.prototype.hasNoAccommodation=function(){return!1},Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return!this.hasNoAccommodation()},enumerable:!0,configurable:!0}),e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.compare=function(e){return this.equals(e)?r.NoChange:this.hasAccommodation?r.Add:r.Delete},t}(a),l=function(e){function t(){return e.call(this,i.NoAccommodation)||this}return Object(s.__extends)(t,e),t.prototype.hasNoAccommodation=function(){return!0},t}(c);var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.compare=function(e){return this.equals(e)?r.NoChange:this.hasAccommodation?e.hasAccommodation?r.ValueChange:r.Add:r.Delete},t.prototype.toKey=function(){switch(this.type){case o.OneAndAHalf:return"150Percent";case o.Two:return"200Percent";case o.Unlimited:return"Unlimited";default:return"NoAccommodation"}},t}(a),d=function(e){function t(){return e.call(this,o.NoAccommodation)||this}return Object(s.__extends)(t,e),t.prototype.hasNoAccommodation=function(){return!0},t}(u);var p=function(){function e(e,t){null!=e&&(this.dueDate=e),null!=t&&(this.timeLimit=t)}return e.fromTypes=function(t,n){var r,s=new e;return s.dueDate=null==(r=t)||r===i.NoAccommodation?new l:new c(r),s.timeLimit=function(e){return null==e||e===o.NoAccommodation?new d:new u(e)}(n),s},e.prototype.clone=function(){return e.fromTypes(this.dueDate.type,this.timeLimit.type)},e.prototype.equals=function(e){return e.dueDate.equals(this.dueDate)&&e.timeLimit.equals(this.timeLimit)},e.prototype.compare=function(e){return{dueDate:this.dueDate.compare(e.dueDate),timeLimit:this.timeLimit.compare(e.timeLimit)}},Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return this.dueDate.hasAccommodation||this.timeLimit.hasAccommodation},enumerable:!0,configurable:!0}),e}()},fGgA:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));n("zAxy"),n("saCP");var r=n("nsO7"),i=n("5iHu"),o=n("wHJ2"),s=n("0JpG"),a=n("lEL+"),c=n("gkef"),l=n("/J7e"),u=n("+4Px"),d=n("e6jQ"),p="ultra.components.directives.tooltip",m=function(){function e(t,n,r,o,s,a){var c=this;this.scope=t,this.element=n,this.attrs=r,this.localizeService=o,this.timeoutService=s,this.windowSizeService=a,this.tooltipCreated=!1,this.tooltip=null,this.pip=null,this.timeout=null,this.timeoutMS=500,e.initEnhancedTooltipEvents(),this.controlId=this.attrs.tooltipId||"tooltip-"+d.a(),this.tooltipPosition=this.attrs.tooltipPosition||"top","true"===this.attrs.tooltipAlwaysUnderline&&this.getTriggerElement().addClass("tooltip-always-underline"),this.$body=i("body"),this.attrs.$observe("title",(function(e){e&&c.updateTooltip(e)})),this.scope.$on("$destroy",(function(){c.getTooltip()&&c.getTooltip().remove(),c.$body=null,c.tooltip=null,c.pip=null})),"true"!==this.attrs.tooltipDisableOnMouseLeave&&n.on("mouseleave",(function(){(c.windowSizeService.isLargeBreakpoint()||"true"===c.attrs.tooltipEnableOnMouseLeaveForAllBreakpoints)&&(c.timeoutMS>0?c.timeout=c.timeoutService((function(){c.hideTooltip()}),c.scope,c.timeoutMS):c.hideTooltip())})),"true"!==this.attrs.tooltipDisableOnMouseOver&&n.on("mouseover",(function(){(c.windowSizeService.isLargeBreakpoint()||"true"===c.attrs.tooltipEnableOnMouseOverForAllBreakpoints)&&c.showTooltip()})),"true"!==this.attrs.tooltipDisableOnFocus&&(n.on("focus",(function(){i("body").hasClass("hide-focus-outline")||c.showTooltip()})),n.on("blur",(function(){c.hideTooltip()}))),n.on("click",(function(e){if(i("body").hasClass("hide-focus-outline")){var t=c.windowSizeService.isSmallBreakpoint(),n=c.windowSizeService.isMediumBreakpoint();if("true"===c.attrs.tooltipOpenOnActivation||t||n){if("true"===c.attrs.tooltipDisableOnMediumDownBreakpoint&&(n||t))return;c.isTooltipVisible()?c.hideTooltip():(c.showTooltip(),e.stopPropagation())}else c.hideTooltip()}else e.stopPropagation()})),n.on("keydown",(function(e){e.which===u.g&&c.isTooltipVisible()?(c.hideTooltip(),e.stopPropagation()):e.which!==u.t&&e.which!==u.f||"true"===c.attrs.tooltipOpenOnActivation&&(c.isTooltipVisible()?c.hideTooltip():(c.showTooltip(),e.stopPropagation()))}))}return e.prototype.isTooltipVisible=function(){return this.getTooltip()&&"false"===this.getTooltip().attr("aria-hidden")},e.prototype.cancelTimeout=function(){this.timeout&&this.timeoutService.cancel(this.timeout)},e.prototype.showTooltip=function(){var e=this;this.tooltipCreated||(this.addTooltipToDom(),this.attrs.tooltipInitImmediate)?(this.getTriggerElement().attr("title",""),(o.isUndefined(this.attrs.tooltipOnOverflowOnly)||"true"===this.attrs.tooltipOnOverflowOnly&&"true"===o.element(this.getTriggerElement().children()[0]).attr("data-overflowed"))&&(this.cancelTimeout(),this.hideAllTooltips(),this.positionTooltip(),this.getTooltip().attr("aria-hidden","false"),this.postShowTooltip())):this.timeoutService((function(){e.showTooltip()}),this.scope,100)},e.prototype.hideTooltip=function(){this.tooltipCreated&&this.getTooltip().attr("aria-hidden","true").css({top:0,left:0})},e.prototype.hideAllTooltips=function(){i("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0})},e.prototype.addTooltipToDom=function(){var e=void 0===this.attrs.tooltipCenterContent||"true"===this.attrs.tooltipCenterContent?"enhanced-tooltip tooltip-max-width tooltip-center-content":"enhanced-tooltip tooltip-max-width",t=i('<span class="'+e+'" aria-hidden="true" role="tooltip" id="'+this.controlId+'">'+this.getPipHtml()+"</span>");this.addTooltipStyles(t),this.addTooltipContent(t),this.addTooltipEvents(t),this.addTooltipClose(t),this.$body.append(t),this.getTriggerElement().attr("aria-describedby",this.controlId),this.tooltipCreated=!0},e.prototype.getPipHtml=function(){var e=this.isRTL()?"is-rtl":"";return"true"===this.attrs.tooltipDisablePip?"":'<span class="enhanced-tooltip-pip '+e+'"></span>'},e.prototype.isRTL=function(){return this.localizeService.isRTL(this.scope)},e.prototype.getPipPadding=function(){return"true"===this.attrs.tooltipDisablePip?0:13},e.prototype.getTriggerElement=function(){return this.element},e.prototype.getTooltip=function(){if(!this.tooltip){var e=this.$body.find("#"+this.controlId);this.tooltip=e.length>0?e:null}return this.tooltip},e.prototype.updateTooltip=function(e){if(this.tooltipCreated){var t=this.getTooltipPip()||"";this.getTooltip().html("").append(t).append(document.createTextNode(e))}},e.prototype.getTooltipPip=function(){return this.pip||(this.pip=this.getTooltip().find(".enhanced-tooltip-pip")),this.pip},e.prototype.positionTooltip=function(){this.getTooltipPip().removeClass(this.adjustedTooltipPosition);var t=this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()/2;switch(this.checkPositionInBoundary(t),this.adjustedTooltipPosition){case"top-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()/2,null);break;case"top-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()+20,t-e.TOOLTIP_PIP_PADDING);break;case"top-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-20,t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING);break;case"bottom-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()/2,null);break;case"bottom-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING,t-e.TOOLTIP_PIP_PADDING);break;case"bottom-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-e.TOOLTIP_PIP_PADDING,t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING);break;case"right-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"right-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"right-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding())}this.getTooltipPip().addClass(this.adjustedTooltipPosition)},e.prototype.applyPosition=function(e,t,n,r){var i=this.adjustLeftPercentage(n,r),o=this.ensureTopInBounds(t);e.css({top:o||"auto",left:this.isRTL()?i.rtlLeft||"auto":i.left||"auto"})},e.prototype.ensureTopInBounds=function(t){var n=t+this.getTooltip().outerHeight();return this.getWindowHeight()-n<e.TOOLTIP_VIEWPORT_EDGE_PADDING?t=this.getWindowHeight()-this.getTooltip().outerHeight()-e.TOOLTIP_VIEWPORT_EDGE_PADDING:t<e.TOOLTIP_VIEWPORT_EDGE_PADDING&&(t=e.TOOLTIP_VIEWPORT_EDGE_PADDING),t},e.prototype.adjustLeftPercentage=function(e,t){if(o.isDefined(this.attrs.tooltipLeftAdjustPercent)){var n=this.getTriggerElement().outerWidth()/100*parseInt(this.attrs.tooltipLeftAdjustPercent,10);e+=n,t-=n}return{left:e,rtlLeft:t}},e.prototype.checkPositionInBoundary=function(e){var t=this.tooltipPosition.split("-");"bottom"!==t[0]&&"top"!==t[0]||(this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getTooltip().outerHeight()+this.getPipPadding()>this.getWindowHeight()?t[0]="top":this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding()<0&&(t[0]="bottom"),e+this.getTooltip().outerWidth()/2>this.getWindowWidth()?t[1]="left":e-this.getTooltip().outerWidth()/2<0?t[1]="right":t[1]=t[1]?t[1]:"center"),this.adjustedTooltipPosition=t.join("-")},e.prototype.getWindowWidth=function(){return i(window).width()},e.prototype.getWindowHeight=function(){return i(window).height()},e.prototype.addTooltipClose=function(e){var t=this,n=e.find(".close-icon");n.length>0&&n.on("click",(function(){t.hideTooltip()}))},e.prototype.addTooltipStyles=function(e){},e.prototype.addTooltipContent=function(e){e.append(document.createTextNode(this.getTriggerElement().attr("title")))},e.prototype.addTooltipEvents=function(e){},e.prototype.postShowTooltip=function(){},e.$inject=["scope","element","attrs",s.serviceName,a.b,c.b],e.TOOLTIP_PIP_PADDING=20,e.TOOLTIP_VIEWPORT_EDGE_PADDING=20,e.initEnhancedTooltipEvents=r.once((function(){var e=r.throttle((function(){i("body").find(".enhanced-tooltip").attr("aria-hidden","true")}),500);document.addEventListener("scroll",e,!0),i(window).resize(e),i("body").click(e)})),e}(),f=function(){function e(t){var n=this;this.$injector=t,this.restrict="A",this.scope={},this.link=function(t,r,o){l.a(o.enhancedTooltip)?t.tooltip=n.$injector.instantiate(m,{scope:t,element:r,attrs:o}):(e.instanceCount++,e.ensureEvents(),r.one("mouseover",(function(e){var t=i(e.currentTarget);null==t.attr("data-tooltip")&&(t.attr("data-tooltip",""),t.parent().foundation({tooltip:{disable_for_touch:!0}}))})),t.$on("$destroy",(function(){e.instanceCount--,0===e.instanceCount&&e.unregisterEvents(),r.foundation("tooltip","off")})))}}return e.ensureEvents=function(){function t(){o.element("span.tooltip:visible").hide(),o.element(".button-with-active-tooltip").removeClass("open")}e.eventHandlers||(e.eventHandlers={click:t,blur:t,keyup:function(e){i.Event(e).keyCode===u.g&&t()}},Object.keys(e.eventHandlers).forEach((function(t){document.addEventListener(t,e.eventHandlers[t],!0)})))},e.unregisterEvents=function(){Object.keys(e.eventHandlers).forEach((function(t){document.removeEventListener(t,e.eventHandlers[t],!0)})),e.eventHandlers=null},e.instanceCount=0,e.eventHandlers=null,e.$inject=["$injector"],e}();o.module(p,[s.moduleName,a.a,c.a]).directive("bbTooltip",["$injector",function(e){return e.instantiate(f)}])},fYJU:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("Qbdf"),a="ultra.service.context.user",c="contextUser",l=function(){function e(e,t,n){this.$window=e,this.UserModel=t,this.contextCourse=n}return Object.defineProperty(e.prototype,"userId",{get:function(){return this.contextCourse.isInIframeOfPreviewMode()?this.contextCourse.previewStatus.user.id:this._userId||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userModel",{get:function(){return this.contextCourse.isInIframeOfPreviewMode()?this.contextCourse.previewStatus.user:(this._userModel||(this._userModel=this.getInitialUserModel(),this._userId=this._userModel.id),this._userModel)},enumerable:!0,configurable:!0}),e.prototype.update=function(){var e=this;return this.UserModel.$find("me",{expand:"systemRoles"}).$then((function(t){return e._setUserModel(t)}))},e.prototype.getInitialUserModel=function(){return this.$window.__initialContext?this.UserModel.$buildRaw(this.$window.__initialContext.user):this.UserModel.$find("me",{expand:"systemRoles"})},e.prototype._setUserId=function(e){return this._userId=e,this._userId},e.prototype._setUserModel=function(e){return this._userModel=e,this._userId=e?e.id:null,this._userModel},e.$inject=["$window",o.Qb.serviceName,s.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(a,[o.R]).service(c,l)},fm95:function(e,t,n){"use strict";n.r(t),n.d(t,"CREATE_CONTENT_ID",(function(){return T})),n.d(t,"FolderContentHandlerIcon",(function(){return I})),n.d(t,"FileContentHandlerType",(function(){return $})),n.d(t,"getProctoredAssessmentSettings",(function(){return E})),n.d(t,"ForumAttacherAction",(function(){return P})),n.d(t,"StateType",(function(){return k})),n.d(t,"SAFE_ASSIGN_KEY",(function(){return A})),n.d(t,"ScormScoringMethod",(function(){return x})),n.d(t,"ScormLearningStandard",(function(){return D})),n.d(t,"serviceName",(function(){return O}));var r=n("D57K"),i=(n("QLzv"),n("nsO7")),o=n("wHJ2"),s=n("5MwF"),a=n("wgY5"),c=n("nbDY"),l=n.n(c),u=n("4nF1"),d=n("gm4d"),p=n("pjml"),m=n("yCC5"),f=n("Rjd/"),h=n("eUpQ"),g=n("nkTj"),v=n("94iD"),b=n("JfV0"),y=n("f8ya"),S=n("817J");n.d(t,"AssessmentType",(function(){return S.a}));var C=n("pqmn");n.d(t,"ContentRootNode",(function(){return C.a}));var w=n("r6n2");n.d(t,"DeployedAssessmentType",(function(){return w.a})),n.d(t,"ContentHandler",(function(){return b.ContentHandler})),n.d(t,"ContentVisibility",(function(){return b.ContentVisibility})),n.d(t,"Visibility",(function(){return b.ContentVisibility})),n.d(t,"ILearnCourseContent",(function(){return b.ILearnCourseContent})),n.d(t,"ILearnCourseContentDetail",(function(){return b.ILearnCourseContentDetail})),n.d(t,"ILearnAssignedGroup",(function(){return b.ILearnAssignedGroup})),n.d(t,"ILearnSingleFile",(function(){return b.ILearnSingleFile}));var k,T="create",I=function(e){function t(t){var n=e.call(this,t)||this;return n.iconClass=t,n}return Object(r.__extends)(t,e),t.OpenFolder=new t("img-icon-folder-open"),t.ClosedFolder=new t("img-icon-folder"),t}(l.a),$=function(e){function t(t,n){var r=e.call(this,t.join())||this;return r.mimeTypeKeywords=t,r.iconClass=n,r}return Object(r.__extends)(t,e),t.getIconClassByFileMIMEType=function(e){if(e&&e.trim())for(var n=e.toLowerCase(),r=t.getValues(),i=0;i<r.length;i++){var o=r[i];if(o.mimeTypeKeywords.some((function(e){return n.indexOf(e)>=0})))return o.iconClass}return""},t.Pdf=new t(["pdf"],"img-icon-pdf"),t.Presentation=new t(["powerpoint","presentation"],"img-icon-presentation"),t.Spreadsheet=new t(["excel","spreadsheet"],"img-icon-spreadsheet"),t.Zip=new t(["zip"],"img-icon-zip"),t.Audio=new t(["audio"],"img-icon-audio"),t.Image=new t(["image"],"img-icon-photo"),t.Video=new t(["video"],"img-icon-video"),t.Document=new t(["word","document","text","rtf"],"img-icon-document-text"),t}(l.a),E=function(e){if(o.isUndefined(e)||null==e)return null;var t=e.contentHandler.toString();if(p.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail&&e.contentDetail[t]&&e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings){var n=e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings;return{proctoringDownloadUrl:n.proctoringDownloadUrl,proctoringServiceHandle:n.proctoringServiceHandle,proctoringServiceVendor:n.proctoringServiceVendor,isSecureBrowserRequiredToTake:n.isSecureBrowserRequiredToTake,isSecureBrowserRequiredToReview:n.isSecureBrowserRequiredToReview,isWebcamRequired:n.isWebcamRequired}}return null},P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.ADD=new t("ADD"),t.DELETE=new t("DELETE"),t}(l.a);!function(e){e.None="None",e.Started="Started",e.Completed="Completed"}(k||(k={}));var A="mdb-sa",x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.SCORE=new t("SCORE"),t.COMPLETION=new t("COMPLETION"),t.SATISFACTION=new t("SATISFACTION"),t}(l.a),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.AICC=new t("AICC"),t.CMI5=new t("CMI5"),t.SCORM_11=new t("SCORM_11"),t.SCORM_12=new t("SCORM_12"),t.SCORM_2004_2ND_EDITION=new t("SCORM_2004_2ND_EDITION"),t.SCORM_2004_3RD_EDITION=new t("SCORM_2004_3RD_EDITION"),t.SCORM_2004_4TH_EDITION=new t("SCORM_2004_4TH_EDITION"),t.TINCAN=new t("TINCAN"),t}(l.a),O=m.A;f.a.factory(O,["restmod",g.d,"$q","$rootScope","$ngRedux",function(e,t,n,c,l){var m=e.model().mix({depth:{mask:!0},children:{mask:!0},softLinks:{mask:!0},"adaptiveReleaseRules.startDate":{serialize:"date"},"adaptiveReleaseRules.endDate":{serialize:"date"},position:{mask:"CU"},selfEnrollmentGroups:{mask:"CU"},positionBefore:{mask:"R"},positionAfter:{mask:"R"},hasMoreChildren:{mask:!0},launchInNewWindow:{init:!0},ui:{mask:!0,init:function(){return{hasData:!1,isDeleted:!1,isOpen:!1}}},$extend:{Record:{getDeployedAssessment:function(){if(!this.contentDetail)throw new Error("Cannot get deployed assessment if content detail is null");var e=this.contentHandler&&w.a.parseByContentHandler(this.contentHandler.toString());if(e){var t=this.contentDetail[this.contentHandler.toString()];return t.gradingColumn?t:t[e.toString()]}},getAssociatedGradingColumn:function(e){var t=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];if(t&&t.gradingColumn)return t.gradingColumn;if(t){var n=this.getDeployedAssessment();if(n)return n.gradingColumn}},getDueDate:function(){return this.genericReadOnlyData&&this.genericReadOnlyData.dueDate},getContentHandlerByIconUrl:function(){var e=this.iconUrl.match("^/.*/(.*)_.*..*$"),t=b.ContentHandler.Unknown;if(e)switch(e[1]){case"assignment":t=b.ContentHandler.UltraAssignment;break;case"discussion":t=b.ContentHandler.Discussion;break;case"file":t=b.ContentHandler.File;break;case"folder":t=b.ContentHandler.Folder;break;case"link":t=b.ContentHandler.ExternalLink;break;case"test":t=b.ContentHandler.TestLink}return t},setupAssessmentContentDetail:function(e,t){var n=this.contentHandler.toString(),r=S.a.parseByContentHandler(n),i=w.a.parseByContentHandler(n);if(r&&i){this.contentDetail={},this.contentDetail[n]={};var o=a(h.a.getServerTime()).startOf("day").add({days:1}).toDate();this.contentDetail[n][i.toString()]={deployedAssessmentType:i.toString(),assessment:{title:this.title,type:r.toString()},deploymentSettings:{feedbackSettings:{as:{options:["USER_ANSWERS","INSTRUCTOR_FEEDBACK","SCORE"]}}},gradingColumn:{columnName:this.title,possible:0,visible:!1,gradebookCategoryId:t?t.id:null,gradebookCategory:t,gradingSchemaId:e,courseId:this.courseId,dueDate:o},permissions:{modify:!0}}}},createScormSettings:function(e){var t={method:"POST",url:this.$url()+"/scormSettings",data:e},r=n.defer();return this.$scope.$collection().$send(t,(function(e){r.resolve(e.data)}),(function(e){r.reject(e)})),r.promise},conditionalReleaseAsync:function(e,t,n,r){var i=n?"/rules/"+n+"/conditions":"";r&&(i+="/"+r);var o={method:e,url:this.$url()+"/adaptiveReleaseRules"+i};if(t&&"DELETE"!==e&&(o.data=t),"GET"===e)return this.$scope.$collection().$send(o).$then((function(e){return e.$unwrap(e.$response.data)}));if("DELETE"===e){var s=b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId:this.id;t&&t.type?l.dispatch(b.actions.content.deleteAdaptiveReleaseRuleInStore(s,t.type)):l.dispatch(b.actions.content.deleteAdaptiveReleaseRulesInStore(s))}return this.$scope.$collection().$send(o)},getChildren:function(e){e=e||{};var n=this,r=[];return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:{offset:e.offset,limit:e.limit,contentHandler:e.contentHandler,recursive:e.recursive,onlyUltraConvertableContents:e.onlyUltraConvertableContents,expand:"assignedGroups,selfEnrollmentGroups.group",sort:e.sort,"@view":"Summary"}}).$then((function(n){if(s.a.features.learningModule||i.remove(n.$response.data.results,(function(e){return b.ContentHandler.LearningModule.isEqualTo(e.contentHandler)})),e.resolveLinks&&n.$response.data.results&&n.$response.data.results.length){var o=t.getDataMixin(n.findMany.bind(n),"linkSourceId","linkSource");if(n.$response.data.results.forEach((function(e){b.ContentHandler.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&r.push({linkId:e.id,linkSourceId:e.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId})})),r.length)return o(r,{}).then((function(){return n}))}})).$then((function(e){e.$unwrap(e.$response.data);var t={};r.forEach((function(e){t[e.linkId]=e.linkSource})),e.forEach((function(e){e.depth=n.depth+1,t[e.id]&&(e.ui.linkSource=t[e.id])}))}))},getClassicContent:function(){return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url(),params:{onlyUltraConvertableContents:"true"}}).$then((function(e){e.$unwrap(e.$response.data)}))},getLinkContentSource:function(e){if(e=e||{},b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.contentDetail)return this.ui.linkSource&&this.ui.linkSource.$pk&&!e.fromServer?this.ui.linkSource:(this.ui.linkSource=this.$scope.$new(this.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId),this.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId?this.ui.linkSource.$fetch():this.ui.linkSource)},getChildrenCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/children/count"}).$asPromise().then((function(e){return e.$response.data.count}))},hasGradedContentItems:function(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasGrades"}).$asPromise().then((function(e){return e.$response.data.result}))},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.createLearningStandardsAlignment&&this.permissions.edit},getContentIdForGoalAlignment:function(){return"blackboard.data.content.Content;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},getSibling:function(e,t){var n=this;return this.$scope.$build().$send({method:"GET",url:this.$url()+"/"+e,params:{lessonContentId:t}}).$asPromise().then((function(e){return e.$response.data.id?n.$scope.$buildRaw(e.$response.data):null}))},getAttemptCount:function(){var e=this.getAssociatedGradingColumn();return this.$scope.$collection().$send({method:"GET",url:e["@id"]+"/attempts/count"}).$suppressErrorDialog().$asPromise().then((function(e){return e.$response.data.count}))},getTimeLimit:function(){return this.getDeployedAssessment()&&this.getDeployedAssessment().exceptions&&this.getDeployedAssessment().exceptions.length>0?this.getDeployedAssessment().exceptions[0].timeLimit:this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings?this.getDeployedAssessment().deploymentSettings.timeLimit:void 0},getExtraTime:function(){var e=this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;if(e&&e.softTimeLimit)return e.timeLimit-e.softTimeLimit},getTimedTestDetail:function(){var e=this.contentDetail&&this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings,t=null,n=null,r=e?this.getDeployedAssessment().deploymentSettings.softTimeLimit:null;e&&(n=this.getDeployedAssessment().deploymentSettings.timeLimit,t=this.getDeployedAssessment().deploymentSettings.timerCompletion);var i={timerCompletion:t,timeLimitSec:n?60*n:null,softLimitSec:r?60*r:null};return new v.a(i)},getSoftLinks:function(e){e=e||{};var t=this;return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/softLinks",params:{offset:e.offset,limit:e.limit,label:e.label}},(function(e){this.$unwrap(e.data),t.softLinks=this}))},update:function(){for(var e=this.$scope.$build(),t=0,n=Object.keys(this);t<n.length;t++){var r=n[t];e[r]=this[r]}return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id,data:e})},canEdit:function(){return this.permissions&&this.permissions.edit},canEditPartial:function(){var e=this.canEdit();if(this.contentDetail){var t=this.getDeployedAssessment();if(t){var n=t.permissions;n&&(e=e||n.modifyDueDate||n.view)}}return!!e},canEditAvailability:function(){return this.canEdit()||this.permissions&&this.permissions.modifyAvailability},canViewAsInstructor:function(){return this.canEdit()||this.permissions&&this.permissions.viewDesigner},canDelete:function(){return this.permissions&&this.permissions.delete},hasConversation:function(){return!!this.attachedForumLink},hasDueDateException:function(){return null!=this.dueDateExceptionType&&this.dueDateExceptionType!==y.c.NoAccommodation},hasGradingColumn:function(){return!!this.getAssociatedGradingColumn()},hasDueDate:function(){return this.genericReadOnlyData&&this.genericReadOnlyData.hasGradeColumn},isVisible:function(){return this.visibility&&b.ContentVisibility.Visible.isEqualTo(this.visibility)},isRestricted:function(){return this.visibility&&b.ContentVisibility.Restricted.isEqualTo(this.visibility)},isStarted:function(){return this.state===k.Started},isCompleted:function(){return this.state===k.Completed},isHidden:function(){return this.visibility&&b.ContentVisibility.Hidden.isEqualTo(this.visibility)},isVisibleToStudents:function(){return this.isAvailable&&!this.isPartiallyVisible&&!this.isConditionalRelease()},isHiddenFromStudents:function(){return!this.isAvailable&&!this.isPartiallyVisible},isConditionalRelease:function(){return!(!this.isAvailable||!(this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules.every((function(e){return e.criteria&&e.criteria.length}))||this.isLearningModule()&&this.contentDetail[p.r.ContentHandler.LearningModule.toString()].isSequential))},isForcedSequenceModule:function(){return this.isLearningModule()&&this.contentDetail[p.r.ContentHandler.LearningModule.toString()].isSequential},isInForcedSequenceModule:function(){return this.inSequence},isForcedSequenceItem:function(){return this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules[0]&&!!i.find(this.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"})},isActiveForcedSequenceModule:function(){return this.isForcedSequenceModule()&&this.hasProgressed},applyForcedSequence:function(e){this.contentDetail[p.r.ContentHandler.LearningModule.toString()].isSequential=e,this.children&&(this.children.forEach((function(t){t.inSequence=e,t.children&&t.children.forEach((function(t){return t.inSequence=e}))})),this.children.filter((function(e){return e.isAvailable})).forEach((function(t){t.isPartiallyVisible=e,e?i.has(t,"adaptiveReleaseRules.rules[0].criteria[0]")?t.adaptiveReleaseRules.rules[0].criteria.push({type:"Pre_Content"}):i.set(t,"adaptiveReleaseRules.rules[0].criteria[0]",{type:"Pre_Content"}):t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules&&t.adaptiveReleaseRules.rules[0].criteria.length&&(i.remove(t.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"}),t.adaptiveReleaseRules.rules[0].criteria.length&&(t.isAvailable=!0)),c.$broadcast("refresh-conditional-release-rules",t)})))},isConditionalReleaseWithVisibleButNotAccessible:function(){return this.isConditionalRelease()&&this.isPartiallyVisible},isConditionalReleaseWithHiddenFromStudent:function(){return this.isConditionalRelease()&&!this.isPartiallyVisible},isConditionalReleaseLocked:function(){var e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isRestricted()},isConditionalReleaseUnlocked:function(){var e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isVisible()},getVisibilityAsStudent:function(){return this.isVisibleToStudents()?b.ContentVisibility.Visible:this.isConditionalRelease()?b.ContentVisibility.Restricted:b.ContentVisibility.Hidden},getContentDisplay:function(){return u.a.create(this)},saveAlignedGoals:function(e){var t=this;return e&&(this.alignedGoals=e.map((function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals}}).$then((function(){t.$getPreviousVersion()&&(t.$getPreviousVersion().alignedGoals=t.alignedGoals)}))},saveAssignedGroups:function(e){var t,n,r=this;void 0===e&&(e=!1);var i=this.getDeployedAssessment(),o=this.contentHandler.toString(),s=w.a.parseByContentHandler(o),a={assignedGroups:this.assignedGroups,isGroupContent:this.isGroupContent},c=!e&&i&&i.deploymentSettings&&i.deploymentSettings.id&&1===i.deploymentSettings.attemptCount;if(c){var l={id:i.deploymentSettings.id,attemptCount:i.deploymentSettings.attemptCount,feedbackSettings:i.deploymentSettings.feedbackSettings};a.contentDetail=((t={})[o]=((n={})[s.toString()]={deployedAssessmentType:s.toString(),deploymentSettings:l},n),t)}return this.withParams({expand:"assignedGroups,selfEnrollmentGroups.group"}).$send({method:"PATCH",url:this.$url(),data:a},(function(e){this.isGroupContent=e.data.isGroupContent,this.assignedGroups=e.data.assignedGroups,this.selfEnrollmentGroups=e.data.selfEnrollmentGroups,c&&(i.gradingColumn.multipleAttempts=e.data.contentDetail[o][s.toString()].gradingColumn.multipleAttempts)})).$then((function(){var e=r.$getPreviousVersion();if(e&&(e.isGroupContent=r.isGroupContent,e.assignedGroups=r.assignedGroups,e.selfEnrollmentGroups=r.selfEnrollmentGroups,c)){var t=e.contentDetail[o][s.toString()];t.deploymentSettings.attemptCount=i.deploymentSettings.attemptCount,t.gradingColumn.multipleAttempts=i.gradingColumn.multipleAttempts}}))},removeTimeLimit:function(e){var t,n,r=this,i=this.contentHandler.toString(),o=w.a.parseByContentHandler(i);if(e&&o)return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:(t={},t[i]=(n={},n[o.toString()]={deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{attemptCount:e.attemptCount?e.attemptCount:1,timerCompletion:e.timerCompletion?e.timerCompletion:p.d.TimerCompletion.C}},n),t)}},(function(e){delete this.getDeployedAssessment().deploymentSettings.timeLimit,delete this.getDeployedAssessment().deploymentSettings.softTimeLimit,this.contentDetail[i].test.deploymentSettings.timerCompletion=e.data.contentDetail[i].test.deploymentSettings.timerCompletion})).$then((function(){r.$getPreviousVersion()&&(delete r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.timeLimit,delete r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.softTimeLimit,r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.timerCompletion=r.contentDetail[i].test.deploymentSettings.timerCompletion)}))},updateProctoringSettings:function(e){var t=this,r=n.defer(),i=function(e){if(E(t)&&E(e)){var n=e.contentHandler.toString(),r=e.contentDetail[n].test.deploymentSettings,i=t.contentDetail[n].test.deploymentSettings;if(i.proctoringServiceHandle=r.proctoringServiceHandle,i.proctoringServiceVendor=r.proctoringServiceVendor,i.proctoringDownloadUrl=r.proctoringDownloadUrl,i.isSecureBrowserRequiredToTake=r.isSecureBrowserRequiredToTake,i.isSecureBrowserRequiredToReview=r.isSecureBrowserRequiredToReview,i.isWebcamRequired=r.isWebcamRequired,t.$getPreviousVersion()){var o=t.$getPreviousVersion().contentDetail[n].test.deploymentSettings;o.proctoringServiceHandle=r.proctoringServiceHandle,o.proctoringServiceVendor=r.proctoringServiceVendor,o.proctoringDownloadUrl=r.proctoringDownloadUrl,o.isSecureBrowserRequiredToTake=r.isSecureBrowserRequiredToTake,o.isSecureBrowserRequiredToReview=r.isSecureBrowserRequiredToReview,o.isWebcamRequired=r.isWebcamRequired}}};return e?(i(e),r.resolve(this)):this.withParams({fields:"contentHandler,contentDetail"}).$send({method:"GET",url:this.$url()},(function(e){i(e.data),r.resolve(t)}),(function(){r.reject("Failed to fetch latest when updating proctoring settings.")})),r.promise},updateProctoringAssociation:function(e){var t,r,i=this,o=this.contentHandler.toString(),s=w.a.parseByContentHandler(o),a=n.defer();return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:(t={},t[o]=(r={},r[s.toString()]={deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{proctoringServiceHandle:e}},r),t)}},(function(e){i.updateProctoringSettings(e.data).then((function(){a.resolve(i)}))}),(function(){a.reject("Failed to update proctoring association.")})),a.promise},getProctoringLaunchLink:function(e){var t=n.defer(),r=s.a.apiBasePath+"/v1/courses/"+this.courseId+"/contents/"+this.id;return e&&(r+="/attempts/"+e),r+="/proctoring/launchLink",this.$send({method:"GET",url:r},(function(e){t.resolve(e.data.launchLink)}),(function(){t.reject("Failed to fetch assessment launch link.")})),t.promise},getProctoringServiceVendor:function(){var e=E(this);return null==e?null:e.proctoringServiceVendor||null},getProctoringServiceHandle:function(){var e=E(this);return null==e?null:e.proctoringServiceHandle||null},isSecureBrowserRequiredToTake:function(){var e=E(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isSecureBrowserRequiredToTake)},isSecureBrowserRequiredToReview:function(){var e=E(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isSecureBrowserRequiredToReview)},isWebcamRequired:function(){var e=E(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isWebcamRequired)},getProctoringDownloadUrl:function(){var e=E(this);return null==e?null:e.proctoringDownloadUrl||null},userNeedsToSelfEnrollInGroup:function(){return this.isGroupContent&&this.assignedGroups&&0===this.assignedGroups.length&&this.selfEnrollmentGroups&&this.selfEnrollmentGroups.length>0},setVisibility:function(e,t){switch(void 0===t&&(t=!0),this.adaptiveReleaseRules={startDate:null,endDate:null},e){case b.ContentVisibility.Visible:this.isAvailable=!0,this.isPartiallyVisible=!1;break;case b.ContentVisibility.Hidden:this.isAvailable=!1,this.isPartiallyVisible=!1;break;case b.ContentVisibility.Restricted:this.isAvailable=!0,this.isPartiallyVisible=t}},setTitle:function(e){this.title=e;var t=this.getAssociatedGradingColumn();t&&(t.columnName=e);try{this.getDeployedAssessment().assessment.title=e}catch(e){}},isUiFolder:function(){return b.ContentHandler.Folder.isEqualTo(this.contentHandler)&&!this.isBbPage()},isFolder:function(){return!!b.ContentHandler.Folder.isEqualTo(this.contentHandler)||!!b.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isBbPage:function(){if(this.contentDetail){var e=this.contentDetail[b.ContentHandler.Folder.toString()];if(b.ContentHandler.Folder.isEqualTo(this.contentHandler)&&e&&e.isBbPage)return!0;if(b.ContentHandler.Unknown.isEqualTo(this.contentHandler))return;return!1}return!1},isRoot:function(){return C.a.ROOT.isEqualTo(this.$pk)||C.a.INTERACTIVE.isEqualTo(this.$pk)},isAssignment:function(){return b.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)},isDocument:function(){return b.ContentHandler.Folder.isEqualTo(this.contentHandler)&&this.isBbPage()},isFile:function(){return b.ContentHandler.File.isEqualTo(this.contentHandler)},isLink:function(){return b.ContentHandler.ExternalLink.isEqualTo(this.contentHandler)},isLtiLink:function(){return b.ContentHandler.LtiLink.isEqualTo(this.contentHandler)},isTest:function(){return b.ContentHandler.TestLink.isEqualTo(this.contentHandler)},isScorm:function(){return b.ContentHandler.RusticiScorm.isEqualTo(this.contentHandler)},isGradedScorm:function(){return this.isScorm()&&!!this.getAssociatedGradingColumn()},isDiscussion:function(){return!!b.ContentHandler.Discussion.isEqualTo(this.contentHandler)||b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.isDiscussionInOutline()},isLearningModule:function(){return!!b.ContentHandler.LearningModule.isEqualTo(this.contentHandler)||!!b.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isDiscussionInOutline:function(){return this.getContentHandlerByIconUrl().isEqualTo(b.ContentHandler.Discussion)},getSafeAssignAttrs:function(){return this.extensionAttributes[A]},isSafeAssignOn:function(){return this.extensionAttributes&&this.getSafeAssignAttrs()},isSafeAssignEnabled:function(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().checkAttempts},canStudentViewReports:function(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().canStudentViewReports},canSubmitToGlobalReferenceDatabase:function(){return this.isSafeAssignOn()&&!this.getSafeAssignAttrs().excludeSubmissions&&this.getSafeAssignAttrs().globalSearch},canHaveAttempts:function(){return b.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)||b.ContentHandler.TestLink.isEqualTo(this.contentHandler)||b.ContentHandler.LtiLink.isEqualTo(this.contentHandler)||b.ContentHandler.LtiPlacement.startsWith(this.contentHandler)||b.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)||b.ContentHandler.Discussion.isEqualTo(this.contentHandler)||b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)||b.ContentHandler.Journal.isEqualTo(this.contentHandler)||this.isScorm()},canHaveSharedGradingColumn:function(){return b.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)},applyAvailabilitySettings:function(e){this.adaptiveReleaseRules=e.adaptiveReleaseRules,this.isAvailable=e.isAvailable,this.isPartiallyVisible=e.isPartiallyVisible},applyGroupSettings:function(e){this.isGroupContent=e.isGroupContent,this.assignedGroups=e.assignedGroups,this.selfEnrollmentGroups=e.selfEnrollmentGroups},addAndRevealAtIndex:function(e){this.$moveTo(e),this.$reveal()},findInTreeById:function(e,t){return this.findLoadedNodeByIdAndCache(e,t)},findLoadedNodeByIdAndCache:function(e,t,n){return void 0===n&&(n=3),null!=t&&t.id===e||(t=this.findLoadedNodeById(e,n)),t},findLoadedNodeById:function(e,t){if(t<0)return null;if(null==e&&null==this.id||e===this.id)return this;if(this.children){t--;for(var n=0;n<this.children.length;n++){var r=this.children[n].findLoadedNodeById(e,t);if(r)return r}}},moveTo:function(e,t,n){if(this.id!==t&&this.id!==n){this.$scope.$remove(this),this.$scope.fixPositions(),null!=t&&(n=void 0);var r=e.children.getInsertionIndex(t,n,!1,e.hasMoreChildren);null!=t&&0===r&&(t="start"),null==n||r!==e.children.length||e.hasMoreChildren||(n="end"),e.children.$add(this,r),this.$scope=e.children,this.$scope.fixPositions(),this.positionBefore=t,this.positionAfter=n,this.parentId=e.id,this.depth=null!=e.depth?e.depth+1:void 0}},shouldRestrict:function(){return!this.canEdit()&&this.isRestricted()},isQuestionAnalysisAvailable:function(){return this.isAssignment()||this.isTest()},updateState:function(e,t){var r=this;void 0===t&&(t=!1);var i=n.when(this);return this.inSequence?(this.state=e,t&&(i=this.$send({method:"PATCH",url:this.$url()+"/states/me",data:{state:e}}).$asPromise()),i.then((function(){return c.$broadcast("update-state",r,e),r}))):i}},Collection:{indexOfItemById:function(e){return this.$indexOf((function(t){return(t.id===e||null==t.id&&null==e)&&!t.ui.importPlaceholder}))},buildAndRevealAtPosition:function(e,t){var n=this.getInsertionIndex(e.positionBefore,e.positionAfter);if(n>-1){var r=this.$build(t);return r.addAndRevealAtIndex(n),null!=e.positionBefore&&(r.positionBefore=e.positionBefore),null!=e.positionAfter&&null==e.positionBefore&&(r.positionAfter=e.positionAfter),r}},getInsertionIndex:function(e,t,n,r){var i=null==n||n,s=-1;return null!=e&&(s="start"===o.lowercase(e)?0:this.indexOfItemById(e),!i&&s<0&&(s=0)),s<0&&null!=t&&("end"===o.lowercase(t)?null==r||r||(s=this.length):(s=this.indexOfItemById(t))>=0&&s++,!i&&s<0&&(s=this.length)),s},fixPositions:function(){for(var e=0;e<this.length;e++)this[e].position=e}}},$hooks:{"after-request":function(e){200===e.status&&(e.config.params&&e.config.params.fields||e.data.adaptiveReleaseRules||(this.adaptiveReleaseRules=null))},"before-request":function(e){if(!["/ROOT","/count","/softLinks"].some((function(t){return i.endsWith(e.url,t)}))&&"DELETE"!==e.method){e.params&&e.params.expand?i.includes(e.params.expand,"gradebookCategory")||(e.params.expand+=",gradebookCategory"):e.params=Object(r.__assign)({expand:"gradebookCategory"},e.params)}"PATCH"!==e.method&&"PUT"!==e.method||(e.data&&e.data.extensionAttributes&&(e.params&&e.params.expand?e.params.expand+=",extensionAttributes":e.params=Object(r.__assign)({expand:"extensionAttributes"},e.params)),e.data&&e.data.title&&this.extensionAttributes&&(e.data.extensionAttributes=this.extensionAttributes))},"before-render":function(e){if(d.a.peerAssessmentFeatureFlag){if(e.contentDetail){var t=this.getDeployedAssessment.call(e);if(t){var n=t.gradingColumn;n&&!n.peerGrading&&t&&t.peerSettings&&delete t.peerSettings}}}}}});return m.$extendRecord((function(e,t){if(t.contentHandler&&b.ContentHandler.CourseLink.isEqualTo(t.contentHandler))return{getDueDate:function(){return this.getLinkContentSource()&&this.getLinkContentSource().getDueDate()},hasDueDate:function(){return this.getLinkContentSource()&&this.getLinkContentSource().hasDueDate()}}})),m.$extendRecord((function(e,t){if(t.contentHandler&&b.ContentHandler.LtiLink.isEqualTo(t.contentHandler))return{getDueDate:function(){return this.getAssociatedGradingColumn()&&this.getAssociatedGradingColumn().dueDate},hasDueDate:function(){return this.hasGradingColumn()}}})),m.$extendRecord((function(e,t){if(t.contentHandler&&b.ContentHandler.RusticiScorm.isEqualTo(t.contentHandler))return{getAssociatedGradingColumn:function(e){var t=this.getScormGradebookItems(),n=null;return(n=e?t.find((function(t){return t.columnId===e})):t.find((function(e){return e.root}))||t[0])&&n.gradingColumn},getDueDate:function(){var e=this.getAssociatedGradingColumn();return e&&e.dueDate},hasDueDate:function(){return this.hasGradingColumn()},getScormGradebookItems:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.gradebookItems||[]},getScormLearningStandard:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.learningStandard||"UNKNOWN"},getScormAdvancedSettings:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.advancedSettings||{}},getScormReport:function(){var e={method:"GET",url:this.$url()+"/scormReport"},t=n.defer();return this.$scope.$collection().$send(e,(function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},isTinCan:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return!(!e||!D.TINCAN.isEqualTo(e.learningStandard))},hasReport:function(){return!this.isTinCan()&&!!this.getScormGradebookItems().length},setTitle:function(e){this.title=e;var t=this.getScormGradebookItems().find((function(e){return e.root}));t&&(t.title=e,t.gradingColumn.columnName=e)}}})),m}])},fmWv:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("In+A"),i=n("caKH"),o=function(){function e(e){var t=this;this.modalStackedMap=e,this.hasAngularModal=!1,this.hasReactModal=!1,this._started=!0,this.onReactModalChanged=function(e){t.hasReactModal=e,t.updateGuidanceState()},this.onAngularModalChanged=function(e){t.hasAngularModal=!!e,t.updateGuidanceState()},r.guidanceConnector.addWatcher(this)}return Object.defineProperty(e.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.startedCallback&&this.startedCallback(e)},enumerable:!0,configurable:!0}),e.prototype.start=function(){i.ModalManager.getInstance().addOnModalDisplayingChanged(this.onReactModalChanged),this.modalStackedMap.addTopListener(this.onAngularModalChanged)},e.prototype.onStateChanged=function(e){this.startedCallback=e},e.prototype.updateGuidanceState=function(){this.started=!this.hasReactModal&&!this.hasAngularModal},e}()},fzj8:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("UD9g"),a=n("Cxi4"),c=n("pjml"),l=n("TnpK"),u=n("g7Mf"),d=n("w9Zy"),p=n("nmzr"),m="ultra.course.engagement.router";r.module(m,[i.moduleName,l.b,a.a,s.b,u.b,o.b]).config([l.c,o.c,function(e,t){var r,m;e.peekState(p.EngagementRoutes.DISCUSSION,{abstract:!0,url:"/discussion",resolve:(r={translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}]},r[o.d]=t.resolve,r.canCreateAllContent=[a.b,l.d,function(e,t){return e.canCreateAllContent(t.nextParams.courseId)}],r.hasEditAvailabilityPermission=[a.b,l.d,function(e,t){return e.hasEditAvailabilityPermission(t.nextParams.courseId)}],r)}).peekState(p.EngagementRoutes.DISCUSSION_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.discussion",require:function(){return Promise.all([n.e(0),n.e(10),n.e(13),n.e(1),n.e(2),n.e(3),n.e(8),n.e(37),n.e(81),n.e(562)]).then(n.bind(null,"uypo"))},resolve:{translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[u.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[u.c,function(e){e.destroy()}]}).peekState(p.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,{url:"?view&disGroupId",panelClass:"full",views:{"engagement-edit@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(10),n.e(1),n.e(2),n.e(3),n.e(553)]).then(n.bind(null,"m3My"))}},"engagement-grade@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(27),n.e(1),n.e(9),n.e(11),n.e(31),n.e(80)]).then(n.bind(null,"4Rme"))}}},onEnter:[l.d,d.e,function(e,t){e.isPeekPanelOpen()&&t.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conditional-release","content-market","course-group","discussion-details","discussion-participants","discussion-settings",s.a,"lti","message","rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","discussion-feedback"],peekViewName:"discussion-peek@",pageTitle:"course.content.discussion",resolve:{currentContent:[l.d,o.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==c.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}],currentColumn:[l.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==c.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}}).peekState(p.EngagementRoutes.SUBMISSION_LIST,{url:"/grading/:columnId/detail?participantId&contentId&disGroupId",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(8),n.e(9),n.e(11),n.e(81),n.e(564)]).then(n.bind(null,"nbFo"))},resolve:(m={translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("components/directives/grade/submission-list")),n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),n.push(t.loadBundle("components/directives/discussion")),e.all(n)}]},m[o.d]=t.resolve,m.currentColumn=[l.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==c.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise()}],m.currentContent=[l.d,o.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==c.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}],m.memberships=[o.d,function(e){return e.memberships.$clear(),e.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise()}],m),pageTitle:"course.engagement.submissionTitle",peekStates:["message","discussion-feedback","rubric-evaluation"],peekViewName:"engagement-submissions-peek@"}).peekState(p.EngagementRoutes.DISCUSSION_SETTINGS,{url:"/settings?contentId&focusEleId",require:function(){return Promise.all([n.e(0),n.e(10),n.e(1),n.e(8),n.e(37),n.e(81),n.e(565)]).then(n.bind(null,"W67U"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/engagement/discussion-settings")])}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[u.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[u.c,function(e){e.destroy()}],pageTitle:"course.engagement.discussionSettingsTitle",peekViewName:"discussion-group",allowChildPeekStates:!0,peekStates:["course-group","goal-picker-legacy","rubric","rubric-view"]}).peekState(p.EngagementRoutes.DISCUSSION_PARTICIPANTS,{url:"/participants",require:function(){return n.e(655).then(n.bind(null,"IrK9"))},pageTitle:"course.engagement.participantsTitle"}).peekState("discussion-details",{url:"/details",require:function(){return Promise.all([n.e(1),n.e(577)]).then(n.bind(null,"DTfl"))},pageTitle:"course.engagement.discussionDetailsTitle",peekStates:["discussion-feedback"]}).peekState("discussion-feedback",{url:"/feedback?forumId&isReadOnlyPanel&columnId",require:[function(){return Promise.all([n.e(0),n.e(27),n.e(582)]).then(n.bind(null,"pq88"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(27),n.e(1),n.e(9),n.e(11),n.e(31),n.e(80)]).then(n.bind(null,"4Rme"))}],resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}],offCanvasArgs:["offCanvasArgs",function(e){return e.overlay=!1,e.disableFocusHandling=!0,e}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[u.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[u.c,function(e){e.destroy()}],pageTitle:"course.engagement.grade.feedback.viewFeedbackTitle"})}])},g66W:function(e,t,n){"use strict";function r(e,t,n){return n=n||"...",(e=e.trim()).length>t&&(e=e.slice(0,t)+n),e}function i(e,t,n){e=e.trim(),n=n||"...";var r=new RegExp("^(.{0,"+t+"})\\b.*$"),i=e.trim().replace(r,"$1");return e.length>t?i+n:i}function o(e,t,n){return n=n||"",e?e.replace(t,n):""}function s(e,t){return e&&t&&e.substring(e.length-t.length,e.length)===t||!1}function a(e,t){return 0===(e||"").indexOf(t)}n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"k",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"f",(function(){return f}));var c=document.createElement("textarea");function l(e){return c.innerHTML=e,c.value}function u(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")}function d(e){if(""===e||null==e)return"";var t=e.match(/(&#x[0-9A-Fa-f]{2};)*/g).filter((function(e){return 0!==e.length})),n=e;return t.forEach((function(e){n=n.replace(e,String.fromCharCode(parseInt(e.substr(3,2),16)))})),n}function p(e){return null!=e.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/)}function m(e){return null!=e.match(/[\-\s]/)}function f(e){var t=document.createElement("div");return t.innerHTML=e.replace(/\n/g," "),t.textContent}},g7Mf:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return C}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("Sa5G"),a=n("pjml"),c=n("0JpG"),l=n("oVrE"),u=n("nYZ0"),d=n("Fvsw"),p=n("Qbdf"),m=n("fYJU"),f=n("TnpK"),h=n("X/qj"),g=n("jhBu"),v=n("Cxi4"),b=n("g66W"),y=(n("SeO5"),"ultra.service.discussion"),S="discussionService",C="default",w=function(){function e(e,t,n,r,i,o,s,a,c,l,u,d,p,m){var f=this;this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$modal=r,this.courseModel=i,this.UserModel=o,this.context=s,this.contentService=a,this.ultraState=c,this.gradebookPermissionService=l,this.entitlementService=u,this.discussionPermission=d,this.contextUser=p,this.contextCourse=m,this.userCourseRoles={},this.userCourseAvailabilities={},this.canObserveGradebook=!1,this.canViewAssessments=!1,this.canViewGradebook=!1,this.canViewAttempts=!1,this.participantCount="-",this.hasEditPermission=!1,this.hasClassGroup=!1,this.initCount=0,this.$rootScope.$on("discussion-group-content-update",(function(e,t){f.hardLinkContent&&(f.hardLinkContent.applyGroupSettings(t),f.softLinkContent&&f.softLinkContent.id&&f.softLinkContent.applyGroupSettings(f.hardLinkContent))}))}return e.prototype.init=function(e){var t=this,n=this.ultraState.nextParams.contentId;if(this.initCount++,this.initCount>1){if(n===this.currentContentId)return this.$q.when();this.initCount=1,this.destroy(),this.initCount=1}return this.currentContentId=n,this.currentCourseId=this.contextCourse.courseId?this.contextCourse.courseId:this.ultraState.nextParams.courseId,this.groupId=this.ultraState.nextParams.disGroupId||"",this.userCourseAvailabilities[l.d()]=!0,this.courseMembershipsFetcher=e||this.courseModel.$new(this.currentCourseId).memberships,this.courseMembershipsFetcher.$resolve({limit:1e4}).$asPromise().then((function(e){e.forEach((function(e){var n=e.role.toString();n in a.y.toBeLocalizedRoleLabels?t.userCourseRoles[e.userId]=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(null),key:a.y.toBeLocalizedRoleLabels[n]}):t.userCourseRoles[e.userId]=n,t.userCourseAvailabilities[e.userId]=e.isAvailable}))})),this.resolveCourse().then((function(e){t.course=e,t.outlineRoot=t.contentService.findRootNode(t.course,a.r.ContentRootNode.ROOT),t.engagementRoot=t.contentService.findRootNode(t.course,a.r.ContentRootNode.INTERACTIVE),t.canObserveGradebook=t.gradebookPermissionService.canObserve(e.id),t.canViewGradebook=t.gradebookPermissionService.canView(e.id),t.canViewAttempts=t.gradebookPermissionService.canViewAttempts(e.id);var n,r=t.ultraState.nextParams.columnId;return n=r&&r!==a.F.CREATE_COLUMN_ID?t.course.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():t.$q.when(),t.$q.all([n,t.entitlementService.hasCourseEntitlement(s.j.ViewAssessment,t.course.id),t.discussionPermission.hasEditPermission(t.course.id)])})).then((function(e){var n=e[0],r=e[1],i=e[2];n&&(t.column=n),t.canViewAssessments=r,t.hasEditPermission=i}))},e.prototype.destroy=function(){this.initCount--,this.initCount>0||(this.course=void 0,this.userCourseRoles={},this.userCourseAvailabilities={},this.currentContentId=void 0,this.hardLinkContent=void 0,this.softLinkContent=void 0,this.engagementRoot=void 0,this.outlineRoot=void 0,this.canObserveGradebook=void 0,this.canViewAssessments=void 0,this.canViewGradebook=void 0,this.canViewAttempts=void 0,this.currentDiscussion=void 0,this.groupId=void 0,this.currentCourseId=void 0,this.column=void 0,this.assignedGroupsFiltersArray=void 0,this.assignedGroupsExcludingGroupSetGroups=void 0,this.selectedGroup=void 0,this.participantCount=void 0,this.loadDiscussionP=void 0,this.loadHardContentP=void 0,this.loadSoftContentP=void 0,this.hasEditPermission=void 0,this.hasClassGroup=void 0)},e.prototype.loadDiscussion=function(e,t){var n=this;return this.loadDiscussionP?this.loadDiscussionP:this.loadDiscussionP=this.loadHardContent().then((function(){return n.loadSoftContent()})).then((function(){return e&&(i.merge(n.hardLinkContent,e),n.hasGroups()?n.hardLinkContent.assignedGroups.some((function(e){return n.groupId===e.groupId}))||(n.groupId=n.hardLinkContent.assignedGroups[0].groupId):n.groupId=""),n.doLoadDiscussion(t)}))},e.prototype.doLoadDiscussion=function(e){var t=this;return void 0===e&&(e=this.forumId),this.course.forums.$new(e).messages.$fetch().$asPromise().then((function(e){t.currentDiscussion=e[0]}))},e.prototype.createDiscussion=function(){var e=this,t=this.ultraState.params,n=this.ultraState.includes("**.course.outline.**")?void 0:t.parentId;return this.loadDiscussionP=this.$q.all([this.buildDiscussion(),this.contentService.makeContentInContentTree(this.engagementRoot,this.contextCourse.courseId,n,t.positionBefore,t.positionAfter)]).then((function(t){var n=t[0],r=t[1];e.currentDiscussion=n,e.hardLinkContent=r.content,e.hardLinkContent.contentHandler=a.r.ContentHandler.Discussion,e.hardLinkContent.visibility=e.contentService.determineVisibility(e.hardLinkContent.isAvailable),e.hardLinkContent.isAvailable=e.currentDiscussion.isAvailable}))},e.prototype.newDiscussionPersist=function(e){var t=this,n=b.f(this.currentDiscussion.body.rawText),r=this.contentService.truncateDescription(n,u.c.MAX_LENGTH_IN_CONTENT_ITEM);return this.currentDiscussion.plaintextDescription=r,this.currentDiscussion.$patch(["body","plaintextDescription"]).$asPromise().then((function(){return t.doLoadDiscussion(e)})).then((function(){t.hardLinkContent.description=r,t.softLinkContent&&(t.softLinkContent.description=r)}))},e.prototype.loadHardContent=function(e){var t=this;if(void 0===e&&(e=!1),this.loadHardContentP)return this.loadHardContentP;var n=(e?"":"alignedGoals,")+"assignedGroups.group,selfEnrollmentGroups.group,extensionAttributes";return this.loadHardContentP=this.course.contents.$find(this.currentContentId,{expand:n}).$asPromise().then((function(e){return t.hardLinkContent=e}))},e.prototype.loadSoftContent=function(){var e=this;return this.hardLinkContent?this.loadSoftContentP?this.softLinkContent?this.$q.when(this.softLinkContent):this.loadSoftContentP:this.loadSoftContentP=this.hardLinkContent.getSoftLinks({label:"ROOT"}).$asPromise().then((function(t){if(t.length)return e.contentService.getOrMakeContentInContentTree(e.outlineRoot,e.course.id,t[0].courseContent).then((function(t){return e.softLinkContent=t.content}))})):this.$q.when()},e.prototype.persistNew=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.updateHardLinkContent(this.currentDiscussion),[4,this.hardLinkContent.$save().$asPromise()];case 1:return e=r.sent(),this.currentContentId=e.id,this.currentDiscussion=this.updateDiscussion(this.forumId),[4,this.currentDiscussion.$save().$asPromise()];case 2:return r.sent(),[4,this.discussionPermission.canCreateAllContent(this.currentCourseId)];case 3:return r.sent()?[3,5]:[4,this.ultraState.search("contentId",this.currentContentId)];case 4:return r.sent(),[2];case 5:return t=this.ultraState.params,n=t.parentId,i=t.positionBefore,o=t.positionAfter,this.ultraState.includes("**.course.engagement.**")&&(n=this.outlineRoot.id,i=null,o=null),[4,this.contentService.makeSoftLinkContentInContentTree(this.hardLinkContent,this.outlineRoot,this.contextCourse.courseId,n,i,o)];case 6:return(s=r.sent())?(this.softLinkContent=s,this.softLinkContent.title=this.hardLinkContent.title,[4,this.softLinkContent.$save().$asPromise()]):[3,8];case 7:r.sent(),r.label=8;case 8:return[4,this.ultraState.search("contentId",this.currentContentId)];case 9:return r.sent(),[2]}}))}))},e.prototype.expandUsersInParticipants=function(e,t){var n=this;if(void 0===t&&(t=!1),i.isEmpty(e))return this.$q.when(e);var r=e[0];if(null==r||null==r.userId)return this.$q.when(e);var o=e.map((function(e){return e.userId}));return(!t||this.contextCourse.usersCache.hit(o)?this.$q.when():this.courseMembershipsFetcher.$fetchIfNotExpanded({limit:1e4,expand:"user"}).$asPromise()).then((function(){return n.contextCourse.usersCache.fetchUsers(o,n.UserModel,n.$q).then((function(t){return e.forEach((function(e){e.data=t.get(e.userId)})),n.$q.when(e)}))}))},e.prototype.getParticipantCount=function(e){var t=this;return void 0===e&&(e=null),this.loadHardContent().then((function(){return e||(e=t.forumId),t.course.forums.$new(e).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING",groupId:t.groupId}).$then((function(e){return t.expandUsersInParticipants(e)})).$asPromise()})).then((function(e){t.participantCount=e.filter((function(e){return e.topLevelReplyCount+e.secondLevelReplyCount>0})).length}))},e.prototype.queryParticipants=function(e,t,n,r){var i=this;void 0===n&&(n=""),void 0===r&&(r=!1);var o={limit:t,q:n,offset:0,groupId:this.hasGroups()&&this.groupId||""};return this.course.forums.$new(e).usercounts.$fetch(o).$asPromise().then((function(e){return i.expandUsersInParticipants(e,r)}))},e.prototype.isPostFirstSatisfied=function(e,t){var n=this;return void 0===t&&(t=this.forumId),this.loadHardContent().then((function(){return n.course.forums.$new(t).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING"}).$then((function(e){return n.expandUsersInParticipants(e)})).$asPromise()})).then((function(t){var n=t.find((function(t){return t.data.id===e}));return!(!n||!n.topLevelReplyCount)}))},e.prototype.refreshParticipationGrade=function(){var e=this;if(!this.hasNoGroups())return this.resolveColumn().then((function(t){t&&(e.column=t,e.column.summary&&e.column.summary.$fetch&&(e.getParticipantCount(),e.column.summary.$fetch({groupId:e.groupId})))}));this.column=void 0},e.prototype.saveContent=function(){var e=this;return this.hardLinkContent.$patch().$then((function(){e.softLinkContent&&e.softLinkContent.id&&(e.softLinkContent.applyAvailabilitySettings(e.hardLinkContent),e.softLinkContent.$patch().$then((function(){e.$rootScope.$broadcast("content-update",e.softLinkContent)}))),e.$rootScope.$broadcast("content-update",e.hardLinkContent),e.$rootScope.$broadcast("attempt-base-content-update",e.hardLinkContent,e.course.id)})).$asPromise()},e.prototype.savePost=function(){this.currentDiscussion.plaintextDescription=this.contentService.truncateDescription(this.currentDiscussion.plaintextDescription,u.c.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent&&(this.hardLinkContent.description=this.currentDiscussion.plaintextDescription,this.hardLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.hardLinkContent)),this.softLinkContent&&(this.softLinkContent.description=this.currentDiscussion.plaintextDescription,this.softLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.softLinkContent))},e.prototype.loadGroup=function(e){var t=this;if(this.hasClassGroup=e,this.assignedGroupsFiltersArray=null,e){var n={name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"components.directives.conversation.classConversation"}),index:0,groupId:C,extraClass:""};this.assignedGroupsFiltersArray=new Array(n),this.selectedGroup=n}if(this.hasGroups()){var r=!1,i=e?1:0,o=this.hardLinkContent.assignedGroups.map((function(n){var o={name:!e||t.hasEditPermission?n.groupTitle:t.bbLocalize.translateSync({locale:"",key:"components.directives.conversation.myGroup"}),index:i++,groupId:n.groupId,isInGroupSet:!(!n.group||!n.group.groupSetId)};return t.groupId&&t.groupId===o.groupId&&(t.selectedGroup=o,r=!0),o}));this.assignedGroupsFiltersArray=this.assignedGroupsFiltersArray?this.assignedGroupsFiltersArray.concat(o):o,this.assignedGroupsExcludingGroupSetGroups=this.assignedGroupsFiltersArray.filter((function(e){return!e.isInGroupSet})),!r&&this.assignedGroupsFiltersArray.length&&(this.selectedGroup=this.assignedGroupsFiltersArray[0],this.groupId=this.selectedGroup.groupId,e||this.refreshParticipationGrade())}else this.groupId=""},e.prototype.clearGroups=function(){var e=this;this.hardLinkContent&&this.contentService.clearContentGroups(this.hardLinkContent,this.course).then((function(){e.groupId="",e.$rootScope.$broadcast("discussion-group-content-update",e.hardLinkContent),e.$rootScope.$broadcast("load-participants")}))},e.prototype.isGroupDiscussion=function(){return!!(this.hardLinkContent&&this.hardLinkContent.isGroupContent&&this.hardLinkContent.assignedGroups)},e.prototype.hasGroups=function(){return this.isGroupDiscussion()&&!!this.hardLinkContent.assignedGroups.length},e.prototype.hasNoGroups=function(){return this.isGroupDiscussion()&&!this.hardLinkContent.assignedGroups.length},e.prototype.isOpenFromConversation=function(){return!!this.ultraState.current.url&&this.ultraState.current.url.indexOf("conversations")>0},Object.defineProperty(e.prototype,"forumId",{get:function(){return this.contentService.parseForumId(this.hardLinkContent.contentDetailUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignedGoalsCount",{get:function(){return this.hardLinkContent&&this.hardLinkContent.alignedGoals?this.hardLinkContent.alignedGoals.length:0},enumerable:!0,configurable:!0}),e.prototype.updateHardLinkContent=function(e){this.hardLinkContent.title=e.subject,this.hardLinkContent.description=this.contentService.truncateDescription(e.plaintextDescription,u.c.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.contentDetail={"resource/x-bb-forumlink":{title:e.subject}}},e.prototype.buildDiscussion=function(){var e=this;return this.engagementRoot.$asPromise().then((function(){var t=!1;e.contentService.canOnlyCreateDiscussion(e.engagementRoot)&&(t=!0);var n=e.contextUser.userModel;return e.course.forums.$new().messages.$build({courseId:e.contextCourse.courseId,userId:n.id,postedName:n.userName,subject:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(null),key:"course.content.discussionTitlePlaceholder"}),body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:t})}))},e.prototype.updateDiscussion=function(e){var t=this.context.getServerTime();return this.course.forums.$new(e).messages.$build({subject:this.currentDiscussion.subject,id:null,forumId:e,parentId:"{unset id}",courseId:this.currentDiscussion.courseId,userId:this.currentDiscussion.userId,postedName:this.currentDiscussion.postedName,body:this.currentDiscussion.body,isDeleted:!1,postDate:t,editDate:t,isAvailable:this.currentDiscussion.isAvailable})},e.prototype.resolveCourse=function(){return this.contextCourse.course?this.contextCourse.course.$asPromise():this.courseModel.$find(this.currentCourseId).$asPromise()},e.prototype.refetchColumn=function(){return this.column?this.column.$fetch({expand:"associatedRubrics"}).$asPromise():this.resolveColumn()},e.prototype.hasViewGradebookColumnPermission=function(){return this.canViewGradebook||this.canViewAttempts||this.canViewAssessments||this.canObserveGradebook},e.prototype.resolveColumn=function(){var e=this;return this.column?this.column.$asPromise():this.loadDiscussion().then((function(){if(e.currentDiscussion.gradedColumn)return e.hasViewGradebookColumnPermission()?e.course.gradebook.columns.$new(e.currentDiscussion.gradedColumn.id).$fetch({expand:"associatedRubrics"}).$asPromise():e.$q.when(e.currentDiscussion.gradedColumn)}))},Object.defineProperty(e.prototype,"isGradedDiscussion",{get:function(){return this.currentDiscussion&&this.currentDiscussion.allowGrading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._groupId===C?"":this._groupId},set:function(e){var t=this._groupId;o.isArray(e)?this._groupId=e[0]:this._groupId=e,this._groupId&&this._groupId!==t&&(this.hasClassGroup?this.ultraState.search("groupId",this._groupId):this.ultraState.search("disGroupId",this._groupId))},enumerable:!0,configurable:!0}),e.$inject=[c.serviceName,"$rootScope","$q","$modal",a.o.serviceName,a.Qb.serviceName,d.b,u.e,f.d,h.b,g.b,v.b,m.b,p.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(w);o.module(y,[a.R,c.moduleName,d.a,u.d,f.b,h.a,g.a,v.a,a.R]).service(S,w)},gCXj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("wHJ2"),i=n("nsO7"),o=n("5Dl8"),s=n("TnpK"),a=n("w9Zy"),c=n("pjml"),l="ultra.course.coursemembershipmarkups",u="ultra.course.coursemembershipmarkups.service",d=function(){function e(){this.fn=[]}return e.prototype.onStyleRefresh=function(e){this.fn.push(e)},e.prototype.$get=function(){return this},e}();r.module(l,[c.R,s.b,a.d]).run([a.e,s.d,c.v.serviceName,"$rootScope",function(e,t,n,r){r.$on(a.c,(function(){t.params.courseId&&e.getTopElement().then((function(e){e.getElement().addClass("cc"+t.params.courseId)}))})),n.$mixHook("after-fetch-many",(function(){var e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];e&&r.$broadcast("course-"+e+"-memberships-after-fetch",Array.prototype.slice.apply(this))}))}]).provider(u,d).directive("bbCourseMembershipMarkups",[u,function(e){return{restrict:"A",scope:!1,link:function(t,n,s){var a=s.bbCourseMembershipMarkups,c="css_course_"+a+"_membership",l={},u=i.once((function(){var e=r.element(document).find("#"+c);return 0===e.length&&(e=r.element('<style id="'+c+'"></style>').appendTo("head"),t.$on("$destroy",(function(){e.remove()}))),e}));t.$on("course-"+a+"-memberships-after-fetch",(function(t,n){t.preventDefault();var r=u();(n=i(n).filter((function(e){return null!=(e.userId||e.user.id)})).map((function(e){return e.userId=e.userId||e.user.id,e})).value()).forEach((function(t){var n=new o.a,r=n.selector(".cc"+a);e.fn.forEach((function(e){e(r,t)})),l[t.id]=n.build()}));var s=i(l).sortBy().map((function(e,t){return e})).join("\n");s!==r.text()&&r.text(s)})),t.$on("course-"+a+"-memberships-before-fetch",(function(e,t){e.preventDefault();var n=t.params||{};n.fields&&(n.fields+=",courseId,dueDateExceptionType,timeLimitExceptionType")}))}}}])},gOJg:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("JzsJ");var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.contentCreate.routes";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-manage.create.document",{panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},reloadOnSearch:!1,peekViewName:"document-peek@",url:"/document",require:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(8),n.e(16),n.e(39),n.e(44),n.e(91),n.e(132)]).then(n.bind(null,"HjlN"))},peekStates:["content-manage.edit.document","document-settings","conversations","edit-file-settings","message","lti","content-market","content-collection","conditional-release"],pageTitle:"course.content.document.title"}).peekState("content-manage.edit.document",{panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},peekViewName:"document-peek@",url:"/document/:id?courseId",require:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(8),n.e(16),n.e(39),n.e(44),n.e(91),n.e(132)]).then(n.bind(null,"HjlN"))},peekStates:["document-settings","conversations","edit-file-settings","message","lti","content-market","conditional-release"],pageTitle:"course.content.document.title"}).peekState("document-settings",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/document-settings/:id",params:{focusEleId:null},require:function(){return Promise.all([n.e(7),n.e(1),n.e(2),n.e(3),n.e(16),n.e(36),n.e(576)]).then(n.bind(null,"Ynio"))},peekViewName:"document-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.document.settings.header"}),e.peekState("content-manage",{abstract:!0,peekStates:["gradebook-item"]}).peekState("content-manage.create",{url:"/create?parentId&positionBefore&positionAfter&id",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},peekStates:["discussion","gradebook-item","journal"],require:[function(){return Promise.all([n.e(16),n.e(593)]).then(n.bind(null,"a0Ud"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.createItem"}).peekState("content-manage.create.folder",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/folder",require:[function(){return Promise.all([n.e(16),n.e(154)]).then(n.bind(null,"1wJd"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.createFolder"}).peekState("content-manage.create.link",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/link",require:[function(){return Promise.all([n.e(16),n.e(145)]).then(n.bind(null,"KYun"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLink"}).peekState("content-manage.create.lti",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/lti",require:[function(){return Promise.all([n.e(16),n.e(146)]).then(n.bind(null,"7OXB"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLti"}).peekState("content-manage.create.file",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/file",require:[function(){return Promise.all([n.e(16),n.e(143)]).then(n.bind(null,"ebp7"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.fileTitlePlaceholder"}).peekState("content-manage.edit",{abstract:!0,resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}]},url:"/edit"}).peekState("content-manage.edit.folder",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/folder/:id?focusEleId",require:[function(){return Promise.all([n.e(16),n.e(154)]).then(n.bind(null,"1wJd"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekStates:["conditional-release"],allowChildPeekStates:!0,pageTitle:"course.content.editFolder"}).peekState("content-manage.edit.file",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/file/:id?focusEleId",require:[function(){return Promise.all([n.e(16),n.e(143)]).then(n.bind(null,"ebp7"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekViewName:"file-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.file"}).peekState("content-manage.edit.link",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/link/:id?focusEleId",require:[function(){return Promise.all([n.e(16),n.e(145)]).then(n.bind(null,"KYun"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.editLink"}).peekState("content-manage.edit.lti",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/lti/:id?focusEleId",require:[function(){return Promise.all([n.e(16),n.e(146)]).then(n.bind(null,"7OXB"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.editLti"}).peekState("content-manage.edit.placement",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/placement/:id",require:[function(){return Promise.all([n.e(16),n.e(691)]).then(n.bind(null,"1xSQ"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],peekStates:["conditional-release"],allowChildPeekStates:!0,pageTitle:"course.content.editPlacement"}).peekState("content-manage.import",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/import/content-import"),t.loadBundle("features/course/content/course-content")])}]},url:"/import?parentId&targetCourseId&oneDriveButtonId&positionBefore&positionAfter",require:[function(){return Promise.all([n.e(39),n.e(611)]).then(n.bind(null,"dTsQ"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.import.title"}).peekState("content-manage.copy",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/copy/content-copy"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/organization/content/copy/content-copy")])}]},url:"/copy?parentId&targetCourseId&positionBefore&positionAfter&depth",require:[function(){return Promise.all([n.e(15),n.e(643)]).then(n.bind(null,"9fW2"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(15),n.e(1),n.e(2),n.e(3),n.e(17)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.copy.title"}).peekState("content-manage.import-report",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},url:"/importReport/:id",require:function(){return Promise.all([n.e(78),n.e(697)]).then(n.bind(null,"O9bg"))},pageTitle:"ultra.convert.analysis.importDetailsTitle"}).peekState("content-manage.copy-details",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},url:"/copyDetails",require:function(){return Promise.all([n.e(78),n.e(690)]).then(n.bind(null,"EdNC"))},pageTitle:"ultra.convert.analysis.copyDetailsTitle"})}])},gSbt:function(e,t,n){},gZo5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o="ultra.services.messaging",s="crossWindowMessaging",a="ultra.crossWindowMessagingService",c=function(){function e(e){var t=this;this.$rootScope=e,this.broadcastChannel=new BroadcastChannel(a),this.onMessage=this._onMessage.bind(this),this.broadcastChannel.addEventListener("message",this.onMessage),e.$on("$destroy",(function(){t.broadcastChannel.close(),t.broadcastChannel.removeEventListener("message",t.onMessage)}))}return e.prototype._onMessage=function(e){var t=e.data;this.$rootScope.$broadcast(t.type,t.message)},e.prototype.postMessage=function(e,t){this.broadcastChannel.postMessage({type:e,message:t})},e.$inject=["$rootScope"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(o,[]).service(s,c)},gkef:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o="ultra.services.windowSize",s="windowSizeService",a=100,c=function(){function t(t){var n=this;this.$rootScope=t,this.SMALL_SIZE_MAX=40,this.MEDIUM_SIZE_MAX=64,this.LARGE_SIZE_MAX=90,this.hasQueuedRefreshWindowSizeEm=!1,this.currentWindowSizeEm=e(window).width()/parseFloat(e("html").css("font-size")),this.$rootScope.$watch((function(){n.hasQueuedRefreshWindowSizeEm||(n.hasQueuedRefreshWindowSizeEm=!0,setTimeout((function(){n.refreshCurrentWindowSizeEm()}),a))}))}return t.prototype.refreshCurrentWindowSizeEm=function(){var t=this,n=window.innerWidth/parseFloat(e("html").css("font-size"));n!==this.currentWindowSizeEm&&this.$rootScope.$apply((function(){t.currentWindowSizeEm=n,t.$rootScope.$broadcast("window-resize",t.currentWindowSizeEm)})),this.hasQueuedRefreshWindowSizeEm=!1},t.prototype.isSmallBreakpoint=function(){return this.currentWindowSizeEm<=this.SMALL_SIZE_MAX},t.prototype.isMediumBreakpoint=function(){return this.currentWindowSizeEm>this.SMALL_SIZE_MAX&&this.currentWindowSizeEm<=this.MEDIUM_SIZE_MAX},t.prototype.isLargeBreakpoint=function(){return this.currentWindowSizeEm>this.MEDIUM_SIZE_MAX},t.prototype.getBreakpointSize=function(){return this.currentWindowSizeEm<=this.SMALL_SIZE_MAX?"small":this.currentWindowSizeEm<=this.MEDIUM_SIZE_MAX?"medium":"large"},t.prototype.isWindowSizeAtLeast=function(e){return this.currentWindowSizeEm>=e},t.$inject=["$rootScope"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(o,[]).service(s,c)}).call(this,n("5iHu"))},gm4d:function(e,t,n){"use strict";var r=n("D57K"),i=function(e,t){var n={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1};return!(e in n)||n[e]},o={"https://ultra-integ.int.bbpd.io":i,"https://ultra-canary.bbpd.io":i},s=n("Q/M7"),a=Object(r.__assign)({},{baseMessagesPageRefactor:!0,batchRestAPI:!0,collab:!0,componentDemos:!1,courseNotice:!1,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,differentiatedFeedback:!0,externalCourse:!1,gradebookSearchFilterM2:!0,gradebookSearchFilterM3:!0,guestAccessToOriginalCourseCatalog:!0,instructorPushNotifications:!0,httpEase:!0,journal:!1,learnApiCaching:!0,learningModule:!0,notificationAdmin:!0,offcanvasPausalScope:!0,organizationA4L:!1,organizationPredict:!1,originalCourseMessage:!0,overallGradeAlert:!1,peerAssessmentFeatureFlag:!1,perAssessmentSettings:!0,predictSisCards:!1,questionResponseTextAttachmentUpload:!0,questionRegrading:!0,reactAssessmentsSettings:!1,sharedNotesEditing:!0,studentPreview:!0,targetedNotificationMilestone3:!1,unsubmittedZeroM1:!0,useBbmlInDiscussion:!0}),c=o[s.j()];if("all"===c)for(var l=0,u=Object.keys(a);l<u.length;l++){a[m=u[l]]=!0}else if("function"==typeof c)for(var d=0,p=Object.keys(a);d<p.length;d++){var m;a[m=p[d]]=c(m,a[m])}else null!=c&&Object.assign(a,c);t.a=a},go4a:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=function(e,t){var n;return"static/images/default-banners/"+(e.course&&e.course.isOrganization?"structure":"nature")+(void 0===(n=e.courseCardColorIndex)&&(n=0),void 0===n&&(n=0),n%20+1)+(t?"_thumb":"")+".jpg"},i=function(e){return e.course&&e.course.isClassic()?"course-color-classic":"course-color-"+(void 0===(t=e.courseCardColorIndex)&&(t=0),t%10+1);var t},o=function(e){return r(e,!1)},s=function(e){return r(e,!0)}},hWgD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.partner-tool.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("partner-tool",{abstract:!0,url:"/partners/:partnerId"}).peekState("partner-tool.tool",{url:"/tools/:toolType?partnerParentId&mode",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content-market/content-market")}]},params:{partnerTitle:"",toolHref:"",returnState:null},panelClass:"full",require:function(){return Promise.all([n.e(13),n.e(142),n.e(647)]).then(n.bind(null,"HgnN"))},pageTitle:"course.partnerTool.partnerTool"})}])},hkqm:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("wHJ2"),i=n("H8CZ"),o=n("0JpG"),s=n("3FFP"),a=n("GbAM"),c=n("n1KZ"),l=n("lBPC"),u="ultra.services.toast",d="toast",p=function(){function e(e,t,n,r,i){this.$compile=e,this.$q=t,this.$rootScope=n,this.$timeout=r,this.localize=i,this.toastQueue=[]}return e.prototype.show=function(t){var n=this;if(!t)throw new Error("args is required");if(!t.messageKey)throw new Error("messageKey is required");this.setUpToast({bundlePromise:t.bundle?this.localize.loadBundle(t.bundle):this.$q.when(),createScope:function(){var e=n.$rootScope.$new(!0);return e.message=n.localize.translateSync({locale:t.locale||n.localize.getLocale(e),key:t.messageKey,params:t.translationParams,noWrap:!0,noEscape:!0}),e.shortMessage=t.shortMessageKey&&n.localize.translateSync({locale:t.locale||n.localize.getLocale(e),key:t.shortMessageKey,params:t.translationParams,noWrap:!0,noEscape:!0}),e.icon=t.icon||"icon-alert-triangle",e.toastClass=t.toastClass,e.toastStatus=t.toastStatus,e},triggerToastClose:function(r,i,o,s){i.$root.$broadcast(a.b,i.message);var c=function(){if(i.isActive){var o=t.durationMS||e.DEFAULT_DISPLAY_MS;n.toastQueue.length>1&&(o=Math.min(e.RUSH_DISPLAY_MS,o)),(new Date).getTime()-r.startTime>=o?s():n.$timeout(c,1e3,!1)}};c(),n.$timeout((function(){o.addClass("is-active")}),0,!1)},onCloseToast:this.closeToast,template:c})},e.prototype.showLoading=function(e){var t=this;if(!e)throw new Error("args is required");if(!e.trayId)throw new Error("messageKey is required");e.promise.then((function(){return e.promise.done=!0}));return this.setUpToast({bundlePromise:this.$q.when(),createScope:function(){var n=t.$rootScope.$new(!0);return n.trayId=e.trayId,n.trayLocalizationKeysPrefix=e.trayLocalizationKeysPrefix,n},triggerToastClose:function(t,n,r,i,o){e.promise.then((function(){i()}),(function(){o()})),n.$root.$broadcast(s.a.LoadMoreResults.eventName,e.trayId,e.promise,null,!0,e.delayTime)},template:l,footerCss:e.footerCss,promise:e.promise})},e.prototype.setUpToast=function(e){var t,n=this,i=this.$q.defer(),o=this.toastQueue[this.toastQueue.length-1]||this.$q.when();return this.toastQueue.push(i.promise),this.$q.all([o,e.bundlePromise]).then((function(){if(i.startTime=(new Date).getTime(),!e.promise||!e.promise.done){var o,s=e.createScope(),a=function(){e.onCloseToast&&e.onCloseToast(s,o),n.cleanUpToast(i,s,o)};return t=function(){n.cancelToast(i,s,o)},s.isActive=!0,s.toastClicked=function(){a()},o=n.$compile(e.template)(s),r.element(document.body).append(o),o.addClass(e.footerCss),e.triggerToastClose(i,s,o,a,t),i.promise}i.resolve()})).then((function(){n.toastQueue.shift()})),function(){return t&&t()}},e.prototype.closeToast=function(e,t){e.isActive&&t.removeClass("is-active")},e.prototype.cleanUpToast=function(e,t,n){var r=this;t.isActive&&(t.isActive=!1,i.b(n,(function(){r.cancelToast(e,t,n)})))},e.prototype.cancelToast=function(e,t,n){e.resolve(),n.remove(),t.$destroy()},e.DEFAULT_DISPLAY_MS=6e3,e.RUSH_DISPLAY_MS=3e3,e.$inject=["$compile","$q","$rootScope","$timeout",o.serviceName],e}();r.module(u,[o.moduleName,s.b]).service(d,p)},hlSw:function(e,t,n){"use strict";var r=n("nsO7"),i=n("wHJ2"),o=n("nYZ0"),s=n("Qbdf"),a=n("oi1r"),c=n("P2dS"),l=n("0JpG"),u=n("pjml"),d=n("TnpK"),p=n("ZQFV"),m=function(){function e(){}return e.currentColumn=[d.d,s.d,"currentContent",function(e,t,n){if(n){var r=e.params.columnId||e.nextParams.columnId;return t.gradebook.columns.$buildRaw(n.getAssociatedGradingColumn(r)).$asPromise().then((function(e){return null==e.rubricAssociations?e.$fetch({expand:"associatedRubrics,externalGrade"}).$asPromise().then((function(e){return e.$asPromise()})):e.$asPromise()}))}var i=e.nextParams.columnId;if(i&&i!==u.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(i,{expand:"associatedRubrics,externalGrade"}).$asPromise()}],e.assignmentContent=[s.d,d.d,function(e,t){var n=t.nextParams.contentId?t.nextParams.contentId:t.nextParams.id;if(n){return e.contents.$find(n,{expand:"alignedGoals,assignedGroups,isGroupContent,permissions,extensionAttributes"}).$asPromise()}}],e.assessmentContent=[s.d,"$q",l.serviceName,o.e,d.d,a.b,c.b,function(e,t,n,o,s,a,c){if(s.nextParams.contentId!==u.r.CREATE_CONTENT_ID)return o.getContentInContentTree(o.findRootNode(e,u.r.ContentRootNode.ROOT),e.id,s.nextParams.contentId).then((function(e){return e.content.$asPromise()}));var l=t.defer();return a.loadSchemas(e).then((function(t){o.getOrMakeContentInContentTree(o.findRootNode(e,u.r.ContentRootNode.ROOT),e.id,void 0,s.nextParams.parentId,s.nextParams.positionBefore,s.nextParams.positionAfter).then((function(o){var a=o.content,d=r.find(t,(function(e){return u.J.ScaleType.Score.isEqualTo(e.scaleType)})),m=s.nextParams.gradebookCategoryId,f=null;c.getOrLoadCategoriesForCourse(e.id).then((function(e){f=r.find(e,(function(e){return e.id===m}))})).then((function(){a.courseId=e.id,a.contentHandler=u.r.ContentHandler.TestLink,a.body={};var t="course.grades.gradebook-item.title.default."+(f?f.isUserDefined?"custom":f.title:"test"),r=f&&f.isUserDefined?{today:new Date,title:f.title}:{today:new Date};a.title=n.translateSync({locale:e&&e.locale,key:t,params:r,noWrap:!0}),a.setupAssessmentContentDetail(d.id,f),a.setVisibility(u.r.Visibility.Hidden),a.getAssociatedGradingColumn().visible=!1,a.getAssociatedGradingColumn().possible=p.Utils.GRADE_DEFAULT_POINTS,a.ui.hasConversationAttached=!1,a.permissions={edit:!0},a.$save().$asPromise().then((function(){l.reject(),s.go(s.next.name,i.extend(s.nextParams,{contentId:a.id,gradeitemView:"details",isCreateState:!0,parentId:void 0,positionBefore:void 0,positionAfter:void 0}))}))}))}))})),l.promise}],e.currentContent=[s.d,"$injector",d.d,"translations",function(t,n,r){return-1===r.next.name.indexOf("gradebook-item.assessment")&&-1===r.next.name.indexOf("gradebook-item.scorm-submissions")?n.invoke(e.assignmentContent,null,{currentCourse:t}):n.invoke(e.assessmentContent,null,{currentCourse:t})}],e.nullContent=[function(){return null}],e}();t.a=m},hlUp:function(e,t){e.exports='<div id="aria-live-polite-region-1" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-polite-region-2" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-assertive-region-1" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>\n<div id="aria-live-assertive-region-2" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>'},hqh6:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("XLiA"),n("t3ZG"),n("xjJw");var r=n("nsO7"),i=n("5iHu"),o=n("wHJ2"),s=n("0JpG"),a=n("WShm"),c=n("oQrK"),l=n("XGja"),u=n("+4Px"),d=n("wgY5"),p=n("V6ed"),m="ultra.components.directives.datepicker",f=function(){function e(e,t,n,r,i,o,s,a){var c=this;this.scope=e,this.element=t,this.attrs=n,this.model=r,this.$transclude=i,this.bbLocalize=o,this.bbValidateDate=s,this.$compile=a,this.attrs.firstDayOfWeek?this.scope.$watch(""+this.attrs.firstDayOfWeek,(function(e){void 0!==e&&(c.weekStart=e,c.initialize())})):this.initialize()}return e.prototype.initialize=function(){var e=this,t=this.bbLocalize.getLocale(this.scope);null==this.attrs.bbValidateDate&&(this.attrs.bbValidateDate="short",this.bbValidateDate[0].compile(this.element,this.attrs,void 0)(this.scope,this.element,this.attrs,this.model,this.$transclude));if(!c.a.detect().desktop()&&window.Modernizr.inputtypes.date){if(this.setupNativeDatePicker(),this.attrs.$set("type","date"),this.element.removeAttr("placeholder"),this.attrs.bbTranslateAttrs){var r=this.scope.$eval(this.attrs.bbTranslateAttrs);r.placeholder&&(delete r.placeholder,this.attrs.bbTranslateAttrs=JSON.stringify(r))}}else{this.bbLocalize.loadBundle("components/directives/datepicker").then((function(){null==e.attrs.placeholder&&e.attrs.$set("placeholder",e.bbLocalize.translateSync({locale:t,key:"components.directives.datepicker.dateFormatPlaceholder"}));var n=e.bbLocalize.translateSync({locale:t,key:"components.directives.datepicker.ariaLabel.datepickerButton"});e.widgetButton=e.$compile('<button class="open-datepicker super-clear" aria-label="'+n+'" type="button"><bb-svg-icon size="small" icon="calendar"></bb-svg-icon></button>')(e.scope),e.updateReadOnlyState(),e.attrs.$observe("disabled",(function(t){e.updateReadOnlyState()})),e.attrs.$observe("readonly",(function(t){e.updateReadOnlyState()}))}));var i=this.bbLocalize.preProcessFormatterLocale(t).replace(/_/g,"-");["zh-TW","zh-CN","rs-latin","pt-BR","nl-BE"].indexOf(i)<0&&(i="en-SC"===i?"ar":"ko-KR"===i?"kr":i.substring(2,0)),this.attrs.$set("type","text");var o=this.bbLocalize.isRTL(this.scope),s="left",a="right";o&&(s="right",a="left");var l={todayHighlight:!0,autoclose:!0,forceParse:!1,keyboardNavigation:!1,language:i,weekStart:this.weekStart,rtl:o,showOnFocus:!1,startDate:new Date("1932-01-01"),templates:{leftArrow:'<div class="icon-arrow-'+s+'"></div>',rightArrow:'<div class="icon-arrow-'+a+'"></div>'}};"en"===i?this.setupBootstrapDatePicker(l):(i="bootstrap-datepicker."+i,n.e(541).then(function(){n("OfSV")("./"+i).then((function(){e.setupBootstrapDatePicker(l)}))}.bind(null,n)).catch((function(){}))),this.scope.$on("$destroy",(function(){e.element.datepicker("destroy")}))}},e.prototype.setupNativeDatePicker=function(){var e=this;this.scope.$watch((function(){return e.model.$modelValue}),(function(t){t&&(e.element.val(d(t).format("YYYY-MM-DD")),e.element.triggerHandler("change"),e.model.$render())}))},e.prototype.setupBootstrapDatePicker=function(e){var t=this;this.element.datepicker(e).data("datepicker");this.scope.$watch((function(){return t.model.$modelValue}),(function(){t.updateDatepicker()})),this.element.on("changeDate",(function(e){e.date&&(t.element.val(e.date.getFullYear()+"-"+(e.date.getMonth()+1)+"-"+e.date.getDate()),t.element.triggerHandler("change"),t.model.$render())}));var n=this.element.data("datepicker");n.isInput=!1,this.element.unbind("keyup",n._events[0][1].keyup),this.element.on("show changeMonth changeYear",(function(e){t.datepickerDropdownElement=i(".datepicker-dropdown"),t.iconArrowLeft=t.datepickerDropdownElement.find(".icon-arrow-left"),t.iconArrowRight=t.datepickerDropdownElement.find(".icon-arrow-right"),t.openDatepickerButton=t.element.siblings("button.open-datepicker");var n=[];t.datepickerDropdownElement.find("td.day").not(".old").not(".new").each((function(){n.push(i(this))})),t.currentMonthDays=n,t.datepickerDropdownElement.on("keydown",(function(e){e.keyCode===u.g&&(t.openDatepickerButton.focus(),t.element.datepicker("hide"))})),t.iconArrowLeft.add(t.iconArrowRight).on("blur",(function(){t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true")})),t.iconArrowLeft.off("keydown").on("keydown",(function(e){e.preventDefault(),e.keyCode!==u.g&&e.stopPropagation(),e.keyCode===u.t||e.keyCode===u.f?(t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),t.goToPreviousMonth()):e.keyCode===u.u&&(e.shiftKey?(t.openDatepickerButton.focus(),t.element.datepicker("hide")):t.focusElement(t.iconArrowRight))})),t.iconArrowRight.off("keydown").on("keydown",(function(e){e.preventDefault(),e.keyCode!==u.g&&e.stopPropagation(),e.keyCode===u.t||e.keyCode===u.f?(t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),t.goToNextMonth()):e.keyCode===u.u&&(e.shiftKey?t.focusElement(t.iconArrowLeft):t.focusDefaultDay())})),t.updateAriaRolesAndStates(t.getViewDate(),e.date),t.setUpKeyboardNavigation(),"show"===e.type&&(t.datepickerDropdownElement.find("tfoot").remove(),t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true"),t.datepickerDropdownElement.on("keyup",(function(e){e.stopPropagation()})),t.focusDefaultDay())}))},e.prototype.updateDatepicker=function(){var e=this.model.$modelValue,t=this.element.data("datepicker");if(o.isDate(e)&&t){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDate();r&&r.getTime()===n.getTime()||(t.dates.replace([n]),t.viewDate=n,t.fill())}},e.prototype.updateReadOnlyState=function(){var e=this;this.element.prop("disabled")||this.element.prop("readonly")?this.widgetButton.remove():this.element.next()!==this.widgetButton&&(this.widgetButton.click((function(t){e.element.datepicker("show")})),this.element.after(this.widgetButton))},e.prototype.focusDefaultDay=function(){var e=r.find(this.currentMonthDays,(function(e){return e.hasClass("active")})),t=null!=e?e:this.currentMonthDays[0];this.focusElement(t)},e.prototype.focusPreviousDay=function(){var e=this.getActiveElementIndex();0===e?(this.goToPreviousMonth(),this.focusLastDayOfMonth()):this.focusElement(this.currentMonthDays[e-1])},e.prototype.focusNextDay=function(){var e=this.getActiveElementIndex();e<this.currentMonthDays.length-1?this.focusElement(this.currentMonthDays[e+1]):(this.goToNextMonth(),this.focusElement(this.currentMonthDays[0]))},e.prototype.focusSameWeekdayOfPreviousWeek=function(){var e=this.getActiveElementIndex();if(e-7>=0)this.focusElement(this.currentMonthDays[e-7]);else{var t=7-e;this.goToPreviousMonth(),this.focusElement(this.currentMonthDays[this.currentMonthDays.length-t])}},e.prototype.focusSameWeekdayOfNextWeek=function(){var e=this.getActiveElementIndex();if(e+7<this.currentMonthDays.length)this.focusElement(this.currentMonthDays[e+7]);else{var t=e+7-this.currentMonthDays.length;this.goToNextMonth(),this.focusElement(this.currentMonthDays[t])}},e.prototype.focusSameDayOfPreviousMonth=function(){this.focusSameDayOfAdjacentMonth(-1)},e.prototype.focusSameDayOfNextMonth=function(){this.focusSameDayOfAdjacentMonth(1)},e.prototype.focusSameDayOfAdjacentMonth=function(e){var t=this.getActiveElementIndex();e>0?this.goToNextMonth():this.goToPreviousMonth(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()},e.prototype.focusSameDayOfPreviousYear=function(){this.focusSameDayOfAdjacentYear(-1)},e.prototype.focusSameDayOfNextYear=function(){this.focusSameDayOfAdjacentYear(1)},e.prototype.focusSameDayOfAdjacentYear=function(e){var t=this.getActiveElementIndex();e>0?this.goToNextYear():this.goToPreviousYear(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()},e.prototype.focusFirstDayOfMonth=function(){this.focusElement(this.currentMonthDays[0])},e.prototype.focusLastDayOfMonth=function(){this.focusElement(this.currentMonthDays[this.currentMonthDays.length-1])},e.prototype.focusElement=function(e){e.attr("tabindex","-1").focus()},e.prototype.getViewDate=function(){return this.element.data("datepicker").viewDate},e.prototype.setViewDate=function(e){this.element.data("datepicker").viewDate=e},e.prototype.getActiveElementIndex=function(){return r.findIndex(this.currentMonthDays,(function(e){return e.attr("id")===i(document.activeElement).attr("id")}))},e.prototype.goToPreviousMonth=function(){this.moveMonth(-1)},e.prototype.goToNextMonth=function(){this.moveMonth(1)},e.prototype.goToPreviousYear=function(){this.moveYear(-1)},e.prototype.goToNextYear=function(){this.moveYear(1)},e.prototype.moveMonth=function(e){var t=this.getViewDate();this.setViewDate(this.element.datepicker("moveMonth",t,e)),this.element.datepicker("fill"),this.element.trigger("changeMonth")},e.prototype.moveYear=function(e){var t=this.getViewDate();this.setViewDate(this.element.datepicker("moveYear",t,e)),this.element.datepicker("fill"),this.element.trigger("changeYear")},e.prototype.updateAriaRolesAndStates=function(e,t){var n=this,r=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.container"});this.datepickerDropdownElement.attr("role","application").attr("aria-label",r),this.datepickerDropdownElement.find("table").attr("role","grid").attr("aria-label",r);var o=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.previousMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-left").attr("aria-label",o).attr("role","button");var s=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.nextMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-right").attr("aria-label",s).attr("role","button"),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-live","assertive").attr("aria-atomic","true"),this.datepickerDropdownElement.find("thead th").attr("role","gridcell"),this.datepickerDropdownElement.find("table").removeAttr("aria-activedescendant");var a=d(e),c=d(a).subtract({months:1}),l=d(a).add({months:1});this.datepickerDropdownElement.find("td").each((function(e,t){var r,o=i(t);r=o.hasClass("old")?c.toDate():o.hasClass("new")?l.toDate():a.toDate();var s=d({year:r.getFullYear(),month:r.getMonth(),day:+o.text()});o.attr("aria-label",n.bbLocalize.formatDateSync(s.toDate()));var u="datepicker-td-"+s.unix();o.attr("id",u),o.hasClass("active")&&(o.attr("aria-selected","true"),n.datepickerDropdownElement.find("table").attr("aria-activedescendant",u)),o.attr("role","gridcell")}))},e.prototype.setUpKeyboardNavigation=function(){var e=this;this.currentMonthDays.forEach((function(t){t.off("keydown").on("keydown",(function(t){switch(t.preventDefault(),t.keyCode!==u.f&&t.keyCode!==u.g&&t.stopPropagation(),p.a.enableFocusOutline(),t.keyCode){case u.j:e.focusPreviousDay();break;case u.s:e.focusNextDay();break;case u.v:e.focusSameWeekdayOfPreviousWeek();break;case u.d:e.focusSameWeekdayOfNextWeek();break;case u.q:t.ctrlKey||t.altKey?e.focusSameDayOfPreviousYear():e.focusSameDayOfPreviousMonth();break;case u.p:t.ctrlKey||t.altKey?e.focusSameDayOfNextYear():e.focusSameDayOfNextMonth();break;case u.i:e.focusFirstDayOfMonth();break;case u.e:e.focusLastDayOfMonth();break;case u.u:t.shiftKey?e.focusElement(e.iconArrowRight):(l.b(null,e.openDatepickerButton),e.element.datepicker("hide"));break;case u.f:case u.t:e.currentMonthDays[e.getActiveElementIndex()].click(),e.openDatepickerButton.focus()}}))}))},e.$inject=["scope","element","attrs","model","$transclude",s.serviceName,a.a+"Directive","$compile"],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.link=function(e,n,r,i,o){e.datepicker=t.$injector.instantiate(f,{scope:e,element:n,attrs:r,model:i,$transclude:o})}}return e.$inject=["$injector"],e}();o.module(m,[s.moduleName,a.b]).directive("bbDatePicker",["$injector",function(e){return e.instantiate(h)}])},i2kg:function(e,t,n){},i8dz:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("KCTV");var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.bbFoundationDropdownClose",s="bbFoundationDropdownClose",a=function(){this.restrict="A",this.link=function(t,n,r){var o="keyup."+s;n.on("click",(function(t){var r=e(t.target);if(r.closest("[data-dropdown]").length<=0&&(r.closest(".f-dropdown").length<=0||r.closest(".f-dropdown a").length>0)){var i=n.find(".f-open-dropdown");if(i.length&&i.foundation("dropdown","close",i),window.top!==window){var o=e(window.parent.document).find(".f-open-dropdown");o.foundation("dropdown","close",o)}}})),n.on("scroll",(function(t){var n=e(t.target);n.hasClass("f-dropdown")||0!==n.parents(".f-dropdown").length||e(".f-open-dropdown").each((function(){e(this).foundation("dropdown","close",e(this))}))})),e("body").on(o,(function(t){if(t.keyCode===i.u){var r=n.find(".f-open-dropdown"),o=e(document.activeElement).is(".f-open-dropdown"),s=e(document.activeElement).parents(".f-open-dropdown").length>0;o||s||r.foundation("dropdown","close",r)}})),t.$on("$destroy",(function(){n.off(),e("body").off(o)}))}};r.module(o,[]).directive(s,["$injector",function(e){return e.instantiate(a)}])}).call(this,n("5iHu"))},iAaI:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.base.admin.theme.routes";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){e.peekState("colorSelection",{systemEntitlement:i.C.ViewAdmin,url:"/theme/:themeId/colorSelection",require:function(){return Promise.all([n.e(607),n.e(648)]).then(n.bind(null,"xCEN"))},pageTitle:"base.admin.theme.colorSelection.title",panelClass:"full"})}])},iVgd:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.keyboardClick",s=function(){this.restrict="A",this.link=function(t,n,r){n.on("keyup",(function(t){var n=e(t.target),r=n.closest(".react-container").length>0;(t.keyCode!==i.f||r||"file"===n.attr("type")||"INPUT"===n.prop("tagName")&&("INPUT"!==n.prop("tagName")||"checkbox"!==n.prop("type"))||"BUTTON"===n.prop("tagName")||"BODY"===n.prop("tagName")||"A"===n.prop("tagName")&&n.attr("href"))&&(t.keyCode!==i.t||r||"A"!==n.prop("tagName")&&("DIV"!==n.prop("tagName")||"button"!==n.attr("role")))||n.trigger("click")}))}};r.module(o,[]).directive("bbKeyboardClick",["$injector",function(e){return e.instantiate(s)}])}).call(this,n("5iHu"))},imME:function(e,t,n){},"iwI+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("0JpG"),o=n("w9Zy"),s=n("TnpK"),a=n("0wat"),c="ultra.base.tools.routes";r.module(c,[s.b]).config([s.c,function(e){e.state("base.tools.legacy",{url:"/:toolName",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/tools/base-tools")}],offCanvasArgs:[s.d,function(e){return{panelClass:"full",template:a,close:function(){e.goCurrentBasePage()},stateName:"base.tools.legacy"}}]},require:function(){return Promise.resolve().then(n.bind(null,"yA26"))},onExit:[o.e,function(e){e.close("base.tools.legacy")}],pageTitle:"base.tools.pageTitle"})}])},j2IR:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("wHJ2"),i=n("0JpG"),o=n("w9Zy"),s=n("go4a"),a=n("pjml"),c=n("TnpK"),l=n("Qbdf"),u=n("M+Ig"),d=n("fYJU"),p="ultra.telemetry.routes";function m(e,t,n,r){var i=e.defer(),o=t.courseId;return o?n.$new(o).users.$find(r.userId).$then((function(e){i.resolve(s.a(e))})):i.resolve(null),i.promise}r.module(p,[i.moduleName,o.d,a.R,c.b,l.b]).config([c.c,l.c,function(e,t){var r,o,s,c,p,f,h;e.peekState("telemetry-settings",{url:"/telemetry-settings",require:function(){return n.e(614).then(n.bind(null,"W9KP"))},resolve:{currentCourseColor:["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return m(e,t,n,r)}]}}).peekState(u.a.InstructorClass.toString(),{url:"/telemetry/activityVsGrade/:courseId?notificationId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(12),n.e(25),n.e(32),n.e(35),n.e(47),n.e(586)]).then(n.bind(null,"7FjY"))},panelClass:"full",resolve:(r={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},r[l.d]=t.resolve,r),peekStates:["message","event-create","telemetry-settings",u.a.InstructorDetails.toString()],peekViewName:"telemetry-instructor-class-base@",pageTitle:"components.directives.telemetry.panel.titleInstructor"}).peekState(u.a.InstructorDetails.toString(),{url:"/telemetry/timeSeries/:courseId?userId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(12),n.e(25),n.e(32),n.e(35),n.e(622)]).then(n.bind(null,"AxRA"))},panelClass:"full",resolve:(o={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},o[l.d]=t.resolve,o),peekStates:["message","event-create","telemetry-settings"],peekViewName:"telemetry-instructor-details-base@",pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.a.StudentHighPerformance.toString(),{url:"/telemetry/student/high-performance/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(12),n.e(25),n.e(32),n.e(35),n.e(47),n.e(603)]).then(n.bind(null,"5a0X"))},panelClass:"peek",resolve:(s={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},s[l.d]=t.resolve,s.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return m(e,t,n,r)}],s),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.a.StudentLowActivity.toString(),{url:"/telemetry/student/low-performance/activity/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(12),n.e(25),n.e(32),n.e(35),n.e(47),n.e(615)]).then(n.bind(null,"ADyW"))},panelClass:"peek",resolve:(c={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},c[l.d]=t.resolve,c.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return m(e,t,n,r)}],c),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.a.StudentLowGrades.toString(),{url:"/telemetry/student/low-performance/grades/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(12),n.e(25),n.e(32),n.e(35),n.e(47),n.e(616)]).then(n.bind(null,"vOTS"))},panelClass:"peek",resolve:(p={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},p[l.d]=t.resolve,p.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return m(e,t,n,r)}],p),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.a.StudentProgress.toString(),{url:"/telemetry/student/progress/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(12),n.e(25),n.e(32),n.e(35),n.e(618)]).then(n.bind(null,"09dT"))},panelClass:"peek",resolve:(f={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},f[l.d]=t.resolve,f.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return m(e,t,n,r)}],f),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.a.StudentFindAStudyPartner.toString(),{url:"/telemetry/student/request-study-help/:courseId",require:function(){return n.e(579).then(n.bind(null,"cU3T"))},panelClass:"peek",resolve:(h={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry")])}]},h[l.d]=t.resolve,h.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return m(e,t,n,r)}],h),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.a.ContentActivityInDetail.toString(),{url:"/telemetry/instructor/activity-in-detail/:contentId",require:function(){return Promise.all([n.e(21),n.e(1),n.e(12),n.e(32),n.e(560)]).then(n.bind(null,"AeD7"))},panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/telemetry/telemetry")}],currentContent:["$stateParams",l.d,function(e,t){var n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.telemetry.panel.titleStudentActivityDetails",peekStates:["message","event-create",u.a.InstructorDetails.toString()],peekViewName:"telemetry-content-activity-in-detail-base@"}).peekState(u.a.DiscussionForumInsights.toString(),{url:"/telemetry/instructor/discussion-insights/:contentId/:forumContentId",require:function(){return Promise.all([n.e(1),n.e(570)]).then(n.bind(null,"zl9+"))},panelClass:"full",params:{groupId:null},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/discussion")}],currentContent:["$stateParams",l.d,function(e,t){var n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.discussion.insights.pageTitle",peekStates:["content-manage","submission-list","message"],peekViewName:"telemetry-discussion-forum-insights-base@"})}])},jciN:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));n("SSV0"),n("1fiZ");var r=n("wHJ2"),i=n("oVrE"),o=n("g66W"),s=n("0JpG"),a=n("NMEb"),c=n("5MwF"),l=n("9Ss5"),u="ultra.directives.avatar",d=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.$element=t,this.attributes=n,this.bbLocalize=r,this.$timeout=i,this.backgroundColors=12;var s=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()"],(function(){void 0!==o.scope.user&&(o.renderAvatars(),o.scope.autoUpdate&&o.scope.autoUpdate()||s())})),a=this.scope.$watchCollection("users",(function(){o.scope.users&&(o.renderAvatars(),o.scope.autoUpdate&&o.scope.autoUpdate()||a())}))}return e.prototype.getAvatarBG=function(e){return"default-avatar-"+(parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)},e.prototype.avatarParticipantsClass=function(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}},e.prototype.canDisplayAvatarForUser=function(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!(!e.avatar||!e.avatar.permanentUrl||"default"===e.avatar.permanentUrl))},e.prototype.getInitials=function(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||o.i(e.givenName)||o.i(e.familyName)||o.j(e.givenName)||o.j(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()},e.prototype.buildAvatarData=function(e){var t={};return this.canDisplayAvatarForUser(e)?(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,s.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then((function(e){t.username=e})):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl&&(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")&&(e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(e.lastModifiedAt||""+(new Date).getTime())),t.avatarUrl=e.avatar.permanentUrl),t.isAllMembers=i.e(e),t):null},e.prototype.isAnonymousStudent=function(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()},e.prototype.renderAvatars=function(){var e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),r.isArray(e)||(e=null!=e?[e]:[]),0===e.length)return this.scope.first=null,this.scope.second=null,this.scope.participants=0,void(this.scope.isAvatarRender=!0);this.scope.participants=e.length,this.scope.avatarsClasses={},r.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),!this.scope.avatarsClasses.inactive&&r.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0},e}(),p=function(){function e(e,t){var n=this;this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=l,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,t,r){return new d(e,t,r,n.bbLocalize,n.$timeout)}}return e.$inject=[s.serviceName,"$timeout"],e}();c.a.features.newAvatar?r.module(u,[]).directive("bbAvatar",["$compile",function(t){return{restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link:function(n,r,i){var o=Object.prototype.hasOwnProperty.call(i,"users")?"bb-user-avatar-group":"bb-user-avatar",s=e(r[0].outerHTML.replace(/bb\-avatar/g,o));r.replaceWith(s),t(s)(n)}}}]):r.module(u,[a.a]).directive("bbAvatar",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("5iHu"))},jhBu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("x+T+"),a=n("Qbdf"),c="ultra.service.entitlement",l="entitlement",u=function(){function e(e,t){this.entitlementCache=e,this.currentCourse=t}return e.prototype.isEntitled=function(e,t){if(void 0===t&&(t=this.currentCourse.courseId),!t)return o.a.production||console.error(new Error("There is no course in context. Check the configuration.")),!1;if(!o.a.production&&!this.entitlementCache.hasCachedCourseEntitlements(t))throw new Error("Cached entitlements should exist for course with ID, "+t+", but none were found.\n        Make sure the entitlement resolver is configured for this route.");return this.entitlementCache.hasCachedCourseEntitlements(t)&&this.entitlementCache.getCachedCourseEntitlements(t).has(e.toString())},e.prototype.areAllEntitled=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),e.every((function(e){return n.isEntitled(e,t)}))},e.prototype.areAnyEntitled=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),e.some((function(e){return n.isEntitled(e,t)}))},e.prototype.hasCourseEntitlement=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then((function(){return n.isEntitled(e,t)}))},e.prototype.hasAllCourseEntitlements=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then((function(){return n.areAllEntitled(e,t)}))},e.prototype.hasAnyCourseEntitlement=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then((function(){return n.areAnyEntitled(e,t)}))},e.prototype.hasSystemEntitlement=function(e){var t=this;return this.entitlementCache.loadCourseEntitlements(s.a).then((function(){return t.isEntitled(e,s.a)}))},e.$inject=[s.c,a.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(c,[s.b,a.b]).service(l,u)},jj6p:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("JzsJ");var r=n("5iHu"),i=n("wHJ2"),o=n("5MwF"),s=n("Sa5G"),a=n("0JpG"),c=n("wQOJ"),l=n("pjml"),u=n("MOka"),d=n("TnpK"),p=n("Q/M7"),m=n("M+Ig"),f="ultra.base.routes";i.module(f,[a.moduleName,l.R]).config([d.c,function(e){e.baseState("base.calendar",{url:"^/calendar",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}],"?courseMembershipsLoader":i.noop},peekStates:["calendar-settings","event-create","event-edit","event-view","class-schedule","office-hours","content-manage","assignment","assessment","course","lti","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],require:function(){return Promise.all([n.e(7),n.e(93),n.e(14),n.e(28),n.e(79),n.e(150)]).then(n.bind(null,"q2ny"))},pageTitle:"base.nav.calendar"}).baseState("base.deadline",{url:"^/deadline",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},peekStates:["calendar-settings","event-create","event-edit","event-view","class-schedule","office-hours","content-manage","assignment","course","assessment"],require:function(){return Promise.all([n.e(7),n.e(93),n.e(14),n.e(28),n.e(79),n.e(150)]).then(n.bind(null,"q2ny"))},pageTitle:"base.nav.calendar"}).baseState("base.courses",{url:"^/course?enrollmentMessage",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/courses/base-courses")}]},peekStates:["course","external","class-schedule","course-edit-banner"],peekViewName:"courses-base",require:function(){return Promise.all([n.e(13),n.e(1),n.e(14),n.e(87),n.e(128)]).then(n.bind(null,"EQ9X"))},pageTitle:"base.nav.courses"}).baseState("base.grades",{url:"^/grades",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/grades/base-grades")}],"?courseMembershipsLoader":[i.noop]},require:function(){return Promise.all([n.e(7),n.e(10),n.e(13),n.e(1),n.e(2),n.e(3),n.e(19),n.e(14),n.e(36),n.e(550)]).then(n.bind(null,"Bfy5"))},peekStates:["assessment","assignment","grade-and-feedback","gradebook-item","telemetry","course","discussion","lti","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",m.a.InstructorClass.toString(),m.a.InstructorDetails.toString(),m.a.StudentProgress.toString(),"overall-grade-student","attendance","attendance-student-view"],pageTitle:"base.nav.grades"}).baseState("base.messages",{url:"^/messages",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/messages/base-messages")}]},require:function(){return Promise.all([n.e(0),n.e(13),n.e(8),n.e(134),n.e(580)]).then(n.bind(null,"ZQ8w"))},peekStates:["create-message","edit-message","message","course"],pageTitle:"base.nav.messages"}).baseState("base.organizations",{url:"^/organization?enrollmentMessage",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/courses/base-courses")}]},peekStates:["course","external","class-schedule","organization-edit-banner"],peekViewName:"courses-base",require:function(){return Promise.all([n.e(13),n.e(1),n.e(14),n.e(87),n.e(128)]).then(n.bind(null,"EQ9X"))},pageTitle:"base.nav.organizations"}).baseState("base.profile",{url:"^/profile",resolve:{userConfiguration:[l.Qb.serviceName,function(e){return e.getUserConfiguration()}],translations:[a.serviceName,function(e){return e.loadBundle("features/base/profile/base-profile")}],isMobileDistributorActive:["$q",l.U.serviceName,"memberships",function(e,t,n){var r=n.length>0,i=n.every((function(e){return e.isStudentMembership()}));return o.a.features.instructorPushNotifications||r&&i?t.$build().courseSettings.$new(s.y.Mobile).$fetch().$allow([400]).$then((function(e){return!!e.settings})):e.resolve(!1)}],memberships:[u.b,function(e){return e.reloadStreamMemberships()}]},require:function(){return Promise.all([n.e(29),n.e(46),n.e(92),n.e(140),n.e(588)]).then(n.bind(null,"cFSu"))},peekStates:["notification-settings","update-avatar","update-profile","update-language","update-password","privacy"],pageTitle:"base.nav.profile"}).baseState("base.recentActivity",{resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/stream/base-stream")}],memberships:[u.b,function(e){return e.reloadStreamMemberships()}],"?courseMembershipsLoader":i.noop},peekStates:["announcement","announcement-detail","assignment","assessment","content-manage","content-group","course","discussions","event-edit","event-view","gradebook-item","stream-message","telemetry","lti","content-group-enroll","notification-create","notification-history","notification-settings","scorm-overview","scorm-launch-frame","scorm",m.a.InstructorClass.toString(),m.a.InstructorDetails.toString(),m.a.StudentHighPerformance.toString(),m.a.StudentLowActivity.toString(),m.a.StudentLowGrades.toString(),m.a.StudentProgress.toString(),m.a.StudentFindAStudyPartner.toString()],peekViewName:"base-recentActivity-base",url:"^/stream",require:function(){return Promise.all([n.e(20),n.e(12),n.e(19),n.e(23),n.e(563)]).then(n.bind(null,"UFXJ"))},pageTitle:"base.nav.recentActivity"}).baseState("base.tools",{url:"^/tools",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/tools/base-tools")}]},peekStates:["lti"],require:function(){return n.e(573).then(n.bind(null,"2yHp"))},pageTitle:"base.nav.tools"}).baseState("base.admin",{resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/admin/base-admin")}]},systemEntitlement:s.C.ViewAdmin,onEnter:function(){r("body").addClass("base-admin-open")},onExit:function(){r("body").removeClass("base-admin-open")},url:"^/admin",require:function(){return n.e(637).then(n.bind(null,"9D0M"))},peekStates:["course","localization","brands","cloud-storage-admin","notification-admin"],pageTitle:"base.nav.admin"}).peekState("localization",{url:"/localization?launchUrl",require:function(){return n.e(663).then(n.bind(null,"Arco"))},pageTitle:"base.nav.localization",panelClass:"full",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/admin/localization")}],enterCheck:[d.d,"$stateParams",function(e,t){if(!t.launchUrl)return e.goToRoute("base.admin")}]}}).peekState("cloud-storage-admin",{url:"/cloud-storage",require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(18),n.e(41),n.e(715)]).then(n.bind(null,"nL78"))},pageTitle:"base.nav.cloud-storage-admin",panelClass:"full"}).peekState("notification-admin",{url:"/notification",require:function(){return n.e(716).then(n.bind(null,"Vf+W"))},pageTitle:"base.nav.notification-admin",panelClass:"full"}).baseState("base.redirect",{url:"^/redirect?userId&contentId&courseId&eventType&sourceType&sourceId&redirectType&legacyUrl&parentId&screen",require:function(){return n.e(726).then(n.bind(null,"kds7"))}}).baseState("base.institution-page",{url:"^/institution-page",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(152)]).then(n.bind(null,"dRT/"))},peekStates:["allLinks","lti"],pageTitle:"base.nav.institutionPage",resolve:{ipVariantId:[c.b,d.d,function(e,t){return e.getEffectiveVariantIdWithPermissions().then((function(e){var n=e.variantId;if(e.canView)return n;t.goToRoute("base.recentActivity")}),(function(){return t.goToRoute("base.recentActivity")}))}]}}).baseState("base.institution-page-admin",{url:"^/institution-page/admin/:variantId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(152)]).then(n.bind(null,"dRT/"))},peekStates:["allLinks","editModule","editPageImage","createModule","lti","brand-detail"],pageTitle:"base.nav.institutionPage",params:{variantId:"default"},resolve:{ipVariantId:[c.b,d.d,"$stateParams",function(e,t,n){return e.getUserCanEdit("default").then((function(e){return e||t.goToRoute("base.recentActivity"),n.variantId}),(function(){return t.goToRoute("base.recentActivity")}))}],testResolver:["ipVariantId",function(e){return e}]}}).state("institution",{onEnter:function(){window.location.href=p.c("/institution")}}).baseState("base.course-catalog",{url:"^/catalog",require:function(){return n.e(151).then(n.bind(null,"Kz46"))},pageTitle:"base.nav.catalog",peekStates:["course"],resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/course-catalog")}]}}).baseState("base.organization-catalog",{url:"^/organization-catalog",require:function(){return n.e(151).then(n.bind(null,"Kz46"))},pageTitle:"base.nav.orgCatalog",peekStates:["course"],resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/course-catalog")}]}}),o.a.features.componentDemos&&e.baseState("base.demo",{url:"^/demo",require:function(){return Promise.all([n.e(0),n.e(94),n.e(1),n.e(8),n.e(29),n.e(90),n.e(561)]).then(n.bind(null,"KTgJ"))},peekStates:["demoComponent"],pageTitle:"base.nav.demo"})}])},jnoB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("Sa5G"),o=n("Qbdf"),s=n("0JpG"),a=n("TnpK"),c="ultra.course.groups.router";r.module(c,[o.b,s.moduleName,a.b]).config([o.c,a.c,function(e,t){var r;t.peekState("group-set-list",{url:"/group-set-list",courseEntitlement:i.w.ViewGroupsAsAdmin,require:function(){return Promise.all([n.e(0),n.e(10),n.e(42),n.e(724)]).then(n.bind(null,"Mkxh"))},pageTitle:"course.outline.groupWorkspace.title",peekStates:["group-set-detail"],panelClass:"full"}).peekState("group-set-detail",{panelClass:"full",url:"/groupSet?courseId&groupSetId&mode",courseEntitlement:i.w.ViewGroupsAsAdmin,resolve:{translations:[s.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}]},require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(10),n.e(42),n.e(1),n.e(2),n.e(3),n.e(555)]).then(n.bind(null,"ymtw"))},pageTitle:"course.content.courseGroup.groupSetTitle",peekStates:["message"],peekViewName:"group-message-peek"}).peekState("content-group-enroll",{url:"/group-enroll?courseId&contentId&fromView",panelClass:"full",resolve:(r={},r[o.d]=e.resolve,r.translations=[s.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}],r),require:function(){return Promise.all([n.e(0),n.e(10),n.e(42),n.e(722)]).then(n.bind(null,"sBQA"))},pageTitle:"course.content.courseGroup.selfEnroll"}).peekState("course-group-enroll",{url:"/course-group-enroll?courseId&fromView",pageTitle:"course.content.courseGroup.selfEnroll",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(10),n.e(42),n.e(725)]).then(n.bind(null,"B5Yh"))}})}])},k9iv:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return y}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("5MwF"),a=n("0JpG"),c=n("12mu"),l=n("W/rt"),u=n("zlFc");n.d(t,"a",(function(){return u}));var d=n("9ZjI"),p=n("TFjq"),m=n("PqsU"),f=n("sqUP"),h=n("nL6A"),g=n("cGmE"),v=n("krSA"),b="ultra.components.services.errorModal",y="errorModal",S=function(){function e(){this.isModalClosed=!0,this.handlers=[],this.$get=[c.b,"$rootScope","$q","$window","$injector",function(e,t,n,r,i){return this.$modal=e,this.$rootScope=t,this.$q=n,this.$injector=i,this.$window=r,this}]}return e.prototype.onErrorResponse=function(e){this.handlers.push(e)},e.prototype.handleApiError=function(t,n){var r=this;if(t&&null!=t.status&&!this.$window.document.getElementsByClassName("ms-Panel").length){var o={response:t,errorHandler:n};if(403===t.status)t.data&&"Question could not be created with existing attempt(s)"===t.data.message?o.template=l:o.template=u;else if(404===t.status)t.data&&i.includes(t.data.message,"No course content found for content id")?o.template=d:o.template=p;else if(409===t.status)o.template=m;else if(507===t.status)o.template=f;else if(t.status>=400&&t.status<=599){var s;if(400===t.status&&t.data&&t.data.code===e.COURSE_IS_CLOSED_CODE)o.template=h;else this.handlers.some((function(e){return(s=r.$injector.invoke(e,void 0,{response:t}))&&void 0!==s.tpl})),o.template=s&&s.tpl||g,o.scope=s&&s.scope}o.template&&this.openModal(o)}},e.prototype.showDefaultErrorModal=function(){var e={template:p};this.openModal(e)},e.prototype.handleError=function(e,t){if(e){var n={errorString:e,template:v,errorHandler:t};this.openModal(n)}},e.prototype.openModal=function(e){var t=this;if(this.isModalClosed){if(!e||!e.template)throw new Error("Modal configuration template was not supplied");var n=e.scope||this.$rootScope;s.a.errorDetails&&((n=this.$rootScope.$new()).response=e.response),n.errorString=e.errorString;var r={template:e.template,scope:n,resolve:{translations:[a.serviceName,function(e){return e.loadBundle("components/services/error-modal")}]}};this.isModalClosed=!1,this.modalInstance=this.$modal.open(r),this.modalInstance.result.then((function(){}),(function(){t.isModalClosed=!0,e.errorHandler&&e.errorHandler()}))}},e.COURSE_IS_CLOSED_CODE="bb-rest-course-is-closed",e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(S);o.module(b,[a.moduleName,c.a]).provider(y,S)},kH1j:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-medium-programs",use:"icon-medium-programs-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-programs"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17 3h6v20h-6zM9 7h8v16H9zM1 1h8v22H1zM1 19h8M1 5h8M12 11h2M12 19h2M17 19h6M20 7v3" /></symbol>'});i.add(o);e.exports=o},"kj+S":function(e,t,n){},klG7:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-external-questions">\n  <div name="modal-contents">\n    <p bb-translate>{{descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},krSA:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p>{{ errorString }}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},lAEu:function(e,t,n){"use strict";var r=n("D57K"),i=n("n7/H"),o=n.n(i),s=n("6VGE"),a=n.n(s),c=n("tfZW"),l=function(e){function t(t,n){void 0===n&&(n={defaultLocale:"en",production:!1,urlRoot:""});var r=e.call(this,t,n)||this;return r.babelfishInstance=t,r.options=n,r.overrideLoader=c.a.getInstance(),r}return Object(r.__extends)(t,e),t.prototype._load=function(e){return t._loadPromises[e]?t._loadPromises[e]:(t._loadPromises[e]=new i.InstantPromise((function(t){n("RRs6")("./"+e+"/_combined.json").then((function(e){return t(e.default?e.default:e)})).catch((function(){return t(null)}))})),t._loadPromises[e])},t.prototype.getPreferredLocales=function(t){return[t].concat(e.prototype.getPreferredLocales.call(this,this.overrideLoader.getBaseLocale(t)||t))},t._loadPromises={},Object(r.__decorate)([a.a],t.prototype,"getPreferredLocales",null),t}(o.a);t.a=l},lBPC:function(e,t){e.exports='\n<footer class="panel-footer notification toast-container">\n  <bb-save-tray tray-type="LoadMoreResults"\n                tray-id="{{::trayId}}"\n                tray-localization-keys-prefix="{{::trayLocalizationKeysPrefix}}">\n  </bb-save-tray>\n</footer>'},lCpV:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Discussions=new t("discussions"),t.Participants=new t("participants"),t}(n.n(i).a);t.a=o},lDJ8:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=(n("abLi"),n("yq4x"),n("6BRP"),n("nsO7")),o=n("5iHu"),s=n("wHJ2"),a=n("0JpG"),c=n("nPfc"),l=n("lEL+"),u=n("GbAM"),d="ultra.directives.validationMessages",p=function(){function e(t,n,r,i,o,s){var a=this;this.$rootScope=t,this.scope=n,this.element=r,this.attrs=i,this.form=o,this.timeout=s,this.error=!1,this.immediateUpdate=!1,this.elements=[],e._$rootScope=t,n.labels=[],e.onDirectiveAdded(),n.$on("$destroy",(function(){e.onDirectiveRemoved()}));var c=i.for;if(!c)throw new Error("`for` attribute is required.");c.split(",").forEach((function(e){var t=o[e];null==t.$warning&&(t.$warning={}),null==t.$errorImmediate&&(t.$errorImmediate={}),a.elements.push(t)})),n.$watch(this.updateMessages.bind(this)),n.$watch((function(){return document.activeElement}),(function(e,t){e!==t&&a.updateMessages()})),n.$watch((function(){return n.showErrors})),this.elements&&this.elements.length&&n.$watch((function(){return a.elements[0].$invalid}),(function(e,t){e&&e!==t?(a.immediateUpdate=!0,a.updateMessages()):a.immediateUpdate=!1}))}return e.prototype.updateMessages=function(){var t=this;this.scope.showOnsubmitErrors=!1,this.scope.showErrors=!1,this.scope.showImmediateErrors=!1,this.scope.showWarnings=!1,this.scope.labels.length=0;var n=[];if(this.form.$submitted){var r=i.filter(this.elements,(function(e){return Object.keys(e.$error).length>0}));n=i.map(r,"$label");var o=i.merge.apply(null,i.map(r,"$error"))||{},s=Object.keys(o);s.length>0&&(this.scope.showOnsubmitErrors=!0,this.scope.onsubmitErrors={},s.forEach((function(e){t.scope.onsubmitErrors[e+"Onsubmit"]=o[e]})),this.readAriaLiveMessage(this.element.find(".form-element-onsubmit-errors").text(),"alert"))}else{var a=document.activeElement,c=i.find(this.elements,{$name:a.name});if(c&&c.$errorImmediate&&Object.keys(c.$errorImmediate).length>0)return this.scope.showImmediateErrors=!0,this.scope.immediateErrors=c.$errorImmediate,this.readAriaLiveMessage(this.element.find(".form-element-immediate-errors").text(),"alert"),!0;if(!e.mouseIsDown||this.error||this.immediateUpdate){var l=this.immediateUpdate?this.elements:i.filter(this.elements,(function(e){return(e.$touched||e.$dirty||t.scope.checkWhenInit&&t.scope.checkWhenInit())&&(!(a.name===e.$name)||t.scope.immediate&&t.scope.immediate())})),u=(r=i.filter(l,(function(e){return Object.keys(e.$error).length>0})),i.merge.apply(null,i.map(r,"$error"))||{});u&&Object.keys(u).length>0?(this.error=this.scope.showErrors=!0,this.scope.errors=u,n.push.apply(n,i.map(r,"$label")),this.readAriaLiveMessage(this.element.find(".form-element-errors").text(),"alert")):this.error=!1}if(!this.scope.showOnsubmitErrors&&!this.scope.showErrors){var d=i.filter(this.elements,(function(e){return Object.keys(e.$warning).length>0})),p=i.merge.apply(null,i.map(d,"$warning"))||{};p&&Object.keys(p).length>0&&(this.scope.showWarnings=!0,this.scope.warnings=p,this.readAriaLiveMessage(this.element.find(".form-element-warnings").text(),"status"))}}return this.scope.labels.push.apply(this.scope.labels,i.compact(n)),!0},e.prototype.readAriaLiveMessage=function(e,t){var n=this;this.timeout((function(){"alert"===t?n.scope.$root.$broadcast(u.a,e.trim()):n.scope.$root.$broadcast(u.b,e.trim())}),this.scope,0,!1)},e.mouseIsDown=!1,e._directiveCount=0,e.onDirectiveAdded=function(){var t=0===e._directiveCount;e._directiveCount++,t&&(e.mouseDownHandler||(e.mouseDownHandler=function(t){var n=o(t.target);(n.parents("ng-form").length||n.parents("form").length)&&e._$rootScope.$apply((function(){n.is("[type=submit]")||(e.mouseIsDown=!0)}))}),e.mouseUpHandler||(e.mouseUpHandler=function(t){var n=o(t.target);(n.parents("ng-form").length||n.parents("form").length)&&e._$rootScope.$apply((function(){e.mouseIsDown=!1}))}),o(document).on("mousedown",e.mouseDownHandler),o(document).on("mouseup",e.mouseUpHandler))},e.onDirectiveRemoved=function(){var t=e._directiveCount<=1;e._directiveCount--,t&&(o(document).off("mousedown",e.mouseDownHandler),o(document).off("mouseup",e.mouseUpHandler))},e}(),m=function(e,t,n){var r=this;this.bbLocalize=e,this.$rootScope=t,this.timeout=n,this.scope={immediate:"&?",checkWhenInit:"&?"},this.require="^form",this.restrict="A",this.transclude=!0,this.link=function(e,t,n,i){return r.bbLocalize.loadBundle("components/directives/validation-messages"),new p(r.$rootScope,e,t,n,i,r.timeout)},this.template=c};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(m);s.module(d,["ngMessages",a.moduleName]).directive("bbValidationMessages",[a.serviceName,"$rootScope",l.b,function(e,t,n){return new m(e,t,n)}]).directive("ngModel",(function(){return{restrict:"A",require:"ngModel",priority:-9999,link:function(e,t,n,r){var i=t[0],o=t.parents().last();if(i.hasAttribute("aria-label"))e.$watch((function(){return i.getAttribute("aria-label")}),(function(e){return r.$label=e}));else if(i.hasAttribute("aria-labelledby")){var s=i.getAttribute("aria-labelledby").split(" ")[0],a=o.find("#"+s)[0];a&&e.$watch((function(){return a.textContent}),(function(e){return r.$label=e}))}else{var c=o.find('label[for="'+i.id+'"]')[0];c&&e.$watch((function(){return c.textContent}),(function(e){return r.$label=e}))}}}}))},"lEL+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("wHJ2"),i="ultra.services.timeout",o="timeout";r.module(i,[]).factory(o,["$timeout",function(e){var t=function(t,n,r,i){var o=e((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__bb_unregister_scope_destroy__&&(o.__bb_unregister_scope_destroy__(),o.__bb_unregister_scope_destroy__=null),t.apply(this,e)}),r,i);return o.__bb_unregister_scope_destroy__=n.$on("$destroy",(function(){e.cancel(o)})),o};return t.cancel=function(t){return t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},lTRw:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("D57K"),i=(n("QLzv"),n("Bu0u")),o=n("nkTj"),s=n("yCC5"),a=n("Q/M7"),c=n("Rjd/"),l=s.Y,u=function(){function e(){}return e.fromValue=function(t){return e[t]},e.ALL={resetShowComments:function(){return!0},getValue:function(){return"ALL"},validate:function(e){return!0}},e.BYCOLUMNS={resetShowComments:function(){return!1},getValue:function(){return"BYCOLUMNS"},validate:function(e){return e&&!!e.length}},e}(),d=function(){function e(){}return e.fromValue=function(t){return e[t]},e.MYDEVICE={resetContentCollection:function(){return!0},getValue:function(){return"MYDEVICE"},validate:function(e){return!0},openUrl:function(e){var t=a.j();window.location.href=t+e}},e.CONTENTCOLLECTION={resetContentCollection:function(){return!1},getValue:function(){return"CONTENTCOLLECTION"},validate:function(e){return!!e},openUrl:function(e){return function(){}}},e}();c.a.factory(l,["restmod",o.d,function(e,t){return e.model().mix({grades:{hasMany:s.gb},columns:{hasMany:s.fb},attempts:{hasMany:s.cb},categories:{hasMany:s.eb},performancecodes:{hasMany:s.ib},schemas:{hasMany:s.jb},bulkView:{hasOne:s.db,path:"grades/bulkView"},settings:{hasOne:s.Z},groupAttempts:{hasMany:s.hb},summaries:{hasMany:s.r},$extend:{Record:{getDownloadUrl:function(e){if(!e||!e.dataScopeType||!e.delimiterType)throw new i.a({message:"dataScoreType and delimiterType must be set"});return this.$send({method:"POST",url:this.$url()+"/prepareDownload",data:Object(r.__assign)(Object(r.__assign)({},e),{dataScopeType:e.dataScopeType.getValue(),downloadTo:e.downloadTo.getValue()})},(function(e){this.$unwrap(e.data)})).$asPromise()},validateCalculatedFormula:function(e){if(!e)throw new i.a({message:"formula data must be set"});return this.$send({method:"POST",url:this.$url()+"/validateCalculatedFormula",data:e}).$allow([400]).$asPromise().then((function(e){return 200===e.$response.status}))},parseUploadedGradebook:function(e){return this.$send({method:"GET",url:this.$url()+"/parseUploadedGradebook",params:e},(function(e){this.$unwrap(e.data)})).$allow([400,403,404]).$asPromise()},importGradebook:function(e){return this.$send({method:"POST",url:this.$url()+"/importGradebook",data:e},(function(e){this.$unwrap(e.data)})).$allow([400,403,404]).$asPromise()}}}})}])},"lUN/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("5iHu");function i(){return r.extend(r.expr[":"],{tabbable:function(e){var t=r.attr(e,"tabindex"),n=null!=t;return(!n||t>=0)&&function(e,t){var n,i,o,s,a,c=e.nodeName.toLowerCase();if("area"===c)return n=e.parentNode,i=n.name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&((o=r("img[usemap='#"+i+"']")).length>0&&o.is(":visible"));/^(input|select|textarea|button|object)$/.test(c)?(s=!e.disabled)&&(a=r(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===c&&e.href||t;return s&&r(e).is(":visible")}(e,n)}})}},lVRt:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r="currentCourse",i="membership"},lhRd:function(e,t,n){},lhpd:function(e,t,n){},lmMM:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("nbDY"),a=n.n(s),c=n("Fvsw"),l=n("0JpG"),u=n("12mu"),d=n("pjml"),p=n("abE0"),m="ultra.directives.confirmationNeeded",f="components.directives.confirmation-needed.",h="-",g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Always=new t("always"),t.Once=new t("once"),t.UserChoice=new t("userChoice"),t}(a.a);function v(e,t){return f+t+h+e}var b=function(){function t(e,t,n,r,i,o){var s=this;this.scope=e,this.attrs=n,this.$q=r,this.bbContext=i,this.$modal=o,this.clickHandling=!1,this.scope.confirmationNeeded=this,this.scope.modalAriaType=this.attrs.modalAriaType,this.scope.nextSelector=this.attrs.nextSelector,e.$on("show-confirmation",(function(e,t,n){t===s.attrs.modalName&&s.handleButtonClick(n)})),t.on("click",(function(e){s.handleButtonClick(e)})),e.$on("$destroy",(function(){t.off()})),e.$on("dismiss-confirmation",(function(){s.modalInstance&&s.modalInstance.dismiss()}))}return t.prototype.handleButtonClick=function(e){var t=this;if(!this.clickHandling){var n;if(this.clickHandling=!0,this.attrs.getConfirmationKeyAndShowType)n=this.$q.when(this.scope.$eval(this.attrs.getConfirmationKeyAndShowType));else{if(!this.attrs.bbConfirmationNeeded)return void(this.clickHandling=!1);n=this.$q.when({confirmationKey:this.attrs.bbConfirmationNeeded,showType:this.attrs.showType})}e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault()),n.then((function(n){if(n.confirmationKey)switch(t.resourceType=n.confirmationKey.replace("resource/",""),t.choices=[],g.parse(n.showType)){case g.Always:t.confirmAction(e);break;case g.Once:t.showConfirmationActionOnlyOnce(e);break;default:t.showConfirmationActionByUserChoice(e)}else t.invokeClickAction(e)}))}},t.prototype.showConfirmationActionOnlyOnce=function(e){var t=this;this.bbContext.getPreference(this.createPreferenceKey("dont-ask-again"),"false").then((function(n){"true"===n.value?t.invokeClickAction(e):t.confirmAction(e)}))},t.prototype.createResourceKey=function(e){return f+e+h+this.resourceType},t.prototype.createPreferenceKey=function(e){return"{{context}}.confirmation".replace("{{context}}",this.resourceType+h+e).replace(/\-/g,".")},t.prototype.addToChoices=function(e,t,n){var r;r=this.attrs.modalContext&&"predict"===this.attrs.modalContext?{key:e,value:!!t,localizedKey:e,preferenceKey:this.createPreferenceKey(e),isDisable:!!n}:{key:e,value:!!t,localizedKey:this.createResourceKey(e),preferenceKey:this.createPreferenceKey(e),isDisable:!!n},this.choices.some((function(t){return t.key===e}))||this.choices.push(r)},t.prototype.parseChoicesFromAttr=function(e){if(e&&e.length)for(var t=0;t<e.length;t++)this.addToChoices(e[t].key,e[t].value,e[t].isDisable)},t.prototype.showConfirmationActionByUserChoice=function(e){var t=this;this.bbContext.getPreference(this.createPreferenceKey("dont-ask-again"),"false").then((function(n){if("true"===n.value)if(t.attrs.choices){var r=JSON.parse(t.attrs.choices),i=[];r.forEach((function(e){i.push(t.bbContext.getPreference(t.createPreferenceKey(e.key),"false").then((function(n){var r="true"===n.value;t.scope.$emit(e.key,r)})))})),t.$q.all(i).then((function(){t.invokeClickAction(e)}))}else t.invokeClickAction(e);else t.addToChoices("dont-ask-again"),t.confirmAction(e)}),(function(){t.addToChoices("dont-ask-again"),t.confirmAction(e)}))},t.prototype.confirmAction=function(e){var t,n=this;this.scope.titleKey=this.createResourceKey("title"),this.scope.instructionsKey=this.createResourceKey("instructions"),this.scope.cancelKey=this.createResourceKey("cancel"),this.scope.okKey=this.createResourceKey("ok"),this.attrs.choices&&this.attrs.choices.length>0&&this.parseChoicesFromAttr(JSON.parse(this.attrs.choices)),t=this.attrs.customClass?p.replace(/class="notification"/,'class="notification '+this.attrs.customClass+'"'):p,this.modalInstance=this.$modal.open({template:t,scope:this.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/confirmation-needed")}]},controller:["$scope",l.serviceName,function(e,t){e.okAction=function(){e.$close(),n.okClicked=!0},e.cancelAction=function(){n.attrs.otherChoiceAction?(e.$close(),n.okClicked=!1):e.$dismiss()};var r={};n.attrs.modalTranslateOptions&&(r=e.$eval(n.attrs.modalTranslateOptions)),e.modalTranslateOptions={},e.modalStrings={title:null,instructions:null,cancel:null,ok:null},Object.keys(e.modalStrings).forEach((function(n){e.modalTranslateOptions[n]=i.merge({key:e[n+"Key"]},r[n]),e.modalStrings[n]=t.translateSync(e.modalTranslateOptions[n])}))}]}),this.modalInstance.result.then((function(){n.okClicked?(n.persistResult(),n.invokeClickAction(e)):(n.scope.$eval(n.attrs.otherChoiceAction),n.clickHandling=!1)}),(function(){n.attrs.dismissCallback&&n.scope.$eval(n.attrs.dismissCallback),n.clickHandling=!1}))},t.prototype.persistResult=function(){var e=this;switch(g.parse(this.attrs.showType)){case g.Always:this.choices.forEach((function(t){e.scope.$emit(t.key,t.value)}));break;case g.Once:this.bbContext.setPreference(this.createPreferenceKey("dont-ask-again"),"true");break;default:this.choices.forEach((function(t){t.value&&(e.scope.$emit(t.key,t.value),e.bbContext.setPreference(t.preferenceKey,t.value.toString()))}))}},t.prototype.invokeClickAction=function(t){this.scope.$eval(this.attrs.fngClick||this.attrs.ngClick,{$event:t}),this.clickHandling=!1,this.scope.nextSelector&&e(this.scope.nextSelector).focus()},t}(),y=function(){function e(e,t,n){var r=this;this.$q=e,this.bbContext=t,this.$modal=n,this.priority=100,this.restrict="A",this.scope=!0,this.compile=function(e,t){return{pre:function(e,t,n){return new b(e,t,n,r.$q,r.bbContext,r.$modal)}}}}return e.$inject=["$q",c.b,u.b,d.o.serviceName],e}();o.module(m,["ngSanitize",c.a,u.a]).directive("bbConfirmationNeeded",["$injector",function(e){return e.instantiate(y)}])}).call(this,n("5iHu"))},lr7J:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));n("FNJT"),n("I22j");var r=n("nsO7"),i=n("wHJ2"),o=n("5MwF"),s=n("XGja"),a=n("hkqm"),c=n("lEL+"),l=n("PIPc"),u="ultra.components.directives.infiniteScroll",d="bbInfiniteScroll",p=function(){function e(e,t,n,i,o,a,c){var u=this;this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$q=o,this.timeout=a,this.toast=c,this.isManualLoad=!1,this.promises=[];var p=n.$observe("infiniteScrollTrayId",(function(e){u.trayId=e,p()}));if(n.infiniteScrollLocalizationKeysPrefix)var m=n.$observe("infiniteScrollLocalizationKeysPrefix",(function(e){u.localizationKeysPrefix=e,u.trayLocalizationKeysPrefix=e+".saveTray",m()}));else this.localizationKeysPrefix="components.directives.infinite-scroll",this.trayLocalizationKeysPrefix="";n.infiniteScrollLocalizationValues&&(this.localizationValues=e.$eval(n.infiniteScrollLocalizationValues)),e.$watchGroup([n.infiniteScrollTotalCount,n.infiniteScrollCurrentCount],(function(e){if(null!=e[0]&&null!=e[1]){if(u.totalCount=e[0],u.currentCount=e[1],u.remainingCount=u.totalCount-u.currentCount,u.remainingCount<0)throw new Error("The remainingCount of "+u.remainingCount+" should never be a negative number!");u.setLoadCount()}})),e.$watch(n.infiniteScrollDisabled,(function(e){u.disabled=e}));var f,h=e.$watch(n.infiniteScrollLoadLimit,(function(e){null!=e&&(u.loadLimit=e,u.setLoadCount(),h())}));i(t)(e),this.timeout((function(){f=i(l)(e).insertAfter(t)}),this.scope,0,!1),this.scope.$on(d,(function(e,t,n){if(u.trayId===t){var i=u.$q.defer();if(n.then((function(){i.resolve()})).catch((function(){return i.resolve()})),u.promises.push(i),i.promise.then((function(){return r.remove(u.promises,(function(e){return n===e}))})),u.cancelLoading=u.toast.showLoading({trayId:t,trayLocalizationKeysPrefix:u.trayLocalizationKeysPrefix,promise:i.promise}),u.attrs.infiniteScrollFocusableChildrenSelector&&u.isManualLoad){u.isManualLoad=!1;var o=u.loadCount;n.then((function(){u.timeout((function(){var e=u.element.find(u.attrs.infiniteScrollFocusableChildrenSelector);s.a(e.eq(e.length-o))}),u.scope,0,!1)}))}}})),this.scope.$on("$destroy",(function(){f&&f.remove(),u.breakPromises(),u.cancelLoading&&u.cancelLoading()}))}return e.prototype.breakPromises=function(){r.forEach(this.promises,(function(e){e.resolve()}))},e.prototype.loadMoreItems=function(){this.remainingCount>0&&(this.isManualLoad=!0,this.scope.$eval(this.attrs.bbInfiniteScroll))},Object.defineProperty(e.prototype,"loadMoreLocalizationValues",{get:function(){return i.extend({},this.localizationValues,{loadCount:this.loadCount})},enumerable:!0,configurable:!0}),e.prototype.setLoadCount=function(){null!=this.loadLimit&&null!=this.remainingCount&&(this.loadCount=Math.min(this.loadLimit,this.remainingCount))},e.$inject=["scope","element","attrs","$compile","$q",c.b,a.b],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.terminal=!0,this.compile=function(e,n){return function(e,n,r){var i=e.$eval(r.infiniteScrollCurrentCount),o=e.$eval(r.infiniteScrollTotalCount);null!=i&&null!=o&&i>=o||n.attr("infinite-scroll",r.bbInfiniteScroll),n.removeAttr("bb-infinite-scroll"),e.infiniteScroll=t.$injector.instantiate(p,{scope:e,element:n,attrs:r})}}}return e.$inject=["$injector"],e}();i.module(u,["infinite-scroll",c.a,a.a]).value("THROTTLE_MILLISECONDS",o.a.infiniteScrollThrottleMS).directive("bbInfiniteScroll",["$injector",function(e){return e.instantiate(m)}])},mhLG:function(e,t){e.exports='<bb-modal id="folder-drop-depth-limit-modal" class="notification js-folder-drop-limit"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.folderDropDepthLimitTitle\' : \'components.directives.fileUpload.folderDropDepthLimitNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.folderDropDepthLimitFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFulNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},mkvA:function(e,t){e.exports='<div class="reveal-modal fade open" ng-class="{ in: $parent.animate }" role="{{::modal.ariaType}}" tabindex="-1" data-reveal\n     ng-multi-transclude-controller ng-attr-aria-label="{{::modal.titleString}}" ng-keydown="modal.handleKeyDown($event)">\n  <div class="reveal-modal__header">\n    <h1 class="reveal-modal__title" aria-describedby="modal-contents" bb-focus>\n      {{::modal.titleString}}\n    </h1>\n    <button class="close-reveal-modal standard-button light-background" \n            ng-click="modal.dismiss()" \n            bb-translate-attrs="{ \'aria-label\': \'global.close\' }"\n            analytics-id="{{modal.analyticsIdTagPrefix}}.modal.close.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  </div>\n  <div id="modal-contents" class="reveal-modal__contents" ng-multi-transclude="modal-contents"></div>\n  <footer ng-multi-transclude="modal-footer" class="reveal-modal__footer">\n    <div class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n      <div ng-multi-transclude="modal-footer-help-link" class="reveal-modal__footer-help-link-container"></div>\n      <div class="reveal-modal__footer-buttons">\n        <span ng-multi-transclude="modal-footer-button-secondary" class="reveal-modal__footer-button-container"></span>\n        <span ng-multi-transclude="modal-footer-button-primary" class="reveal-modal__footer-button-container"></span>\n      </div>\n    </div>\n  </footer>\n  <div class="reveal-modal__dismiss" ng-class="{ \'hide\' : !modal.dismissString }">\n    <span class="reveal-modal__divider"></span>\n    <button class="button button--text dismiss-message expand" ng-click="modal.dismiss()" analytics-id="{{modal.analyticsIdTagPrefix}}..modal.dismiss.button">\n      <span>{{::modal.dismissString}}</span>\n    </button>\n  </div>\n</div>\n'},mxgC:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d}));var r,i,o=n("D57K"),s=n("e6jQ");function a(){var e=window.webkit;return!!(e&&e.messageHandlers&&e.messageHandlers.MobileApp)||!!window.MobileApp}function c(){window.onMobileApiMessage=p}function l(e){try{var t=window.webkit;if(t&&t.messageHandlers&&t.messageHandlers.MobileApp&&t.messageHandlers.MobileApp.postMessage(e),window.MobileApp){var n=JSON.stringify(e);window.MobileApp.sendMessageToMobile(n)}}catch(e){console.error(e)}}!function(e){e.AttemptSaveAndClosed="ATTEMPT_SAVE_AND_CLOSED",e.AttemptSubmitted="ATTEMPT_SUBMITTED",e.AttemptFeedbackOpened="ATTEMPT_FEEDBACK_OPENED",e.AttemptRubricOpened="ATTEMPT_RUBRIC_OPENED",e.AttemptGoalAlignmentOpened="ATTEMPT_GOAL_ALIGNMENT_OPENED",e.AttemptFeedbackClosed="ATTEMPT_FEEDBACK_CLOSED",e.AttemptRubricClosed="ATTEMPT_RUBRIC_CLOSED",e.AttemptGoalAlignmentClosed="ATTEMPT_GOAL_ALIGNMENT_CLOSED",e.AttemptOpened="ATTEMPT_OPENED",e.AttemptReviewOpened="ATTEMPT_REVIEW_OPENED",e.DocumentOpened="DOCUMENT_OPENED",e.LoadDocument="LOAD_DOCUMENT"}(r||(r={})),function(e){e.Success="Success",e.Fail="Fail"}(i||(i={}));var u={};function d(e){return new Promise((function(t,n){var r=Object(s.b)();u[r]={resolve:t,reject:n},l(Object(o.__assign)(Object(o.__assign)({},e),{correlationId:r}))}))}function p(e){if(e){var t=JSON.parse(e);if(t&&t.correlationId){var n=u[t.correlationId];n&&(t.status===i.Fail?n.reject(t):n.resolve(t))}}}},n1KZ:function(e,t){e.exports='<footer class="panel-footer notification row collapse" ng-click="toastClicked()"\n        analytics-id="components.services.toast.clicked">\n  <bb-save-tray toast-message="::message" toast-short-message="::shortMessage" toast-icon="::icon" toast-class="::toastClass" toast-status="::toastStatus"></bb-save-tray>\n</footer>\n'},n88p:function(e,t,n){},nL6A:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-course-is-closed.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-course-is-closed">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-is-closed.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-course-is-closed.alt"\n          bb-translate>components.services.error-modal.error-course-is-closed.alt</button>\n</bb-modal>\n'},nPfc:function(e,t){e.exports='\x3c!-- Onsubmit Errors first --\x3e\n<script type="text/ng-template" id="default-onsubmit-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="numberInvalidOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.number_invalid</span></span>\n  <span ng-message="numberLargeOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberLargeOnsubmit.max }">components.directives.validation.messages.onsubmitErrors.number_large</span></span>\n  <span ng-message="numberSmallOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberSmallOnsubmit.min }">components.directives.validation.messages.onsubmitErrors.number_small</span></span>\n  <span ng-message="maxlengthOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.maxlength</span></span>\n  <span ng-message="urlOnsubmit"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="requiredOnsubmit"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="emailOnsubmit"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="timeOnsubmit"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="dateOnsubmit"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n<\/script>\n\n\x3c!-- Errors --\x3e\n<script type="text/ng-template" id="default-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="rangeInvalid"><span bb-translate translate-values="{ value: errors.rangeInvalidArgs.min }">components.directives.validation.messages.errors.range_invalid</span></span>\n  <span ng-message="numberInvalid"><span bb-translate>components.directives.validation.messages.errors.number_invalid</span></span>\n  <span ng-message="numberLarge"><span bb-translate translate-values="{ value: errors.numberLarge.max }">components.directives.validation.messages.errors.number_large</span></span>\n  <span ng-message="numberSmall"><span bb-translate translate-values="{ value: errors.numberSmall.min }">components.directives.validation.messages.errors.number_small</span></span>\n  <span ng-message="maxlength"><span bb-translate translate-values="{ diff: errors.maxlength.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n  <span ng-message="url"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="required"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="email"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="phoneNumber"><span bb-translate>components.directives.validation.messages.errors.phone_number_noSymbolsOrSpaces</span></span>\n  <span ng-message="time"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="date"><span class="js-error-date" bb-translate>components.directives.validation.messages.errors.date</span></span>\n  <span ng-message="maxDate"><span bb-translate translate-values="{ value: errors.maxDate.dateMax }">components.directives.validation.messages.errors.max_date</span></span>\n  <span ng-message="minDate"><span bb-translate translate-values="{ value: errors.minDate.dateMin }">components.directives.validation.messages.errors.min_date</span></span>\n  <span ng-message="schemaSymbolString"><span bb-translate>components.directives.validation.messages.errors.schema_symbol_string</span></span>\n<\/script>\n\n\x3c!-- Immediate Errors --\x3e\n<script type="text/ng-template" id="default-immediate-error-messages">\n  <span ng-message="maxlengthImmediate"><span bb-translate translate-values="{ diff: immediateErrors.maxlengthImmediate.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n<\/script>\n\n\x3c!-- Warnings --\x3e\n<script type="text/ng-template" id="default-warning-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.warnings.invalid_bbml_markups_cleanup</span></span>\n  <span ng-message="maxlengthWarning"><span bb-translate translate-values="{ left: warnings.maxlengthWarning.left }">components.directives.validation.messages.warnings.maxlength.plural</span></span>\n<\/script>\n\n<div class="bb-validation-messages form-element-onsubmit-errors" ng-class="{\'sr-only\': !showOnsubmitErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.onsubmitFieldHasError</div>\n  </div>\n\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="onsubmitErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-onsubmit-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.fieldHasError</div>\n  </div>\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="errors">\n    <ng-transclude class="js-error-message"></ng-transclude>\n    <div ng-messages-include="default-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showImmediateErrors}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="immediateErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-immediate-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-warnings" ng-class="{\'sr-only\': !showWarnings}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="warnings">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-warning-messages"></div>\n  </div>\n</div>\n'},nYZ0:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return w}));var r=n("D57K"),i=n("wHJ2"),o=n("nsO7"),s=n("+O05"),a=n("lmMM"),c=n("k9iv"),l=n("pjml"),u=n("e6jQ"),d=n("Q/M7"),p=n("adx1"),m=n("JfV0"),f=n("Sa5G"),h=n("yC9S"),g=9e5,v="ultra.services.content",b="contentService",y="content-update",S=function(e){function t(){var n;if(t._instance)throw new Error("Error: Instantiation failed: Use IndicatorCacheService.getInstance() instead of new.");return n=e.call(this)||this,t._instance=n,n}return Object(r.__extends)(t,e),t.getInstance=function(){return t._instance},t.prototype.classConversationIndicatorRemoved=function(e,n,r){this.$emitEvent(t.CLASS_CONVERSATION_INDICATOR_REMOVED,e,n,r)},t.prototype.groupConversationIndicatorRemoved=function(e,n,r){this.$emitEvent(t.GROUP_CONVERSATION_INDICATOR_REMOVED,e,n,r)},t.prototype.$onClassConversationIndicatorRemoved=function(n){return e.prototype.$onEvent.call(this,t.CLASS_CONVERSATION_INDICATOR_REMOVED,n)},t.prototype.$onGroupConversationIndicatorRemoved=function(n){return e.prototype.$onEvent.call(this,t.GROUP_CONVERSATION_INDICATOR_REMOVED,n)},t._instance=new t,t.CLASS_CONVERSATION_INDICATOR_REMOVED="class-conversation-indicator-removed",t.GROUP_CONVERSATION_INDICATOR_REMOVED="group-conversation-indicator-removed",t}(p.a),C=function(){function e(e,t,n,r,i,o,s,a){var c=this;this.$q=e,this.DSCacheFactory=t,this.CourseModel=n,this.PartnerContentIdModel=r,this.errorModal=i,this.assessment=o,this.$rootScope=s,this.$ngRedux=a,this.rootNodeCache=t.createCache("rootNodes"),this.settingsCache=t.createCache("contentSettings"),this.indicatorsCache=t.createCache("indicators",{maxAge:g,deleteOnExpire:"aggressive"}),this.fetchIndicatorsPromiseCache={},this.indicatorCacheService=S.getInstance(),h.b.OnRootScope(s,"content-update",(function(e,t){return c.refreshContentInCache(t)})),this.subscribeToRedux(a)}return e.prototype.subscribeToRedux=function(e){e.connect((function(e){return{}}),(function(e){return{deleteContentInStore:function(t){return e(m.actions.content.deleteContentInStore(t))}}}))(this)},e.prototype.truncateDescription=function(t,n){if(n=n||e.MAX_LENGTH,!t||t.length<=n)return t;n-=" ...".length;var r=t.lastIndexOf(" ",n);return r<=0&&(r=n),t.substr(0,r)+" ..."},e.prototype.findRootNode=function(e,t){var n=this.getCacheKey(t,e.$pk),r=this.rootNodeCache.get(n);return r||(r=e.contents.$find(t.toString()),this.rootNodeCache.put(n,r)),r},e.prototype.getCacheKey=function(e,t){return e.toString()+t},e.prototype.getSettings=function(e){return this.settingsCache.get(e)},e.prototype.putSettings=function(e,t){return this.settingsCache.put(e,t)},e.prototype.removeSettings=function(e){return this.settingsCache.remove(e)},e.prototype.getCourseIndicators=function(e){return this.indicatorsCache.get("courseId_"+e)},e.prototype.putCourseIndicators=function(e,t){return this.indicatorsCache.put("courseId_"+e,t)},e.prototype.removeCourseIndicators=function(e){return this.indicatorsCache.remove("courseId_"+e)},e.prototype.refreshContentInCache=function(e){if(e)for(var t=e.courseId,n=f.h.getValues(),r=0;r<n.length;r++){var i=n[r],o=this.getCacheKey(i,t),s=this.rootNodeCache.get(o);if(s)if(this.updateCachedContent(s,e))return void this.rootNodeCache.put(o,s)}},e.prototype.updateCachedContent=function(e,t){if(e.id===t.id)return null!=t.isAvailable&&(e.isAvailable=t.isAvailable),null!=t.visibility&&(e.visibility=t.visibility),null!=t.isPartiallyVisible&&(e.isPartiallyVisible=t.isPartiallyVisible),null!=t.isGroupContent&&(e.isGroupContent=t.isGroupContent),null!=t.assignedGroups&&(e.assignedGroups=t.assignedGroups),t.adaptiveReleaseRules&&(e.adaptiveReleaseRules=t.adaptiveReleaseRules),e.title=t.title,e.attachedForumLink=t.attachedForumLink,e.ui&&(void 0===e.ui.hasConversationAttached||e.isScorm())&&(e.ui.hasConversationAttached=!!t.attachedForumLink),e.updateProctoringSettings(t),!0;if(e.children)for(var n=0;n<e.children.length;n++){var r=e.children[n];if(this.updateCachedContent(r,t))return!0}return!1},e.prototype.getOrMakeContentInContentTree=function(e,t,n,r,i,o){return n?this.getContentInContentTree(e,t,n):this.makeContentInContentTree(e,t,r,i,o)},e.prototype.getContentInContentTree=function(e,t,n){var r,i,o=this;return e.$asPromise().then((function(e){return e.children=e.children||e.getChildren({limit:0,recursive:!0}),e.children.$asPromise()})).then((function(){if(n){if(r=e.findInTreeById(n))r.extensionAttributes||!r.isTest()&&!r.isAssignment()||r.$fetch({fields:"extensionAttributes"});else{r=o.CourseModel.$new(t).contents.$find(n,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group,extensionAttributes"}).$allow([403])}return r.$asPromise()}})).then((function(){if(r&&r.parentId)return(i=e.findInTreeById(r.parentId))||(i=o.CourseModel.$new(t).contents.$find(r.parentId)),i.$asPromise()})).then((function(){return{content:r,parentFolder:i}}))},e.prototype.makeContentInContentTree=function(e,t,n,r,i,o){var s,a,c=this;return e.$asPromise().then((function(e){return e.children=e.children||e.getChildren({limit:0}),e.children.$asPromise()})).then((function(){return(a=c.getParentFolder(n,t,e)).$asPromise()})).then((function(){return a.children=a.children||a.getChildren({limit:0}),a.children.$asPromise()})).then((function(){var e=a.children.indexOfItemById(void 0);return!o&&e>=0&&a.children[e].positionBefore===r&&a.children[e].positionAfter===i?s=a.children[e]:(s=a.children.$build(),(e=a.children.getInsertionIndex(r,i,!0,a.hasMoreChildren))>=0&&s.addAndRevealAtIndex(e),a.children.paging&&a.children.paging.count++),null!=r&&(s.positionBefore=r),null!=i&&null==r&&(s.positionAfter=i),s.parentId=n||a&&a.id,s.depth=a&&null!=a.depth?a.depth+1:void 0,s.courseId=t,{content:s,parentFolder:a}}))},e.prototype.getParentFolder=function(e,t,n){var r;return e?(r=n.findInTreeById(e))||(r=this.CourseModel.$new(t).contents.$find(e)):r=n,r},e.prototype.makeSoftLinkContentInContentTree=function(e,t,n,r,i,o){return this.makeContentInContentTree(t,n,r,i,o).then((function(t){var n=t.content;return e&&e.$pk&&(n.contentHandler=l.r.ContentHandler.CourseLink,n.ui.linkSource=e),n.id=null,n.description=e.description,n.title=e.title,n.courseId=e.courseId,n.isAvailable=e.isAvailable,n.visibility=e.visibility,n.contentDetail={"resource/x-bb-courselink":{linkSourceId:e.id,linkSourceTable:"CONTENT"}},n}))},e.prototype.isEmpty=function(e){return!e||0===e.trim().length},e.prototype.parseForumId=function(e){var t=e.split("/");return t[t.length-1]},e.prototype.determineVisibility=function(e,t){return e?l.r.Visibility.Visible:l.r.Visibility.Hidden},e.prototype.generateDeleteConfirmationKey=function(e,t){var n=this,r=this.$q.defer();return e.ui.modalShowType=a.a.UserChoice.toString(),!e.isFolder()&&!e.isLearningModule()||e.isRoot()?e.canHaveSharedGradingColumn()&&e.hasGradingColumn()&&f.g.PartnerCloud.isEqualTo(e.contentHandler)?this.PartnerContentIdModel.getContentIds(e.courseId,e.linkRef).then((function(t){t.contentIds.length>1?(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-shared-grade-column",r.resolve(e)):n.checkForAttempts(e,r)})).catch((function(t){n.errorModal.handleApiError(t.$response),r.reject(e)})):this.checkForAttempts(e,r):e.isBbPage()?(e.ui.deleteConfirmationKey=f.g.Page.toString(),r.resolve(e)):e.getChildren().$then((function(n){if(n&&n.length>0){e.ui.modalShowType=a.a.Always.toString();var i=n.filter((function(e){return e&&e.isDiscussion()})).length;e.hasGradedContentItems().then((function(o){o?e.ui.deleteConfirmationKey=e.contentHandler+"-contains-graded-items":i===n.length?e.ui.deleteConfirmationKey=e.contentHandler+"-all-discussions-"+t:e.ui.deleteConfirmationKey=i>0?e.contentHandler+"-contains-discussions":e.contentHandler+"-no-discussions",r.resolve(e)}))}else e.ui.deleteConfirmationKey=e.contentHandler+"-empty",r.resolve(e)})),r.promise},e.prototype.checkForAttempts=function(e,t){var n=this;e.canHaveAttempts()&&e.hasGradingColumn()?(e.ui.modalShowType=a.a.Always.toString(),e.getAttemptCount().then((function(n){e.ui.deleteConfirmationKey=n>0?e.getContentDisplay().deleteKey()+"-data":e.getContentDisplay().deleteKey(),t.resolve(e)})).catch((function(r){403===r.$response.status?(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-unknown",t.resolve(e)):(n.errorModal.handleApiError(r.$response),t.reject(e))}))):f.g.Discussion.isEqualTo(e.contentHandler)?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.$fetch().$then((function(n){var r=n.contentDetail[f.g.Discussion.toString()];r&&r.properties.allowForumGrading&&(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded"),t.resolve(e)}))):f.g.CourseLink.isEqualTo(e.contentHandler)?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.getLinkContentSource({fromServer:!0}).$then((function(n){if(f.g.Discussion.isEqualTo(n.contentHandler)){var r=n.contentDetail[f.g.Discussion.toString()];r&&r.properties.allowForumGrading&&(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded")}t.resolve(e)}))):(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),t.resolve(e))},e.prototype.deleteContent=function(e){var t=this;if(e.id){e.ui.isDeleted=!0;var n={};return(e.isGroupContent||e.isFolder())&&(n.deleteGroups=!0),(e.canHaveAttempts()||e.isDiscussion()||e.isFolder())&&(n.deleteGrades=!0),e.withParams(n).$destroy().$suppressErrorDialog().$asPromise().then((function(n){return t.deleteContentInStore&&t.deleteContentInStore(e.id),n})).catch((function(n){e.ui.isDeleted=!1;var r=n.$response;return t.assessment.isExternallyRefQuestionsAPIError(r.data)?t.assessment.openHasExternallyRefQuestionsModal(t.getExternallyRefQuestionsModalType(e.contentHandler)):t.errorModal.handleApiError(r),t.$q.reject(r)}))}return this.$q.when()},e.prototype.getExternallyRefQuestionsModalType=function(e){return f.g.Folder.isEqualTo(e)?s.b.FOLDER:s.b.ASSESSMENT},e.prototype.canOnlyCreateDiscussion=function(e){return e&&e.children&&e.children.permissions&&!e.children.permissions.create&&e.children.permissions.contentHandlerPermissionMap&&e.children.permissions.contentHandlerPermissionMap.createDiscussion},e.prototype.canCreateAllContent=function(e){return e&&e.children&&e.children.permissions&&e.children.permissions.create},e.prototype.convertBbMLToAttemptFileContentBlocks=function(e){var t=[];return this.convertBbMLToContentBlocks(e).forEach((function(e){"attemptFileBlock"in e&&t.push(e.attemptFileBlock)})),t},e.prototype.convertAttemptFileContentBlocksToBbML=function(e){var t=[];e.forEach((function(e){t.push({attemptFileBlock:e})}));return this.convertContentBlocksToBbML(t,"question1 ")},e.prototype.convertBbMLToContentBlocks=function(e){var t=[],n=document.createElement("div");n.innerHTML=e;for(var r=0;r<n.children.length;r++){var i=n.children[r];if("A"===i.tagName)t.push(this.convertBbMLToFileBlock(i));else if("DIV"===i.tagName){var o=this.getBlockIdFromBbML(i);t.push({textBlock:i.innerHTML.trim(),id:o})}}return t},e.prototype.convertBbMLToFileBlock=function(e){var t={file:{}};if(e.dataset&&e.dataset.bbfile)try{var n=JSON.parse(e.dataset.bbfile);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:"inline"===n.render},t.linkName=n.linkName,t.currentMimeType=n.mimeType}catch(e){}else if(e.dataset&&e.dataset.bbmedia)try{var r=JSON.parse(e.dataset.bbmedia);t.alternativeText=r.alternativeText,t.ui={isRenderedInline:"inline"===r.render}}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));var i=e.href;0===i.indexOf("http://localhost")&&(i=d.c(i.substr("http://localhost".length))),t.downloadUrl=i;var o=i.match(/xid-(\d+_\d+)/);return o&&(t.id=o[1]),{attemptFileBlock:t,id:this.getBlockIdFromBbML(e)}},e.prototype.convertContentBlocksToBbML=function(e,t){var n=document.createElement("div");return e.forEach((function(e){if("attemptFileBlock"in e){var t=document.createElement("a");if(t.href=e.attemptFileBlock.downloadUrl,e.attemptFileBlock.ui){var r={};e.attemptFileBlock.ui.isRenderedInline?r.render="inline":r.render="attachment",e.attemptFileBlock.alternativeText&&(r.alternativeText=e.attemptFileBlock.alternativeText),e.attemptFileBlock.linkName&&(r.linkName=e.attemptFileBlock.linkName),e.attemptFileBlock.currentMimeType&&(r.mimeType=e.attemptFileBlock.currentMimeType),t.dataset.bbfile=JSON.stringify(r)}e.id&&(t.id=e.id),t.innerHTML=e.attemptFileBlock.linkName+"?"+e.attemptFileBlock.currentMimeType,n.appendChild(t)}else if("textBlock"in e){var i=document.createElement("div");e.id&&(i.id=e.id),i.innerHTML=e.textBlock,n.appendChild(i)}e.isNewToBbML&&delete e.isNewToBbML})),(t||"")+n.innerHTML},e.prototype.getBlockIdFromBbML=function(e){return e.id?e.id:this.generateBlockId()},e.prototype.generateBlockId=function(){return"bbml-editor-id_"+u.b()},e.prototype.fetchIndicatorsPerRequest=function(e){var t=this,n=this.fetchIndicatorsPromiseCache[e];return n||(n=this.CourseModel.$new(e).indicators.$fetch().$asPromise().then((function(n){return t.putCourseIndicators(e,n),n}),(function(e){401!==e.$response.status&&(e.$response.status=null),console.error("Fetch indicators error!")})).finally((function(){delete t.fetchIndicatorsPromiseCache[e]})),this.fetchIndicatorsPromiseCache[e]=n,n)},e.prototype.fetchIndicators=function(e,t){if(t)return this.fetchIndicatorsPerRequest(e);var n=this.getCourseIndicators(e);return n?this.$q.when(n):this.fetchIndicatorsPerRequest(e)},e.prototype.getCourseContentCache=function(e,t){var n=this.getCourseIndicators(e);return n?n.filter((function(e){return e.contentId===t}))[0]:null},e.prototype.setClassConversationHasIndicatorToFalseInCache=function(e,t){var n=this.getCourseIndicators(e);if(n){var r=o.find(n,(function(e){return e.contentId===t}));r&&(r.classConversationHasIndicator=!1,r.groupIds||(n=o.filter(n,(function(e){return e.contentId!==t}))),this.putCourseIndicators(e,n),this.indicatorCacheService.classConversationIndicatorRemoved(e,t,!!r.groupIds))}},e.prototype.removeGroupIdFromIndicatorCache=function(e,t,n){if(!n)return null;var r=this.getCourseIndicators(e);if(r){var i=o.find(r,(function(e){return e.contentId===t}));if(i){if(i.groupIds=o.filter(i.groupIds,(function(e){return n!==e})),i.groupIds&&0===i.groupIds.length)return delete i.groupIds,i.classConversationHasIndicator||(r=o.filter(r,(function(e){return e.contentId!==t}))),this.putCourseIndicators(e,r),void this.indicatorCacheService.groupConversationIndicatorRemoved(e,t,i.classConversationHasIndicator);this.putCourseIndicators(e,r)}}},e.prototype.clearContentGroups=function(e,t){var n=this,r=this.$q.defer();if(e.assignedGroups&&e.assignedGroups.length){if(e.assignedGroups.some((function(e){return!e.group})))throw new Error("Expected group to be expanded on content group assignments when clearing groups.");var i=e.assignedGroups.filter((function(e){return!e.group.groupSetId})).map((function(e){return{method:"DELETE",relativeUrl:e.groupId}}));i.length>0&&t.groups.batchUpdate(i),e.isGroupContent=!1,e.assignedGroups=[],e.saveAssignedGroups(!0).$asPromise().then((function(){n.$rootScope.$broadcast(y,e),r.resolve(e)}))}else r.resolve(e);return r.promise},e.MAX_LENGTH=60,e.MAX_LENGTH_IN_CONTENT_ITEM=250,e.$inject=["$q","DSCacheFactory",l.o.serviceName,l.W.serviceName,c.c,s.d,"$rootScope","$ngRedux"],e}(),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(C);i.module(v,["angular-data.DSCacheFactory",l.R,c.b,s.c]).service(b,C)},neh4:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n("JzsJ");var r=n("5MwF"),i=n("wHJ2"),o=n("0JpG"),s=n("w9Zy"),a=n("Qbdf"),c=n("X455"),l=n("bF8R"),u=n("vdfi"),d=n("jhBu"),p=n("o5Lu"),m=n("TnpK"),f=n("pjml"),h="ultra.course.content.assignment.routes";i.module(h,[o.moduleName,l.a,d.a,p.f,m.b,a.b]).config([m.c,a.c,c.b,function(e,t,i){var p;e.peekState("assignment",{abstract:!0,url:"/assignment/:assignmentId?courseId",resolve:(p={},p[a.d]=t.resolve,p[c.c]=i.resolve,p.contentData=[a.d,l.b,m.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.assignmentId,contentHandler:f.r.ContentHandler.UltraAssignment})}],p.currentContent=["contentData",function(e){return e.courseContent}],p.currentColumn=["contentData",function(e){return null!=e.gradingColumn.rubricAssociations?e.gradingColumn.$asPromise():e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()}],p),peekStates:["conversations","message"],peekViewName:"assignment-conversation@"}).peekState("assignment.router",{url:"/route",routingFunction:[f.o.serviceName,d.b,m.d,function(e,t,n){var r=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;e.$new(r).contents.$find(n.nextParams.assignmentId).$then((function(e){e.canViewAsInstructor()?n.go(n.prev.name,n.prevParams).then((function(){n.goPeekState("gradebook-item.assignment",{courseId:e.courseId,contentId:e.id,gradeitemView:"details"})})):n.go(n.prev.name,n.prevParams).then((function(){n.goPeekState("assignment.view",{courseId:e.courseId,assignmentId:e.id})}))}))}]}).peekState("assignment.view",{url:"/view",resolve:{translations:["$q",o.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}],prefetch:["$q",f.o.serviceName,m.d,function(e,t,n){var i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;r.a.features.httpEase&&t.$new(i).contents.$find(n.nextParams.assignmentId,{expand:"assignedGroups,associatedRubrics,alignedGoals"}).$then((function(e){t.$new(i).gradebook.columns.$find(e.getDeployedAssessment().gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.rows.alignedGoals"})}))}]},require:[function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(38),n.e(45),n.e(86)]).then(n.bind(null,"pA7Z"))}],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations","message"],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt",{abstract:!0,url:"/attempt"}).peekState("assignment.view.attempt.edit",{url:"/{attemptId:_[0-9]+_1}",onEnter:[s.e,m.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{translations:["$q",o.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/goal-alignment/goal")])}]},require:[function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(39),n.e(44),n.e(38),n.e(91),n.e(45),n.e(595)]).then(n.bind(null,"OXIQ"))}],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations","message","rubric-evaluation","rubric-view",u.b],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt.finished",{url:"/view",onEnter:[s.e,m.d,function(e){e.shrinkTopPanel()}],params:{gradeDetail:null},resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/assignment/assignment")}]},require:function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(38),n.e(45),n.e(86)]).then(n.bind(null,"pA7Z"))},pageTitle:"course.content.assignmentAttempt"}).peekState("assignment.grade",{url:"/grade",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/assignment/assignment")}]},require:function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(38),n.e(45),n.e(86)]).then(n.bind(null,"pA7Z"))},pageTitle:"course.content.assignmentGrading"})}])},"nh++":function(e,t,n){},nkTj:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return S}));var r=n("D57K"),i=(n("QLzv"),n("BnCD"),n("/fvP"),n("5iHu")),o=n("wHJ2"),s=n("nsO7"),a=n("nbDY"),c=n.n(a),l=n("VdDF"),u=n("HDxW"),d=n("k9iv"),p=n("z6Q5"),m=(n("JfV0"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.GET=new t("GET"),t.POST=new t("POST"),t.PATCH=new t("PATCH"),t.DELETE=new t("DELETE"),t}(c.a)),f=function(e){return e},h="ultra.model.utilities",g="ultra.model.utilities.Utilities";function v(e,t){return null!=e?e:t}function b(e,t){return e.$isCollection?"PUT"===e.$response.config.method&&Array.isArray(t)?t.map((function(e){return e.statusCode>=200&&e.statusCode<300?o.fromJson(e.body):e.body})):(e.paging=t&&t.paging,e.permissions=t&&t.permissions,t&&t.results):t}var y,S=function(){function e(){}return e.isValid=function(e){return!s.isEmpty(e)&&/^_\d+_\d+$/.test(e)},e}();o.module(h,["restmod",d.b,p.a,u.a]).factory(g,["$http","$q",function(e,t){return{getDataMixin:function(e,n,r){return function(i,o){var s=(o=o||{}).path||"",a=o.overrideIdKey,c=o.params;return t.when(i).then((function(i){var l=t.defer();if(null==i||0===i.length)return l.resolve(i),l.promise;var u={};i.forEach((function(e){var t=function(e,t){return t.split(".").reduce((function(e,t){return t?e&&e[t]:e}),e)}(e,s+"."+(a||n));t&&(u[t]=u[t]||[]).push(e)}));var d=Object.keys(u);return e(d,c).$asPromise().then((function(e){e.forEach((function(e,t){u[d[t]].forEach((function(t){!function(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++)r[i]&&(e=e&&e[r[i]]);e&&(e[r[r.length-1]]=n)}(t,s+"."+(o.overrideResultKey||r),e)}))})),l.resolve(i)})),l.promise}))}},createHooksToFetchParent:function(){function n(n,r){n.cache={get:function(){return t.all([e(s.omit(n,"cache")),r.$resolve().$asPromise()]).then((function(e){return e[0]}))}}}var i={"before-fetch-many":function(e){n(e,this.$scope.$scope)},"before-fetch":function(e){n(e,this.$scope.$scope.$scope)}};return function(e){return Object(r.__assign)({"after-fetch-many":function(){var t=this;this.forEach((function(n){return n[e]=t.$scope.$scope}))},"after-fetch":function(){this[e]=this.$scope.$scope.$scope}},i)}}()}}]).factory("DateSerializer",(function(){return{encode:function(e){return l.a.parseDateToISOString(e)},decode:function(e){return l.a.parseStringToDate(e)}}})).filter("localDate",(function(){return function(e){return l.a.convertToLocalDate(e)}})).factory("BbRestmodFindMany",["restmod","$q",p.b,"restmod.Preload",function(e,t,n){return e.mixin({$extend:{"Scope.canCreate":function(){return this.permissions&&this.permissions.create},"Scope.canEdit":function(){return this.permissions&&this.permissions.edit},"Scope.canDelete":function(){return this.permissions&&this.permissions.delete},Scope:{findMany:function(e,r,i){var s=this,a=this.$collection();return a.$always((function(){return n.performBatch((function(n){return t.all(e.map((function(e){var t,a=s.$new(e).$fetch(o.extend(((t={})[p.c]=n,t),r));return(i||[]).length>0?a.$allow(i).$asPromise():a.$asPromise()})))})).then((function(e){e.forEach((function(e){return a.push(e)}))}))}))}}},$hooks:{"before-find-many":function(e){e.method="PUT",e.data=(e.params&&e.params.ids||[]).map((function(t){var n=o.copy(e.params);return delete n.ids,{method:"GET",relativeUrl:t+(n&&"?"+i.param(n)||"")}})),e.params&&delete e.params.ids}}})}]).factory("BbApiStyle",["restmod",function(e){return e.mixin((function(){this.setProperty("style","BB").setProperty("primaryKey","id")}))}]).factory("BbEncodeUrl",["restmod","inflector",function(e,t){return e.mixin({$extend:{Model:{encodeUrlName:function(e){return t.camelize(e)}}}})}]).factory("BbUi",["restmod",function(e){return e.mixin({ui:{mask:!0,init:function(){return{}}}})}]).factory("BbWithParams",["restmod",function(e){return e.mixin({$extend:{Record:{withParams:function(e,t){var n=function(r){r.params||(r.params={}),Object.keys(e).forEach((function(n){r.params[n]=t?t(r.params[n],e[n],n):e[n]})),this.$off("before-request",n)};return this.$on("before-request",n),this}}}})}]).factory("BbApiErrorHandlerInjector",["restmod","$injector","$window","$rootScope",d.c,u.b,function(e,t,n,r,i,o){return e.mixin({$hooks:{"after-request-error":function(){var e=this;this.__bb_suppressErrorDialog||setTimeout((function(){e.$then((function(){}),o.handle)}))}}})}]).factory("BbCheckStatusCode",["restmod",function(e){return e.mixin({$extend:{Resource:{isStatusCode:function(e){return this.$response&&this.$response.status&&this.$response.status===e}}}})}]).factory("BbPermissions",["restmod","restmod.Preload",function(e){return e.mixin({$extend:{Record:{canCreate:function(){return this.permissions&&this.permissions.create},canEdit:function(){return this.permissions&&this.permissions.edit},canDelete:function(){return this.permissions&&this.permissions.delete}}}})}]).factory("BbPermissionsMask",["restmod",function(e){return e.mixin({permissions:{mask:"CU"}})}]).factory("$ExtendRecord",["RMUtils",function(e){var t=Symbol("$extendRecord");return{$extend:{"Model.$extendRecord":function(e){return this[t]=this[t]||[],this[t].push(e),this},"Record.$decode":function(n,r){var i=this.$super.apply(this,arguments);if(void 0===this.$type)throw new Error("NOT_FOUND_$MODEL");return(this.$type[t]||[]).some((function(t){var r=t(i,n);return!!r&&(e.extendOverriden(i,r),!0)})),i}}}}]).factory("BbExpandParams",["restmod",function(e){var t=function(e){return!!s.isString(e)&&""!==e.trim()},n=function(e){return Array.isArray(e)?e.filter(t):s.isString(e)?e.split(",").filter(t):[]},r=Symbol("$expand_params"),i=function(e){return function(e,t){void 0===t&&(t=new Set);var r=n(e);return r.length<=0||r.every((function(e){return t.has(e)}))}(e&&e.expand||"",this[r])?this.$resolve():this.$fetch(e)};return e.mixin({$hooks:{"after-request":function(e){this[r]=function(e){var t=e.config&&e.config.params&&e.config.params.expand,r=n(t);return new Set(r)}(e)}},$extend:{"Record.$fetchIfNotExpanded":i,"Collection.$fetchIfNotExpanded":i}})}]).config(["restmodProvider",function(e){function t(e){e=e||[];var t=this.$promise=this.$promise||y.when(this),n=y.defer();return this.$promise=n.promise,t.then((function(e){n.resolve(e)}),(function(t){e.some((function(e){var n=[0];if("number"==typeof e)n[0]=e;else if("string"==typeof e){var r=e.split("-");n[0]=parseInt(r[0],10),n[1]=parseInt(r[1]||r[0],10)}return n[1]=n[1]||n[0],t&&t.$response.status>=n[0]&&t.$response.status<=n[1]}))?n.resolve(t):n.reject(t)})),this}function n(){var e=this;if(this.__bb_suppressErrorDialog=!0,!this.$promise)throw new Error("suppressErrorDialog must be called after performing an action, such as $fetch or $resolve");return this.$finally((function(){e.__bb_suppressErrorDialog=!1}))}function r(e,t){var n=Object.create(null);return Object.keys(e).forEach((function(r){if("$"!==r[0]){var i=e[r];o.equals(i,t[r])||(n[r]=t[r])}})),Object.keys(t).forEach((function(r){if("$"!==r[0]&&!n[r]){var i=t[r];o.equals(i,e[r])||(n[r]=i)}})),function e(t,n){var r=Object.keys(t);var i=[];var s;for(var a=0;a<r.length;a++)s=n?n+"."+r[a]:r[a],i.push(s),"$"!==r[a].charAt(0)&&t[r[a]]&&"object"==typeof t[r[a]]&&!o.isArray(t[r[a]])&&(i=i.concat(e(t[r[a]],s)));return i}(n,"")}e.rebase("BbRestmodFindMany"),e.rebase("BbPermissions"),e.rebase("BbPermissionsMask"),e.rebase("BbApiStyle"),e.rebase("BbApiErrorHandlerInjector"),e.rebase("BbEncodeUrl"),e.rebase("BbWithParams"),e.rebase("BbCheckStatusCode"),e.rebase("BbUi"),e.rebase("restmod.Preload"),e.rebase("restmod.FindMany"),e.rebase("$ExtendRecord"),e.rebase("BbExpandParams"),e.rebase({$extend:{"Model.$mixHook":function(e,t,n){var r=this,i="$mixHook_"+e,o=i+"_hook";r[i]=r[i]||[],r[i].push(t),r[o]=r[o]||Object(s.once)((function(){var t;r.mix({$hooks:(t={},t[e]=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(r[i]||[]).forEach((function(n){return n&&n.apply(e,t)}))},t)})})),r[o]();var a=Object(s.once)((function(){Object(s.remove)(r[i],(function(e){return e===t}))}));return n&&n.$on("$destroy",a),a}}}),e.rebase({"Model.unpack":b,"Record.$allow":t,"Collection.$allow":t,"Record.$suppressErrorDialog":n,"Collection.$suppressErrorDialog":n,"Record.$revert":function(e){var t=this,n=e||this.$_ultra_previous_version,i=r(n,this.$encode("U")),o=this.constructor.$buildRaw(n);return i.forEach((function(e){t[e]=o[e]})),this},"Record.$snapshot":function(){return this.$_ultra_previous_version=this.$encode("U"),this.$_ultra_previous_version},"Record.$getChangedKeys":function(){return r(this.$_ultra_previous_version||{},this.$encode("U"))},"Record.$getPreviousVersion":function(){return this.$_ultra_previous_version},"Record.$patch":function(e){var t=r(this.$_ultra_previous_version||{},this.$encode("U"));if(e&&e.length>0&&e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t.length>0){this.$_ultra_patchHolder={data:this.$wrap("U"),changedKeys:t};var n=function(e){var t=this.$_ultra_patchHolder.changedKeys,r=this.$_ultra_patchHolder.data;t.forEach((function(t){e.data[t]=r[t]})),this.$off("before-update",n)};this.$on("before-update",n),this.$save(t)}else{var i={method:"PATCH",url:this.$url("update"),data:{}};this.$dispatch("before-request",[i])}return this},$hooks:{"after-feed":function(){this.$snapshot()}}}),e.rebase({$extend:{Collection:["slice","filter","concat"].reduce((function(e,t){return e["$"+t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.$collection();return r.push.apply(r,this[t].apply(this,e)),r},e}),{})}})}]).run(["$q",function(e){y=e}])},nsX6:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("+3BC");var r=n("wHJ2"),i=n("5MwF"),o="ultra.components.directives.featureToggle",s=function(){function e(e){var t=this;this.$parse=e,this.restrict="A",this.priority=1e3,this.transclude="element",this.terminal=!0,this.link=function(e,n,r,o,s){var a=i.a.features,c=r.prototypeContent&&"true"===r.prototypeContent.toLowerCase();if(i.a.showFeaturePrototypes||!c){var l=t.$parse(r.bbFeatureToggle);r.removeFromDom&&"true"===r.removeFromDom.toLowerCase()?l(a)&&s((function(e){n.replaceWith(e)})):s((function(e){l(a)||e.addClass("bb-feature-toggle-hide"),n.replaceWith(e)}))}}}return e.$inject=["$parse"],e}();r.module(o,[]).directive("bbFeatureToggle",["$injector",function(e){return e.instantiate(s)}])},o2qC:function(e,t){e.exports='<table class="fs-table bb-table">\n  <caption role="alert" class="sr-only">{{ ::config().title }}</caption>\n  <thead>\n    <tr class="table-headings">\n      <th class="table-heading"\n          scope="col"\n          ng-style="{ \'width\': column.widthPercentage, \'min-width\': column.widthPercentage }"\n          ng-repeat="column in config().columns"\n          ng-if="column.visible"\n          data-heading-index="{{ ::$index }}"\n          ng-class="{\n            \'sortable-header\': column.sort,\n            \'ascending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\',\n            \'descending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\'}"\n          ng-attr-aria-sort="{{ $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\' ? \'ascending\' :\n          $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\' ? \'descending\' : undefined }}">\n        <button class="button-anchor" ng-if="column.sort" analytics-id="components.directives.table.sort.button">\n          <span class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n          <i class="sort-control">\n            <i class="arrow up" ></i>\n            <i class="arrow down"></i>\n          </i>\n        </button>\n        <span ng-if="!column.sort" class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody ng-if="table.initialDataLoaded || config().showRowsDuringRefresh">\n    <tr ng-repeat="item in tableData()"\n        class="table-row"\n        ng-class="{\'clickable\': config().rowClickFn }"\n        ng-click="config().rowClickFn ? config().rowClickFn(item): null"\n        ng-transclude\n        analytics-id="components.directives.table.rowClick"></tr>\n  </tbody>\n</table>\n<div ng-if="config().pageSize && table.initialDataLoaded">\n  <div bb-infinite-scroll="table.showMore()"\n       infinite-scroll-immediate-check="false"\n       infinite-scroll-total-count="config().totalCount"\n       infinite-scroll-current-count="tableData().length"\n       infinite-scroll-load-limit="config().pageSize"\n       infinite-scroll-container="config().infiniteScrollContainerSelector()"\n       infinite-scroll-tray-id="{{::config().instanceId}}-scroll-tray"></div>\n</div>\n<div class="spinner bb-secondary-color-2" ng-show="!table.initialDataLoaded"></div>'},o5Lu:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return D})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return j}));var r,i=n("D57K"),o=n("nsO7"),s=n("wHJ2"),a=n("nbDY"),c=n.n(a),l=n("wgY5"),u=n("0JpG"),d=n("Fvsw"),p=n("Qbdf"),m=n("Sa5G"),f=n("jhBu"),h=n("Bu0u"),g=n("oi1r"),v=n("X/qj"),b=n("rEZX"),y=n("pjml"),S=n("Mc6f"),C=n("e6jQ"),w=n("d8yC"),k=n("A0nf"),T=n("TnpK"),I=n("5uPl"),$=n("z6Q5"),E=n("fYJU"),P=n("JfV0"),A=n("ZQFV"),x="ultra.services.grade",D="grade",O="course.grades.gradebook-item.submission.grade-status-change",_="bb-update-column",M="bb-update-entire-column",N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Possible=new t("possible"),t.Text=new t("text"),t}(c.a),R=function(){function t(e,t,n,r,i,o,s,a,c,l,u,d,p,m,f,h,g,v,b,y,S,C,w,k){this.$q=e,this.$rootScope=t,this.$injector=n,this.cacheFactory=r,this.$ngRedux=i,this.CourseModel=o,this.GradeAttemptModel=s,this.GradebookSettingsModel=a,this.GradeGroupAttemptModel=c,this.GradeModel=l,this.ColumnModel=u,this.UserModel=d,this.GradeBulkViewModel=p,this.context=m,this.bbLocalize=f,this.ultraState=h,this.batchService=g,this.entitlement=v,this.notation=b,this.schemaService=y,this.gradebookPermissionService=S,this.originalityReportService=C,this.contextUser=w,this.contextCourse=k,this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE="resource/x-bb-grade",this.loadColorPreference=function(){},this.colorSettings={isColorEnabled:!0,colorPreference:""},this.gbSettingsCache=r.createCache("gbSettings"),this.subscribeToRedux(),this.loadColorPreference()}return t.prototype.subscribeToRedux=function(){var e=this,t=this.$ngRedux.connect((function(t){var n=P.select.systemPreference.getSystemPreferenceByKey(t,"gradepill.color.preference.settings");return n&&n.value&&n.value!==e.colorSettings.colorPreference?{colorSettings:Object(i.__assign)({colorPreference:n.value},JSON.parse(n.value))}:{}}),(function(e){return{loadColorPreference:function(){return e(P.actions.systemPreference.loadSystemPreference({key:"gradepill.color.preference.settings"}))}}}))(this);this.$rootScope.$on("$destroy",t)},t.prototype.loadColumnsAndGrades=function(e){var t=this,n=this.CourseModel.$new(e.courseId),r=this.loadColumns(n,e.includeExternal,{expand:"associatedRubrics,collectExternalSubmissions",includeInvisible:!!e.includeInvisible}).then((function(t){return e&&e.attachContentsByScoreProviderHandle?t.attachRelatedContentsByScoreProviderHandle(e.attachContentsByScoreProviderHandle):t})),i=this.loadGrades(n,e.userId,e.gradeQueryParams);return this.$q.all([r,i]).then((function(r){var i=r[0]||[],s=r[1]||[],a=[],c=o.keyBy(s,(function(e){return e.columnId}));return i.forEach((function(e){var n=c[e.id];n?n.column=e:n=t.GradeModel.$build({column:e}),a.push(n)})),t._loadAttempts(a,n,e.attemptQueryParams).then((function(e){return e}))}))},t.prototype.loadGrade=function(e,t){var n,r,i=this,s=this.CourseModel.$new(e.courseId);if(e.column)r=e.column&&e.column.$asPromise&&e.column.$asPromise()||this.$q.when(e.column);else{if(!e.columnId)throw new h.a({message:"Column or columnId must be provided."});r=s.gradebook.columns.$find(e.columnId).$asPromise()}return r.then((function(r){return o.merge(e.gradeQueryParams,{userId:e.userId}),r.grades.$search(e.gradeQueryParams).$allow([404]).$asPromise().then((function(o){return(n=o[0])?(n.column=r,t?i.loadAttempt(n,s,e.attemptQueryParams,e.content):i.$q.when(n)):i.$q.when(null)}))}))},t.prototype.loadCurrentColumnsAndGrades=function(e,t,n){var r=e||this.contextCourse.courseId;return this.loadColumnsAndGrades({courseId:r,userId:this.contextUser.userId,includeExternal:!0,includeInvisible:!!t,gradeQueryParams:{expand:"attemptsLeft"},attemptQueryParams:{overrideAggregationModel:y.F.AttemptAggregationModel.Last},attachContentsByScoreProviderHandle:n})},t.prototype.loadColumns=function(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var r=function(e){return t?e:e.filter((function(e){return!e.externalGrade}))},i=e.gradebook.columns;return(i?i.length:0)>(n&&"offset"in n?n.offset:0)?i.$refresh(n).$asPromise().then(r):i.$fetch(n).$asPromise().then(r)},t.prototype.loadGrades=function(e,t,n){var r=this;e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var i=o.merge({userId:t},n);return i.limit=100,e.gradebook.grades.$fetch(i).$asPromise().then((function(n){return n.paging.nextPage?(i.offset=n.paging.offset+n.paging.limit,r.loadGrades(e,t,i)):e.gradebook.grades}))},t.prototype.loadColumnGrades=function(e,t){return e instanceof this.ColumnModel||(e=t.gradebook.columns.$new(e)),e.grades.$refresh().$asPromise()},t.prototype.loadBulkViewRows=function(e,t,n,r,i){var s=this,a=[],c=[];e.forEach((function(e){c.push(e.id);var n=s.$injector.instantiate(L,{column:t});n.user=e.user,n.membership=e,n.dueDate=t.dueDate,n.hasDueDateException=e.isDueDateExcepted(),a.push(n)}));var l=o.keyBy(a,(function(e){return e.user.id})),u={courseId:t.courseId,membershipIds:c,columnIds:[t.id]};return r&&(u=o.merge(u,r)),this.CourseModel.$new(t.courseId).gradebook.bulkView.$fetch(u).$asPromise().then((function(e){return s.processBulkViewRows(e,l,t,n,i)}))},t.prototype.processBulkViewRows=function(e,t,n,r,i){e.bulkViewUsers.forEach((function(e){var n=t[e.studentId];n.originalityProcessed=e.grades[0].originalityProcessed,n.originalityScore=e.grades[0].originalityScore,e.grades.forEach((function(o){n.grade=o.grade,n.grade.user=n.user,r&&r.lookup[o.grade.id]&&(n.grade.attempts=r.lookup[o.grade.id]),n.attemptCount=o.attemptCount,n.lastAttemptDate=o.lastAttemptDate,n.attemptsReadyToPost=o.attemptsReadyToPost,i&&!i(n)&&delete t[e.studentId]}))}));var s=o.values(t);return this.originalityReportService.setOriginalityAverageScore(s,n.id),s},t.prototype.loadCustomizedBulkViewRows=function(e,t,n,r,i){var s=this;if(k.a.Discussion.isEqualTo(t.scoreProviderHandle)){var a=this.$q.defer();return this.loadBulkViewRows(e,t,null,{expand:"grade.instructorFeedback,attempts"}).then((function(i){var c=o.merge(o.clone(r),{limit:e.length}),l=o.merge(o.clone(c),{dateBefore:t.dueDate}),u=function(e,t){if(e&&e.length){var n={};e.forEach((function(e){var r=e.data.id;n[r]=t?{totalComment:e.topLevelReplyCount,totalReply:e.secondLevelReplyCount}:{comment:e.topLevelReplyCount,reply:e.secondLevelReplyCount}})),i.forEach((function(e){if(n&&n[e.user.id]){e.participation||(e.participation={comment:0,reply:0,totalComment:0,totalReply:0});var r=n[e.user.id];t?(e.participation.totalComment=r.totalComment,e.participation.totalReply=r.totalReply):(e.participation.comment=r.comment,e.participation.reply=r.reply)}}))}};s.$q.all([s.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(l).$allow([400]).$then((function(e){u(e)})).$asPromise(),s.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(c).$allow([400]).$then((function(e){u(e,!0)})).$asPromise()]).then((function(){return a.resolve(i)})).catch(a.reject)})).catch(a.reject),a.promise}var c="attempts";return i&&(c+=",submissionResults"),this.loadBulkViewRows(e,t,null,{expand:c})},t.prototype.loadGradeOverall=function(e){return this.CourseModel.$new(e).gradebook.columns.getOverallColumn()},t.prototype.loadAnonymousStudentRows=function(e){var t=this;return e.getGradeIdToAttempt({expand:"toolAttemptDetail,viewUrl"}).then((function(e){return e.lookup})).then((function(n){var r=[];return Object.keys(n).forEach((function(i){var s=n[i];if(o.remove(s,(function(e){return e.isInProgress()})),s.length>0){var a=t.createAnonymousStudentRow(e,s,i);r.push(a)}})),r}))},t.prototype.createAnonymousStudentRow=function(e,t,n){var r=this.$injector.instantiate(L,{column:e}),i=t[t.length-1],o=t.reverse().find((function(e){return e.displayGrade&&null!=e.displayGrade.score}));return r.user=this.UserModel.getAnonymousStudent(n),r.dueDate=e.dueDate,r.attemptCount=t.length,r.lastAttemptDate=i.attemptDate,r.grade=this.GradeModel.$build({id:n,user:r.user,attempts:t,displayGrade:o&&o.displayGrade||{},manualStatus:o&&o.status||m.s.NoOverride}),r},t.prototype.loadAnonymousStudentGrade=function(e,t){var n=this,r=e.grades.$new(t).attempts,i=this.UserModel.getAnonymousStudent(t);return r.$fetch().$asPromise().then((function(r){return n.GradeModel.$build({pointsPossible:e.possible,id:t,user:i,attempts:r})}))},t.prototype.loadGroupRows=function(e,t,n,r,i){var s=this,a={},c=[],l=o.keyBy(n,(function(e){return e.user.id}));return(r.ui&&r.ui.content&&r.ui.content.assignedGroups&&r.ui.content.assignedGroups.some((function(e){return!!e.groupAssociationId}))?this.$q.when(r.ui.content):e.contents.$find(r.contentId,{expand:"assignedGroups"}).$asPromise()).then((function(n){var u={};return n&&n.assignedGroups&&n.assignedGroups.forEach((function(e){u[e.groupId]=e.groupAssociationId})),c=t.map((function(t){return a[t.groupId]={},e.groups.$find(t.groupId,{expand:"memberships"}).$then((function(e){var t=s.$injector.instantiate(L,{column:r});t.group=e,t.groupDetailsShown=!1,t.dueDate=r.dueDate,t.group.ui||(t.group.ui={}),t.group.ui.groupAssociationId=u[e.id],t.group.memberships&&(t.group.memberships=t.group.memberships.filter((function(e){return!!l[e.userId]&&(e.ui||(e.ui={}),e.ui.user=l[e.userId].user,e.ui.hasDueDateException=l[e.userId].isDueDateExcepted(),e.ui.courseRole=l[e.userId].courseRole,!0)}))),t.hasDueDateException=t.group.memberships.some((function(e){return l[e.userId].isDueDateExcepted()})),a[e.id]=t})).$asPromise()})),s.$q.all(c).then((function(){var e="attempts,toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor";return i&&(e+=",submissionResults"),r.getContentGroupIdToGroupAttempt({expand:e}).then((function(e){var t={};o.values(e.lookup).forEach((function(e){t[e[0].groupId]=e[0]}));var n,i=[];return s.batchService.performBatch((function(){n=o.values(a),i=n.map((function(e){return s.updateOneGroupRow(e,r,{expand:!0,groupAttempt:t[e.group.id]})}))})),s.$q.all(i).then((function(){return s.originalityReportService.setOriginalityAverageScore(n,r.id)})),s.$q.all(i).then((function(){return s.sortGroupMembers(n)}))}))}))}))},t.prototype.getOverallGradeJson=function(t){var n=e(e.parseHTML(t)),r={};if("math"===n.prop("nodeName")){var i=n.children();if(i&&i.length>0){var o=e(i[0]);if("mi"===o.prop("nodeName")){var s=o.text(),a=(s=(s=s.replace("@X@BBCalColElem(","")).replace(")@X@","")).indexOf(":")+1,c=s.substring(a);r=JSON.parse(c)}}}return r},t.prototype.sortGroupMembers=function(e){var t=this,n=[];return e.forEach((function(e){var r=[];e.group.memberships&&(e.group.memberships.forEach((function(e){r.push(t.bbLocalize.formatUsername(e.ui.user,u.ILocaleUsernameFormat.Short,t.$rootScope).then((function(t){e.ui.formatUserName=t})))})),n.push(t.$q.all(r).then((function(){e.group.memberships.sort((function(e,t){return e.ui.formatUserName.localeCompare(t.ui.formatUserName)})),e.group.ui.users=[],e.group.memberships.forEach((function(t){e.group.ui.users.push(t.ui.user)}))}))))})),this.$q.all(n).then((function(){return e}))},t.prototype.updateOneGroupRow=function(e,t,n){var r=this;return void 0===n&&(n={expand:!0}),t.getGroupGrade(e.group.ui.groupAssociationId,n.expand).then((function(t){var i=n.groupAttempt||e.grade&&e.grade.ui.groupAttempt;return e.grade=t,i&&(e.originalityScore=i.originalityScore,e.originalityProcessed=i.originalityProcessed),r.setGroupAttemptOnRow(e,i,n.grade,n.grades||t.groupMembersGrades,n.attempt),e}))},t.prototype.setGroupAttemptOnRow=function(e,t,n,r,i){var s=t||this.GradeGroupAttemptModel.$buildRaw({}),a={rawText:"",displayText:""};n&&n.instructorFeedback?a=n.instructorFeedback:r&&r.length&&r[0].instructorFeedback&&(a=r[0].instructorFeedback),e.grade.groupAttempts.push(s),e.grade.instructorFeedback=a,e.grade.ui={groupAttempt:s,currentAttemptIndex:0},e.attemptCount=y.C.AttemptStatus.NeedsGrading.isEqualTo(s.status)||y.C.AttemptStatus.NeedsMoreGrading.isEqualTo(s.status)||y.C.AttemptStatus.Completed.isEqualTo(s.status)?1:0,e.lastAttemptDate=s.attemptDate,e.isGroupGradeInProgress=e.grade.isInProgress(),e.grade.ui.isGroupGradeMultiple=e.grade.isMultipleGradesInGroup;var c=o.keyBy(e.group.memberships,(function(e){return e.userId}));if(r)r.forEach((function(e){var t=c[e.user.$pk];t&&(t.ui.gradeDetail=e)}));else if(i){var l=s.attempts.map((function(e,t){var n;return e.id===i.id?((n=i).userId=e.userId,c[n.userId].ui.gradeDetail.displayGrade=n.displayGrade,c[n.userId].ui.gradeDetail.ui.attempt=n):n=e,n}));e.grade.isInProgress()&&(e.grade.ui.groupAttempt.status=y.C.AttemptStatus.NeedsGrading),e.grade.ui.groupAttempt.attempts=l}else n?e.group.memberships=e.group.memberships.map((function(e){var t=e.userId===n.user.$pk?n:e.ui.gradeDetail;return e.ui.gradeDetail=t,e})):s.attempts&&s.attempts.forEach((function(e){c[e.userId].ui.gradeDetail.displayGrade=e.displayGrade,c[e.userId].ui.gradeDetail.ui.attempt=e}));e.group.memberships=o.values(c)},t.prototype._loadAttempts=function(e,t,n){var r=this,i=[];return e.forEach((function(e){i.push(r.loadAttempt(e,t,n))})),this.$q.all(i)},t.prototype.loadAttempt=function(e,n,r,i){var s;void 0===r&&(r={});var a=o.clone(r);if(a&&a.attemptId)s=a.attemptId,delete a.attemptId;else{var c=y.F.AttemptAggregationModel.parseModel(e.column&&e.column.aggregationModel);a&&a.overrideAggregationModel&&(c=a.overrideAggregationModel,delete a.overrideAggregationModel),s=t.getDefaultAttemptIdToLoad(c,e)}if(e.column&&y.F.CalculationType.NonCalculated.isEqualTo(e.column.calculationType)){var l=void 0,u=n.gradebook.attempts,d=i&&i.isGroupContent,p=i&&i.assignedGroups&&i.assignedGroups.length&&i.assignedGroups[0].groupAssociationId;if(d&&!i.isDiscussion()){if(!p)return this.$q.when(e);l=e.column.getGroupAttemptByGroupAssociationId(p)}else{if(!s)return this.$q.when(e);l=u.$find(s,a).$asPromise()}return l.then((function(t){if(d){if(t&&t.id){var n=t;e.ui.groupAttempt=n,e.ui.attempt=n&&n.attempts&&n.attempts.length&&n.attempts[0]}}else e.ui.attempt=t;return e}))}return this.$q.when(e)},t.prototype.loadColumnAttempts=function(e,t,n){return void 0===t&&(t={}),e.getGradeIdToAttempt(t,n)},t.prototype.loadUsersFinalGradeForCourse=function(e,t){return e.gradebook.grades.$search({userId:t,expand:"column",externalGrade:!0}).$asPromise().then((function(e){return e[0]}))},t.prototype.loadColumnSummary=function(e,t){return e.gradebook.columns.$find(t).summary.$fetch().$asPromise()},t.prototype.loadGradebookSettings=function(e){var t=this.gbSettingsCache.get(e);if(!t){var n=this.CourseModel.$new(e).gradebook.settings.$fetch().$asPromise();return this.gbSettingsCache.put(e,{promise:n}),n}return this.$q.when(t.promise)},t.prototype.loadDefaultGradebookSettings=function(){return this.GradebookSettingsModel.$build({afterDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,beforeDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL})},t.prototype.formatPoints=function(e,t,n,r){var i=this;null==n&&(n=N.Text);var o=n.toString();return this.bbLocalize.loadBundle("components/services/grade").then((function(){return i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(t),key:"components.services.grade.points_"+o,params:{points:r,possible:e},noWrap:!0})}))},t.prototype.parseGrade=function(e,t,n){if(!e)return"";if(t&&y.J.ScaleType.Text.isEqualTo(t.scaleType))return e;var r=this.bbLocalize.parseNumberSync(e,n);return Number.isNaN(r)?e:r.toString()},t.prototype.getGradeToDisplay=function(e,n,r){if(!e)return null;if(e.grade)return e.grade;if(e.perfCode)return e.perfCode.code;if(null!=e.score){var i=this.bbLocalize.formatNumberSync(e.score,n,{maximumFractionDigits:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL});return r&&y.J.ScaleType.Percent.isEqualTo(r)&&(i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(n),key:"components.services.grade.percent",params:{grade:i},noWrap:!0})),i}},t.prototype.getHighestPossibleScore=function(e,t,n){var r=this.$q.defer();switch(e.scaleType){case y.J.ScaleType.Tabular.toString():return r.resolve(e.symbols[0].symbol),r.promise;case y.J.ScaleType.Percent.toString():return this.bbLocalize.formatPercentage(1,n);case y.J.ScaleType.Score.toString():var i=t.possible;return this.formatPoints(i,n,N.Text);default:return r.resolve("N/A"),r.promise}},t.prototype.validateGrade=function(e,t,n){var r=this,i=this.loadDefaultGradebookSettings(),o=this.bbLocalize.loadBundle("components/services/grade"),s=this.notation.getGradeNotationsMap(e.courseId,!0);return this.$q.all([o,s]).then((function(o){var s=e.gradeValue.getGrade(),a=!1,c=o[1];return s?!(a=r.isValidNumericGrade(s,i,t))&&e.column&&e.column.externalGrade&&(a=r.notation.isValidPerformanceCodeGrade(c,s)):a=!(n&&n.notAllowEmptyString),a}))},t.prototype.clearGroupGrade=function(e,n,r){var i=this,o=this.CourseModel.$new(e.id).gradebook.columns.$new(n.id);return this.batchService.performBatch((function(){return i.$q.all(r.map((function(e){var n=o.grades.$new(e.ui.gradeDetail.id);return n.manualGrade=t.CLEAR_GRADE_CHARACTER,n.$patch(["manualGrade"]).$asPromise()})))})).then((function(){return o.grades}))},t.prototype.saveGrade=function(e,t,n,r){if(!e.courseId||!e.column||!e.gradeValue)throw new Error("A valid courseId, column, and grade value are required.");if(e.column.isAttemptBased()){var i=[],o=[];r&&r.group&&r.group.memberships&&r.group.memberships.forEach((function(t){t.ui&&t.ui.gradeDetail&&(i.push(t.ui.gradeDetail.id),(t.ui.gradeDetail.displayGrade&&t.ui.gradeDetail.displayGrade.isOverride||e.setGradeToEmpty)&&o.push(t.ui.gradeDetail.id))})),(null==n||null==n.id)&&t||n&&n.isInProgress()?(r.group?e.gradeIds=i:e.gradeId=t.id,e.clearGrade&&(e.setGradeToEmpty=!0)):n&&n.id&&t?(e.clearGrade&&(r.group||(e.gradeId=t.id),e.setAttemptToEmpty=!0,e.setGradeToEmpty=!0),n instanceof this.GradeAttemptModel?(e.attemptId=n.id,n.groupAttemptId&&(e.override=!0),(t.displayGrade&&t.displayGrade.isOverride||e.setGradeToEmpty)&&(e.gradeId=t.id,e.setGradeToEmpty=!0)):(e.groupAttemptId=n.id,o.length&&(e.gradeIdsNeedClear=o))):r&&r.userId?e.userId=r.userId:r&&r.group&&r.group.id&&(e.gradeIds=i)}else e.column.externalGrade?t&&t.id?e.gradeId=t.id:e.userId=r.userId:null==t?e.userId=r.userId:(e.userId||(e.userId=r.userId),e.gradeId=t.id);return this._save(e)},t.prototype.save=function(e){return this._save(e)},t.prototype._save=function(e){var t=this;if(e.column.externalGrade)return e.gradeId?this.updateGrade(e):this.createGradeForUserAndSave(e);if(!this.canSaveGradeDetail(e))return this.updateAttempt(e);if(e.gradeId)return e.attemptId?(e.setGradeToEmpty=!0,this.updateGrade(e).then((function(){return t.updateAttempt(e)}))):this.updateGrade(e);if(e.gradeIds)return this.createAndUpdateGradesForGroupMembers(e);if(e.gradeIdsNeedClear)return this.createAndUpdateGradesForGroupMembers(e).then((function(){return t.updateGroupAttempt(e)}));if(e.attemptId)return this.updateAttempt(e);if(e.groupAttemptId)return this.updateGroupAttempt(e);if(e.userId)return this.createGradeForUserAndSave(e);throw new Error("A valid userId must be specified when creating a new grade.")},t.prototype.canSaveGradeDetail=function(e){return!e.column.anonymousGrading&&(!e.column.delegatedGrading||this.isDelegatedAndEntitledReconciler(e))},t.prototype.createAndUpdateGradesForGroupMembers=function(e){var t=this,n=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades;return e.gradeIdsNeedClear||e.gradeIds?this.batchService.performBatch((function(){return t.$q.all((e.gradeIdsNeedClear||e.gradeIds).map((function(r){var i=n.$buildRaw({id:r});return n.$add(i),t.setGradeValueOnGrade(e,i,!!e.gradeIdsNeedClear||e.setGradeToEmpty),i.withParams({clearCommentsIfRevertOverrides:!1}).$patch().$asPromise()})))})).then((function(){return n.$asPromise()})):n.$asPromise()},t.prototype.createGradeSubmission=function(e,t,n){return new b.a(e,t,n)},t.prototype.wasGradeCleared=function(e,t){var n=e&&e.length,r=t&&t.length;return n>0&&!r},t.prototype.updateAttempt=function(e){if(!e.attemptId)throw new Error("Attempt id is not set");var t=this.CourseModel.$new(e.courseId).gradebook.attempts.$new(e.attemptId);return this.setGradeOnAttempt(e,t),t.$patch().$asPromise()},t.prototype.updateGroupAttempt=function(e){if(!e.groupAttemptId)throw new Error("Group attempt id is not set");var t=this.CourseModel.$new(e.courseId).gradebook.groupAttempts.$new(e.groupAttemptId);return this.setGradeOnAttempt(e,t),t.withParams({expand:"attempts"}).$patch().$asPromise()},t.prototype.isReadyToPost=function(e){return!e.delegatedGrading||e.isUserReconciler(this.contextUser.userId)},t.prototype.setGradeOnAttempt=function(e,n){e.setAttemptToEmpty?(n.score=null,n.status=y.C.AttemptStatus.NeedsGrading,n.grade=t.CLEAR_GRADE_CHARACTER,n.rubricEvaluation=null):(e.gradeValue.isNumeric?n.score=parseFloat(e.gradeValue.getGrade()):n.grade=e.gradeValue.getGrade(),e.rubricEvaluation&&(n.rubricEvaluation=e.rubricEvaluation),n.readyToPost=this.isReadyToPost(e.column)),e.override&&(n.override=!0),this.isDelegatedAndEntitledReconciler(e)&&!e.setAttemptToEmpty&&(n.reconciliationMode=m.r.CUSTOM)},t.prototype.isDelegatedAndEntitledReconciler=function(e){return e.column.delegatedGrading&&e.column.isUserReconciler(this.contextUser.userId)},t.prototype.createGradeForUserAndSave=function(e){var t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new();return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.user=this.UserModel.$new(e.userId),t.withParams({userId:e.userId,clearCommentsIfRevertOverrides:!1}).$save().$asPromise()},t.prototype.updateGrade=function(e){var t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new(e.gradeId);return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0}).$patch().$asPromise()},t.prototype.setGradeValueOnGrade=function(e,n,r){if(r)n.manualGrade=t.CLEAR_GRADE_CHARACTER;else if(e.column.externalGrade&&e.perfCodeId)n.perfCodeId=e.perfCodeId;else{var i=e.gradeValue;i.isNumeric?n.manualScore=parseFloat(i.getGrade()):n.manualGrade=i.getGrade()}},t.prototype.isValidNumericGrade=function(e,t,n){var r,i=this.bbLocalize.parseNumberSync(e,n);if(Number.isNaN(i))return!1;if(t&&null!=t.beforeDecimal&&(r=Math.floor(i).toString()).length>t.beforeDecimal)return!1;if(t&&null!=t.afterDecimal&&null!=r&&i.toString().substring(r.length+1).length>t.afterDecimal)return!1;return!0},t.isValidFormat=function(e,t){var n=e.indexOf("."),r=0,i=e.length;return n>-1&&(r=i-n-1,i=0),i<=t.beforeDecimal&&n<=t.beforeDecimal&&r<=t.afterDecimal},t.mapSchemaSymbols=function(e){if(y.J.ScaleType.Tabular.isEqualTo(e.scaleType))return e.symbols.map((function(e){return e.symbol.toLocaleLowerCase()}))},t.getDefaultAttemptIdToLoad=function(e,t){switch(e){case y.F.AttemptAggregationModel.Average:return t.lastAttemptId;case y.F.AttemptAggregationModel.First:return t.firstAttemptId;case y.F.AttemptAggregationModel.Highest:return t.highestAttemptId;case y.F.AttemptAggregationModel.Last:return t.lastAttemptId;case y.F.AttemptAggregationModel.Lowest:return t.lowestAttemptId;default:return t.lastAttemptId}},t.prototype.findOverallGrade=function(e){return o.find(e,(function(e){return e.externalGrade}))},t.prototype.needsToSetupOverall=function(e,t){this.CourseModel.$new(t);var n=this.findOverallGrade(e);return this.$q.when(!n)},t.prototype.setDeleteConfirmationHandle=function(e){e.isOffline()?e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-column":e.isCalculated()&&(e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-calculation")},t.prototype.calculateRankingsMap=function(e,t){for(var n,r,i={},o=e.length,s=0;s<o;s++)r=s/o,n=t?10*Math.floor(10*r):Math.floor(100*r),i[e[s].displayGrade.score]=n;return i},t.prototype.getPercentileColor=function(e){return A.Utils.getPercentileColor(e,this.colorSettings.isColorEnabled)},t.prototype.isRubricGradeOverridden=function(e,t,n,r){var i=e&&e.displayGrade&&e.displayGrade.isOverride;r&&r.memberships&&r.memberships.forEach((function(e){e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.displayGrade&&e.ui.gradeDetail.displayGrade.isOverride&&(i=!0)}));var o=null!=n.rubricAssociations&&n.rubricAssociations.length>0&&n.rubricAssociations[0],s=t&&t.rubricEvaluation,a=!(!t||!t.groupAttemptId);return!(!t||a||null==t.score||!t.readyToPost||!o||s&&s.rubricAssociationId===o.id&&t.score===s.totalScore)||i&&(o||!k.a.UltraAssignment.isEqualTo(n.scoreProviderHandle)&&!k.a.Discussion.isEqualTo(n.scoreProviderHandle))},t.prototype.getCalculateByStringKey=function(e){var t="course.grades.overallGrade.settings.itemWeights";return y.F.CalculateType.Category.isEqualTo(e)&&(t="course.grades.overallGrade.settings.categoryWeights"),t},t.prototype.canGrade=function(e){return this.gradebookPermissionService.canEnterGrades()&&this.gradebookPermissionService.canOverrideGrades()},t.prototype.canUserReconcile=function(e,t){return!e.isClosed&&t.isUserReconciler(this.contextUser.userId)},t.prototype.hasItemsToReconcile=function(e){return e.summary.numSubmissionsNeedsReconciling>0},t.prototype.canPostGrades=function(e,t){if(!this.gradebookPermissionService.canPostGrades(e.id,t))return!1;var n=!e.isComplete()&&t.summary.hasGradesToPost();return t.anonymousGrading?n&&this.gradebookPermissionService.canDeanonymizeGrades(e.id):n},t.prototype.getPostAllGradeConfirmationNeededStringsKey=function(e){if(e.anonymousGrading){if(e.summary.numNeedsGrading)return"x-bb-grade-anonymous-submissions-not-graded";if(!e.isLate()){if(e.getNumMissing()>0)return"x-bb-grade-anonymous-missing-submissions";if(e.isMultipleAttempts())return"x-bb-grade-anonymous-multiple-attempts"}return"x-bb-grade-anonymous-generic"}return"x-bb-grade-column-post-grades"},t.prototype.pointToPercentage=function(e,t){return 100*e/t},t.prototype.percentageToPoint=function(e,t){return e*t/100},t.prototype.gradeDetailToPercentage=function(e){if(!e)return e;var t=o.assignInWith({},e);if(e.displayGrade&&!e.displayGrade.isOverride&&e.manualScore){var n=this.pointToPercentage(e.manualScore,e.pointsPossible);t.manualScore=w.b(n,2),t.displayGrade.score=t.manualScore}return t.pointsPossible=100,t},t.prototype.percentageToGradeDetail=function(e,t){if(!e)return e;var n=e.manualScore;e.manualScore&&(n=this.percentageToPoint(e.manualScore,t));var r=o.assignInWith({},e);return r.manualScore=n,r.displayGrade.score=n,r.pointsPossible=t,r},t.TEXT_SCHEMA_CHARACTER_LENGTH=32,t.CLEAR_GRADE_CHARACTER="-",t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL=5,t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL=2,t.$inject=["$q","$rootScope","$injector","DSCacheFactory","$ngRedux",y.o.serviceName,y.C.serviceName,y.K.serviceName,y.H.serviceName,y.G.serviceName,y.F.serviceName,y.Qb.serviceName,y.D.serviceName,d.b,u.serviceName,T.d,$.b,f.b,S.b,g.b,v.b,I.b,E.b,p.e],t}();!function(e){e[e.Graded=1]="Graded",e[e.MultiStatus=2]="MultiStatus",e[e.NeedGrade=3]="NeedGrade",e[e.Opened=4]="Opened",e[e.Unopend=5]="Unopend",e[e.Posted=6]="Posted",e[e.Completed=7]="Completed"}(r||(r={}));var L=function(){function e(e,t,n){this.column=e,this.context=t,this.contextUser=n,this.isCommentBoxShown=!1,this.hasBeenViewed=!1,this.id=C.a(),this.hasDueDateException=!1}return Object.defineProperty(e.prototype,"Column",{get:function(){return this.column},enumerable:!0,configurable:!0}),e.prototype.isCurrentUserReconciler=function(){return this.column&&this.column.isUserReconciler(this.contextUser.userId)},e.prototype.isDiscussion=function(){return this.column.isDiscussion()},e.prototype.isOverdue=function(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0},e.prototype.getLateSubmissionCount=function(){return s.isDefined(this.lateSubmissionCount)?this.lateSubmissionCount:(this.grade.attempts&&this.grade.attempts.length>0&&(this.lateSubmissionCount=this.grade.attempts.getNumAttemptsSubmittedLate(this.dueDate)),this.lateSubmissionCount)},e.prototype.isStatusComplete=function(e){return this.isDiscussion()||e||this.grade&&!this.grade.attempts?this.isCompleted():this.grade&&(this.grade.attempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.attempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading},e.prototype.isGroupStatusComplete=function(e){return e?this.isCompleted():this.grade&&(this.grade.groupAttempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.groupAttempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading},e.prototype.isStatusNothingToGrade=function(){return this.isDiscussion()?this.hasNoTotalParticipation():this.grade&&!this.grade.attempts.getNumAttemptsToGrade()},e.prototype.isGroupStatusNothingToGrade=function(){return this.grade&&!this.grade.groupAttempts.getNumAttemptsToGrade()},e.prototype.isStatusAttemptsToReconcile=function(){if(!this.isDiscussion()&&this.isCurrentUserReconciler())return this.grade&&this.grade.attempts.getNumAttemptsToReconcile()>0},e.prototype.isStatusAttemptsToGrade=function(e){return this.isDiscussion()?(!this.hasNoParticipation()||this.hasLateParticipation())&&(!this.grade||this.grade&&!this.grade.isGraded()):e?!this.grade||this.grade.attempts.getNumAttemptsToGrade()>=0:this.isCurrentUserReconciler()?void 0:this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0},e.prototype.isGroupStatusAttemptsToGrade=function(e){return e?this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>=0:this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>0},e.prototype.isStatusToPost=function(){return this.isDiscussion()?this.needsPosting():this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()},e.prototype.isGroupStatusToPost=function(){return this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()},e.prototype.overrideToPost=function(){return this.grade&&(this.grade.isOverrideGrade()||this.grade.displayGrade&&"MULTIPLE"===this.grade.displayGrade.grade)&&this.grade.isReadyToPost()},e.prototype.isMultipleStatus=function(){return this.group?this.isGroupStatusAttemptsToGrade()&&(this.isGroupStatusToPost()||this.overrideToPost()&&!this.isGroupStatusComplete()):(this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile())&&(this.isStatusToPost()||this.overrideToPost()&&!this.isStatusComplete())},e.prototype.hasGroupAttempts=function(){return this.grade&&this.grade.groupAttempts.length&&o.every(this.grade.groupAttempts,(function(e){return!!e.id}))},Object.defineProperty(e.prototype,"RowStatus",{get:function(){if(this.grade&&this.group){if(this.needsPosting())return 1;if(this.isGroupStatusAttemptsToGrade())return 3;if(this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade.groupAttempts[0].status&&!this.grade.hasGradeBeenPosted)return 5;if(this.grade.isPosted()&&!this.isGroupStatusComplete())return 6;if(this.isGroupStatusComplete())return 7}else{if(this.membership&&this.membership.isPreviewStudent)return 0;if(this.grade&&0===this.grade.attempts.getNumAttemptsToGrade()&&this.grade.isReadyToPost())return 1;if(this.grade&&this.grade.isGraded()&&this.grade.attempts.getNumAttemptsToGrade()>0&&this.grade.isReadyToPost())return 2;if(this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0&&0===this.grade.attempts.getNumAttemptsToPost()&&!this.grade.isPosted())return 3;if(this.hasNoSubmissions()&&this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade||!this.grade.hasGradeBeenPosted)return 5;if(this.grade&&this.grade.hasGradeBeenPosted&&!this.isStatusComplete())return 6;if(this.isStatusComplete())return 7}return 8},enumerable:!0,configurable:!0}),e.prototype.hasNoSubmissions=function(){return!this.attemptCount||0===this.attemptCount},e.prototype.hasNoParticipation=function(){return!this.participation||0===this.participation.comment&&0===this.participation.reply},e.prototype.hasNoTotalParticipation=function(){return!this.participation||0===this.participation.comment&&0===this.participation.reply&&0===this.participation.totalComment&&0===this.participation.totalReply},e.prototype.hasLateParticipation=function(){return this.participation&&0===this.participation.comment&&0===this.participation.reply&&this.participation.totalComment+this.participation.totalReply!==0},e.prototype.inProgress=function(){return this.group?this.grade&&this.grade.ui&&this.grade.ui.groupAttempt&&y.C.AttemptStatus.InProgress.isEqualTo(this.grade.ui.groupAttempt.status):this.grade&&this.grade.ui&&this.grade.ui.attempt&&y.C.AttemptStatus.InProgress.isEqualTo(this.grade.ui.attempt.status)},e.prototype.isLate=function(){if(!this.hasDueDateException){var e=l(this.context.getServerTime());return this.hasNoSubmissions()&&e.isAfter(this.dueDate)||l(this.lastAttemptDate).isAfter(this.dueDate)}return!1},e.prototype.isSubmittedLate=function(){return!this.hasDueDateException&&(!this.hasNoSubmissions()&&l(this.lastAttemptDate).isAfter(this.dueDate)&&!this.inProgress())},e.prototype.isCompleted=function(){return!(this.group||!this.grade||!this.grade.isGraded()||!this.grade.isPosted())||!!(this.group&&this.group.memberships&&this.group.memberships.length>0)&&this.group.memberships.every((function(e){return e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.isPosted()}))},e.prototype.needsPosting=function(){if(!this.group)return!this.isCompleted()&&this.grade&&this.grade.isReadyToPost();if(this.group&&this.group.memberships){var e=0,t=0;if(this.group.memberships.forEach((function(n){n.ui&&n.ui.gradeDetail&&(n.ui.gradeDetail.isReadyToPost()?t++:n.ui.gradeDetail.isPosted()&&e++)})),t>0&&e+t===this.group.memberships.length)return!0}return!1},e.prototype.needsGrading=function(){return this.grade.groupAttempts&&this.grade.groupAttempts.length?this.grade.groupAttempts[0].isNeedsGrading()&&!this.grade.groupAttempts[0].isPostable():this.attemptCount>0&&this.grade.isSubmitted()},e.prototype.deleteAllAttempts=function(){var e=this;this.grade.attempts.$fetch().$then((function(t){t.forEach((function(e){e.$destroy()})),e.attemptCount=0,e.lastAttemptDate=null}))},e.$inject=["column",d.b,E.b],e}(),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(R);s.module(x,["angular-data.DSCacheFactory",y.R,d.a,T.b,S.a,g.a,v.a,I.a]).service(D,R)}).call(this,n("5iHu"))},oB9e:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var r=n("D57K"),i=(n("SeO5"),n("wHJ2")),o=n("JfV0"),s=n("0JpG"),a=n("nYZ0"),c=n("Fvsw"),l=n("jhBu"),u=n("Sa5G"),d=n("Y3OE"),p=n("X/qj"),m=n("pjml"),f=n("g66W"),h=n("TnpK"),g="ultra.service.blog",v="blogService",b=function(){function e(e,t,n,r,i,o,s,a,c,l,u,d){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$ngRedux=r,this.$modal=i,this.courseModel=o,this.UserModel=s,this.context=a,this.contentService=c,this.ultraState=l,this.gradebookPermissionService=u,this.entitlementService=d,this.journalAvailabilityCache={},this.subscribeToRedux()}return e.prototype.subscribeToRedux=function(){this.$ngRedux.connect(null,(function(e){return{loadBlog:function(t,n){return e(o.actions.blog.blogs.loadBlog(t,n))},persistContent:function(t,n){return e(o.actions.content.persistContent(t,n))},loadGradebookColumn:function(t,n){return e(o.actions.gradebookColumn.loadGradebookColumn({courseId:t,columnId:n.gradeColumnId}))},persistGradebookColumn:function(t,n){return e(o.actions.gradebookColumn.persistGradebookColumn(t,n))}}}))(this)},e.prototype.createContent=function(e){var t=e.courseId,n=e.parentId,r=e.positionBefore,i=e.positionAfter,o=e.root;return this.contentService.makeContentInContentTree(o,t,n,r,i)},e.prototype.updateContent=function(e,t,n){var r=this;return e.$patch(n).$then((function(){r.$rootScope.$broadcast("content-update",e),r.$rootScope.$broadcast("attempt-base-content-update",e,t)})).$asPromise()},e.prototype.fetchContent=function(e,t){return t.contents.$find(e,{expand:"alignedGoals,assignedGroups,extensionAttributes"}).$asPromise()},e.prototype.fetchBlog=function(e,t){return this.$q.resolve(this.loadBlog(e,t)).then((function(e){return e.blog}))},e.prototype.patchBlogContent=function(e,t,n,r){var i,o,s={id:t,courseId:e,contentDetail:(i={},i[d.a.Journal.toString()]={blog:n},i)},a={id:t,courseId:e,contentDetail:(o={},o[d.a.Journal.toString()]={blog:r},o)};return this.$q.resolve(this.persistContent(s,a)).then((function(e){return e.content}))},e.prototype.patchGradebookColumn=function(e,t){return this.$q.resolve(this.persistGradebookColumn(e,t)).then((function(e){return e.gradebookColumn}))},e.prototype.patchBlogGrading=function(e,t,n,r,i,o){var s=this;return n.gradingAllowed||r.gradingAllowed?n.gradingAllowed&&!r.gradingAllowed?this.patchBlogContent(e,t,n,r).then((function(e){return null})):!n.gradingAllowed&&r.gradingAllowed?this.patchBlogContent(e,t,n,r).then((function(t){var n=t.contentDetail[d.a.Journal.toString()];return o.id=n.blog.gradeColumnId,o.courseId=e,s.patchGradebookColumn({},o)})):this.patchGradebookColumn(i,o):this.$q.resolve(null)},e.prototype.loadBlogGradebookColumn=function(e,t){return t&&t.gradeColumnId?this.$q.resolve(this.loadGradebookColumn(e,t).then((function(e){return e.gradebookColumn}))):this.$q.resolve(null)},e.prototype.isJournalAvailable=function(e){var t=this,n=this.journalAvailabilityCache[e];return n?this.$q.resolve(n.toolEnabledSetting.isAvailable):this.courseModel.$new(e).contentHandlers.$find(u.g.Journal.toString()).$allow([403]).$asPromise().then((function(n){return(t.journalAvailabilityCache[e]=n).toolEnabledSetting.isAvailable}))},e.prototype.savePrompt=function(e,t){var n=this,r=f.f(t),i=this.contentService.truncateDescription(r,a.c.MAX_LENGTH_IN_CONTENT_ITEM),o=e.description;return e.description=i,e.$patch(["contentDetail","description"]).$asPromise().then((function(){n.$rootScope.$broadcast("content-update",e)})).catch((function(){e.description=o}))},e.$inject=[s.serviceName,"$rootScope","$q","$ngRedux","$modal",m.o.serviceName,m.Qb.serviceName,c.b,a.e,h.d,p.b,l.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(b);i.module(g,[m.R,s.moduleName,c.a,a.d,h.b,p.a,l.a,m.R]).service(v,b)},oNH7:function(e,t){e.exports='<div ng-if="conversionStatusBarController.showStatusBar && !conversionStatusBarController.inPreview"\n     class="conversion-status-bar import-learn-bar" ng-class="{\'below\': conversionStatusBarController.hideStatusBar()}"\n     bb-load-bundle="components/directives/conversion-status-bar" role="banner">\n  <div class="conversion-prompt-container">\n    <div class="conversion-prompt-title" bb-translate="course.conversion.statusBar.useUltraPromptTitle" course-org-token-resolver>\n    </div>\n    <div class="conversion-prompt-details" bb-translate="course.conversion.statusBar.useUltraPromptDetails" course-org-token-resolver>\n    </div>\n    <a class="hide-for-medium-only hide-for-small-only" href="https://help.blackboard.com/001_574en_US"\n        bb-translate="course.conversion.statusBar.moreInfoLink" target="_blank" rel="noopener noreferrer"\n        analytics-id="course.conversion.statusBar.moreInfoLink"></a>\n  </div>\n  <div class="conversion-button-container">\n    <a href="javascript:void(0);" class="js-back-to-classic conversion-button conversion-return-classic show-for-large-up"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic">\n      <bb-translate course-org-token-resolver>course.conversion.statusBar.backToClassic</bb-translate>\n    </a>\n    <button class="js-back-to-classic conversion-button conversion-return-button button button--secondary"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic.button">\n      <span bb-translate="course.conversion.statusBar.backToClassic" course-org-token-resolver></span>\n    </button>\n    <button class="js-use-new-ux conversion-button button default" ng-click="conversionStatusBarController.useTheNewExperience()"\n            bb-confirmation-needed="resource/x-bb-course-conversion" show-type="always"  confirmation-course-org-token-resolver\n            analytics-id="course.conversion.statusBar.useUltra.button">\n      <span bb-translate="course.conversion.statusBar.useUltra" course-org-token-resolver></span>\n    </button>\n  </div>\n</div>'},oQrK:function(e,t,n){"use strict";var r=function(){function e(){}return e.detect=function(){var e={},t=window.navigator.userAgent.toLowerCase(),n=function(e){return-1!==t.indexOf(e)};return e.ios=function(){return e.iphone()||e.ipod()||e.ipad()},e.iphone=function(){return!e.windows()&&n("iphone")},e.ipod=function(){return n("ipod")},e.ipad=function(){return n("ipad")},e.android=function(){return!e.windows()&&n("android")},e.androidPhone=function(){return e.android()&&n("mobile")},e.androidTablet=function(){return e.android()&&!n("mobile")},e.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},e.blackberryPhone=function(){return e.blackberry()&&!n("tablet")},e.blackberryTablet=function(){return e.blackberry()&&n("tablet")},e.windows=function(){return n("windows")},e.windowsPhone=function(){return e.windows()&&n("phone")},e.windowsTablet=function(){return e.windows()&&n("touch")&&!e.windowsPhone()},e.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},e.fxosPhone=function(){return e.fxos()&&n("mobile")},e.fxosTablet=function(){return e.fxos()&&n("tablet")},e.meego=function(){return n("meego")},e.mobile=function(){return e.androidPhone()||e.iphone()||e.ipod()||e.windowsPhone()||e.blackberryPhone()||e.fxosPhone()||e.meego()},e.tablet=function(){return e.ipad()||e.androidTablet()||e.blackberryTablet()||e.windowsTablet()||e.fxosTablet()},e.desktop=function(){return!e.tablet()&&!e.mobile()},e.portrait=function(){return window.innerHeight/window.innerWidth>1},e.landscape=function(){return window.innerHeight/window.innerWidth<1},e},e}();t.a=r},oVrE:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u}));var r="allMembersId",i="anonymousId";function o(){return r}function s(){return{id:o(),givenName:"allMembers",familyName:void 0,userName:void 0}}function a(){return i}function c(e,t){var n=t.translateSync({locale:t.getLocale(e),key:"components.directives.avatar.anonymous",noWrap:!0,noEscape:!0});return{id:a(),givenName:n,familyName:"",userName:void 0}}function l(e){return e&&e.id===r}function u(e){return e&&e.id===i}},ofgY:function(e,t){e.exports='<div class="file-upload-container">\n  <div ngf-drop\n       id="{{fileUploadDivId}}"\n       ng-model="files" class="file-upload"\n       ngf-multiple="fileUpload.allowMultiple"\n       ngf-drop-disabled="disableDrag && disableDrag()"\n       ngf-change="fileUpload.onFileSelect($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-stop-propagation="!(disableDrag && disableDrag())"\n       ngf-drag-over-class="dragClass"\n       tabindex="-1">\n    <div class="fileUploadTransclude" ng-transclude ng-show="fileUpload.transcludeVisible"></div>\n    <div class="js-file-upload-complete" ng-attr-ready="{{!fileUpload.uploadInProgress}}"></div>\n    <div ng-show="fileUpload.fileReviewVisible" class="file-upload-review">\n      <section class="file-upload-panel" ng-if="fileUpload.progressVisible">\n        <bb-progress primary-key="primaryKey && primaryKey()" display-results="fileUpload.useDefaultSuccessMethod"></bb-progress>\n      </section>\n    </div>\n  </div>\n  <input ngf-select\n         ng-if="fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         multiple class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.multipleFiles.input.file"/>\n  <input ngf-select\n         ng-if="!fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.input.file"/>\n</div>'},oi1r:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("Bu0u"),c=n("pjml"),l="ultra.components.services.grade.gradeSchema.Service",u="gradeSchemaService",d=function(){function e(e,t,n,r){this.$q=e,this.CourseModel=n,this.bbLocalize=r,this.gbSchemasCache=t.createCache("gbSchemas")}return e.prototype.loadSchemas=function(e,t){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var n=e.$pk||e.id;if(!n)throw new a.a({message:"A primary key or id must be set on the course model"});var r=null,o=this.gbSchemasCache.get(n);if(o)r=this.$q.when(o.promise);else{var s=e.gradebook.schemas.$fetch().$asPromise(),l=this.bbLocalize.loadBundle("components/services/grade"),u=this.$q.defer();this.$q.all({gradeSchemas:s,bundle:l}).then((function(e){var t=i.filter(e.gradeSchemas,(function(e){return!c.J.ScaleType.Text.isEqualTo(e.scaleType)}));t.forEach((function(e){if(e.localizableTitle){var t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui.displayTitleKey="components.services.grade.schema."+t}else e.ui.displayTitle=e.title})),u.resolve(t)})),this.gbSchemasCache.put(n,{promise:u.promise}),r=u.promise}return r.then((function(e){return t&&t.length?e.filter((function(e){return t.some((function(t){return t.isEqualTo(e.scaleType)}))})):e}))},e.prototype.loadSchemaForColumn=function(e){return this.loadSchemas(e.courseId).then((function(t){return i.find(t,(function(t){return t.id===e.gradingSchemaId}))}))},e.prototype.loadGradeSchema=function(e){var t=e.courseId;if(t){var n=void 0,r=this.gbSchemasCache.get(t);return n=r?this.$q.when(r.promise):this.loadSchemas(t),this.$q.when(n).then((function(t){return i.find(t,(function(t){return t.id===e.gradingSchemaId}))}))}throw new a.a({message:"Valid grade column object not provided."})},e.$inject=["$q","DSCacheFactory",c.o.serviceName,s.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(d);o.module(l,["angular-data.DSCacheFactory"]).service(u,d)},okL3:function(e,t){e.exports='<div>\n  <div class="upload-list">\n    <div ng-repeat="file in inProgressFiles" ng-attr-id="file-progress-{{file.barId}}" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.document\'}" class="file-container file-container-progress">\n      <div class="file-meta-container">\n        <div class="file-meta">\n          <ng-switch on="file.currentMimeType">\n            <div ng-switch-when="application/zip" class="element-image img-icon-zip"></div>\n          </ng-switch>\n          <div ng-hide="file.isProcessing" class="progress-circle">\n            <svg class="progress-circle-svg" viewBox="-10 -10 220 220">\n              <path class="back" ng-attr-d="{{\'M0,100 a100,100 0 1 0 200,0 a100,100 0 1 0 -200,0\'}}" fill="transparent" />\n              <path class="bar" ng-attr-d="{{\'m100,0a100,100 0 0 1 0,200a100,100 0 0 1 0,-200\'}}" fill="transparent" stroke-dasharray="629" stroke-dashoffset="629"/>\n            </svg>\n            <i class="progress-icon file-error-icon icon-exclamation" ng-if="state === \'error\'"></i>\n            <span class="progress-value" bb-translate translate-values="{percentage: file.currentProgress}">global.percent</span>\n          </div>\n          <span ng-show="file.isProcessing" class="processing-spinner">\n            <div class="canvas success-state"></div>\n          </span>\n          <p class="progress-status">\n            <span class="ellipse" bb-translate="components.directives.fileUpload.uploadingFile" translate-values="{fileName: file.fileName}"></span>\n          </p>\n        </div>\n        <div class="content-item-controls file-container-controls">\n          <button ng-hide="file.isProcessing"\n                  class="button super-clear js-cancel-upload"\n                  bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.cancelUploadText\'}"\n                  ng-click="progress.cancelUpload($event, file.id)"\n                  analytics-id="components.directives.fileUpload.cancelUploadText.button">\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},p7NW:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("Fvsw"),c=n("pjml"),l=n("e6jQ"),u=n("o5Lu"),d="ultra.services.rubric",p="rubric",m=255,f=[{max:100,min:85},{max:84,min:75},{max:74,min:60},{max:60,min:0}],h=function(){function e(e,t,n,r){this.context=e,this.bbLocalize=t,this.CourseModel=n,this.RubricModel=r,this.bbLocalize.loadBundle("components/services/rubric")}return e.prototype.createRubricCopy=function(e){var t=this.CourseModel.$new(e.courseId),n={courseId:e.courseId,title:this.incrementTitle(e.title,t.locale),columnHeaders:this.cloneHeaders(e.columnHeaders),rows:this.cloneRows(e.rows),permissions:i.clone(e.permissions),rubricType:e.rubricType};return t.rubrics.$build(n)},e.prototype.cloneRows=function(e){var t=this;return i.map(e,(function(e){return{cells:t.cloneCells(e.cells),header:e.header,percentage:e.percentage,position:e.position}}))},e.prototype.cloneCells=function(e){return i.map(e,(function(e){return{position:e.position,description:e.description,percentage:e.percentage,percentageMin:e.percentageMin,percentageMax:e.percentageMax}}))},e.prototype.cloneHeaders=function(e){return i.map(e,(function(e){return{position:e.position,header:e.header}}))},e.prototype.incrementTitle=function(e,t){return this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.newCopyTitle",params:{rubricTitle:e,date:this.bbLocalize.formatDateSync(new Date,s.ILocaleDateFormat.Short)},noWrap:!0,noEscape:!0}).substring(0,m)},e.prototype.processColumnHeader=function(t,n){for(var r=0;r<e.templateColumnCount;r++)t.push({position:r,header:this.bbLocalize.translateSync({locale:n,key:"components.services.rubric.template.column"+(r+1)})})},e.prototype.processRow=function(t,n,r){for(var i=0;i<e.templateRowCount;i++){var o=new Array;this.processCell(r,o),t.push({position:i,header:this.bbLocalize.translateSync({locale:n,key:"components.services.rubric.template.criteria",params:{idx:i+1}}),percentage:Math.floor(100/e.templateRowCount),cells:o})}},e.prototype.updateRubricRows=function(e,t){for(var n=this.cloneRows(e),r=0;r<n.length;r++){n[r].cells.length;switch(t){case c.rb.ILearnRubricType.PERCENTAGE:n[r].cells=this.processPercentageCells(n[r].cells);break;case c.rb.ILearnRubricType.PERCENTAGE_RANGE:n[r].cells=this.processPercentageRangeCells(n[r].cells);break;default:this.unrecognizedRubric()}}return n},e.prototype.processPercentage=function(e,t){return Math.floor(100-100/e*t)},e.prototype.processPercentageRangeCells=function(e){for(var t=this.cloneCells(e),n=e.length,r=0;r<n;r++)t[r]={position:r,description:t[r].description,percentageMin:this.processPercentage(n,r+1),percentageMax:this.processPercentage(n,r)};return t},e.prototype.processPercentageCells=function(e){for(var t=this.cloneCells(e),n=e.length,r=0;r<n;r++)t[r]={position:r,description:t[r].description,percentage:this.processPercentage(n,r)};return t},e.prototype.processCell=function(t,n){switch(t){case c.rb.ILearnRubricType.PERCENTAGE:for(var r=0;r<e.templateColumnCount;r++)n.push({position:r,description:"",percentage:this.processPercentage(e.templateColumnCount,r)});break;case c.rb.ILearnRubricType.PERCENTAGE_RANGE:f.forEach((function(e,t){n.push({position:t,description:"",percentageMin:e.min,percentageMax:e.max})}));break;default:this.unrecognizedRubric()}},e.prototype.generateDefaultRubric=function(e){var t=this;if(null!=this.rubricTemplate){var n=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(n).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then((function(){t.rubricTemplate={courseId:e.id,title:"",rows:new Array,columnHeaders:new Array,permissions:{edit:!0,delete:!0},rubricType:c.rb.ILearnRubricType.PERCENTAGE},t.processColumnHeader(t.rubricTemplate.columnHeaders,e.locale),t.processRow(t.rubricTemplate.rows,e.locale,t.rubricTemplate.rubricType);var n=i.cloneDeep(t.rubricTemplate);return e.rubrics.$build(n).$asPromise()}))},e.prototype.generatePercentRangeRubric=function(e){var t=this;if(null!=this.percentRangeTemplate){var n=i.cloneDeep(this.percentRangeTemplate);return e.rubrics.$build(n).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then((function(){t.percentRangeTemplate={courseId:e.id,title:"",rows:new Array,columnHeaders:new Array,permissions:{edit:!0,delete:!0},rubricType:c.rb.ILearnRubricType.PERCENTAGE_RANGE},t.processColumnHeader(t.percentRangeTemplate.columnHeaders,e.locale),t.processRow(t.percentRangeTemplate.rows,e.locale,t.percentRangeTemplate.rubricType);var n=i.cloneDeep(t.percentRangeTemplate);return e.rubrics.$build(n).$asPromise()}))},e.prototype.changeRubricType=function(e,t){e.rows=this.updateRubricRows(e.rows,e.rubricType)},e.prototype.insertNewCriteriaAt=function(e,t){if(e.rows.length>=10)throw new Error("Cannot add more than 10 criteria rows");var n=this.genNewRow(e.rubricType,e.rows[0].cells);return e.rows.splice(t,0,n),e.rows.forEach((function(e,t){e.position=t})),e},e.prototype.deleteCriteriaAt=function(e,t){if(1===e.rows.length)throw new Error("Cannot delete last criteria row");return e.rows.splice(t,1),e.rows.forEach((function(e,t){e.position=t})),e},e.prototype.balanceCriteriaPercentages=function(e){e.rows.forEach((function(t){t.percentage=Math.floor(100/e.rows.length)})),i.last(e.rows).percentage+=100-e.rows.reduce((function(e,t){return e+t.percentage}),0)},e.prototype.insertNewColumnAt=function(e,t){var n=this;if(e.columnHeaders.length>=10)throw new Error("Cannot add more than 10 columns");return e.columnHeaders.splice(t,0,{position:t,header:""}),e.rows.forEach((function(r){switch(e.rubricType){case c.rb.ILearnRubricType.PERCENTAGE:n.insertNewPercentRubricColumn(r,t);break;case c.rb.ILearnRubricType.PERCENTAGE_RANGE:n.insertNewPercentRangeRubricColumn(r,t);break;default:n.unrecognizedRubric()}})),e},e.prototype.deleteColumnAt=function(e,t){if(1===e.columnHeaders.length)throw new Error("Cannot remove last column");return e.columnHeaders.splice(t,1),e.rows.forEach((function(e){e.cells.splice(t,1),e.cells.forEach((function(e,n){0===t&&0===n&&(e.percentage=100)}))})),e},e.prototype.createRubricEvaluation=function(e,t,n){return{rubricAssociationId:e,userId:t,maxScore:n,totalScore:0,cells:[]}},e.prototype.createRubricEvalUiModel=function(e,t){var n={rubricEvaluation:e,criteria:[],preventKeyboardClose:!1};return this.populateRubricEvalUiModel(n,t)},e.prototype.resetRubricEvalUiModel=function(e,t){e.criteria.length=0,this.populateRubricEvalUiModel(e,t)},e.prototype.populateRubricEvalUiModel=function(e,t){var n=this,r=e.rubricEvaluation;return t.rows.forEach((function(o){var s=[],a={rowId:o.id,percentOfGrade:o.percentage,header:o.header,levels:s,selectedCellId:null},l=n.getEvalCellForCriterion(r,o.id);o.cells.forEach((function(e,n){var o=t.columnHeaders[n],u={cellId:e.id,columnId:o.id,percentage:e.percentage,header:o.header,description:e.description,percentageMin:e.percentageMin,percentageMax:e.percentageMax,_selectedPercent:null,set selectedPercent(e){var t=parseInt(e,10);this._selectedPercent=i.isNaN(t)?null:t},get selectedPercent(){return this._selectedPercent},selected:!1,pointValue:null};t.rubricType===c.rb.ILearnRubricType.PERCENTAGE_RANGE?(l&&l.rubricCellId===e.id&&(u.selected=!0,u.selectedPercent=l.selectedPercent,a.selectedLevel=u,u.pointValue=r.maxScore*a.percentOfGrade/100*l.selectedPercent/100),s.push(u)):(l&&l.rubricCellId===e.id&&l.selectedPercent===e.percentage&&(u.selected=!0,a.selectedLevel=u),u.pointValue=r.maxScore*a.percentOfGrade/100*u.percentage/100,s.push(u))})),e.criteria.push(a)})),this.updateTotalValue(e),e},e.prototype.getEvalCellForCriterion=function(e,t){return i.find(e.cells,(function(e){return e.rubricRowId===t}))},e.prototype.updateTotalValue=function(e){e&&e.criteria&&(e.rubricEvaluation.totalScore=0,e.criteria.forEach((function(t){t.selectedLevel&&t.selectedLevel.pointValue&&(e.rubricEvaluation.totalScore+=t.selectedLevel.pointValue)})),e.rubricEvaluation.totalScore=Number(e.rubricEvaluation.totalScore.toFixed(u.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL)))},e.prototype.clearLevelSelectionForCriterion=function(e,t,n){var r=i.find(e.criteria,(function(e){return e.rowId===t})),o=i.find(r.levels,(function(e){return e.cellId===n}));r.selectedLevel=null,r.levels.forEach((function(e){e.selected=!1,i.isNaN(e.selectedPercent)&&(e.selectedPercent=null)})),r.selectedLevel=o,o&&(o.selected=!0)},e.prototype.selectLevelForCriterion=function(e,t,n){var r=i.find(e.criteria,(function(e){return e.rowId===t})),o=i.find(r.levels,(function(e){return e.cellId===n}));if(r.selectedLevel=null,r.levels.forEach((function(e){e.selected=!1})),r.selectedLevel=o,o){o.selected=!0;var s=this.getEvalCellForCriterion(e.rubricEvaluation,t);s?(s.rubricCellId=n,s.selectedPercent=null!=o.selectedPercent?o.selectedPercent:o.percentage):(null==e.rubricEvaluation.cells&&(e.rubricEvaluation.cells=[]),e.rubricEvaluation.cells.push({rubricRowId:t,rubricCellId:n,selectedPercent:null!=o.selectedPercent?o.selectedPercent:o.percentage}))}this.updateTotalValue(e)},e.prototype.initRubricCellValues=function(e,t){e&&e.rows&&e.rows.forEach((function(e){e.cells.forEach((function(n){n.ui={points:t*e.percentage/100*n.percentage/100}}))}))},e.prototype.initiateUiState=function(e,t){e.ui.editingCells=!1,e.ui.canEdit=t,e.ui.editingCriteria=!1,e.ui.invalidCriteriaPercentageSum=!1,e.ui.criteriaLimit=10,e.ui.columnLimit=10},e.prototype.mapRubricToGrid=function(e){return null==e.ui.columnHeaders&&(e.ui.columnHeaders=new Array),e.columnHeaders.forEach((function(t,n){e.ui.columnHeaders[n]?e.ui.columnHeaders[n].uuid||(e.ui.columnHeaders[n].uuid=Object(l.b)()):e.ui.columnHeaders[n]={uuid:Object(l.b)()}})),null==e.ui.rows&&(e.ui.rows=new Array),e.rows.forEach((function(t,n){e.ui.rows[n]?e.ui.rows[n].uuid||(e.ui.rows[n].uuid=Object(l.b)()):e.ui.rows[n]={uuid:Object(l.b)()}})),{rows:e.rows.map((function(t,n){return{id:e.ui.rows[n].uuid,data:t}})),columns:e.columnHeaders.map((function(t,n){return{id:e.ui.columnHeaders[n].uuid,data:t}}))}},e.prototype.insertNewPercentRubricColumn=function(e,t){var n=t<e.cells.length?e.cells[t].percentage:e.cells[t-1].percentage;if(e.cells.splice(t,0,{position:0,description:"",percentage:n}),e.cells.forEach((function(e,t){e.position=t})),0!==t){var r=e.cells[t+1]?e.cells[t+1].percentage:0,i=Math.floor((e.cells[t-1].percentage-r)/2);e.cells[t].percentage=e.cells[t-1].percentage-i}},e.prototype.insertNewPercentRangeRubricColumn=function(e,t){var n=t<e.cells.length?e.cells[t].percentageMin:e.cells[t-1].percentageMin,r=t<e.cells.length?e.cells[t].percentageMax:e.cells[t-1].percentageMax;if(e.cells.splice(t,0,{position:t,description:"",percentageMin:n,percentageMax:r}),e.cells.forEach((function(e,t){e.position=t})),0!==t){var i=e.cells[t+1]?e.cells[t+1].percentageMin:0,o=e.cells[t+1]?e.cells[t+1].percentageMax:0;e.cells[t].percentageMin=e.cells[t-1].percentageMin-Math.floor((e.cells[t-1].percentageMin-i)/2),e.cells[t].percentageMax=e.cells[t-1].percentageMax-Math.floor((e.cells[t-1].percentageMax-o)/2)}},e.prototype.genNewRow=function(e,t){switch(e){case c.rb.ILearnRubricType.PERCENTAGE:return this.genNewPercentageRow(t);case c.rb.ILearnRubricType.PERCENTAGE_RANGE:return this.genNewPercentageRangeRow(t);default:this.unrecognizedRubric()}},e.prototype.genNewPercentageRangeRow=function(e){var t={header:"",percentage:0,cells:new Array};return e.forEach((function(e,n){t.cells.push({position:n,description:"",percentageMin:e.percentageMin,percentageMax:e.percentageMax})})),t},e.prototype.genNewPercentageRow=function(e){var t={header:"",percentage:0,cells:new Array};return e.forEach((function(e,n){t.cells.push({position:n,description:"",percentage:e.percentage})})),t},e.prototype.unrecognizedRubric=function(){throw new Error("Invalid rubric type, please go check ILearnRubricType for more detail")},e.prototype.validateInput=function(e){return e.selectedPercent>=e.percentageMin&&e.selectedPercent<=e.percentageMax},e.templateRowCount=4,e.templateColumnCount=4,e.$inject=[a.b,s.serviceName,c.o.serviceName,c.rb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h);o.module(d,[a.a,s.moduleName,c.R]).service(p,h)},pGZF:function(e,t,n){},pIXs:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("cKE6");var r=n("wHJ2"),i=n("bd9L"),o=n("0JpG"),s=n("6jv3"),a="ultra.directives.saveButtons",c=function(){function e(e,t){var n=this;this.scope=e,this.bbLocalize=t,this.isSaving=!1,this.isSavedOnceOrMore=!1,this.savedToBrowserCount=0,this.bbLocalize.loadBundle("components/directives/save-buttons").then((function(){n.notSavedStr=e.saveType||n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notSaved"}),n.savedStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.saved"}),n.savingStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.saving"}),n.cancelStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.cancel"}),n.deleteStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.delete"}),n.savedSuccessfullyStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notification.savedSuccessfully"}),n.canceledSuccessfullyStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notification.canceledSuccessfully"}),n.deleteButtonStatus=n.deleteStr,e.displaySavedAfterSaving&&e.displaySavedAfterSaving()&&n.isSavedOnceOrMore?n.saveButtonStatus=n.savedStr:n.saveButtonStatus=n.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()&&n.isSavedOnceOrMore?n.cancelButtonStatus=n.deleteStr:n.cancelButtonStatus=n.cancelStr})),e.$on("bb-save-button",(function(t,r,o){var s=!1;switch(r){case i.a.Change:n.isSaving=!1,n.saveButtonStatus=n.notSavedStr;break;case i.a.Saving:n.isSaving=!0,n.saveButtonStatus=n.savingStr,s=!0;break;case i.a.Saved:s=!0,n.isSavedOnceOrMore=!0,n.isSaving=!1,n.informScreenReaderToRead(n.savedSuccessfullyStr),e.displaySavedAfterSaving&&e.displaySavedAfterSaving()?n.saveButtonStatus=n.savedStr:n.saveButtonStatus=n.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()?n.cancelButtonStatus=n.deleteStr:n.cancelButtonStatus=n.cancelStr;break;case i.a.SaveFailure:case i.a.ValidationFailure:s=!0}n.form.$bbSaveAttempt=s})),e.$parent.$on("bb-autosave-form-to-browser",(function(e,t,r){i.a.Saved.isEqualTo(t)&&n.element.attr("saved-to-browser",n.savedToBrowserCount+=1)}))}return e.prototype.isValid=function(){return this.scope.ignoreFormValidation&&this.scope.ignoreFormValidation()?this.scope.validateSave():this.form.$valid&&this.scope.validateSave()},e.prototype.isCancelNowADelete=function(){return this.scope.displayDeleteAfterSaving&&this.scope.displayDeleteAfterSaving()&&this.isSavedOnceOrMore},e.prototype.isCancelDisabled=function(){return this.isSaving||this.isCancelNowADelete()&&!this.scope.canDelete()},e.prototype.isDeleteDisabled=function(){return this.isSaving||!this.scope.canDelete()},e.prototype.isSaveDisabled=function(){return this.isSaving||!this.isValid()},e.prototype.cancelAction=function(){return this.form.$setPristine(),this.informScreenReaderToRead(this.canceledSuccessfullyStr),this.isCancelNowADelete()?this.scope.deleteAction():this.scope.cancelAction()},e.prototype.deleteAction=function(){return this.form.$setPristine(),this.scope.deleteAction()},e.prototype.saveAction=function(){return this.form.$setSubmitted(),this.informScreenReaderToRead(this.savedSuccessfullyStr),this.scope.saveAction()},e.prototype.mousedownAction=function(){if(this.scope.mousedownAction)return this.scope.mousedownAction()},e.prototype.informScreenReaderToRead=function(e){this.scope.disableScreenreaderAnnouncements&&this.scope.disableScreenreaderAnnouncements()||this.scope.$emit("read-info-directive",e)},e.$inject=["scope",o.serviceName],e}(),l=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.require="^form",this.replace=!0,this.restrict="E",this.scope={canDelete:"&",cancelAction:"&",choices:"=?",deleteAction:"&",deleteConfirmationResourceType:"@?",disableScreenreaderAnnouncements:"&?",displayDeleteAfterSaving:"&?",displaySavedAfterSaving:"&?",hideSave:"&?",hideCancel:"&?",hideDelete:"&?",isInline:"&?",mousedownAction:"&?",mustShowDeleteConfirmation:"&?",mustShowSaveConfirmation:"&?",saveAction:"&",saveConfirmationResourceType:"@?",validateSave:"&",ignoreFormValidation:"&",saveType:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,t,r,i){e.saveButtons=n.$injector.instantiate(c,{scope:e}),e.saveButtons.form=i,e.saveButtons.element=t},this.compile=function(e,t){return"true"===t.isInline&&(e.prepend(e.find("footer").children()),e.find("footer").remove()),{pre:n.link}},this.template=s}return e.$inject=["$injector",o.serviceName],e}();r.module(a,[o.moduleName]).directive("bbSaveButtons",["$injector",function(e){return e.instantiate(l)}])},"pUR+":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("X455"),a=n("UD9g"),c=n("pjml"),l=n("TnpK"),u=n("oB9e"),d="ultra.course.engagement.journal.router";r.module(d,[i.moduleName,l.b,a.b,u.a,o.b,s.a]).config([l.c,o.c,s.b,function(e,t,r){var u,d;e.peekState("journal",{abstract:!0,url:"/journal",resolve:(u={},u[o.d]=t.resolve,u.translations=["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/blog/blog")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}],u)}).peekState("journal.view",{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter?journalId",panelClass:"full",pageTitle:"course.content.journalItem",require:function(){return Promise.all([n.e(13),n.e(2),n.e(3),n.e(37),n.e(88),n.e(571)]).then(n.bind(null,"hucp"))},resolve:{translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader"}}).peekState("journal.view.with-grading",{url:"?view&disGroupId",panelClass:"full",views:{"engagement-edit@":{require:function(){return Promise.all([n.e(0),n.e(27),n.e(1),n.e(8),n.e(37),n.e(88),n.e(606)]).then(n.bind(null,"6omJ"))}},"engagement-grade@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(27),n.e(1),n.e(9),n.e(11),n.e(31),n.e(80)]).then(n.bind(null,"4Rme"))}}},onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conditional-release","content-market","course-group","journal-details","journal-participants","journal-settings",a.a,"lti","message","rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","journal-feedback"],peekViewName:"journal-peek@",pageTitle:"course.content.journalItem",allowChildPeekStates:!0,resolve:(d={},d[o.d]=t.resolve,d[s.c]=r.resolve,d.currentCourseId=["$state",function(e){return e.nextParams.courseId}],d.currentContent=[l.d,o.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==c.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}],d.currentColumn=[l.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==c.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}],d)}).peekState("journal-details",{panelClass:"peek",url:"/details",require:function(){return n.e(678).then(n.bind(null,"sC0C"))},pageTitle:"course.content.journalDetails",peekViewName:"journal-details-peek"}),e.peekState("journal-settings",{panelClass:"peek",url:"/settings?focusEleId",require:function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(37),n.e(88),n.e(598)]).then(n.bind(null,"SxKk"))},pageTitle:"course.content.journalSettings",peekViewName:"journal-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","rubric"]})}])},pjml:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"serviceName",(function(){return _e}));var i={};n.r(i),n.d(i,"serviceName",(function(){return Re}));var o={};n.r(o),n.d(o,"serviceName",(function(){return je}));var s={};n.r(s),n.d(s,"serviceName",(function(){return He})),n.d(s,"AssessmentExceptionType",(function(){return ze}));var a={};n.r(a),n.d(a,"serviceName",(function(){return Qe}));var c={};n.r(c),n.d(c,"serviceName",(function(){return Ze})),n.d(c,"KnownCalendar",(function(){return Xe}));var l={};n.r(l),n.d(l,"serviceName",(function(){return nt})),n.d(l,"RecurFrequency",(function(){return rt})),n.d(l,"RecurWeekDay",(function(){return it})),n.d(l,"MonthRepeatBy",(function(){return ot})),n.d(l,"MetadataOnCalendarItemCardLinkType",(function(){return st})),n.d(l,"RepeatRuleType",(function(){return at}));var u={};n.r(u),n.d(u,"ConversionContentCategory",(function(){return ct})),n.d(u,"ConversionReportStatus",(function(){return lt})),n.d(u,"ConversionQueueTaskStatus",(function(){return ut})),n.d(u,"serviceName",(function(){return dt}));var d={};n.r(d),n.d(d,"serviceName",(function(){return ft}));var p={};n.r(p),n.d(p,"serviceName",(function(){return vt})),n.d(p,"CollabSessionType",(function(){return bt})),n.d(p,"CollabAccessType",(function(){return yt}));var m={};n.r(m),n.d(m,"serviceName",(function(){return kt}));var f={};n.r(f),n.d(f,"serviceName",(function(){return Tt}));var h={};n.r(h),n.d(h,"serviceName",(function(){return Mt}));var g={};n.r(g),n.d(g,"CourseMessageType",(function(){return Nt})),n.d(g,"serviceName",(function(){return Rt}));var v={};n.r(v),n.d(v,"sortInstructorsMembership",(function(){return Bt})),n.d(v,"serviceName",(function(){return Ft}));var b={};n.r(b),n.d(b,"serviceName",(function(){return qt}));var y={};n.r(y),n.d(y,"serviceName",(function(){return Zt}));var S={};n.r(S),n.d(S,"serviceName",(function(){return rn}));var C={};n.r(C),n.d(C,"serviceName",(function(){return on}));var w={};n.r(w),n.d(w,"serviceName",(function(){return sn}));var k={};n.r(k),n.d(k,"serviceName",(function(){return an}));var T={};n.r(T),n.d(T,"moduleName",(function(){return pn})),n.d(T,"serviceName",(function(){return mn})),n.d(T,"START_ATTEMPT_ID",(function(){return fn}));var I={};n.r(I),n.d(I,"moduleName",(function(){return hn})),n.d(I,"serviceName",(function(){return gn})),n.d(I,"GradeCategoryTitleEnum",(function(){return vn}));var $={};n.r($),n.d($,"ColumnSummaryStatus",(function(){return Sn.a})),n.d($,"serviceName",(function(){return Cn})),n.d($,"SummaryAction",(function(){return wn}));var E={};n.r(E),n.d(E,"serviceName",(function(){return In}));var P={};n.r(P),n.d(P,"serviceName",(function(){return $n}));var A={};n.r(A),n.d(A,"serviceName",(function(){return Pn}));var x={};n.r(x),n.d(x,"serviceName",(function(){return xn}));var D={};n.r(D),n.d(D,"serviceName",(function(){return Dn}));var O={};n.r(O),n.d(O,"serviceName",(function(){return On}));var _={};n.r(_),n.d(_,"serviceName",(function(){return _n})),n.d(_,"LTIStatusType",(function(){return Mn})),n.d(_,"LTISendUserDataType",(function(){return Nn}));var M={};n.r(M),n.d(M,"serviceName",(function(){return Rn}));var N={};n.r(N),n.d(N,"serviceName",(function(){return Ln}));var R={};n.r(R),n.d(R,"serviceName",(function(){return jn}));var L={};n.r(L),n.d(L,"serviceName",(function(){return Fn}));var j={};n.r(j),n.d(j,"serviceName",(function(){return zn}));var U={};n.r(U),n.d(U,"serviceName",(function(){return Vn}));var G={};n.r(G),n.d(G,"serviceName",(function(){return Kn}));var B={};n.r(B),n.d(B,"serviceName",(function(){return Wn}));var F={};n.r(F),n.d(F,"serviceName",(function(){return Qn}));var q={};n.r(q),n.d(q,"serviceName",(function(){return er})),n.d(q,"adjustEngagement",(function(){return tr}));var H={};n.r(H),n.d(H,"serviceName",(function(){return rr}));var z={};n.r(z),n.d(z,"serviceName",(function(){return ir}));var V={};n.r(V),n.d(V,"serviceName",(function(){return or}));var K={};n.r(K),n.d(K,"serviceName",(function(){return sr}));var J={};n.r(J),n.d(J,"serviceName",(function(){return ar}));var W={};n.r(W),n.d(W,"serviceName",(function(){return cr})),n.d(W,"adjustProbabilities",(function(){return lr})),n.d(W,"learnUser",(function(){return ur}));var Q={};n.r(Q),n.d(Q,"serviceName",(function(){return dr}));var Y={};n.r(Y),n.d(Y,"serviceName",(function(){return pr}));var Z={};n.r(Z),n.d(Z,"serviceName",(function(){return mr}));var X={};n.r(X),n.d(X,"serviceName",(function(){return fr}));var ee={};n.r(ee),n.d(ee,"serviceName",(function(){return hr}));var te={};n.r(te),n.d(te,"serviceName",(function(){return gr}));var ne={};n.r(ne),n.d(ne,"serviceName",(function(){return vr}));var re={};n.r(re),n.d(re,"serviceName",(function(){return br})),n.d(re,"VENDOR_RESPONDUS",(function(){return yr}));var ie={};n.r(ie),n.d(ie,"serviceName",(function(){return Sr}));var oe={};n.r(oe),n.d(oe,"QueueTaskStatus",(function(){return wr})),n.d(oe,"serviceName",(function(){return kr}));var se={};n.r(se),n.d(se,"NotificationRecipientType",(function(){return $r})),n.d(se,"GradeIconType",(function(){return Er})),n.d(se,"serviceName",(function(){return Pr}));var ae={};n.r(ae),n.d(ae,"serviceName",(function(){return Ar}));var ce={};n.r(ce),n.d(ce,"serviceName",(function(){return xr}));var le={};n.r(le),n.d(le,"serviceName",(function(){return Dr})),n.d(le,"ITargetedNotificationPriority",(function(){return Or})),n.d(le,"ITargetedNotificationType",(function(){return _r}));var ue={};n.r(ue),n.d(ue,"serviceName",(function(){return Mr})),n.d(ue,"transformActivityTime",(function(){return Nr}));var de={};n.r(de),n.d(de,"serviceName",(function(){return Rr}));var pe={};n.r(pe),n.d(pe,"serviceName",(function(){return Lr}));var me={};n.r(me),n.d(me,"serviceName",(function(){return jr}));var fe={};n.r(fe),n.d(fe,"serviceName",(function(){return Ur}));var he={};n.r(he),n.d(he,"serviceName",(function(){return Gr}));var ge={};n.r(ge),n.d(ge,"serviceName",(function(){return Br}));var ve={};n.r(ve),n.d(ve,"serviceName",(function(){return Fr}));var be={};n.r(be),n.d(be,"serviceName",(function(){return qr}));var ye={};n.r(ye),n.d(ye,"serviceName",(function(){return Hr}));var Se={};n.r(Se),n.d(Se,"serviceName",(function(){return zr}));var Ce={};n.r(Ce),n.d(Ce,"serviceName",(function(){return Vr}));var we={};n.r(we),n.d(we,"serviceName",(function(){return Kr}));var ke={};n.r(ke),n.d(ke,"serviceName",(function(){return Jr}));var Te={};n.r(Te),n.d(Te,"TermDuration",(function(){return Wr.a})),n.d(Te,"ConstantTermId",(function(){return Qr})),n.d(Te,"serviceName",(function(){return Yr}));var Ie={};n.r(Ie),n.d(Ie,"serviceName",(function(){return Xr})),n.d(Ie,"ultraSettingsPrefix",(function(){return ei}));var $e={};n.r($e),n.d($e,"serviceName",(function(){return ri}));var Ee={};n.r(Ee),n.d(Ee,"serviceName",(function(){return ii}));var Pe={};n.r(Pe),n.d(Pe,"serviceName",(function(){return oi}));var Ae=n("Rjd/"),xe=(n("QLzv"),n("5MwF")),De=n("yCC5"),Oe=n("nkTj"),_e=De.a,Me=xe.a.apiBasePath+"/v1";Ae.a.factory(_e,["restmod",Oe.d,function(e,t){return e.model(Me).mix({$extend:{Model:{getAllyConfig:function(){return this.single(Me+"/ally/config").$fetch().$allow(["400-599"]).$asPromise().then((function(e){return e.isStatusCode(200)?e:{serviceAvailable:!1}}))},getAllyToken:function(e,t){var n=Me+"/courses/"+e+(t?"/ally/content/"+t+"/token":"/ally/token");return this.single(n).$fetch().$asPromise()}}}})}]);var Ne=n("wHJ2"),Re=De.b;Ae.a.factory(Re,(function(){var e=xe.a.telemetryApiBasePath+"/v1/browser/interactions";return{$create:function(t){Ne.element.ajax({type:"POST",url:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",timeout:xe.a.telemetryApiTimeoutMS})}}}));var Le=De.c;Ae.a.factory(Le,["restmod",function(e){return e.model().mix({lastRun:{serialize:"date"},getRedirectUrl:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/redirectUrl"},(function(e){this.$unwrap(e.data)})).$asPromise()}})}]);var je=De.d;Ae.a.factory(je,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{downloadWithAnnotations:function(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+n+"/assignments/attempts/files/"+e+"/downloadInfo?is_group="+t},(function(e){return this.$unwrap(e.data)}))}}}})}]);var Ue=De.e;Ae.a.factory(Ue,["restmod",Oe.d,function(e,t){return e.model()}]);var Ge=n("40MU"),Be=n("D57K"),Fe=n("nbDY"),qe=n.n(Fe),He=De.g,ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.User=new t("USER"),t.Group=new t("GROUP"),t}(qe.a);Ae.a.factory(He,["restmod","$q",Oe.d,function(e,t,n){return e.model().mix({$url:function(e){if(this.$scope.$url(e))return this.$scope.$url(e).replace(xe.a.apiBasePath,xe.a.apiBasePath+"/public")+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{saveException:function(e){return this.$send({method:"POST",url:this.$url(),data:e}).$allow([404]).$asPromise()},deleteException:function(){return this.$send({method:"DELETE",url:this.$url()}).$allow([404]).$asPromise()}}}})}]);var Ve=n("+IM5"),Ke=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(Be.__extends)(t,e),t.Student=new t("STUDENT"),t.InstructorComments=new t("INSTRUCTOR_COMMENTS"),t.InstructorNotes=new t("INSTRUCTOR_NOTES")}(qe.a),De.Vb);Ae.a.factory(Ke,["restmod",Oe.d,function(e){return e.model().mix({grade:{hasOne:De.bb,path:"grades"}})}]);var Je=n("FHk9"),We=De.h;Ae.a.factory(We,["restmod",Oe.d,function(e,t){return e.model().mix({$hooks:{"after-request":function(e){null===e.data.results&&(e.data.results=[])}}})}]);var Qe=De.i;Ae.a.factory(Qe,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/brands";return e.model(t).mix({$extend:{Model:{getCurrent:function(){return this.single(t+"/current").$fetch()}}}})}]);var Ye=n("Q/M7"),Ze=De.j,Xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.INSTITUTION=new t("INSTITUTION"),t.PERSONAL=new t("PERSONAL"),t}(qe.a);Ae.a.factory(Ze,["restmod","$q",function(e,t){var n=xe.a.apiBasePath+"/v1/calendars";return e.model(n).mix({ui:{mask:!0,init:function(){return{}}},$extend:{Collection:{sortCalendars:function(){return this.$action((function(){this.sort((function(e,t){return e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey?e.id===Xe.INSTITUTION.toString()?1:-1:e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===Xe.INSTITUTION.toString()?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===Xe.INSTITUTION.toString()?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1}))}))}},Model:{getOrRegenerateExportCalendarFeed:function(e){var n=t.defer();return this.$build().$send({method:e?"POST":"GET",url:Ye.c("/webapps/calendar/calendarFeed/url"),transformResponse:function(e){return e}},(function(e){n.resolve(e&&e.data)})),n.promise}}}})}]);var et=n("VdDF"),tt=n("g66W"),nt=De.k,rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Monthly=new t("MONTHLY"),t.Weekly=new t("WEEKLY"),t.Daily=new t("DAILY"),t}(qe.a),it=function(e){function t(t,n){var r=e.call(this,t)||this;return r.dayOfWeek=n,r}return Object(Be.__extends)(t,e),t.Sunday=new t("SU",0),t.Monday=new t("MO",1),t.Tuesday=new t("TU",2),t.Wednesday=new t("WE",3),t.Thursday=new t("TH",4),t.Friday=new t("FR",5),t.Saturday=new t("SA",6),t}(qe.a),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.ByMonthDay=new t("BYMONTHDAY"),t}(qe.a),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Course=new t("Course"),t.External=new t("External"),t}(qe.a),at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.ClassSchedule=new t("C"),t.ExternalCourseSchedule=new t("E"),t.OfficeHours=new t("O"),t}(qe.a);Ae.a.factory(nt,["restmod","RMUtils",Oe.d,function(e,t,n){var r=xe.a.apiBasePath+"/v1/calendars/calendarItems";return e.model(r).mix({startDate:{serialize:"date"},endDate:{serialize:"date"},"recurRules.until":{serialize:"date"},"recurRules.originalStart":{serialize:"date"},"recurRules.originalEnd":{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$extend:{isDueItem:function(){return!!this.dynamicCalendarItemProps},isAllDayEvent:function(){return 0===this.startDate.getHours()&&0===this.startDate.getMinutes()&&23===this.endDate.getHours()&&59===this.endDate.getMinutes()},isConditionalRelease:function(){return!(this.permissions&&this.permissions.edit)&&wt.ContentVisibility.Restricted.isEqualTo(this.visibility)},getTruncatedLocation:function(e){return tt.g(this.location,e)},Record:{$buildUrl:function(e){return this.$pk&&this.$pk.itemSourceType&&this.$pk.itemSourceId?t.joinUrl(t.joinUrl(e.$url(),this.$pk.itemSourceType),this.$pk.itemSourceId):null}},Model:{inferKey:function(e){return{itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId}},unpack:function(e,t){var n=e.$response.config;if(e.$isCollection){if("PUT"===n.method&&Array.isArray(t))return t.map((function(e){return e.statusCode>=200&&e.statusCode<300?Ne.fromJson(e.body):e.body}));e.paging=t&&t.paging,e.permissions=t&&t.permissions;var r=t&&t.results;return r&&r.forEach((function(e){e.recurRules&&!e.recurRules.timeZoneId&&(e.recurRules.timeZoneId=et.a.getCurrentTimeZoneId())})),r}var i="POST"===n.method&&Array.isArray(t)?t[0]:t;return i.recurRules&&!i.recurRules.timeZoneId&&(i.recurRules.timeZoneId=et.a.getCurrentTimeZoneId()),i}}}})}]);var ct=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.category=t,i.categoryKey=n,i.categoryImage=r,i.mediumIconsByCategory={Assessment:"test",Announcements:"announcements",Blog:"blog",Course:"course",CourseLink:"link",CourseSettings:"settings",DiscussionBoard:"discussion",Gradebook:"grades",Group:"groups",Message:"messages",ReleaseSettings:"settings",Rubric:"rubric",TableOfContents:"content-collection",Wiki:"wiki",Content:"document-blank"},i}return Object(Be.__extends)(t,e),t.prototype.getLocalizableCategoryNameKey=function(){return this.categoryKey},t.prototype.getMediumCategoryIconOrDefault=function(){return this.mediumIconsByCategory[this.category]||"document-blank"},t.prototype.getCategoryIconName=function(){return this.categoryImage?this.categoryImage:"document-blank"},t.Assessment=new t("Assessment","ultra.convert.category.assessment","test"),t.Announcements=new t("Announcements","ultra.convert.category.announcements","announcement"),t.Blog=new t("Blog","ultra.convert.category.blog","blog"),t.Collab=new t("Collab","ultra.convert.category.collab"),t.Course=new t("Course","ultra.convert.category.course","course"),t.CourseLink=new t("CourseLink","ultra.convert.category.courseLink","link"),t.CourseSettings=new t("CourseSettings","ultra.convert.category.courseSettings","settings"),t.Content=new t("Content","ultra.convert.category.content","document-blank"),t.ContentSettings=new t("ContentSettings","ultra.convert.category.contentSettings","settings"),t.DiscussionBoard=new t("DiscussionBoard","ultra.convert.category.discussionBoard","discussion"),t.Gradebook=new t("Gradebook","ultra.convert.category.gradebook","grades"),t.Group=new t("Group","ultra.convert.category.group","groups"),t.Message=new t("Message","ultra.convert.course.message.unsupported","messages"),t.ReleaseSettings=new t("ReleaseSettings","ultra.convert.category.releaseSettings","settings"),t.Rubric=new t("Rubric","ultra.convert.category.rubric","rubric"),t.TableOfContents=new t("TableOfContents","ultra.convert.category.tableOfContents","content-collection"),t.Task=new t("Task","ultra.convert.category.task"),t.Wiki=new t("Wiki","ultra.convert.category.wiki","wiki"),t}(qe.a),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Success=new t("Success"),t.Failure=new t("Failure"),t.Partial=new t("Partial"),t.Unavailable=new t("Unavailable"),t}(qe.a),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Waiting=new t("WAITING"),t.Assigned=new t("ASSIGNED"),t.Running=new t("RUNNING"),t.Complete=new t("COMPLETE"),t.CompleteErrors=new t("COMPLETE_ERRORS"),t.Incomplete=new t("INCOMPLETE"),t}(qe.a),dt=De.s;Ae.a.factory(dt,["restmod",Oe.d,function(e,t){return e.model().mix({$config:{primaryKey:"taskId"}})}]);var pt=De.u;Ae.a.factory(pt,["restmod",function(e){return e.model().mix({calendarItems:{hasMany:De.v},dueDateCalendarItems:{hasMany:De.D}})}]);var mt=De.v;Ae.a.factory(mt,["restmod",function(e){return e.model().mix(nt,{})}]);var ft=De.U;Ae.a.factory(ft,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/calendars/dueDateCalendarItems";return e.model(t).mix(nt)}]);var ht=De.D;Ae.a.factory(ht,["restmod",function(e){return e.model().mix(ft,{})}]);n("RphD");var gt=n("vYaK"),vt=De.x,bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.CourseRoom=new t("COURSE_ROOM"),t.UserRoom=new t("USER_ROOM"),t}(qe.a),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.APOLLO=new t("APOLLO"),t.GEMINI=new t("GEMINI"),t}(qe.a);Ae.a.factory(vt,["restmod",Oe.d,function(e,t){return e.model().mix({$extend:{Record:{getLaunchUrl:function(){return this.$send({method:"POST",url:this.$url()+"/launch",data:{}}).$asPromise().then((function(e){return xe.a.features.collab?e.$response.data.url:e.$response.data.launchUrl}))}}}})}]);var St=De.w;Ae.a.factory(St,["restmod",Oe.d,function(e,t){return e.model().mix({sessions:{hasMany:De.x},$extend:{Record:{getVirtualClassroomSession:function(){return this.sessions.$search({sessionType:bt.CourseRoom.toString()}).$asPromise().then((function(e){return e[0]||null}))}}}})}]);var Ct=De.y;Ae.a.factory(Ct,["restmod",Oe.d,function(e,t){return e.model().mix({sessions:{hasMany:De.x},$extend:{Record:{getAllCollabSessions:function(){return this.sessions.$search({expand:"sessionInstances"}).$asPromise()},getCourseCollabInfo:function(){return this.sessions.$search({sessionCategory:"course",expand:"sessionInstances"}).$asPromise()},enableCourseRoom:function(e){var t=this;return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!0}},(function(e){return t.$unwrap(e.data)})).$asPromise()},disableCourseRoom:function(e){var t=this;return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!1}},(function(e){return t.$unwrap(e.data)})).$asPromise()},launchDiscussionSession:function(e,t){var n=this;return this.$send({method:"POST",url:this.$url()+"/sessions/forums/"+e+"/launch"+(t?"?groupId="+t:"")},(function(e){return n.$unwrap(e.data)})).$asPromise()}}}})}]);var wt=n("fm95"),kt=De.z;Ae.a.factory(kt,["restmod",Oe.d,function(e,t){return e.model().mix({})}]);var Tt=De.E;Ae.a.factory(Tt,["restmod",Oe.d,function(e,t){return e.model().mix({data:{belongsTo:De.Ac},ui:{mask:!0,init:function(){return{}}},$hooks:{"before-fetch-many":function(e){e.params=e.params||{},e.params.fields?e.params.fields+=",-data":e.params.fields="-data"},"after-request":function(e){e.data.results.forEach((function(e){var t={id:e.userId,isPlaceHolder:!0};e.data=t}))}}})}]);var It=De.I;Ae.a.factory(It,["restmod",Oe.d,function(e,t){return e.model().mix({counts:{hasOne:De.J},messages:{hasMany:De.P},usercounts:{hasMany:De.E},$extend:{Record:{save:function(){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url(),data:{"resource/x-bb-forumlink":{title:this.title}}},(function(e){this.$unwrap(e.data["resource/x-bb-forumlink"])}))}}}})}]);var $t=De.J;Ae.a.factory($t,["restmod",Oe.d,function(e,t){return e.model()}]);var Et=De.H;Ae.a.factory(Et,["restmod",Oe.d,function(e,t){return e.model().mix({$config:{primaryKey:"cxFileId"},createDate:{serialize:"date"}})}]);var Pt=n("PSJS"),At=De.Q;Ae.a.factory(At,["restmod",Oe.d,function(e,t){return e.model().mix({contents:{hasMany:De.P}})}]);var xt=De.F;Ae.a.factory(xt,["restmod",Oe.d,function(e,t){return e.model()}]);var Dt=n("nsO7"),Ot=n("oVrE"),_t=n("qhd3"),Mt=De.B;Ae.a.factory(Mt,["restmod",_t.serviceName,"$http","$q",function(e,t,n,r){var i=e.model().mix({courseId:{mask:"CU"},latestMessages:{mask:"U",map:"messages"},messages:{mask:"U",hasMany:De.C},participants:{mask:!0,hasMany:De.Ac},totalCount:{mask:"CU"},unreadCount:{mask:"CU"},createdDate:{mask:"CU",serialize:"date"},updatedDate:{mask:"CU",serialize:"date"},canBeRepliedTo:{mask:"U"},newParticipantIds:{mask:"R"},participantsWithoutSender:{mask:!0},participantsWithoutLatestSender:{mask:!0},creatorId:{mask:"CUD"},ui:{mask:!0,init:function(){return{}}},createConversation:function(e){return this.$decorate({"before-request":function(t){t.params={sendEmailToParticipants:e}}},(function(){return this.$save()}))},$hooks:{"before-request":function(e){if("GET"===e.method&&/conversations\/_\d+_\d+$/.exec(e.url)){e.params=e.params||{},e.params.fields=(e.params.fields||"")+",-participantIds";var t=r.all([n(Dt.pick(e,"method","params","url")),this.participants.$fetch().$asPromise()]).then((function(e){var t=e[0];e[1];return delete t.data.participantIds,t}));e.cache={get:function(){return t}},Object.defineProperty(this,"participantIds",{get:function(){return this.participants.map((function(e){return e.$pk}))},set:Dt.noop})}}}});return i.$extendRecord((function(e,n){if(!Object.prototype.hasOwnProperty.call(e,"latestSender")){var r=null;Object.defineProperty(e,"latestSender",{get:function(){var e=this,n=this.latestMessages[0].senderId;if(null!==r&&r.$pk===n)return r;for(var i=[function(){return e.latestMessages[0].sender},function(){if(e.participants.$resolved)return e.participants.find((function(t){return t.id===e.latestMessages[0].senderId}))},function(){if(Oe.a.isValid(e.latestMessages[0].senderId)){var n=t.$new(e.latestMessages[0].senderId);return n.$resolve(),n}var r=Ot.d();return e.latestMessages[0].senderId=r,t.$buildRaw({id:r})}],o=0;o<i.length;o++){var s=i[o]();if(void 0!==s)return r=s,s}}})}return{}})),i}]);var Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Normal=new t("NORMAL"),t.System=new t("SYSTEM"),t}(qe.a),Rt=De.C;Ae.a.factory(Rt,["restmod",Oe.d,function(e,t){return e.model().mix({conversationId:{mask:"CU"},courseId:{mask:"CU"},senderId:{mask:"CU"},isRead:{mask:"C",init:!1},postDate:{mask:"CU",serialize:"date"},type:{mask:"CU"},participants:{hasMany:De.Ac},ui:{mask:!0,init:function(){return{}}},isSystemMessage:function(){return Nt.System.isEqualTo(this.type)},createReply:function(e){return this.$decorate({"before-request":function(t){t.params={sendEmailToParticipants:e}}},(function(){return this.$save()}))}})}]);var Lt=n("tPPx"),jt=n("go4a"),Ut=n("f8ya");function Gt(){return{encode:function(e){},decode:function(e){var t={editRole:!1,editPersonalOptions:!1,editAvailability:!1,editDueDateException:!1,editTimeLimitException:!1,delete:!1,create:!1,canInviteUsers:!1,viewDueDateException:!1,viewTimeLimitException:!1,viewAccommodation:!1,editAccommodation:!1};return Object.assign(t,e),t.viewAccommodation=t.viewDueDateException||t.viewTimeLimitException,t.editAccommodation=t.editDueDateException||t.editTimeLimitException,t}}}function Bt(e){e.sort((function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder-t.displayOrder:e.displayOrder&&!t.displayOrder?-1:!e.displayOrder&&t.displayOrder?1:e.displayOrder||t.displayOrder?0:_t.sortCompareUsers(e.user,t.user)}))}var Ft=De.N;Ae.a.factory(Ft,["restmod","$q",Oe.d,"$rootScope",function(e,t,n,r){return e.model().mix({course:{belongsTo:De.t,key:"courseId"},user:{belongsTo:De.Ac,key:"userId"},officeHours:{hasMany:De.vb},enrollmentDate:{serialize:"date"},isAvailable:{init:!0},lastAccessDate:{serialize:"date"},permissions:{serialize:Gt,init:{}},availabilityHasBeenBypassed:function(){return!!this.bypassCourseAvailabilityUntil},courseIsAvailable:function(){return this.availabilityHasBeenBypassed()?!0===this.course.effectiveAvailability:!0===this.course.isAvailable},courseIsOpen:function(){return this.courseIsAvailable()&&!1===this.course.isClosed},courseIsPrivate:function(){return!this.courseIsAvailable()},isGuestMembership:function(){return Lt.KnownCourseRoleIdentifier.Guest.isEqualTo(this.role)},isStudentMembership:function(){var e=Lt.KnownCourseRoleIdentifier.Student.isEqualTo(this.role);return!(!this.isInStudentPreview||!this.isInStudentPreview())||e},isStudentOrGuestMembership:function(){return this.isStudentMembership()||this.isGuestMembership()},isActAsInstructorMembership:function(){var e=this.courseRole&&this.courseRole.isActAsInstructor||Lt.KnownCourseRoleIdentifier.Instructor.isEqualTo(this.role);return(!this.isInStudentPreview||!this.isInStudentPreview())&&e},isTeachingAssistantMembership:function(){return Lt.KnownCourseRoleIdentifier.TeachingAssistant.isEqualTo(this.role)},isInRoleBucket:function(e){return this.courseRole&&this.courseRole.roleBucket===e},isDueDateExcepted:function(){return this.accommodation().dueDate.hasAccommodation},accommodation:function(){return Ut.a.fromTypes(this.dueDateExceptionType,this.timeLimitExceptionType)},setAccommodation:function(e){e.dueDate.equals(this.dueDateExceptionType)||(this.dueDateExceptionType=e.dueDate.type),e.timeLimit.equals(this.timeLimitExceptionType)||(this.timeLimitExceptionType=e.timeLimit.type)},getCourseColorClass:function(){return jt.a(this)},getBannerImageFilename:function(){return this.course.banner&&this.course.banner.permanentUrl?this.course.banner.permanentUrl:jt.b(this)},getBannerImageThumbnailFilename:function(){return this.course.bannerImageThumbnail&&this.course.bannerImageThumbnail.permanentUrl?this.course.bannerImageThumbnail.permanentUrl:jt.c(this)},$extend:{Collection:{getMembershipCount:function(e){return this.getCounts(e).then((function(e){return e.count}))},getCounts:function(e,n){void 0===n&&(n="/count");var r=t.defer();return this.$collection().$send({method:"GET",url:this.$url()+n,params:e},(function(e){r.resolve(e.data)}),(function(e){r.reject(e)})),r.promise},getDetailsCount:function(){return this.getCounts({membershipAvailable:"true"})},getRoleBucketCount:function(){return this.getCounts({groupBy:"roleBucket"},"/counts")},getAccommodatedMemberCount:function(){return this.getCounts({membershipAvailable:"true"}).then((function(e){return e.withAccommodationCount}))},batchGetCollections:function(e){var n=t.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},(function(e){n.resolve(e.data)}),(function(e){n.reject(e)})),n.promise}}},$hooks:{"before-fetch-many":function(e){var t=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];t&&r.$broadcast("course-"+t+"-memberships-before-fetch",e)},"after-fetch-many":function(){this.permissions=Gt().decode(this.permissions),this.forEach((function(e){1===e.displayOrder&&(e.ui||(e.ui={}),e.ui.isLeader=!0),e.user&&null==e.user.isAvailable&&(e.user.isAvailable=!0),e.course&&e.course.instructorsMembership&&e.course.instructorsMembership.length&&Bt(e.course.instructorsMembership)}))},"after-fetch":function(){1===this.displayOrder&&(this.ui||(this.ui={}),this.ui.isLeader=!0)},"after-feed":function(){this.userId=this.userId||(this.user||{$pk:void 0}).$pk}}})}]);var qt=De.O;Ae.a.factory(qt,["restmod",Oe.d,function(e,t){return e.model().mix({$extend:{Record:{getEmailPreviewContent:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/preview"},(function(t){return e.$unwrap({emailBody:t.data.emailBody})})).$asPromise()},getCourseInviteUrl:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/inviteUrl"},(function(t){return e.$unwrap({inviteUrl:t.data.inviteUrl})})).$asPromise()}}}})}]);var Ht=De.R;Ae.a.factory(Ht,["restmod","DSCacheFactory",Oe.d,function(e,t,n){return e.model().mix({$config:{primaryKey:"key"},$extend:{Collection:{getPreference:function(e){return new zt(t,this).getPreference(e)},setPreference:function(e){return new zt(t,this).setPreference(e)},deletePreference:function(e){return new zt(t,this).deletePreference(e)}}}})}]);var zt=function(){function e(e,t){this.DSCacheFactory=e,this.preferences=t,this.courseId=t.$scope.$scope.id||t.$scope.$scope.$pk}return e.prototype.setPreference=function(e){return this._setCachePreference({key:e.key,value:e.value.toString(),visibleToStudents:e.visibleToStudents}).$asPromise().then((function(t){var n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.value){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n}))},e.prototype._setCachePreference=function(e){var t=this._getPreferenceCacheForCourse(),n=this._setPreferenceOnBackend(e);return t.put(e.key,n),n},e.prototype._setPreferenceOnBackend=function(e){if(e.key.length>247)throw new Error("Preference key is too long!");if(e.value.length>255)throw new Error("Preference value is too long!");var t=this.preferences.$new(e.key);return t.key=e.key,t.value=e.value,t.visibleToStudents=e.visibleToStudents,t.$save()},e.prototype.getPreference=function(e){var t;return"defaultValue"in e&&(t={value:e.defaultValue.toString(),visibleToStudents:!0}),this._getPreferenceWithDefaultAndCache({key:e.key,defaultPreference:t}).$asPromise().then((function(t){var n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.defaultValue){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n}))},e.prototype._getPreferenceWithDefaultAndCache=function(e){var t=this._getPreferenceCacheForCourse().get(e.key);return null==t&&(t=this._getPreferenceFromBackend(e),this._getPreferenceCacheForCourse().put(e.key,t)),t},e.prototype._getPreferenceFromBackend=function(e){if(e.key.length>247)throw new Error("Preference key is too long!");if(e.defaultPreference&&e.defaultPreference.value.length>255)throw new Error("Default preference value is too long!");return this.preferences.$find(e.key).$allow([404]).$then((function(t){t.$response&&404===t.$response.status&&e.defaultPreference&&null!=e.defaultPreference.value&&null!=e.defaultPreference.visibleToStudents&&(t.value=e.defaultPreference.value,t.visibleToStudents=e.defaultPreference.visibleToStudents)}))},e.prototype._getPreferenceCacheForCourse=function(){if(!this.courseId)throw new Error("No courseId has been provided");var e=this.DSCacheFactory.get("course.preference."+this.courseId);return null==e&&(e=this.DSCacheFactory.createCache("course.preference."+this.courseId,{capacity:100})),e},e.prototype.deletePreference=function(e){return this._deleteCachePreference(e).$asPromise().then((function(e){return{key:e.key,value:e.value,visibleToStudents:e.visibleToStudents}}))},e.prototype._deleteCachePreference=function(e){var t=this._getPreferenceCacheForCourse();return t.get(e)?(t.remove(e),this.preferences.$new(e).$destroy().$allow([404])):this.preferences.$new(e)},e}(),Vt=De.T;Ae.a.factory(Vt,["restmod",Oe.d,function(e,t){return e.model().mix(nt,{})}]);var Kt=function(e,t){var n="/learn/api/v1/courses/"+e+"/groupsets";return t&&(n+="/"+t),n},Jt=De.K;Ae.a.factory(Jt,["restmod","$q",Oe.d,function(e,t,n){return e.model().mix({course:{belongsTo:De.t,key:"courseId"},modifiedDate:{serialize:"date"},available:{init:!1},batchUid:{mask:!0},collabSession:{hasMany:De.x,path:"collabultra/sessions"},$extend:{Record:{canDelete:function(){return!this.permissions||this.permissions.delete},canEdit:function(){return!this.permissions||this.permissions.modify}},Collection:{batchGetCollection:function(e,t){return this.findMany(e,t).$asPromise()},batchUpdate:function(e){return this.$collection().$send({method:"PUT",url:this.$url()+"/batchUpdate",data:e},(function(e){var t=e.data.map((function(e){return e.statusCode>=200&&e.statusCode<300?Ne.fromJson(e.body):e.body}));return this.$unwrap({results:t})})).$asPromise()},getGroupsInGroupSet:function(e,t,n){var r=n.expand,i=n.limit,o=void 0===i?1e3:i;return this.$collection().$send({method:"GET",url:Kt(e,t)+"/groups",params:{expand:r,limit:o}},(function(e){var t=[];return e.data&&e.data.results&&(t=e.data.results),this.$unwrap({results:t})})).$asPromise()}}}})}]);var Wt=De.L;Ae.a.factory(Wt,["restmod",gt.serviceName,function(e,t){return e.model().mix({groupAttempts:{hasMany:De.hb,hooks:{"after-fetch-many":function(){for(var e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1],n=0;n<this.length;n++)this[n]=t.$new(e).gradebook.groupAttempts.$buildRaw(this[n]),this[n].attempts&&this[n].attempts.length&&(this[n].attempts=t.$new(e).gradebook.attempts.$decode(this[n].attempts))}}}})}]);var Qt=De.M;Ae.a.factory(Qt,["restmod",function(e){return e.model().mix({$hooks:{"before-request":function(e){e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);var Yt=De.G;Ae.a.factory(Yt,["restmod",Oe.d,function(e,t){return e.model().mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement:function(){return!!this.uid}}}})}]);var Zt=De.l;Ae.a.factory(Zt,["restmod",Oe.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/cloudstorages").mix({contents:{hasMany:De.m},me:{hasOne:De.o},$config:{primaryKey:"name"}})}]);var Xt=De.o;Ae.a.factory(Xt,["restmod",Oe.d,function(e,t){return e.model()}]);var en=De.m;Ae.a.factory(en,["restmod",Oe.d,function(e,t){return e.model().mix({download:{hasOne:De.n,mask:!0},createdTime:{serialize:"date"},updatedTime:{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$url:function(e){return this.$scope.$url(e)+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{getChildren:function(e){return null==e&&(e={}),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:e},(function(e){this.$unwrap(e.data)}),(function(e){}))}}}})}]);var tn=De.n,nn={};Ae.a.factory(tn,["restmod",Oe.d,function(e,t){return e.model().mix(nn)}]);var rn=De.p;Ae.a.factory(rn,["restmod",Oe.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/cloudstorages/tasks").mix(nn)}]);var on=De.q;Ae.a.factory(on,["restmod",Oe.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/collabultra/ping").mix({$extend:{Record:{getCollabUltraInfo:function(){return this.$send({method:"GET",url:this.$scope.$url()},(function(e){this.$unwrap(e.data)})).$allow([403,404]).$asPromise()}}}})}]);var sn=De.V;Ae.a.factory(sn,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/utilities/entitlements";return e.model(n).mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement:function(){return!!this.uid}}}})}]);var an=De.W;Ae.a.factory(an,["restmod",function(e){return e.model(xe.a.apiBasePath+"/v1/externalCourses").mix({schedule:{hasMany:De.T},startDate:{serialize:"date"},endDate:{serialize:"date"},$extend:{Collection:{}},$hooks:{"before-request":function(e){xe.a.features.externalCourse||"GET"===e.method&&e.url===xe.a.apiBasePath+"/v1/externalCourses"&&(e.cache={get:function(){return{paging:{nextPage:"",previousPage:"",count:0,limit:1e5,offset:0},permissions:null,results:[]}}})}}})}]);var cn=De.X;Ae.a.factory(cn,["restmod",Oe.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}}})}]);var ln=n("JfV0"),un=n("t6LE"),dn=n("JrDC"),pn="ultra.components.services.models.grade.gradeGroupAttempt",mn=De.hb,fn="start";Ae.a.factory(mn,["restmod",gt.serviceName,Oe.d,function(e,t,n){return e.model().mix(un.serviceName,{attempts:{ignore:"CU"},members:{ignore:"CU"},$extend:{Scope:{$destroyUrlFor:function(e){return xe.a.apiBasePath+"/v1/courses/"+dn.a(t,e.$scope)+"/gradebook/groupAttempts/"+e.id}},Record:{getFeedbackToUser:function(){return this.feedbackToUser},getLastFeedbackAuthor:function(){return this.lastFeedbackAuthor||this.attempts[0]&&this.attempts[0].lastFeedbackAuthor},getGradeAttempt:function(){var e=this;return this.attempts&&this.attempts.length?1===this.attempts.length?this.attempts[0]:Dt.find(this.attempts,(function(t){return t.userId===e.submittedBy})):null},isPrePostGrade:function(){return!this.isCompleted()||!this.readyToPost},isDisplayablePostedGrade:function(){return this.isCompleted()&&this.readyToPost}},Collection:{getNumAttemptsToGrade:function(){return this.filter((function(e){return e.isNeedsGrading()&&!e.isPostable()})).length},getNumAttemptsToPost:function(){return this.filter((function(e){return e.isPostable()})).length},getNumOfGradedAttempts:function(){return this.filter((function(e){return e.isGraded()})).length},isAllGradedAndPosted:function(){return this.length>0&&this.every((function(e){return e.isCompleted()}))}}},$hooks:{"after-update":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-fetch":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-feed":function(e){this.permissions&&(this.permissions.deleteAttempt=this.permissions.delete,this.permissions.editAttempt=this.permissions.editGrade);!function(e){var t=e.toolAttemptDetail,n=e.attempts;if(t&&n){var r=Object.keys(t)[0];r&&n.forEach((function(e){if(!e.toolAttemptDetail){var n=e.id,i=Dt.cloneDeep(t);if(i[r]){e.toolAttemptDetail=i;var o=e.toolAttemptDetail[r].questionAttempts;o&&o.forEach((function(e){e.attemptId=n}))}}}))}}(this)}}})}]);var hn="ultra.components.services.models.grade.gradeCategory",gn=De.eb,vn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.title=t,r.iconName=n,r._iconName=n,r}return Object(Be.__extends)(t,e),t.prototype.getIconName=function(){return this._iconName},t.Assignment=new t("Assignment.name","assignment"),t.Attendance=new t("Attendance.name","attendance"),t.Blog=new t("Blog.name","blog"),t.Discussion=new t("Discussion.name","discussion"),t.Exam=new t("Exam.name","exam"),t.Homework=new t("Homework.name","homework"),t.Journal=new t("Journal.name","journal"),t.Presentation=new t("Presentation.name","presentation"),t.Quiz=new t("Quiz.name","quiz"),t.Survey=new t("Survey.name","survey"),t.Test=new t("Test.name","test"),t}(qe.a);Ae.a.factory(gn,["restmod",Oe.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}},$hooks:{"after-feed":function(e){this.localizableTitle||(this.localizableTitle={bundle:"gradebook_type",languageKey:this.title,serviceLevel:null})}}})}]);var bn=n("Kpdw"),yn=n("e6jQ"),Sn=n("7CA4"),Cn=De.r,wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.NewOverrideGrade=new t("New Override Grade"),t.NewOverrideGradeWithPostedAttempt=new t("New Override Grade With Posted Attempt"),t.NewGradeWithNotPostedAttempt=new t("New Grade With Not Posted Attempt"),t.CleanOverride=new t("Clean Override"),t.CleanOverrideForAttempt=new t("Clean Override For Attempt"),t.CleanPostedOverride=new t("Clean Posted Override Without Attempt"),t.CleanOverrideWithPostedAttempt=new t("Clean Override Grade With Posted Attempt"),t.CleanGradeWithPostedAttempt=new t("Clean Grade With Posted Attempt"),t.CleanGradeWithNotPostedAttempt=new t("Clean Grade With Not Posted Attempt"),t.PostGrade=new t("Post Grade"),t.PostOverrideGrade=new t("Post Override Grade"),t}(qe.a);Ae.a.factory(Cn,["restmod",Oe.d,gt.serviceName,function(e,t,n){return e.model().mix({$hooks:{ui:{mask:!0,init:function(){return{updateTimestamp:0}}},"after-feed":function(){this.calculateDerivedSummaries()}},$extend:{Record:{calculateDerivedSummaries:function(){this.numNeedsGrading=Oe.c(this.numGroupsNeedsGrading,this.numStudentsNeedsGrading),this.numPosted=Oe.c(this.numGroupsPosted,this.numStudentsPosted),this.numEligibleToBeGraded=null!=this.numGroupsPosted?this.numGroupsEligibleToBeGraded:this.numStudentsEligibleToBeGraded,this.numSubmissionGradedNeedsPosting=Oe.c(this.numGroupsSubmissionGradedNeedsPosting,this.numStudentsSubmissionGradedNeedsPosting),this.numStudentsEligibleToBeGradedExternalSubmission=this.numStudentsEligibleToBeGraded-this.numStudentsGradedNeedsPosting-this.numStudentsPosted-this.numberOfOverriddenGradesToPost,this.numGroupsEligibleToBeGradedExternalSubmission=this.numGroupsEligibleToBeGraded-this.numGroupsGradedNeedsPosting-this.numGroupsPosted,null!=this.numGroupsGradedNeedsPosting?(this.numGradedNeedsPosting=this.numGroupsGradedNeedsPosting,this.numberOfStudentsOverriddenGradesToPost=this.numberOfOverriddenGradesToPost,this.numberOfOverriddenGradesToPost=0):this.numGradedNeedsPosting=this.numStudentsGradedNeedsPosting},getStatus:function(){return this.numNeedsGrading>0?Sn.a.NeedsGrading:this.totalNumberOfGradesToPost()>0?Sn.a.NeedsPosting:this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0?Sn.a.AllPosted:0===this.numSubmissionsTotal?Sn.a.NothingToGrade:0===this.numNeedsGrading?Sn.a.AllGraded:void 0},isAllGradedAndPosted:function(){return this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0},numStudentsGraded:function(){return this.numGradedNeedsPosting+this.numPosted+this.numberOfOverriddenGradesToPost},numStudentSubmissions:function(){return this.participantIds?this.participantIds.length:this.numGroupsSubmitted||this.numStudentsSubmitted},hasGradesToPost:function(){return null!=this.numGroupsGradedNeedsPosting?this.numGroupsGradedNeedsPosting>0:this.numGradedNeedsPosting>0||this.numberOfOverriddenGradesToPost>0},totalNumberOfGradesToPost:function(){return this.numGradedNeedsPosting+this.numberOfOverriddenGradesToPost}},Model:{inferKey:function(){return yn.a()},unpack:function(e,t){return Dt.forOwn(e,(function(e,t,n){Dt.startsWith(t,"$")||"ui"===t||(n[t]=null)})),Oe.g(e,t)}},Collection:{expandingColumns:function(e,t){var n={};return this.$collection().$on("after-fetch-many",(function(r){var i=r.data.results;n=i.reduce((function(e,t){return e[t.columnId]=t,e}),n),e.forEach((function(e){e.id in n?e.summary.$unwrap(n[e.id]):t&&e.summary.$unwrap(t)}))}))}}}})}]);var kn=n("KrjC"),Tn=n("Iftj"),In=De.db;Ae.a.factory(In,["restmod",Oe.d,"$injector",function(e,t,n){return e.model().mix({$hooks:{"before-fetch":function(e){e.method="POST",Dt.isString(e.params.membershipIds)&&(e.params.membershipIds=e.params.membershipIds.split(",")),Dt.isString(e.params.columnIds)&&(e.params.columnIds=e.params.columnIds.split(",")),e.data={membershipIds:e.params.membershipIds,columnIds:e.params.columnIds},delete e.params.membershipIds,delete e.params.columnIds},"after-fetch":function(e){var t=this,r=n.get(gt.serviceName),i=e.config.params.courseId;this.bulkViewUsers.forEach((function(e){e.grades.forEach((function(e){var n=e.grade;e.grade=r.$new(i).gradebook.columns.$new(e.columnId).grades.$buildRaw(n),e.lastAttemptDate&&(e.lastAttemptDate=new Date(e.lastAttemptDate)),e.attempts&&e.attempts.length>0&&(e.attempts.forEach((function(t){var o=r.$new(i).gradebook.columns.$new(e.columnId).grades.$new(n.id).attempts.$buildRaw(t);e.grade.attempts.$add(o)})),e.grade.ui.attempt=e.grade.attempts[0]),e.grade.permissions=t.permissions,e.submissionResults&&e.submissionResults.results["mdb-sa"]&&(e.originalityProcessed=e.submissionResults.results["mdb-sa"].originalityProcessed,e.originalityScore=e.submissionResults.results["mdb-sa"].originalityScore)}))}))}}})}]);n("lTRw");var $n=De.Z;Ae.a.factory($n,["restmod",Oe.d,function(e,t){return e.model()}]);var En=De.bb;Ae.a.factory(En,["restmod",function(e){return e.model().mix({$hooks:{"after-save":function(e){this.points=null,this.$unwrap(e.data),this.questionAttempt.visibleQuestionNumber=this.questionNumber},"before-save":function(e){e.url=e.url.substr(0,e.url.indexOf("/answers"))+"/answers/"+this.questionAttempt.id+"/grades",Dt.merge(e.data,{questionType:this.questionAttempt.questionType}),this.questionNumber=this.questionAttempt.visibleQuestionNumber},"after-fetch-many":function(){var e=this;this.forEach((function(t){t.permissions=e.permissions}))}},$extend:{Collection:{setPostStatusAndGroupAttemptId:function(e){this.forEach((function(t){t.ui.isPosted=e.isCompleted(),e.groupAttemptId&&(t.ui.groupAttemptId=e.groupAttemptId)}))}}},questionAttempt:{ignore:"CU"},ui:{init:function(){return{}},mask:!0}})}]);var Pn=De.ib;Ae.a.factory(Pn,["restmod","$q",Oe.d,function(e,t,n){return e.model().mix({})}]);var An=De.ab;Ae.a.factory(An,["restmod",Oe.d,function(e){return e.model().mix({$extend:{hasAttachments:function(){return!Dt.isUndefined(this.overallOriginalityProcessed)&&(this.attemptOriginality&&this.attemptOriginality.attachments.length||this.answerOriginalities.length&&this.answerOriginalities.some((function(e){return e.attachments.length})))},canShowReportPanel:function(){return this.overallOriginalityProcessed&&this.hasAttachments()}},$hooks:{"after-request":function(e){e.data.results&&(e.data=e.data.results["mdb-sa"])}}})}]);var xn=De.kb;Ae.a.factory(xn,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/calendars/institution/calendarItems";return e.model(t).mix(nt)}]);var Dn=De.lb;Ae.a.factory(Dn,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/roles/institutionRoles";return e.model(n)}]);var On=De.mb;Ae.a.factory(On,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/languages";return e.model(n).mix({})}]);var _n=De.nb,Mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Approved=new t("Approved"),t.Excluded=new t("Excluded"),t.NeedsApproval=new t("NeedsApproval"),t}(qe.a),Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Never=new t("Never"),t.SSLOnly=new t("SSLOnly"),t.Always=new t("Always"),t}(qe.a);Ae.a.factory(_n,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/lti/domainConfigs";return e.model(t).mix({$extend:{Model:{findByDomain:function(e){return this.$build().$send({method:"GET",url:this.$url()+"?domain="+e},(function(e){return this.$unwrap(e.data)})).$allow([404]).$asPromise()}}}})}]);var Rn=De.pb;Ae.a.factory(Rn,["restmod",Oe.d,function(e){var t=xe.a.apiBasePath+"/v1/lti/settings";return e.model(t).mix({$extend:{Model:{getSettings:function(){return this.$build().$send({method:"GET",url:this.$url()},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);var Ln=De.ob;Ae.a.factory(Ln,["restmod",function(e){var t=xe.a.apiBasePath+"/public/v1/lti/placements";return e.model(t).mix({isAvailable:function(){return ln.PublicAvailability.Yes===this.availability.available},$hooks:{"after-feed":function(e){this.iconUrl=Ye.c(this.iconUrl)}}})}]);var jn=De.qb;Ae.a.factory(jn,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/users/me/preferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);var Un=De.rb;Ae.a.factory(Un,["restmod",Oe.d,function(e){return e.model()}]);var Gn=n("1/43"),Bn=De.tb;Ae.a.factory(Bn,["restmod",Oe.d,function(e){return e.model()}]);var Fn=De.ub;Ae.a.factory(Fn,["restmod",Oe.d,function(e){return e.model().mix({courseSettings:{hasMany:De.tb},organizationSettings:{hasMany:De.tb},$url:function(){return xe.a.apiBasePath+"/v1/notification/settings"}})}]);var qn=De.vb;Ae.a.factory(qn,["restmod",function(e){return e.model().mix(nt,{})}]);var Hn=n("FBBZ"),zn=De.wb;Ae.a.factory(zn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getPartnersByType:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/providerContent?course_id="+e},(function(e){return this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}},$hooks:{"after-feed":function(e){var t=function(e){Ne.isDefined(e.internalPovider)&&Ne.isUndefined(e.internalProvider)&&(e.internalProvider=e.internalPovider)};Dt.forEach(this.premierList,t),Dt.forEach(this.signatureList,t),Dt.forEach(this.otherList,t);var n=function(e){return!e.internalProvider||Hn.p(e)};this.premierList=Dt.filter(this.premierList,n),this.signatureList=Dt.filter(this.signatureList,n),this.otherList=Dt.filter(this.otherList,n)}}})}]);var Vn=De.Cb;Ae.a.factory(Vn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1/status";return e.model(t).mix({$extend:{Model:{getStatus:function(e){return this.$build().$send({method:"GET",url:this.$url()+"?course_id="+e},(function(e){return this.$unwrap(e.data)}),(function(){return this.$unwrap({enabled:!1,userCloudProvisioned:!1})})).$allow(["400-599"]).$asPromise()}}}})}]);var Kn=De.yb;Ae.a.factory(Kn,["restmod",Oe.d,function(e,t){var n=xe.a.partnerCloudBasePath+"/v1/courses";return e.model(n).mix({partnerLinkedCourses:{hasMany:De.Ab,path:"providerBindings"},$extend:{Record:{updateProvisioning:function(e){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.$pk+"/updateProvisioning/"+e},(function(e){this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}}})}]);var Jn=De.Ab;Ae.a.factory(Jn,["restmod",Oe.d,function(e){return e.model().mix({tools:{hasOne:De.Db,path:"tools"},id:{map:"@id"},$extend:{Model:{unpack:function(e,t){return t&&t.bindings}}}})}]);var Wn=De.xb;Ae.a.factory(Wn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{getContentIds:function(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/"+e+"/linkRefId/"+t+"/content/ids"},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);n("3uIF");var Qn=De.Bb;Ae.a.factory(Qn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getSettingsById:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/providers/"+e+"/settings"},(function(e){return this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}}})}]);var Yn=De.Db;Ae.a.factory(Yn,["restmod",Oe.d,function(e,t){return e.model().mix({})}]);var Zn=De.Eb;Ae.a.factory(Zn,["restmod",function(e){return e.model().mix(nt,{})}]);var Xn=n("0JpG"),er=De.Fb;function tr(e,t){e.activityDaily&&e.activityDaily.forEach((function(e){e.inCourseDuration=nr(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,Xn.ILocaleComposedDurationFormat.HoursMinutes)}})),e.activityWeekly&&e.activityWeekly.forEach((function(e){e.inCourseDuration=nr(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,Xn.ILocaleComposedDurationFormat.HoursMinutes)}}))}function nr(e){return 15*Math.round(e/15)*60}Ae.a.factory(er,["restmod",Xn.serviceName,function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/courses";return e.model(n).mix({"activityDaily[].activityDate":{decode:"localDate"},"activityWeekly[].activityWeek":{decode:"localDate"},"assignments[].dueDate":{serialize:"date"},"assignmentGrades[].gradedDate":{serialize:"date"},"assignmentGrades[].submissionDate":{serialize:"date"},startDate:{serialize:"date"},endDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"weeks[].weekOf":{decode:"localDate"},$hooks:{"after-fetch":function(){tr(this,t),this.instructors&&this.instructors.forEach((function(e){e.learnUser=W.learnUser}))}}})}]);var rr=De.Gb;Ae.a.factory(rr,["restmod",function(e){return e.model().mix({$extend:{Model:{$for:function(e,t){return this.$collection(t,{$urlFor:function(){return xe.a.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$decode:function(e){return this.push.apply(this,e),this}}}})}]);var ir=De.Jb;Ae.a.factory(ir,["restmod",function(e){var t=xe.a.telemetryApiBasePath+"/v1/predict/favorites";return e.model(t).mix({$extend:{Model:{marketSnapshot:function(e,t){return this.$build().$send({method:"GET",params:t,url:this.$url()+"/"+e+"/marketSnapshot"},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);var or=De.Pb;Ae.a.factory(or,["restmod",Oe.d,function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/settings";return e.model(n).mix({$extend:{Model:{get:function(){return this.single(n).$fetch().$allow([403]).$asPromise()}}},$hooks:{"after-fetch":function(){Ne.isUndefined(this.advisorEmailEnabled)&&(this.advisorEmailEnabled=!0),Ne.isUndefined(this.instructorEmailEnabled)&&(this.instructorEmailEnabled=!0);var e=Dt.indexOf(this.fields,"probability");-1!==e&&(this.fields[e]="goodProbability")}}})}]);var sr=De.Rb;Ae.a.factory(sr,["restmod",Oe.d,function(e){var t=xe.a.apiBasePath+"/v1/telemetry/predict/systemSettings";return e.model(t).mix({$extend:{Model:{get:function(){return this.single(t).$fetch().$allow([404]).$asPromise()}}}})}]);var ar=De.Ib;Ae.a.factory(ar,["restmod",function(e){return e.model().mix({$extend:{Model:{$for:function(e,t){return this.$collection(t,{$urlFor:function(){return xe.a.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$unwrap:function(e){return e.results||e.data?(e.data&&this.push.apply(this,e.data),e.results&&this.push.apply(this,e.results)):this.push.apply(this,e),this}}}})}]);var cr=De.Qb;function lr(e){Ne.isDefined(e.goodProbability)&&(e.goodProbability=Math.round(100*e.goodProbability)),Ne.forEach(e.courses,(function(e){e.prediction&&(e.prediction.goodProbability=Math.round(100*e.prediction.goodProbability)),e.previousPrediction&&(e.previousPrediction.goodProbability=Math.round(100*e.previousPrediction.goodProbability)),Ne.forEach(e.weeks,(function(e){e.goodProbability=Math.round(100*e.goodProbability)}))}))}function ur(){return Ne.isUndefined(this.ui)&&(this.ui={}),Ne.isUndefined(this.ui.learnUser)&&(this.ui.learnUser={givenName:this.firstName,familyName:this.lastName}),this.ui.learnUser}Ae.a.factory(cr,["restmod","$q",Xn.serviceName,function(e,t,n){var r=xe.a.telemetryApiBasePath+"/v1/predict/students",i=xe.a.telemetryApiBasePath+"/v1/predict/courses/",o=xe.a.telemetryApiBasePath+"/v1/predict/studentSearch",s=xe.a.telemetryApiBasePath+"/v1/predict/message";xe.a.telemetryApiBasePath;return e.model(r).mix({academicHoldDate:{serialize:"date"},birthDate:{serialize:"date"},financialHoldDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"plannerInterests[].chosenDate":{serialize:"date"},plannerLocationChosenDate:{serialize:"date"},"courses[].activityDaily[].activityDate":{decode:"localDate"},"courses[].activityWeekly[].activityWeek":{decode:"localDate"},"courses[].assignments[].dueDate":{serialize:"date"},"courses[].assignmentGrades[].gradedDate":{serialize:"date"},"courses[].assignmentGrades[].submissionDate":{serialize:"date"},"courses[].startDate":{serialize:"date"},"courses[].endDate":{serialize:"date"},"courses[].lastActivityDate":{serialize:"date"},"courses[].weeks[].weekOf":{decode:"localDate"},$extend:{Model:{getCourseStudent:function(e,t,n){return this.single(i+t+"/students/"+e).$fetch(n).$allow([403]).$asPromise()},getCourseStudents:function(e,t){return this.$collection(t,{$urlFor:function(){return i+e+"/students"}}).$fetch(t).$allow([403]).$asPromise()},getStudent:function(e,n){var i=t.defer();return this.$collection({studentId:e},{$urlFor:function(){return r}}).$fetch(n).$asPromise().then((function(e){i.resolve(e[0])})).catch((function(){i.reject()})),i.promise},postInstructorMessage:function(e,t,n){return this.$build().$send({method:"POST",url:i+n+"/students/"+t+"/message/advisor",data:e}).$asPromise()},postAdvisorMessage:function(e,t){return this.$build().$send({method:"POST",url:r+"/"+t+"/message/student",data:e}).$asPromise()},postMessage:function(e){return this.$build().$send({method:"POST",url:""+s,data:e}).$asPromise()},postMessageToStudents:function(e){return this.$build().$send({method:"POST",url:r+"/message",data:e}).$asPromise()},postMessageToStudentsByFilter:function(e,t){return this.$build().$send({method:"POST",url:r+"/messageByFilter",data:e,params:t}).$asPromise()},typeaheadSearch:function(e,n,r,s){void 0===n&&(n=""),void 0===r&&(r=6),void 0===s&&(s=!1);var a=t.defer(),c=o+"?query="+encodeURIComponent(e);return n&&(c=""+i+n+"/studentSearch?query="+encodeURIComponent(e)),this.$build().$send({method:"GET",url:c,params:{emailRequired:!0===s?"true":"false",limit:r}},(function(e){e&&e.data&&e.data.results?a.resolve(e.data.results.map((function(e){return{firstName:e.firstName,lastName:e.lastName,studentDisplayId:e.studentDisplayId,lmsId:e.lmsId,avatar:{permanentUrl:e.avatarUrl},learnUser:ur,email:e.email,advisors:e.advisors}}))):a.resolve([])})).$allow([403]),a.promise}},Record:{learnUser:ur}},$hooks:{"after-fetch":function(){lr(this),this.courses.forEach((function(e){q.adjustEngagement(e,n)})),this.advisors&&this.advisors.forEach((function(e){e.learnUser=ur}))},"after-fetch-many":function(){this.forEach((function(e){lr(e),e.courses.forEach((function(e){q.adjustEngagement(e,n)})),e.advisors&&e.advisors.forEach((function(e){e.learnUser=ur}))}))}}})}]);var dr=De.Nb;Ae.a.factory(dr,["restmod",Oe.d,function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/permissions";return e.model(n).mix({$extend:{Model:{get:function(){return this.single(n).$fetch().$allow([403]).$asPromise()}}}})}]);var pr=De.Kb;Ae.a.factory(pr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/ftue",r=xe.a.telemetryApiBasePath+"/v1/predict/ftues";return e.model(n).mix({$extend:{Model:{setFtue:function(e){return this.$build().$send({method:"POST",url:this.$url()+"/"+e}).$asPromise()},delFtue:function(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delFtues:function(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getFtue:function(e){var n=t.defer();return this.$build().$send({method:"GET",url:r,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var r=t.data.filter((function(t){return t.componentKey===e}));r&&r.length?n.resolve({key:r[0].componentKey,value:""}):n.resolve(null)}else n.resolve(null)})),n.promise},getFtues:function(){var e=t.defer();return this.$build().$send({method:"GET",url:r,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var n=[];t.data.forEach((function(e){n.push({key:e.componentKey,value:""})})),n&&n.length?e.resolve(n):e.resolve(null)}else e.resolve(null)})),e.promise}}}})}]);var mr=De.Mb;Ae.a.factory(mr,["restmod","$q",Oe.d,function(e,t,n){var r=xe.a.telemetryApiBasePath+"/v1/predict/notes";return e.model(r).mix({dateCreated:{serialize:"date"},dateModified:{serialize:"date"},isEdited:{mask:!0},isUndoing:{mask:!0},isAdding:{mask:!0},$extend:{Model:{getNotes:function(e,t){return(t=t||{}).timestamp=(new Date).getTime(),this.$collection(t,{$urlFor:function(){return r+"/students/"+e}}).$fetch(t).$allow([403]).$asPromise()},postNote:function(e,t){return this.$build().$send({method:"POST",url:r,data:{note:e,recipient:{recipientId:t.recipientId,email:t.email}}},(function(e){this.$unwrap(e.data)})).$asPromise()},updateNote:function(e,t){return this.$build().$send({method:"PUT",url:r,data:{noteId:e,note:t}},(function(e){return this.$unwrap(e.data)})).$asPromise()},deleteNote:function(e){return this.$build().$send({method:"DELETE",url:r+"/"+e},(function(e){this.$unwrap(e.data)})).$asPromise()},undoDeleteNote:function(e){return this.$build().$send({method:"PUT",url:r+"/"+e},(function(e){return e})).$asPromise()}}},$hooks:{"after-fetch-many":function(){this.forEach((function(e){Ne.isDefined(e.dateModified)?e.isEdited=e.dateCreated.getTime()<e.dateModified.getTime():e.isEdited=!1;var t=Object(Dt.cloneDeep)(e.dateCreated);e.ui.dateCreated=t}))}}})}]);var fr=De.Ob;Ae.a.factory(fr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/preferences";return e.model(n).mix({$extend:{Model:{setPreference:function(e,t){var n={componentKey:e,preference:t};return this.$build().$send({method:"POST",url:this.$url(),data:n}).$allow([403]).$asPromise()},delPreference:function(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delPreferences:function(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getPreference:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:n+"/"+e,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var n=t.data.filter((function(t){return t.componentKey===e}));n&&n.length?r.resolve({componentKey:n[0].componentKey,value:n[0].value}):r.resolve(null)}else r.resolve(null)})).$allow([403]),r.promise},getPreferences:function(){var e=t.defer();return this.$build().$send({method:"GET",url:n,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var n=[];t.data.forEach((function(e){n.push({componentKey:e.componentKey,preference:e.preference})})),n&&n.length?e.resolve(n):e.resolve([])}else e.resolve([])})).$allow([403]),e.promise}}}})}]);var hr=De.Lb;Ae.a.factory(hr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/preferences/config";return e.model(n).mix({$extend:{Model:{getInstitutionPreference:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:n+"/"+e},(function(t){if(t&&t.data){var n=t.data;n.name===e?r.resolve(n):r.resolve(null)}else r.resolve(null)})).$allow([403]),r.promise}}}})}]);var gr=De.Hb;Ae.a.factory(gr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/customFieldSettings";return e.model(n).mix({$extend:{Model:{getCustomFieldSettings:function(){var e=t.defer();return this.$build().$send({method:"GET",url:n},(function(t){t&&t.data?e.resolve(t.data):e.resolve([])})),e.promise}}}})}]);var vr=De.Sb;Ae.a.factory(vr,["restmod",Oe.d,function(e){var t=xe.a.apiBasePath+"/public/v1/system/policies/privacy";return e.model(t).mix({$extend:{Model:{getPrivacyPolicy:function(){return this.$build().$send({method:"GET",url:this.$url()},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);var br=De.Tb,yr="Respondus";Ae.a.factory(br,["restmod",function(e){var t=xe.a.apiBasePath+"/public/v1/proctoring/services";return e.model(t).mix({})}]);var Sr=De.Wb;Ae.a.factory(Sr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/courses/";return e.model(n).mix({$extend:{Model:{getRiskBucketDistribution:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:""+n+e+"/riskBuckets"},(function(e){if(e&&e.data){var t=e.data;r.resolve(t)}else r.resolve(null)})).$allow([403]),r.promise}}}})}]);var Cr=n("XfOu"),wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Waiting=new t("WAITING"),t.Assigned=new t("ASSIGNED"),t.Running=new t("RUNNING"),t.Complete=new t("COMPLETE"),t.CompleteErrors=new t("COMPLETE_ERRORS"),t.Incomplete=new t("INCOMPLETE"),t}(qe.a),kr=De.Yb;Ae.a.factory(kr,["restmod",Oe.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/scheduledTasks").mix({$config:{primaryKey:"taskId"},startDate:{serialize:"date"},endDate:{serialize:"date"},isWaiting:function(){return wr.Waiting.isEqualTo(this.taskStatus)}})}]);var Tr=De.ac,Ir=function(e){"stagedAttemptGrades"in e.data&&(e.data={results:e.data.stagedAttemptGrades})};Ae.a.factory(Tr,["restmod",function(e){return e.model().mix({user:{hasOne:De.Ac},$hooks:{"after-request":Ir},$extend:{Record:{},Collection:{}}})}]);var $r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Sender=new t("SENDER"),t.Receiver=new t("RECEIVER"),t}(qe.a),Er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Completed=new t("completed"),t.InProgress=new t("in_progress"),t.Exempt=new t("exempt"),t.NeedsGrading=new t("needs_grading"),t}(qe.a),Pr=De.bc;Ae.a.factory(Pr,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/streams";return e.model(n).mix({$extend:{Collection:{$fetch:function(){throw new Error("fetch StreamContent collection not supported")},$refresh:function(){throw new Error("refresh StreamContent collection not supported")},$create:function(){throw new Error("create StreamContent collection not supported")}},Record:{$fetch:function(e){return this.$decorate({"before-request":function(t){t.method="POST",t.data=e}},(function(){return this.$super()}))},$resolve:function(){throw new Error("resolve StreamContent not supported")},$save:function(){throw new Error("save StreamContent not supported")},$destroy:function(){throw new Error("destroy StreamContent not supported")}}},$hooks:{"before-request":function(e){e.timeout=3e4,e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);var Ar=De.dc;Ae.a.factory(Ar,["restmod",Oe.d,function(e,t){return e.model().mix({now:{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/utilities/systemInfo"},$extend:{Record:{getLegacyToolUrl:function(e){if(e in this.classicUrls)return Ye.c(this.classicUrls[e]);throw new Error("Key "+e+" is not found in systemInfo.classicUrls")}}}})}]);var xr=De.ec;Ae.a.factory(xr,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/systemPreferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);var Dr=De.fc,Or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.Standard=new t("STANDARD"),t.Important=new t("IMPORTANT"),t.Urgent=new t("URGENT"),t}(qe.a),_r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.System=new t("SYSTEM"),t.Course=new t("COURSE"),t}(qe.a);Ae.a.factory(Dr,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/announcements";return e.model(n)}]);var Mr=De.gc;function Nr(e){return e/60}Ae.a.factory(Mr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/activityVsGrade"},$hooks:{"after-fetch":function(){this.data.forEach((function(e){return e.activity=Nr(e.activity)}))}}})}]);var Rr=De.hc;Ae.a.factory(Rr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$config:{primaryKey:"contentId"},available:{serialize:"date"},firstOpened:{serialize:"date"},firstSave:{serialize:"date"},lastSave:{serialize:"date"},startedTime:{serialize:"date"},"submissions[].date":{serialize:"date"},$extend:{Collection:{getContentActivityInDetail:function(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentContentActivityInDetail"},(function(e){this.$unwrap(e.data)}))}},Record:{containsInvalidData:function(){return this.ui&&this.ui.containsInvalidData||!1}}}})}]);var Lr=De.ic;Ae.a.factory(Lr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"courseActivity[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseActivity"},$hooks:{"after-fetch":function(){this.courseActivity.forEach((function(e){e.activity=Nr(e.activity),e.minScore=Nr(e.minScore),e.maxScore=Nr(e.maxScore),e.stdDev=Nr(e.stdDev)}))}}})}]);var jr=De.kc;Ae.a.factory(jr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"currentStudent[].created":{serialize:"date"},"currentStudent[].dismissed":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/notifications"}})}]);var Ur=De.jc;Ae.a.factory(Ur,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"courseGrades[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseGrades"}})}]);var Gr=De.lc;Ae.a.factory(Gr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionActivityReport:function(e,t,n){var r=n?this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity?groupId="+n:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity";return this.$build().$send({method:"GET",url:r},(function(e){this.$unwrap(e.data)}))}}}})}]);var Br=De.mc;Ae.a.factory(Br,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionXrayReport:function(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivityScore/"+n},(function(e){this.$unwrap(e.data)}))}}},modifyDate:{serialize:"date"}})}]);var Fr=De.nc;Ae.a.factory(Fr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({lastOpened:{serialize:"date"},$extend:{Collection:{getMultimediaActivityInDetail:function(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaActivityInDetail"},(function(e){this.$unwrap(e.data)}))}}}})}]);var qr=De.oc;Ae.a.factory(qr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getMultimediaStatistics:function(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaStatistics"},(function(e){this.$unwrap(e.data)}))}}}})}]);var Hr=De.pc;Ae.a.factory(Hr,["restmod",Oe.d,function(e){return e.model(xe.a.apiBasePath+"/v1/telemetry/notifications")}]);var zr=De.qc;Ae.a.factory(zr,["restmod",Oe.d,function(e){return e.model().mix({$config:{primaryKey:"notificationId"},$url:function(){return xe.a.apiBasePath+"/v1/telemetry/notifications/"+this.$pk+"/users"}})}]);var Vr=De.rc;Ae.a.factory(Vr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"studentActivity[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentActivity"},$hooks:{"after-fetch":function(){this.studentActivity.forEach((function(e){return e.activity=Nr(e.activity)}))}}})}]);var Kr=De.sc;Ae.a.factory(Kr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"studentGrades[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentGrades"}})}]);var Jr=De.tc;Ae.a.factory(Jr,["restmod",Oe.d,function(e){return e.model().mix({$url:function(){return xe.a.apiBasePath+"/v1/telemetry/courses?filter=sufficientData"}})}]);var Wr=n("KiLF"),Qr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Be.__extends)(t,e),t.CurrentTerm=new t("current"),t.UpcomingTerm=new t("upcoming"),t}(qe.a),Yr=De.uc;Ae.a.factory(Yr,["restmod",Oe.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/terms").mix({startDate:{serialize:"date"},endDate:{serialize:"date"}})}]);var Zr=n("/J7e"),Xr=De.vc,ei="UltraUI.";Ae.a.factory(Xr,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/themes";return e.model(n).mix({ui:{mask:!0},getUsePrimaryColorOnAllBaseNav:function(){return Zr.a(this.ui.usePrimaryColorOnAllBaseNav)},setUsePrimaryColorOnAllBaseNav:function(e){this.ui.usePrimaryColorOnAllBaseNav=Zr.a(e)?"true":"false"},getUsePrimaryColorOnLogoBackground:function(){return Zr.a(this.ui.usePrimaryColorOnLogoBackground)},setUsePrimaryColorOnLogoBackground:function(e){this.ui.usePrimaryColorOnLogoBackground=Zr.a(e)?"true":"false"},$config:{primaryKey:"themeId"},$extend:{Record:{$fetch:function(){return this.$decorate({"before-request":function(e){e.url=n+"/"+this.$pk.themeId+"/settings"}},(function(){return this.$super()}))},$save:function(){return this.$decorate({"before-request":function(e){var t=this;this.settings=[],Object.keys(this.ui).forEach((function(e){t.settings.push({key:ei+e,value:t.ui[e]})})),e.url=n+"/"+this.$pk.themeId+"/settings",e.data.settings=this.settings}},(function(){return this.$super()}))}},Model:{getDefault:function(){return this.$new({themeId:"default"}).$fetch()}}},$hooks:{"after-feed":function(){var e=this;this.settings.forEach((function(t){if(t&&t.key){var n=t.key.replace(ei,"");e.ui[n]=t.value}}))}}})}]);var ti=De.xc;Ae.a.factory(ti,["restmod",function(e){return e.model().mix({$extend:{Collection:{getToolById:function(e){return Dt.find(this,["identifier",e])}}}})}]);var ni=De.Zb;Ae.a.factory(ni,["restmod",function(e){return e.model().mix({isTinCan:function(){return!(!this.learningStandard||!wt.ScormLearningStandard.TINCAN.isEqualTo(this.learningStandard))}})}]);var ri=De.wc;Ae.a.factory(ri,["restmod",Oe.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/tools")}]);var ii=De.cc;Ae.a.factory(ii,["restmod",Oe.d,function(e,t){return e.model()}]);var oi=De.yc;Ae.a.factory(oi,["restmod",Oe.d,function(e,t){var n=xe.a.apiBasePath+"/v1/trial/supportTickets";return e.model(n)}]);var si=De.zc;Ae.a.factory(si,["restmod",Oe.d,function(e,t){return e.model().mix({})}]),n.d(t,"R",(function(){return ai})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return Ge})),n.d(t,"e",(function(){return s})),n.d(t,"pb",(function(){return Ve})),n.d(t,"f",(function(){return Je})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"n",(function(){return u})),n.d(t,"z",(function(){return d})),n.d(t,"o",(function(){return gt})),n.d(t,"p",(function(){return p})),n.d(t,"r",(function(){return wt})),n.d(t,"q",(function(){return m})),n.d(t,"u",(function(){return f})),n.d(t,"x",(function(){return Pt})),n.d(t,"s",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"v",(function(){return v})),n.d(t,"w",(function(){return b})),n.d(t,"y",(function(){return Lt})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return S})),n.d(t,"l",(function(){return C})),n.d(t,"A",(function(){return w})),n.d(t,"B",(function(){return k})),n.d(t,"C",(function(){return un})),n.d(t,"H",(function(){return T})),n.d(t,"E",(function(){return I})),n.d(t,"F",(function(){return bn})),n.d(t,"m",(function(){return $})),n.d(t,"G",(function(){return kn})),n.d(t,"J",(function(){return Tn})),n.d(t,"D",(function(){return E})),n.d(t,"K",(function(){return P})),n.d(t,"I",(function(){return A})),n.d(t,"L",(function(){return x})),n.d(t,"M",(function(){return D})),n.d(t,"N",(function(){return O})),n.d(t,"O",(function(){return _})),n.d(t,"Q",(function(){return M})),n.d(t,"P",(function(){return N})),n.d(t,"S",(function(){return R})),n.d(t,"T",(function(){return Gn})),n.d(t,"U",(function(){return L})),n.d(t,"V",(function(){return j})),n.d(t,"Z",(function(){return U})),n.d(t,"X",(function(){return G})),n.d(t,"W",(function(){return B})),n.d(t,"Y",(function(){return F})),n.d(t,"ab",(function(){return q})),n.d(t,"bb",(function(){return H})),n.d(t,"eb",(function(){return z})),n.d(t,"kb",(function(){return V})),n.d(t,"mb",(function(){return K})),n.d(t,"db",(function(){return J})),n.d(t,"lb",(function(){return W})),n.d(t,"ib",(function(){return Q})),n.d(t,"fb",(function(){return Y})),n.d(t,"hb",(function(){return Z})),n.d(t,"jb",(function(){return X})),n.d(t,"gb",(function(){return ee})),n.d(t,"cb",(function(){return te})),n.d(t,"nb",(function(){return ne})),n.d(t,"ob",(function(){return re})),n.d(t,"qb",(function(){return ie})),n.d(t,"rb",(function(){return Cr})),n.d(t,"sb",(function(){return oe})),n.d(t,"tb",(function(){return se})),n.d(t,"vb",(function(){return ae})),n.d(t,"wb",(function(){return ce})),n.d(t,"yb",(function(){return le})),n.d(t,"zb",(function(){return ue})),n.d(t,"Ab",(function(){return de})),n.d(t,"Bb",(function(){return pe})),n.d(t,"Db",(function(){return me})),n.d(t,"Cb",(function(){return fe})),n.d(t,"Eb",(function(){return he})),n.d(t,"Fb",(function(){return ge})),n.d(t,"Gb",(function(){return ve})),n.d(t,"Hb",(function(){return be})),n.d(t,"Ib",(function(){return ye})),n.d(t,"Jb",(function(){return Se})),n.d(t,"Kb",(function(){return Ce})),n.d(t,"Lb",(function(){return we})),n.d(t,"Mb",(function(){return ke})),n.d(t,"Nb",(function(){return Te})),n.d(t,"Ob",(function(){return Ie})),n.d(t,"xb",(function(){return $e})),n.d(t,"Pb",(function(){return Pe})),n.d(t,"Qb",(function(){return _t})),n.d(t,"ub",(function(){return Ee}));var ai=Ae.a.name},pqmn:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.ROOT=new t("ROOT"),t.INTERACTIVE=new t("INTERACTIVE"),t.INDIRECT=new t("INDIRECT"),t}(n.n(i).a);t.a=o},"q/wk":function(e,t,n){"use strict";var r=n("D57K"),i=n("td+C"),o=n("e6jQ"),s=n("adx1"),a=n("gSji"),c=n("5LAh"),l=n("x9Ok"),u=function(e){function t(t,n){var r=e.call(this)||this;return r.integrationService=t,r.routeListenerService=n,r.updateRoute=function(e){r.currentRoute=e},r.handleHelpProvided=function(e){var t=r.pendingHelpRequests.get(e.correlationId);t&&(r.pendingHelpRequests.delete(e.correlationId),clearTimeout(t.timeoutId),t.resolver())},r.registerAsHelpProvider=function(e,t){var n=c.c.getHelpProvider(e.id);if(!e.id||n)return n?console.warn("Cannot register provider: Provider already exists with an id of "+e.id):console.warn("Cannot register provider: no id was specified"),void r.integrationService.sendMessage({type:a.g,id:e.id,status:a.j.Failure},t);var i={iconUrl:e.iconUrl,providerId:e.id,providerType:e.providerType,integrationId:t.id,displayName:e.displayName};c.c.addHelpProvider(i),r.integrationService.sendMessage({type:a.g,id:e.id,status:a.j.Success,iconUrl:e.iconUrl},t);var o=c.c.getProviderByType(a.k.Auxiliary),s=c.c.getProviderByType(a.k.Primary);r.$emitEvent(r.helpChangedEvent,{auxiliaryProviders:o,primaryProviders:s})},r.pendingHelpRequests=new Map,r.helpChangedEvent="helpChanged",r.routeListenerService.subscribe(r.updateRoute),r}return Object(r.__extends)(t,e),t.prototype.init=function(){this.integrationService.addIntegrationMessageType(a.i,this.handleHelpProvided),this.integrationService.addIntegrationMessageType(a.g,this.registerAsHelpProvider)},t.prototype.sendHelp=function(e,t){var n=this;return new Promise((function(r,i){var s=o.b();n.integrationService.sendMessage({type:a.e,eventType:a.h,correlationId:s,helpUrl:t,currentRouteName:n.currentRoute},e);var c=setTimeout((function(){n.pendingHelpRequests.delete(s),i()}),5e3);n.pendingHelpRequests.set(s,{timeoutId:c,resolver:r})}))},t}(s.a);t.a=new u(i.a,l.b)},qOsI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("PCGa");var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.calendar.routes";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("calendar-settings",{url:"/settings",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},require:function(){return Promise.all([n.e(0),n.e(631)]).then(n.bind(null,"OHPy"))},pageTitle:"base.calendar.settings.title"}).peekState("event-create",{url:"/event/create?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(7),n.e(20),n.e(2),n.e(3),n.e(12),n.e(14),n.e(23),n.e(28),n.e(83)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.create.addEvent"}).peekState("event-edit",{url:"/event/edit/:calendarId/:itemSourceType/:itemSourceId?updateSeries&repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(7),n.e(20),n.e(2),n.e(3),n.e(12),n.e(14),n.e(23),n.e(28),n.e(83)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.create.editEvent"}).peekState("event-view",{url:"/event/view/:calendarId/:itemSourceType/:itemSourceId?repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},require:function(){return Promise.all([n.e(2),n.e(3),n.e(14),n.e(639)]).then(n.bind(null,"dWqS"))},pageTitle:"base.calendar.create.viewEvent"}).peekState("class-schedule",{url:"/class-schedule?selectedDate&courseId",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(7),n.e(1),n.e(14),n.e(28),n.e(638)]).then(n.bind(null,"TayV"))},pageTitle:"base.calendar.schedule.classSchedule"}).peekState("office-hours",{url:"/office-hours?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(7),n.e(20),n.e(2),n.e(3),n.e(12),n.e(14),n.e(23),n.e(28),n.e(83)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.addOfficeHours"})}])},qZC8:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.placements.inlineGradableModalTitle"\n          analytics-id-tag-prefix="course.placements.basePlacement">\n  <div name="modal-contents">\n    <p bb-translate>course.placements.inlineGradableSupport</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="dismissCallback()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="course.placements.basePlacement.ok.button">\n    global.ok\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},qhd3:function(e,t,n){"use strict";n.r(t),n.d(t,"KnownSystemRole",(function(){return f})),n.d(t,"VisibilityScopeEnum",(function(){return h})),n.d(t,"Gender",(function(){return g})),n.d(t,"EducationLevel",(function(){return v})),n.d(t,"sortCompareUsers",(function(){return b})),n.d(t,"serviceName",(function(){return y})),n.d(t,"USER_API_PATH",(function(){return S}));var r=n("D57K"),i=(n("QLzv"),n("nsO7")),o=n("wHJ2"),s=n("5MwF"),a=n("Rjd/"),c=n("yCC5"),l=n("nkTj"),u=n("g66W"),d=n("nbDY"),p=n.n(d),m=n("cYWG"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.AccountAdmin=new t("ACCOUNT_ADMIN"),t.CourseCreator=new t("COURSE_CREATOR"),t.CourseSupport=new t("COURSE_SUPPORT"),t.Guest=new t("GUEST"),t.Integration=new t("INTEGRATION"),t.Observer=new t("OBSERVER"),t.Portal=new t("PORTAL"),t.SystemAdmin=new t("SYSTEM_ADMIN"),t.SystemSupport=new t("SYSTEM_SUPPORT"),t.User=new t("USER"),t.Default=new t("DEFAULT"),t}(p.a),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Nobody=new t("NOBODY"),t.Classmates=new t("CLASSMATES"),t.Everyone=new t("EVERYONE"),t.School=new t("EVERYONE"),t}(p.a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Male=new t("MALE"),t.Female=new t("FEMALE"),t.Unknown=new t("UNKNOWN"),t}(p.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.K8=new t("K_8"),t.HighSchool=new t("HIGH_SCHOOL"),t.Freshman=new t("FRESHMAN"),t.Sophomore=new t("SOPHOMORE"),t.Junior=new t("JUNIOR"),t.Senior=new t("SENIOR"),t.GraduateSchool=new t("GRADUATE_SCHOOL"),t.PostGraduateSchool=new t("POST_GRADUATE_SCHOOL"),t.Unknown=new t("UNKNOWN"),t}(p.a);function b(e,t){if(!e&&!t)return 0;if(e&&!t)return-1;if(!e&&t)return 1;if(e&&t){if(e.familyName&&!t.familyName)return-1;if(!e.familyName&&t.familyName)return 1;if((e.familyName||t.familyName)&&e.familyName!==t.familyName)return e.familyName&&t.familyName?e.familyName.localeCompare(t.familyName):0;if(!e.givenName&&!t.givenName)return 0;if(e.givenName&&!t.givenName)return-1;if(!e.givenName&&t.givenName)return 1;if(!e.givenName&&!t.givenName||e.givenName===t.givenName){if(e.userName&&!t.userName)return-1;if(!e.userName&&t.userName)return 1;if(!e.userName&&!t.userName)return 0;if(e.userName&&t.userName)return e.userName.localeCompare(t.userName)}else if(e.givenName&&t.givenName)return e.givenName.localeCompare(t.givenName)}return 0}var y=c.Ac,S=s.a.apiBasePath+"/v1/users";a.a.factory(y,["$http","restmod","$q",l.d,function(e,t,n,r){var s=t.model(S).mix({calendarItems:{hasMany:c.Eb},memberships:{hasMany:c.N,hooks:{"before-fetch-many":function(t){t.params=t.params||{},i.isUndefined(t.params.includeCount)&&(t.params.includeCount=!0);var n=t.params.limit,r=t.params.offset,s=function(t,i,a){return e.get(t,{params:i}).then((function(e){if(!(e&&200===e.status&&e.data&&e.data.results&&e.data.paging))return e;a=a||[];var i=e.data.results,c=e.data.paging;if(!((a=a.concat(i)).length>=n||i.length<c.limit)){var l=o.extend(o.copy(e.config.params),{offset:(r||0)+a.length});return a.length<n&&(l.limit=n-a.length),delete l.includeCount,s(t,l,a)}return e.data.results=a,e.data.paging.limit=n,e.data.paging.offset=r,e}))};t.cache={get:function(){return s(t.url,t.params)}}}}},blocks:{hasMany:c.h},birthDate:{serialize:"date"},isGuest:function(){return f.Guest.isEqualTo(this.systemRoles&&this.systemRoles[0])},isAnonymousStudent:function(){return this.ui&&this.ui.anonymousStudent},isInstructor:function(){return this.memberships.some((function(e){return e.isActAsInstructorMembership()}))},isStudent:function(){return this.memberships.some((function(e){return e.isStudentMembership()}))},getInitials:function(){if(this.givenName&&this.familyName&&!u.i(this.givenName)&&!u.i(this.familyName)&&!u.j(this.givenName)&&!u.j(this.familyName))return(""+this.givenName.charAt(0)+this.familyName.charAt(0)).toLowerCase()},$extend:{Collection:{batchGetCollection:function(e){var t=n.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},(function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise}}}});return s.getUserConfiguration=function(){var e,t=n.defer();return this.$collection().$send({method:"GET",url:this.$url()+"/fieldsConfiguration",params:(e={visibleOnly:!0},e[m.a]=Number.MAX_VALUE,e)},(function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},s.mixinUsers=r.getDataMixin((function(e,t){return s.findMany(e,t,[404])}),"userId","user"),s.getAnonymousStudent=function(e){return s.$build({id:e,familyName:"",givenName:"",ui:{anonymousStudent:!0,anonymousStudentId:e}})},s}])},qtHE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("Sa5G"),o=n("wQOJ"),s=n("TnpK"),a="ultra.base.institution-page.routes";r.module(a,[s.b]).config([s.c,function(e){e.peekState("allLinks",{url:"/all?moduleId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(717)]).then(n.bind(null,"Dovs"))},pageTitle:"base.nav.institutionPage",resolve:{IP:[o.b,s.d,function(e,t){var n=t.nextParams;return e.getModuleIsVisible(n.moduleId).then((function(e){if(!e)return t.goToRoute("base.institution-page")}))}]}}).peekState("editPageImage",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/editPage?type",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(650)]).then(n.bind(null,"JKPj"))},pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-page-image-peek"}).peekState("editModule",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/edit?moduleId&expandRoles",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(713)]).then(n.bind(null,"axDv"))},peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("createModule",{systemEntitlement:i.D.CreatePortalOptionsModuleManagement,url:"/create?type&sequence",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(712)]).then(n.bind(null,"57Mq"))},peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("linkImage",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/linkImage?linkId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(18),n.e(651)]).then(n.bind(null,"kHrt"))},pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-link-image-peek"}).peekState("contentCollection",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/contentCollection",require:function(){return n.e(632).then(n.bind(null,"HgOS"))},pageTitle:"base.nav.institutionPage",panelClass:"full",peekViewName:"ip-content-collection-peek"}).peekState("browserSettings",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/browserSettings",require:function(){return n.e(685).then(n.bind(null,"usdo"))},pageTitle:"base.nav.institutionPage",panelClass:"peek"})}])},r6n2:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("Y3OE"),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.handle=t,r.contentHandler=n,r}return Object(r.__extends)(t,e),t.parseByContentHandler=function(e){switch(e){case t.Assignment.contentHandler:return t.Assignment;case t.Test.contentHandler:return t.Test;case t.Survey.contentHandler:return t.Survey;case t.Discussion.contentHandler:return t.Discussion;case t.ClassicAssignment.contentHandler:return t.ClassicAssignment;case t.Scorm.contentHandler:return t.Scorm}},t.Assignment=new t("assignment",s.a.UltraAssignment.toString()),t.Survey=new t("survey",s.a.SurveyLink.toString()),t.Test=new t("test",s.a.TestLink.toString()),t.Discussion=new t("discussion",s.a.Discussion.toString()),t.ClassicAssignment=new t("classicAssignment",s.a.ClassicAssignment.toString()),t.Scorm=new t("scorm",s.a.RusticiScorm.toString()),t}(o.a);t.a=a},rEGj:function(e,t,n){"use strict";n.r(t);n("GiEq")},rEZX:function(e,t,n){"use strict";var r=n("pjml"),i=function(){function e(e,t){t&&r.J.ScaleType.Text.isEqualTo(t.scaleType)?this.isNumeric=!1:this.isNumeric=!Number.isNaN(parseFloat(e)),this.grade=e}return e.prototype.getGrade=function(){return this.grade},e}(),o=function(e,t,n){this.column=e,this.courseId=e.courseId,this.gradeValue=new i(t,n)};t.a=o},rkMR:function(e,t,n){},rmtn:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.base.admin.brand.routes";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){e.peekState("brands",{panelClass:"full",allowChildPeekStates:!0,url:"/brands",systemEntitlement:i.C.ViewAdmin,require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(18),n.e(41),n.e(714)]).then(n.bind(null,"olMq"))},pageTitle:"base.admin.branding.brandList.title",peekStates:["create-brand","brand-detail"]}).peekState("create-brand",{panelClass:"full",allowChildPeekStates:!0,url:"/create",systemEntitlement:i.C.ViewAdmin,require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(18),n.e(41),n.e(157)]).then(n.bind(null,"3ay5"))},pageTitle:"base.admin.branding.createBrand.title",peekStates:["colorSelection"]}).peekState("brand-detail",{panelClass:"full",allowChildPeekStates:!0,url:"/brand/:brandId",systemEntitlement:i.C.ViewAdmin,require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(18),n.e(41),n.e(157)]).then(n.bind(null,"3ay5"))},pageTitle:"base.admin.branding.brandDetails.title",peekStates:["colorSelection"]})}])},rxY8:function(e,t,n){"use strict";var r=n("D57K"),i=(n("kj+S"),n("5iHu")),o=n("nsO7"),s=20,a=function(){function e(e,t){var n=this;this.element=e,this.settings=t,this.nextFrame=o.throttle((function(){window.requestAnimationFrame((function(){e.setAttribute("keyframe",n.state+"-"+("00"+(n.frame=Math.min(n.frame+1,s))).substr(-2)),n.frame<s?n.nextFrame():(n[n.state+"Callback"]||n.settings[n.state+"Callback"]||i.noop)()}))}),50),this.settings=i.extend({successCallback:i.noop,errorCallback:i.noop,canvasSize:54},t),i(e).width(this.settings.canvasSize).height(this.settings.canvasSize)}return e.prototype.start=function(){this.state="start",this.frame=1,this.startCallback=i.noop,this.nextFrame()},e.prototype.loadComplete=function(){var e=this;this.afterWaiting((function(){e.state="success",e.frame=1,e.nextFrame()}))},e.prototype.loadError=function(){var e=this;this.afterWaiting((function(){e.state="error",e.frame=1,e.nextFrame()}))},e.prototype.reset=function(){this.state="reset",this.frame=s,this.nextFrame()},e.prototype.afterWaiting=function(e){var t=this;"start"===this.state&&this.frame===s||"reset"===this.state?e():this.startCallback=function(){e(),t.startCallback=null}},e}();i.fn.inlineLoader=function(e){return this.addClass("xloader2").each((function(){this.InlineLoader=new a(this,e)})),this};var c=n("wHJ2");n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var l="ultra.components.services.spinner",u="spinner",d=function(){function e(e){this.$rootScope=e}return e.prototype.initInlineLoader=function(e,t){return e.inlineLoader(t),new p(e,this.$rootScope)},e.$inject=["$rootScope"],e}(),p=function(){function e(e,t){this.element=e,this.$rootScope=t}return e.prototype.start=function(){this.element[0].InlineLoader.start()},e.prototype.complete=function(){this.element[0].InlineLoader.loadComplete()},e.prototype.error=function(){this.element[0].InlineLoader.loadError()},e.prototype.reset=function(){this.element[0].InlineLoader.reset()},e.prototype.animate=function(e){var t=this;this.start(),e.then((function(){t.complete()}),(function(){t.error()}))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(d);c.module(l,[]).service(u,d)},sNuB:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("JzsJ");var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.goal-alignment.router";r.module(s,[o.b]).config([o.c,function(e){e.peekState("goal-picker-legacy",{panelClass:"full",url:"/goalPickerLegacy",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}]},require:function(){return n.e(636).then(n.bind(null,"8MxD"))},pageTitle:"course.goal-alignment.goal.header",params:{goalAlignableContent:null}})}])},saCP:function(e,t,n){},"sb+l":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("w9Zy"),a=n("jhBu"),c=n("pjml"),l=n("TnpK"),u="ultra.base.stream.routes";r.module(u,[o.moduleName,s.d,a.a,c.R,l.b]).config([l.c,function(e){e.peekState("announcement",{url:"/announcement/:streamEntryId",require:function(){return Promise.all([n.e(0),n.e(20),n.e(8),n.e(12),n.e(23),n.e(688)]).then(n.bind(null,"/Lzo"))},pageTitle:"base.stream.entryTitle.announcement"}).peekState("stream-message",{url:"/message/:courseId/:conversationId",require:function(){return Promise.all([n.e(0),n.e(8),n.e(33),n.e(695)]).then(n.bind(null,"yVjE"))},pageTitle:"base.stream.entryTitle.message"}).peekState("content-group",{url:"/content/:streamEntryId",require:function(){return Promise.all([n.e(20),n.e(12),n.e(19),n.e(23),n.e(654)]).then(n.bind(null,"G506"))},resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/content/content")}]},pageTitle:"base.stream.content.pageTitle"}).peekState("notification-create",{abstract:!0,url:"/notification",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}],isAdmin:[a.b,function(e){return e.hasSystemEntitlement(i.C.ViewAdminTop).then((function(e){return e}))}]},panelClass:"full",require:function(){return Promise.all([n.e(7),n.e(139),n.e(689)]).then(n.bind(null,"s7sT"))},pageTitle:"base.stream.notification.create.pageTitle"}).peekState("notification-create.steps",{url:"/create",panelClass:"full",pageTitle:"base.stream.notification.create.pageTitle",views:{"notification-step1@":{require:function(){return Promise.all([n.e(0),n.e(8),n.e(155)]).then(n.bind(null,"At0Z"))}},"notification-step2@":{require:function(){return n.e(144).then(n.bind(null,"SPbX"))}}}}).peekState("notification-edit",{abstract:!0,url:"/notification",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}]},panelClass:"full",require:function(){return Promise.all([n.e(7),n.e(139),n.e(677)]).then(n.bind(null,"OhPa"))},pageTitle:"base.stream.notification.edit.pageTitle"}).peekState("notification-edit.steps",{url:"/edit",panelClass:"full",pageTitle:"base.stream.notification.edit.pageTitle",views:{"notification-step1@":{require:function(){return Promise.all([n.e(0),n.e(8),n.e(155)]).then(n.bind(null,"At0Z"))}},"notification-step2@":{require:function(){return n.e(144).then(n.bind(null,"SPbX"))}}}}).peekState("notification-history",{url:"/notification/history",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}]},panelClass:"full",require:function(){return n.e(633).then(n.bind(null,"Mc4O"))},pageTitle:"base.stream.notification.history.title",peekStates:["notification-edit"],peekViewName:"notification-history-base@"})}])},sgjL:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("e6jQ"),a=n("Q/M7"),c="ultraUi.components.services.postMessageDispatcher",l="postMessageDispatcher",u=function(){function e(e){var t=this;this.$window=e,this.eventHandlers={},this.eventListenerBound=!1,this.superEventHandler=function(e){e.origin===a.j()&&e.data&&e.data.messageId&&i.forOwn(t.eventHandlers,(function(t){t.messageId===e.data.messageId&&t.eventHandler(e.data,e.source)}))}}return e.prototype.callEventHandler=function(e,t){i.forOwn(this.eventHandlers,(function(n){n.messageId===e&&n.eventHandler(t,window)}))},e.prototype.registerEventHandler=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),r){var a=[];i.forOwn(this.eventHandlers,(function(t,n){t.messageId===e&&a.push(n)})),a.forEach((function(e){o.removeEventHandler(e)}))}var c=s.a();this.eventHandlers[c]={eventHandler:t,messageId:e},this.handleEventListener(),n.$on("$destroy",(function(){o.removeEventHandler(c),o.handleEventListener()}))},e.prototype.removeEventHandler=function(e){this.eventHandlers[e]&&delete this.eventHandlers[e]},e.prototype.getDispatcherStatus=function(){return{count:Object.keys(this.eventHandlers).length,bound:this.eventListenerBound}},e.prototype.testDispatcherEventHandler=function(e){this.superEventHandler(e)},e.prototype.handleEventListener=function(){Object.keys(this.eventHandlers).length>0?this.eventListenerBound||this.addEventListener():this.removeEventListener()},e.prototype.addEventListener=function(){this.$window.addEventListener("message",this.superEventHandler,!1),this.eventListenerBound=!0},e.prototype.removeEventListener=function(){this.$window.removeEventListener("message",this.superEventHandler),this.eventListenerBound=!1},e.$inject=["$window"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);o.module(c,[]).service(l,u)},spHl:function(e,t,n){var r={"./ar-sa/_combined":["805C",96],"./ar-sa/_combined.json":["805C",96],"./cs-cz/_combined":["p7mG",97],"./cs-cz/_combined.json":["p7mG",97],"./cy-gb/_combined":["jeLm",98],"./cy-gb/_combined.json":["jeLm",98],"./da-dk/_combined":["2iiI",99],"./da-dk/_combined.json":["2iiI",99],"./de-de/_combined":["bR5d",100],"./de-de/_combined.json":["bR5d",100],"./en-au/_combined":["FPgK",102],"./en-au/_combined.json":["FPgK",102],"./en-gb/_combined":["fX7R",103],"./en-gb/_combined.json":["fX7R",103],"./en-us-k12/_combined":["TfEl",104],"./en-us-k12/_combined.json":["TfEl",104],"./en-us-pro/_combined":["SQ9M",105],"./en-us-pro/_combined.json":["SQ9M",105],"./en-us/_combined":["pVoq",156],"./en-us/_combined.json":["pVoq",156],"./en-za/_combined":["7bwu",106],"./en-za/_combined.json":["7bwu",106],"./en/_combined":["JOlw",101],"./en/_combined.json":["JOlw",101],"./es-es/_combined":["qCZ9",107],"./es-es/_combined.json":["qCZ9",107],"./fr-fr/_combined":["SMTA",108],"./fr-fr/_combined.json":["SMTA",108],"./it-it/_combined":["mwd4",109],"./it-it/_combined.json":["mwd4",109],"./ja-jp/_combined":["BVZK",110],"./ja-jp/_combined.json":["BVZK",110],"./ko-kr/_combined":["/x4r",111],"./ko-kr/_combined.json":["/x4r",111],"./ms-my/_combined":["YOK3",112],"./ms-my/_combined.json":["YOK3",112],"./nb-no/_combined":["oNI2",113],"./nb-no/_combined.json":["oNI2",113],"./nl-nl/_combined":["7Mff",114],"./nl-nl/_combined.json":["7Mff",114],"./nn-no/_combined":["pU4P",115],"./nn-no/_combined.json":["pU4P",115],"./pl-pl/_combined":["395X",116],"./pl-pl/_combined.json":["395X",116],"./pt-br/_combined":["LehD",117],"./pt-br/_combined.json":["LehD",117],"./ru-ru/_combined":["lC96",118],"./ru-ru/_combined.json":["lC96",118],"./sv-se/_combined":["JSyn",119],"./sv-se/_combined.json":["JSyn",119],"./th-th/_combined":["S6Bf",120],"./th-th/_combined.json":["S6Bf",120],"./tr-tr/_combined":["3Rba",121],"./tr-tr/_combined.json":["3Rba",121],"./zh-cn/_combined":["qOHB",122],"./zh-cn/_combined.json":["qOHB",122],"./zh-tw/_combined":["G1jo",123],"./zh-tw/_combined.json":["G1jo",123]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,3)}))}i.keys=function(){return Object.keys(r)},i.id="spHl",e.exports=i},sqUP:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-insufficient-storage.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-insufficient-storage">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-insufficient-storage.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},"t04/":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-course_catalog_default",use:"icon-small-course_catalog_default-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_default"><path d="M5 14.5c-2 1.0446-4 0-4 0v-13c2-1 4 0 4 0v13zM15 14.5c-2 1.125-4 0-4 0v-13s2-1 4 0v13zM8 11v1m0-7v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 14.5357c-3 1.0447-6 0-6 0V1.5s3-1 6 0v13.0357z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},t3AZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("0JpG"),o="ultra.components.directives.translateAttrsDirective",s="bbTranslateAttrs",a="translateAttrsValues",c=function(){function e(e,t,n,r,i,o){var c=this;this.$q=e,this.bbLocalize=t,this.scope=n,this.element=r,this.attrs=i,this.origAttrs=o,this.currentAttrs={},this.currentValues={},this.getOrigAttrsString=function(){return c.origAttrs[s]},this.getOrigValuesString=function(){return c.origAttrs[a]},this.getAttrsString=function(){return c.attrs[s]},this.getValuesString=function(){return c.attrs[a]},this.updateValues=function(){return Object.assign(c.currentValues,c.scope.$eval(c.getValuesString()))};var l=!0;this.isOnetimeBind(this.getOrigAttrsString())?this.updateAttrs():(this.scope.$watch(this.updateAttrs.bind(this),this.translate.bind(this),!0),l=!1),this.isValuesStringDefined()&&!this.isOnetimeBind(this.getOrigValuesString())&&(this.scope.$watch(this.updateValues.bind(this),this.translate.bind(this),!0),l=!1);var u=n.$root.$on("$translateChangeSuccess",this.translate.bind(this));n.$on("$destroy",u),l&&this.translate()}return e.prototype.updateAttrs=function(){return Object.assign(this.currentAttrs,this.scope.$eval(this.getAttrsString()))},e.prototype.isValuesStringDefined=function(){return null!=this.getOrigValuesString()},e.prototype.isOnetimeBind=function(e){return 0===e.indexOf("::")},e.prototype.translate=function(){var e=this,t={},n=this.bbLocalize.getLocale(this.scope);r.forEach(this.currentAttrs,(function(r,i){t[i]=e.bbLocalize.translate({locale:n,key:r,params:e.currentValues,noWrap:!0,noEscape:!0})})),this.$q.all(t).then((function(t){e.element.attr(t)}))},e}(),l=function(){function e(e,t){var n=this;this.$q=e,this.bbLocalize=t,this.restrict="A",this.scope=!1,this.compile=function(e,t){t[s];return function(e,r,i){return new c(n.$q,n.bbLocalize,e,r,i,t)}}}return e.$inject=["$q",i.serviceName],e}();r.module(o,[i.moduleName]).directive(s,["$injector",function(e){return e.instantiate(l)}])},t6LE:function(e,t,n){"use strict";n.r(t);var r,i=n("D57K"),o=(n("QLzv"),n("nsO7")),s=n("5MwF"),a=n("nbDY"),c=n.n(a),l=n("vYaK"),u=n("yCC5"),d=n("pjml"),p=n("Rjd/"),m=n("JrDC"),f=n("wgY5"),h=n("A0nf"),g=n("nkTj"),v=n("94iD"),b=n("817J"),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Completed=new t("COMPLETED"),t.NeedsPosting=new t("NEEDS_POSTING"),t.NothingToPost=new t("NOTHING_TO_POST"),t}(c.a);n.d(t,"OverrideStatus",(function(){return r})),n.d(t,"moduleName",(function(){return S})),n.d(t,"serviceName",(function(){return C})),n.d(t,"ToolAttemptDetailItemEx",(function(){return w})),n.d(t,"AttemptStatus",(function(){return k})),n.d(t,"AssessmentType",(function(){return b.a})),n.d(t,"AttemptsPostingStatus",(function(){return y})),function(e){e.NoOverride="NO_OVERRIDE",e.FeedbackOverride="FEEDBACK_OVERRIDE",e.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE"}(r||(r={}));var S="ultra.components.services.models.grade.gradeAttempt",C=u.cb,w=function(){function e(t,n){var r=this;this.gradeAttempt=t,this.toolAttemptDetailItem=n,this._softTimeLimitDate=f(this.gradeAttempt.creationDate).add(this.softTimeLimitSecond,"seconds").toDate(),this._graceTimeLimitSecond=this.softTimeLimitSecond+e.GRACE_PERIOD_SECOND,this._graceDate=f(this.gradeAttempt.creationDate).add(this._graceTimeLimitSecond,"seconds").toDate(),this._isSubmittedInGracePeriod=f(this.gradeAttempt.attemptDate).isBetween(f(this.gradeAttempt.creationDate),f(this._graceDate)),this._hasAnswerIsModifiedInGracePeriod=o.filter(this.toolAttemptDetailItem.questionAttempts,(function(e){return!o.isEmpty(e.saveTimes)&&f(r.getLastModifyTime(e)).isBetween(r._softTimeLimitDate,r._graceDate)})).length>0}return Object.defineProperty(e.prototype,"elapsedDuration",{get:function(){return f.duration(f(this.gradeAttempt.attemptDate).diff(f(this.gradeAttempt.creationDate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elapsedSec",{get:function(){return Math.ceil(this.elapsedDuration.asSeconds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"softTimeLimitSecond",{get:function(){return this.isTimerCompletionH()?this.toolAttemptDetailItem.softTimeLimitSeconds:this.toolAttemptDetailItem.timeLimitSec},enumerable:!0,configurable:!0}),e.prototype.needAttention=function(){return!o.isUndefined(this.toolAttemptDetailItem.timeLimitSec)&&(this.elapsedSec>this._graceTimeLimitSecond||this._isSubmittedInGracePeriod&&this._hasAnswerIsModifiedInGracePeriod)},e.prototype.getExceedTime=function(){return Math.floor(f.duration(this.elapsedSec-this.softTimeLimitSecond,"seconds").asMinutes())},e.prototype.isCompleted=function(){return this.gradeAttempt.isCompleted()},e.prototype.isTimerCompletionH=function(){return d.d.TimerCompletion.H.isEqualTo(this.toolAttemptDetailItem.timerCompletion)},e.prototype.isTimerCompletionC=function(){return d.d.TimerCompletion.C.isEqualTo(this.toolAttemptDetailItem.timerCompletion)},e.prototype.getLastModifyTime=function(e){return o.maxBy(e.saveTimes,(function(e){return e.date})).date},e.prototype.isAnsweredAfterSoftTimeLimit=function(e){return!o.isEmpty(e.saveTimes)&&f(this.getLastModifyTime(e)).isAfter(this._softTimeLimitDate)},e.prototype.getQuestionsAnsweredAfterSoftTimeLimit=function(){var e=this;return o.filter(this.toolAttemptDetailItem.questionAttempts,(function(t){return e.isAnsweredAfterSoftTimeLimit(t)}))},e.GRACE_PERIOD_SECOND=60,e}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.NotAttempted=new t("NOT_ATTEMPTED"),t.Abandoned=new t("ABANDONED"),t.InProgress=new t("IN_PROGRESS"),t.Suspended=new t("SUSPENDED"),t.Canceled=new t("CANCELED"),t.NeedsGrading=new t("NEEDS_GRADING"),t.Completed=new t("COMPLETED"),t.InMoreProgress=new t("IN_MORE_PROGRESS"),t.NeedsMoreGrading=new t("NEEDS_MORE_GRADING"),t}(c.a),T=function(e){o.forEach(e,(function(e,t){e.timeLimitSec=e.timeLimitSec||e.timeLimitSeconds}))};p.a.factory(C,["restmod",g.d,l.serviceName,function(e,t,n){return e.model().mix({creationDate:{serialize:"date"},modifiedDate:{serialize:"date"},attemptDate:{serialize:"date"},attemptFirstGradedDate:{serialize:"date"},attemptLastGradedDate:{serialize:"date"},originality:{hasOne:u.ab,path:"submissionResults"},assessment:{hasOne:u.f,path:"assessment"},stagedAttemptGrades:{hasMany:u.ac,path:"stagedAttemptGrades"},$hooks:{"after-fetch":function(){T(this.toolAttemptDetail)},"after-fetch-many":function(){o.forEach(this,(function(e){return T(e.toolAttemptDetail)}))}},$extend:{Scope:{$destroyUrlFor:function(e){return s.a.apiBasePath+"/v1/courses/"+m.a(n,e.$scope)+"/gradebook/attempts/"+e.id}},Record:{isPostable:function(){return this.readyToPost&&(k.NeedsGrading.isEqualTo(this.status)||k.NeedsMoreGrading.isEqualTo(this.status))},isCompleted:function(){return k.Completed.isEqualTo(this.status)},isGraded:function(){return this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade)||this.readyToPost},isGradable:function(e){var t=this.getToolAttemptDetailItem(e);return t&&t.assessment&&!t.assessment.hasAnswerableQuestions},isInProgress:function(){return k.InProgress.isEqualTo(this.status)||k.InMoreProgress.isEqualTo(this.status)},isSubmitted:function(){return!this.isInProgress()},isNeedsGrading:function(){return k.NeedsGrading.isEqualTo(this.status)||k.NeedsMoreGrading.isEqualTo(this.status)},isReconciled:function(){return null!=this.reconciliationMode},getToolAttemptDetailItem:function(e){return this.toolAttemptDetail?this.toolAttemptDetail[e.toString()]:null},getToolAttemptDetailItemEx:function(e){var t=this.getToolAttemptDetailItem(e);return null!=t?new w(this,t):null},getTimedTestAttemptDetail:function(){var e=this.getToolAttemptDetailItem(h.a.Test);if(null==e)return null;var t={elapsedSec:e.elapsedSeconds,timeLimitSec:e.timeLimitSeconds,softLimitSec:e.softTimeLimitSeconds,timerCompletion:e.timerCompletion};return new v.a(t)},getFeedbackToUser:function(){return this.feedbackToUser},getGroupIndividualFeedbackToUser:function(){return this.groupAttemptId&&this.overrideStatus===r.FeedbackOverride?this.feedbackToUser:null},getLastFeedbackAuthor:function(){return this.lastFeedbackAuthor},isPrePostGrade:function(){return!this.isCompleted()||!this.readyToPost||!this.userId},isDisplayablePostedGrade:function(){return this.isCompleted()&&this.readyToPost&&null!=this.userId}},Collection:{getNumAttemptsToGrade:function(){return this.filter((function(e){return e.isNeedsGrading()&&!e.isPostable()})).length},getNumAttemptsToReconcile:function(){return this.getNumAttemptsToGrade()},getNumAttemptsToPost:function(){return this.filter((function(e){return e.isPostable()})).length},getNumAttemptsSubmittedLate:function(e){return this.filter((function(t){return t.isSubmitted()&&f(t.attemptDate).isAfter(e)})).length},getNumAttemptsSubmitted:function(){return this.filter((function(e){return e.isSubmitted()})).length},getNumOfGradedAttempts:function(){return this.filter((function(e){return e.isGraded()})).length},isAllGradedAndPosted:function(){return this.length>0&&this.every((function(e){return e.isCompleted()}))},getAttemptIndexById:function(e){return o.findIndex(this,(function(t){return t.id===e}))}}}})}])},t6zR:function(e,t,n){"use strict";var r,i,o=n("wDWF"),s=function(){function e(){}return e.getBasePageStorageKey=function(){return r||(r="ultra.ui.basepage."+o.a(e.userId)),r},e.getPeekPageStorageKey=function(){return i||(i="ultra.ui.peekpage."+o.a(e.userId)),i},e}();t.a=s},tPPx:function(e,t,n){"use strict";n.r(t),n.d(t,"COURSE_ROLES_LIMIT",(function(){return c})),n.d(t,"KnownCourseRoleIdentifier",(function(){return l})),n.d(t,"toBeLocalizedRoleLabels",(function(){return d})),n.d(t,"toBeLocalizedOrgRoleLabels",(function(){return p})),n.d(t,"serviceName",(function(){return m})),n.d(t,"USER_API_PATH",(function(){return f}));var r=n("D57K"),i=(n("QLzv"),n("5MwF")),o=n("Rjd/"),s=n("yCC5"),a=n("nbDY"),c=1e3,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Instructor=new t("P"),t.Facilitator=new t("BB_FACILITATOR"),t.TeachingAssistant=new t("T"),t.Grader=new t("G"),t.CourseBuilder=new t("B"),t.Student=new t("S"),t.Guest=new t("U"),t}(n.n(a).a),u={S:0,T:1,B:2,G:3,BB_FACILITATOR:4,P:5,U:6},d={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"},p={S:"global.organization.role.S",P:"global.organization.role.P",BB_FACILITATOR:"global.organization.role.BB_FACILITATOR",T:"global.organization.role.T",B:"global.organization.role.B",G:"global.organization.role.G",U:"global.organization.role.U"},m=s.S,f=i.a.apiBasePath+"/v1/roles/courseRoles";o.a.factory(m,["restmod",function(e){return e.model(f).mix({localizedCourseName:{mask:!0},$extend:{Collection:{loadLocalizedNames:function(e){return this.forEach((function(t){t.isRemovable?t.localizedRoleName=e?t.orgName.rawValue:t.courseName.rawValue:t.localizedRoleName=e?"global.organization.role."+t.identifier.toString():"global.course.role."+t.identifier.toString()})),this},sortByStudentFirst:function(e){return this.$action((function(){this.sort((function(t,n){var r,i,o=t.identifier.toString(),s=n.identifier.toString();return o in u&&s in u?u[o]-u[s]:o in u&&!(s in u)?-1:!(o in u)&&s in u?1:("organization"===e?(r=t.orgName.languageKey,i=n.orgName.languageKey):(r=t.courseName.languageKey,i=n.courseName.languageKey),r>i?1:r<i?-1:0)}))}))}}}})}])},"tb/u":function(e,t){e.exports='<div>\n  <bb-user-avatar ng-repeat="user in displayUsers" user="user"></bb-user-avatar>\n</div>'},tcaZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("In+A"),s=n("5KgE"),a=n("aHpC"),c="ultra.components.directives.firstTimeContainer",l=function(){function e(e){this.firstTimeHelper=e,this.manager=o.guidanceManager}return e=Object(r.__decorate)([Object(r.__param)(0,Object(a.b)(s.b))],e)}(),u=function(){this.restrict="AE",this.controller=l,this.link=function(e,t,n,r){r.manager.startQueue(),e.$on("hide-ftue-component",(function(e,t){r.manager.hideComponent(t)}))}};i.module(c,[s.a]).directive("bbFirstTimeContainer",["$injector",function(e){return e.instantiate(u)}])},"td+C":function(e,t,n){"use strict";(function(e){var r=n("D57K"),i=n("nsO7"),o=n("JfV0"),s=n("Q/M7"),a=n("6vR2"),c=n("5LAh"),l=n("gSji"),u=n("ObAk"),d=n("x9Ok"),p=function(){function t(){var e=this;this.helloMessageListener=function(t){if(e.integrations&&t.data&&t.data.type===l.l){var n=Array.from(e.integrations.values()).find((function(e){return Object(s.i)(e.url)===t.origin&&e.iframe.contentWindow===t.source}));if(n){var r=new MessageChannel;n.integrationChannel=r.port1,n.integrationChannel.onmessage=function(t){e.onIntegrationMessage(t.data,n)},n.iframe.contentWindow.postMessage({type:l.l},t.origin,[r.port2])}else console.warn("Could not find a valid integration for message")}},this.onIntegrationMessage=function(t,n){if(t){var r=c.a.authScopes.get(t.type);if(r)if(!r(t,n))return;var i=e.integrationMessageEvents.get(t.type);i?i(t,n):console.warn("No valid method to call with provided event type "+t.type+".")}},this.sendAuthorizedMessage=function(t,n){return Object(r.__awaiter)(e,void 0,Promise,(function(){var e,i,s,a,c,u,d,p,m;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(!t||!t.token)return[2,this.sendAuthorizationError(n,"Received authorized message without token")];e=t.token,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Object(o.fetchAccessTokenInfo)(e)];case 2:return null==(i=r.sent()).scope?(s="Could not authenticate, no auth scopes provided for "+n,[2,this.sendAuthorizationError(n,s)]):(n.authScopes=new Set(i.scope.split(/\s+/)),n.integrationChannel.postMessage({type:l.c}),[3,4]);case 3:return a=r.sent(),u=(c=a).error&&c.error.error,d="invalid_request"===u,p=c.error&&c.error.error_description,m=d?"Expired or invalid token.":"Server side error occurred: "+u+", "+p,[2,this.sendAuthorizationError(n,m)];case 4:return[2]}}))}))},this.sendAuthorizationError=function(t,n){var r={type:l.S,errorInformation:n};e.sendMessage(r,t),e.removeIframe(t)},this.removeIframe=function(t){e.document.body.querySelector("#"+t.iframe.id).remove()},this.sendRouteEvent=function(t){var n=d.b.getCurrentRoute();e.sendMessage({type:l.e,eventType:l.V.Route,routeName:n.currentRouteName,routeData:n.currentParams},t)},this.integrations=new Map,this.integrationMessageEvents=new Map,this.integrationSubscriptionManager=new u.a}return t.prototype.init=function(e){return Object(r.__awaiter)(this,void 0,Promise,(function(){var t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:if(this.window=e,this.document=e.document,this.isSafeMode())return console.warn("In integration safe mode -- not loading integrations"),[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Object(o.fetchLtiPlacements)({type:o.PlacementType.UltraUI})];case 2:return t=n.sent(),this.window.addEventListener("message",this.helloMessageListener),this.initIntegrationMessageTypes(),this.initIntegrationSubscriptionCallbacks(),this.loadIntegrations(t),[2,t];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.loadIntegrations=function(t){var n=this;!t||this.integrations&&this.integrations.size>0||Object.entries(t).forEach((function(t){var r=t[0],i=t[1];if(i.availability.available===o.PublicAvailability.Yes){var a=e('<iframe id="'+i.id+'" src="'+Object(s.c)(i.launchLink)+'"></iframe>').hide();n.document.body.appendChild(a[0]),n.integrations.set(r,{id:r,hasAuthorized:!1,iframe:a[0],url:i.url,authScopes:new Set})}}))},t.prototype.isSafeMode=function(){return"true"===Object(s.m)("noExtensions",this.window.location.href)},t.prototype.addIntegrationMessageType=function(e,t){this.integrationMessageEvents.get(e)||this.integrationMessageEvents.set(e,t)},t.prototype.addSubscriptionEventCallback=function(e,t){return this.integrationSubscriptionManager.onSubscriptionEventCallback(e,t)},t.prototype.addUnsubscriptionEventCallback=function(e,t){return this.integrationSubscriptionManager.onUnsubscriptionEventCallback(e,t)},t.prototype.initIntegrationMessageTypes=function(){this.addIntegrationMessageType(l.c,this.sendAuthorizedMessage),this.addIntegrationMessageType(l.R,this.integrationSubscriptionManager.subscribeToEvents),this.addIntegrationMessageType(l.T,this.integrationSubscriptionManager.unsubscribeFromEvents)},t.prototype.initIntegrationSubscriptionCallbacks=function(){var e=this;this.addSubscriptionEventCallback(l.V.PortalNew,(function(e){c.e.getUnownedPortals().forEach((function(t){e.integrationChannel.postMessage({type:l.e,eventType:l.V.PortalNew,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData})}))})),this.addSubscriptionEventCallback(l.V.Route,(function(t){var n=d.b.getCurrentRoute();e.sendMessage({type:l.e,eventType:l.V.Route,routeName:n.currentRouteName,routeData:n.currentParams},t)}))},t.prototype.sendEventMessage=function(e,t){var n=this,r=this.integrationSubscriptionManager.getSubscribedIntegrations(e.eventType);r&&(t?[this.findIntegration(t)]:r).forEach((function(t){t&&n.sendMessage(Object(a.a)(e),t)}))},t.prototype.findIntegration=function(e){return this.integrations.get(e)},t.prototype.sendMessage=function(e,t){(Object(i.isString)(t)?this.findIntegration(t):t).integrationChannel.postMessage(Object(a.a)(e))},t}();t.a=new p}).call(this,n("5iHu"))},tfZW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("6VGE"),o=n.n(i),s=function(){function e(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.onOverrideAdded=function(e){this.overrideAddedHandlers.add(e)},e.prototype.notifyOverrideAdded=function(e){this.overrideAddedHandlers.forEach((function(t){try{t(e)}catch(e){}}))},e.normalizeLocale=function(e){return e.toLocaleLowerCase().replace(/_/g,"-")},Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siteId",{get:function(){return this._siteId},enumerable:!0,configurable:!0}),e.prototype.setOverrideLocation=function(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t},e.prototype.addOverrideBundle=function(t,n){t=e.normalizeLocale(t);var r=e.normalizeLocale(n),i=e.getFallbackLocale(r);this.overrideBundles[t]={ultraLocale:r,localeForPath:n},this.baseLocaleMap[t]=this.baseLocaleMap[r]=i,this.notifyOverrideAdded(t)},e.prototype.getOverridePathForLocale=function(t){return t=e.normalizeLocale(t),this.overrideBundles[t]?(this.overridePathPromises[t]||(this.overridePathPromises[t]=this.internalGetOverridePath(t)),this.overridePathPromises[t]):Promise.resolve(null)},e.prototype.internalGetOverridePath=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,[4,this.getPathToLocale(n)];case 1:return i=r.sent(),t&&i?[2,{path:i,ultraLocale:t}]:[2,null]}}))}))},e.getFallbackLocale=function(e){return e.split("-").slice(0,-1).join("-")},e.prototype.getPreferredLocales=function(t){if(t=e.normalizeLocale(t),!this.overrideBundles[t])return[t];var n=this.overrideBundles[t].ultraLocale;return[n,e.getFallbackLocale(n)].filter((function(e){return!!e}))},e.prototype.getPathToLocale=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(!this._root||!this._siteId)return[2,null];r.label=1;case 1:return r.trys.push([1,5,,6]),void 0!==this.pathMap[e]?[3,4]:(t=this._root+"/"+this._siteId+"/mapping.json",[4,fetch(t)]);case 2:return(n=r.sent()).ok?[4,n.json()]:(this.pathMap[e]=null,[2,null]);case 3:if(!(i=r.sent())[e])return this.pathMap[e]=null,[2,null];this.pathMap[e]=""+this._root+i[e][0].url,r.label=4;case 4:return[2,this.pathMap[e]];case 5:return r.sent(),[2,null];case 6:return[2]}}))}))},e.prototype.getBaseLocale=function(t){return t=e.normalizeLocale(t),void 0===this.baseLocaleMap[t]?"":this.baseLocaleMap[t]||"en"},e.loadFromRemotePath=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(e)];case 1:return(t=n.sent()).ok?[4,t.json()]:[2,{}];case 2:return[2,n.sent()];case 3:return n.sent(),[2,{}];case 4:return[2]}}))}))},Object(r.__decorate)([o.a],e,"normalizeLocale",null),Object(r.__decorate)([o.a],e,"getFallbackLocale",null),e}()},uC9d:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("nsO7"),i="learnApiCacheMessageService",o=function(){this.listen=r.noop,this.clearCache=r.noop},s=function(){function e(e){var t=this;this.$rootScope=e,this.init=function(){t.clearCacheOnLearnScreenClose()},this.clearCacheOnLearnScreenClose=function(){return t.$rootScope.$on("$stateChangeStart",(function(e,n,r,i){-1!==["base.admin","base.courses.peek.course.classic.outline"].indexOf(i.name)&&t.clearCache()}))},this.clearCache=function(e){return t.cacheServiceCallback({type:"clear",pattern:e})},this.listen=function(e){t.cacheServiceCallback=e},this.init()}return e.$inject=["$rootScope"],e}()},uNsL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.content-collection.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-collection",{url:"/contentcollection?parentId&positionBefore&positionAfter",require:function(){return Promise.all([n.e(1),n.e(634)]).then(n.bind(null,"tsxV"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content-collection/content-collection")])}]},panelClass:"full",pageTitle:"course.contentCollection.contentCollection",peekStates:["content-collection-edit","content-collection-picker","content-collection-settings"],peekViewName:"content-collection-child@"}).peekState("content-collection-edit",{url:"/edit",require:function(){return n.e(628).then(n.bind(null,"klLK"))},panelClass:"peek",pageTitle:"course.contentCollection.itemSettings",peekStates:[],params:{items:null,fileRow:null}}).peekState("content-collection-settings",{url:"/settings",require:function(){return n.e(667).then(n.bind(null,"ks8w"))},panelClass:"peek",pageTitle:"course.contentCollection.browserSettings",peekStates:[]}).peekState("content-collection-picker",{url:"/picker?pickerType&multi",require:function(){return n.e(666).then(n.bind(null,"sSTc"))},panelClass:"full",pageTitle:"course.contentCollection.browseContentCollection",peekStates:[],params:{pickerType:"File",multi:"true"}})}])},"ud/9":function(e,t,n){},usTV:function(e,t){e.exports='<div class="square-toggle">\n  <input class="toggle-input input-one"\n         ng-checked="property === oneViewValue"\n         aria-checked="{{property === oneViewValue}}"\n         id="square-toggle-option-one-{{ ::squareToggle.oneControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.oneControlId }}"\n         type="radio"\n         value="{{ ::oneViewValue }}"\n         aria-controls="{{ ::oneAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::oneTooltipTemplate }}"\n         tooltip-scope="oneTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option1.input.radio">\n  <label class="toggle-label input label-one js-label-{{oneIconClass}}"\n         for="square-toggle-option-one-{{ ::squareToggle.oneControlId }}">\n    <bb-svg-icon size="custom" icon="{{oneIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::oneAriaLabel }}</span>\n  </label>\n  <input class="toggle-input input-two"\n         ng-checked="property === twoViewValue"\n         aria-checked="{{property === twoViewValue}}"\n         id="square-toggle-option-two-{{ ::squareToggle.twoControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.twoControlId }}"\n         type="radio"\n         value="{{ ::twoViewValue }}"\n         aria-controls="{{ ::twoAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::twoTooltipTemplate }}"\n         tooltip-scope="twoTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option2.input.radio">\n  <label class="toggle-label input label-two js-label-{{twoIconClass}}"\n         for="square-toggle-option-two-{{ ::squareToggle.twoControlId }}">\n    <bb-svg-icon size="custom" icon="{{twoIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::twoAriaLabel }}</span>\n  </label>\n  <a href="javascript:void(0);" class="button" role="presentation" tabindex="-1"\n     analytics-id="{{analyticsIdTagPrefix}}.presentation.link"></a>\n</div>'},vT39:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("nsO7"),o=n("0JpG"),s=n("6Ksg"),a="ultra.directives.validate.bbmlmarkup.sanitize",c={style:function(e){return null},":default":function(t){var n=e("<span></span>");return n.text(t.text()),n}},l=function(t){function n(n,r){var o=t.call(this,n,r)||this;return o.validate=function(t){if(null===o.whitelist)return!0;var n=!0;if(1!==t[0].nodeType)return!0;var r=t[0].tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(o.whitelist,r)){var s=o.whitelist[r];i.each(Array.prototype.slice.apply(t[0].attributes),(function(e){Object.prototype.hasOwnProperty.call(s,e.name.toLowerCase())||(t.removeAttr(e.name),n=!1)}))}else{n=!1;var a=(c[r]||c[":default"])(t);if(null===a)return t.remove(),!1;t.replaceWith(a),t=a}return i.each(t.children(),(function(t){n=o.validate(e(t))&&n})),n},o.getValidator=function(t,n,r,s){return function(t){var r=o.$q.defer();return o.initialWhitelist().then((function(){var a=!0,c=e("<span></span>");c.html(t),i.each(c,(function(t){a=o.validate(e(t))&&a})),a||s.$setViewValue(n.html()),r.resolve()})),r.promise}},o}return Object(r.__extends)(n,t),n.$inject=["$q","$http"],n}(s.a);angular.module(a,[o.moduleName]).directive("bbSanitizeBbmlMarkup",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},vWx0:function(e,t,n){"use strict";var r=n("D57K"),i=(n("JzsJ"),n("wHJ2")),o=n("Sa5G"),s=n("w9Zy"),a=n("bF8R"),c=n("vdfi"),l=n("Fvsw"),u=n("JXhc"),d=n("jhBu"),p=n("0JpG"),m=n("pjml"),f=n("Qbdf"),h=n("TnpK"),g=n("gkef"),v=(n("UC5D"),n("nsO7")),b=n("yC9S"),y=n("5MwF"),S=n("Y/dt"),C=n("z6Q5"),w=n("fYJU"),k=n("12mu"),T=n("lEL+"),I=n("E01l"),$="ultra.modules.groupattempt.activities",E="ultra.services.groupattempt.activities",P="ultra.services.groupattempt.activities.dialog",A=new RegExp("assessment\\.overview\\.attempt("+h.a.replace(/\./g,"\\.")+".+)?$"),x={USER_CANCELLED:"USER_CANCELLED",USER_RELEASE_CONTROL:"USER_RELEASE_CONTROL",USER_REJECT_CONTROL:"USER_REJECT_CONTROL"},D=i.module($,["ng"]);D.factory(E,["$injector","$q","$log","$http","$rootScope",w.b,T.b,h.d,function(e){var t=e.get("$q"),n=e.get("$http"),r=e.get("$rootScope"),i=e.get(w.b);return b.b.OnRootScope(r,"$stateChangeError",(function(t,n,r){A.test(n.name)&&e.get(h.d).go(n.name.replace(/\.attempt$/,""),r)})),{new:function(e,r){var o=function(e,t){e.userId=t.userId,e.queue=t.queue,e.groupAttemptId=t.groupAttemptId,e.status=t.status},s=t.when(null),a={myId:i.userId,request:function(){var i=this;return s=s.then((function(){var s=t.defer();return n.put(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities",{}).then((function(e){o(i,e.data),s.resolve(i)})),s.promise}))},keepAlive:function(i){var c=this;s=s.then((function(s){var l=t.defer();return v.some(c.queue.concat(c.userId),(function(e){return c.myId===e}))?n({method:"PATCH",url:y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities"}).then((function(e){return o(c,e.data),t.when(i(c)).then((function(e){if(v.some(c.queue.concat(c.userId),(function(e){return c.myId===e}))&&e){var t=(new Date).getTime(),n=function(){window.requestAnimationFrame((function(){(new Date).getTime()-t>=5e3?a.keepAlive(i):n()}))};n()}}))})).finally((function(){l.resolve(c)})):l.resolve(c),l.promise}))},release:function(){var i=this;return s=s.then((function(){var s=t.defer();return n.delete(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities").then((function(e){o(i,e.data),s.resolve(i)})),s.promise}))},kickout:function(){return s=s.then((function(){return n.delete(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities/waiting")}))},peek:function(){var i=this;return s=s.then((function(){var s=t.defer();return n.get(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities").then((function(e){o(i,e.data),s.resolve(i)})),s.promise}))}};return a}}}]),D.factory(P,["$injector","$q","$log","$http","$rootScope",p.serviceName,h.d,k.b,C.b,m.Qb.serviceName,function(e){var t=e.get(k.b),n=e.get("$rootScope"),r=e.get(C.b),i=e.get(m.Qb.serviceName),o=e.get(p.serviceName),s="features.course.content.assessment.group-attempt.activities",a=function(e,n){var o=t.open({template:I,scope:e,controller:["$scope",function(e){}]});return o.refresh=function(t){r.performBatch((function(){var n=e.queuedUsers;e.owner&&(n[e.owner.id]=e.owner),e.queuedUsers={},t.userId&&t.userId!==(e.owner||{}).id&&i.$find(t.userId).$then((function(t){e.owner=t})),t.queue.forEach((function(t,r){Object.prototype.hasOwnProperty.call(n,t)?e.queuedUsers[t]=n[t]:i.$find(t).$then((function(n){e.queuedUsers[t]=n}))}))}))},o.scope=e,o.refresh(n),o.result.finally((function(){o.scope.$destroy()})),o};return{openRequest:function(e){var t,r=n.$new();return v.extend(r,{hideOK:!0,modalTranslateOptions:{title:{key:s+".title_group_member_editing"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_taken_by_other_group_member"}),ok:o.translateSync({locale:null,key:s+".takecontrol"}),cancel:o.translateSync({locale:null,key:s+".cancel"})},queuedUsers:{},additionalClass:"requesting",okAction:function(){r.$broadcast(x.USER_REQUEST_CONTROL)},cancelAction:function(){t.dismiss()}}),t=a(r,e)},openNotify:function(e){var t,r=n.$new();return v.extend(r,{hideOK:!1,modalTranslateOptions:{title:{key:s+".title_group_member_requesting"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_taking_by_other_group_member"}),ok:o.translateSync({locale:null,key:s+".leave"}),cancel:o.translateSync({locale:null,key:s+".ignore"})},queuedUsers:{},additionalClass:"notifying",okAction:function(){r.$broadcast(x.USER_RELEASE_CONTROL)},cancelAction:function(){t.dismiss()}}),t=a(r,e)},openDeclined:function(e){var t,r=n.$new();return v.extend(r,{hideCancel:!0,modalTranslateOptions:{title:{key:s+".title_group_member_request_decline"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_control_request_declined"}),ok:o.translateSync({locale:null,key:s+".ok"})},queuedUsers:{},additionalClass:"declined",okAction:function(){t.dismiss()}}),t=a(r,e)}}}]),D.directive("bbGroupAttemptActivitiesPeek",[h.d,T.b,E,function(e,t,n){return{restrict:"A",link:function(r,i,o){i.addClass("group-attempt-activities-observe");var s=r.$watch(o.bbGroupAttemptActivitiesPeek,(function(o){if(o&&s(),o&&o.groupId&&o.isInProgress()){var a=n.new(e.params.courseId,o.id),c=function(){a.peek().then((function(e){e.status&&(o.status=e.status),v.extend(r,{groupAttemptOwnerId:e.userId});var n="group-attempt-has-owner";e.userId?i.addClass(n):i.removeClass(n),t(c,r,5e3)}))};c()}}))}}}]);var O=function(){function e(e){var t,n=this;this.delegatee=e,this.isResolvingControl=!1,v.forEach(e,(function(e,t){n[t]=e}));var r=["$injector","$http","$q","$rootScope",T.b,h.d,m.o.serviceName];this.resolve=this.resolve||{};var o=function(e){var r=e.get("$q"),i=e.get("$rootScope"),o=e.get(T.b),s=e.get(h.d),a=e.get(m.o.serviceName),c=e.get(E),l=e.get(P);if(!n.isRelatedState(s.next.name))return r.when(!0);if(n.isResolvingControl)return r.reject();n.isResolvingControl=!0;var u=r.defer(),d=s.nextParams;return a.$new(d.courseId).contents.$find(d.contentId||d.assignmentId).$then((function(e){if(!e.isGroupContent)return u.resolve(!0),void(t=null);(t=c.new(d.courseId,d.attemptId)).peek().then((function(e){if(e.userId&&e.myId!==e.userId){i.$broadcast("hideInitialLoadingArea");var t=l.openRequest(e);t.result.then((function(){}),(function(){e.release(),u.reject()})),e.request().then((function(){e.keepAlive((function(){return e.myId===e.userId?(t.close(),u.resolve(!0),!1):e.queue.some((function(t){return e.myId===t}))?(t.refresh(e),!0):(t.dismiss("ACCESS_CONTROL_TAKEN"),u.reject(),o((function(){l.openDeclined(e)}),i,200),!1)}))}))}else u.resolve(!0)}))})),u.promise.finally((function(){n.isResolvingControl=!1}))},s=this.resolve;if(s.translateGroupAttemptControl=[p.serviceName,function(e){e.loadBundle("features/course/content/assessment/group-attempt/activities/group-attempt-activities")}],s.attempt){var a=s.attempt;s.attempt=["contentData"].concat(r).concat((function(e,t){var i=t.get("$q"),s=t.get(h.d);return i.when(t.invoke(r.concat(o))).then((function(){return t.invoke(a,null,{contentData:e})})).then((function(e){return n.isRelatedState(s.next.name)&&e.isSubmitted()?(t.get(h.d).goPeekState("assessment.overview.attempt.review",{attemptId:e.id}),i.reject()):e}))}))}else s.takeControlOnGroupAttempt=r.concat(o);var c=this,l=c.onExit;c.onExit=r.concat((function(e){n.isRelatedState(e.get(h.d).prev.name)&&(l&&e.invoke(l),t&&(t.release(),(c.__childScope||{$destroy:i.noop}).$destroy()))}));var u=c.onEnter;c.onEnter=r.concat((function(e){var r=e.get("$rootScope"),i=e.get(P),o=e.get(h.d);if(n.isRelatedState(o.next.name)&&(u&&e.invoke(u),t)){var s,a=!1,l=function(){a=!0},d=function(){a=!1},p=r.$new();p.$on(S.b,l),p.$on(S.d,l),p.$on(S.a,d),p.$on(S.c,d),c.__childScope=p,t.request().then((function(e){e.keepAlive((function(e){return!!a||!!n.isRelatedState(o.current.name)&&(e.userId!==e.myId?(o.leavePeekState(),!1):(e.userId===e.myId&&e.queue.length>0?s?s.refresh(e):((s=i.openNotify(e)).result.then((function(){}),(function(){e.kickout(),s=null})),s.scope.$on(x.USER_RELEASE_CONTROL,(function(){s.close(),r.$broadcast(S.e);var t=p.$on("$stateChangeAbort",(function(n,r){"ABORTED_BY_FILE_UPLOAD"===(r||{}).reason&&(t(),e.kickout()),s=null}))}))):s&&(s.close(),s=null),!0))}))}))}}))}return e.prototype.isRelatedState=function(e){return A.test(e)},e}(),_=n("+O05");n.d(t,"a",(function(){return M}));var M="ultra.course.content.assessment.routes",N={onEnter:["contentData","attempt",s.e,h.d,"$stateParams",g.b,function(e,t,n,r,i,o){if(this.viewOriginalityReport=i.viewOriginalityReport,!(this.viewOriginalityReport&&!i.forceOpenFeedbackPanel||i.skipTransitionEvents)){r.isPeekPanelOpen()&&n.expandTopPanel();var s=_.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),a=r.next.name.indexOf("rubric")>=0,c=r.next.name.indexOf("assessment-submission-feedback")>=0,l=!r.prev.name,u=o.isSmallBreakpoint();!s||u||a||c||l||!i.forceOpenFeedbackPanel||r.goPeekState("assessment-submission-feedback",{attemptId:t.id})}}],onExit:["contentData",s.e,h.d,"$q","$stateParams",function(e,t,n,r,i){var o=this;if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){var s=r.when();n.isPeekPanelOpen()&&(s=t.shrinkTopPanel()),s.then((function(){n.goPeekState("assessment.overview.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId,viewOriginalityReport:o.viewOriginalityReport})}))}}]};i.module(M,[d.a,h.b,c.c,u.c,$,f.b]).config([h.c,f.c,function(e,t){var i;e.peekState("assessment",{abstract:!0,url:"/assessment/{contentId:_[0-9]+_1}?courseId",resolve:(i={},i[f.d]=t.resolve,i)}).peekState("assessment.open",{url:"/open",params:{contentId:null,courseId:null,isCollectExternalSubmissions:!1},routingFunction:[m.o.serviceName,d.b,h.d,function(e,t,n){var r=n.nextParams.contentId,i=n.nextParams.courseId,s=n.nextParams.isCollectExternalSubmissions;t.hasAnyCourseEntitlement([o.j.ViewAssessment,o.j.ModifyAssessment],i).then((function(e){if(e)n.goPeekState("gradebook-item.assessment",{courseId:i,contentId:r,gradeitemView:"details",assessmentType:"test"});else{var t="assessment.overview";s&&(t="assessment.external-overview"),n.goPeekState(t,{courseId:i,contentId:r})}}))}]}).peekState("assessment.overview",{url:"/overview",resolve:{contentData:[f.d,a.b,h.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId,contentExtraExpand:"alignedGoals"})}],translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("components/services/proctoring")])}],onEnter:["contentData",l.b,function(e,t){t.column=e.gradingColumn}],onExit:[l.b,function(e){e.column=null}]},peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations","message"],pageTitle:"course.content.assessment.overview.pageTitle",require:[function(){return Promise.all([n.e(77),n.e(141)]).then(n.bind(null,"Xcx3"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(10),n.e(1),n.e(2),n.e(3),n.e(8),n.e(74)]).then(n.bind(null,"F2mp"))}]}).peekState("assessment.external-overview",{url:"/external-overview",panelClass:"full",resolve:{contentData:[f.d,a.b,h.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],currentContent:["contentData","$q",function(e,t){return t.when(e.courseContent)}],currentColumn:["contentData","$q",function(e,t){return t.when(e.gradingColumn)}],translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}],onEnter:["contentData",l.b,function(e,t){t.column=e.gradingColumn}],onExit:[l.b,function(e){e.column=null}]},peekViewName:"assessment-overview-peek",allowChildPeekStates:!0,peekStates:["conversations","message","rubric-view","rubric-evaluation"],require:[function(){return Promise.all([n.e(77),n.e(605)]).then(n.bind(null,"2cT1"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(2),n.e(3),n.e(8),n.e(9),n.e(554)]).then(n.bind(null,"8sa/"))}]}).peekState("assessment.overview.attempt",new O({url:"/attempt/{attemptId:_[0-9]+_1}",onEnter:[s.e,h.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{currentContent:["contentData",function(e){return e.courseContent}],currentColumn:["contentData",function(e){return e.gradingColumn}],attempt:["$q","contentData",m.o.serviceName,h.d,m.C.serviceName,m.H.serviceName,function(e,t,n,r){var i=r.nextParams.attemptId,o=t.courseContent.isGroupContent,s=n.$buildRaw({id:t.courseContent.courseId}).gradebook;return o?t.gradingColumn.getGroupAttemptByGroupAssociationId(t.courseContent.assignedGroups[0].groupAssociationId).then((function(e){if(0===e.attempts.length&&e.isInProgress()){return e.withParams({expand:"attempts,attempts.toolAttemptDetail,toolAttemptDetail"}).$patch(["id"]).$asPromise()}return e.$asPromise()})):s.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){t.attempt=e})).$asPromise()}]},params:{attemptId:null},peekStates:["conversations","message","assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-evaluation","rubric-view","lti",c.b,u.b],peekViewName:"assessment-attempt-peek",pageTitle:"course.content.assessment.details.pageTitle",require:[function(){return n.e(578).then(n.bind(null,"mJUP"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(10),n.e(1),n.e(2),n.e(3),n.e(8),n.e(74)]).then(n.bind(null,"F2mp"))}]})).peekState("assessment.overview.multiple-attempt",{panelClass:"peek",url:"/multiple-attempt?columnId&gradeId",resolve:{currentColumn:["contentData",function(e){return e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()}]},params:{viewOriginalityReport:!1},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:[function(){return Promise.all([n.e(1),n.e(19),n.e(11),n.e(43),n.e(641)]).then(n.bind(null,"ykN9"))}]}).peekState("assessment-details",{panelClass:"peek",url:"/details",resolve:{contentData:[f.d,a.b,h.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment")])}]},params:{detailsView:!0,submitToGRD:null},require:[function(){return Promise.all([n.e(77),n.e(141)]).then(n.bind(null,"Xcx3"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(10),n.e(1),n.e(2),n.e(3),n.e(8),n.e(74)]).then(n.bind(null,"F2mp"))}],peekStates:["attempt-safe-assign-setting"]}).peekState("assessment.overview.attempt.review",Object(r.__assign)(Object(r.__assign)({url:"/review",panelClass:"full",resolve:{contentData:["contentData",f.d,a.b,h.d,function(e,t,n,r){return e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:r.nextParams.contentId})}]},require:[function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(1),n.e(2),n.e(3),n.e(8),n.e(9),n.e(126)]).then(n.bind(null,"H0q3"))}]},N),{params:{commentPanelInitiallyOpen:!1,viewOriginalityReport:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations","message","rubric-evaluation","rubric-view","originality-report",u.b]})),e.peekState("assessment-settings",{panelClass:"peek",url:"/assessmentSettings?contentId?focusEleId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(1),n.e(2),n.e(3),n.e(9),n.e(558)]).then(n.bind(null,"mUfJ"))},pageTitle:"course.content.assessment.windowTitle",resolve:{translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}]},peekViewName:"assessment-settings-peek",allowChildPeekStates:!0,peekStates:["assign-graders","course-group","goal-picker-legacy","rubric","proctoring-lti-tool","question-analysis"]}),e.peekState("assign-graders",{panelClass:"full",url:"/assignGraders",require:function(){return n.e(594).then(n.bind(null,"BTMz"))},pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",resolve:{translations:[p.serviceName,function(e){return e.loadBundle("features/course/content/assessment/assessment")}]},peekViewName:"assign-graders-peek"}),e.peekState("attempt-safe-assign-setting",{url:"/safeAssignSetting",require:function(){return Promise.all([n.e(7),n.e(2),n.e(3),n.e(36),n.e(608)]).then(n.bind(null,"Sg/T"))},params:{submitToGRD:null}}).peekState("assessment-submission-feedback",{url:"/feedback?userId",require:[function(){return Promise.all([n.e(0),n.e(27),n.e(581)]).then(n.bind(null,"15AK"))},function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(6),n.e(27),n.e(1),n.e(2),n.e(3),n.e(8),n.e(127)]).then(n.bind(null,"EPkw"))}],resolve:{translations:[p.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}],offCanvasArgs:["offCanvasArgs",function(e){return e.overlay=!1,e.disableFocusHandling=!0,e}]},pageTitle:"course.content.assessment.feedback.title"}).peekState("assessment-create-attempt",{url:"/create-attempt?expandId",require:function(){return n.e(627).then(n.bind(null,"IvpR"))},pageTitle:"Create Attempt",panelClass:"peek",params:{callback:null}}).peekState("proctoring-lti-tool",{panelClass:"full",url:"/proctoringLtiTool?toolHref&toolSubtitle",resolve:{translations:[p.serviceName,function(e){return e.loadBundle("components/services/proctoring")}]},require:function(){return n.e(629).then(n.bind(null,"a478"))},pageTitle:"components.services.proctoring.ltiTool.pageTitle"})}])},vYaK:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return p}));n("QLzv");var r=n("nsO7"),i=n("5MwF"),o=n("ZQey"),s=n("yCC5"),a=n("pjml"),c=n("Rjd/"),l=n("nkTj"),u=n("JfV0"),d=n("Sa5G");n.d(t,"ILearnCourse",(function(){return u.ILearnCourse})),n.d(t,"CourseDuration",(function(){return u.CourseDuration})),n.d(t,"CourseUltraStatus",(function(){return u.CourseUltraStatus}));var p=s.t;c.a.factory(p,["restmod","$q","$http",l.d,function(e,t,n,c){var l=c.createHooksToFetchParent("course"),p=e.model(i.a.apiBasePath+"/v1/courses").mix({announcements:{hasMany:s.e},assessments:{hasMany:s.f},calendarItems:{hasMany:s.v,path:"calendars/calendarItems"},calendars:{hasOne:s.u},collab:{hasOne:s.w},collabUltra:{hasOne:s.y,path:"collabultra"},contents:{hasMany:s.A},conversions:{hasMany:s.s,path:"convertToUltra"},forums:{hasMany:s.I,path:"discussionboards/default/forums"},entitlements:{hasMany:s.G},gradebook:{hasOne:s.Y},instructorsMembership:{mask:"CU",hasMany:s.N,path:"memberships?roleBucket="+d.k.TEACHING.toString()},exports:{hasMany:s.H},ltiPlacements:{hasMany:s.ob},memberships:{hasMany:s.N,hooks:l},membershipInvites:{hasMany:s.O,path:"membershipInvites"},messageFolders:{hasMany:s.Q},conversations:{hasMany:s.B},notifications:{hasMany:s.rb},preferences:{hasMany:s.R},schedule:{hasMany:s.T},term:{belongsTo:s.uc,key:"termId"},users:{hasMany:s.N,hooks:l},groups:{hasMany:s.K},rubrics:{hasMany:s.Xb,path:"rubrics"},analyticsReports:{hasMany:s.c,path:"analyticsReports"},tools:{hasMany:s.xc,path:"tools"},contentHandlers:{hasMany:s.xc,path:"contentHandlers"},indicators:{mask:!0,hasMany:s.M,path:"contents/indicators"},startDate:{serialize:"date"},endDate:{serialize:"date"},scormReportItems:{hasMany:s.Zb,path:"scormReportContents"},studentPreview:{hasOne:s.cc,path:"spreview"},ui:{mask:!0,init:function(){return{convertToUltraTaskStatus:"?"}}},isUndecided:function(){return u.CourseUltraStatus.Undecided.isEqualTo(this.ultraStatus)},isClassic:function(){return u.CourseUltraStatus.Undecided.isEqualTo(this.ultraStatus)||u.CourseUltraStatus.Classic.isEqualTo(this.ultraStatus)},isUltraConfirmed:function(){return u.CourseUltraStatus.Ultra.isEqualTo(this.ultraStatus)},isUltra:function(){return u.CourseUltraStatus.Ultra.isEqualTo(this.ultraStatus)||this.isUltraPreview()},isUltraPreview:function(){return u.CourseUltraStatus.UltraPreview.isEqualTo(this.ultraStatus)},setUltraStatusDecided:function(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:u.CourseUltraStatus.Ultra.toString()}},(function(e){this.ultraStatus=e.data.ultraStatus})).$asPromise()},chooseClassicCourseView:function(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:u.CourseUltraStatus.Classic.toString()}},(function(e){this.$unwrap(e.data)})).$asPromise()},isOpen:function(){return!0===this.isAvailable&&!1===this.isClosed},isOpenClassic:function(){return this.isOpen()&&this.isClassic()},isOpenNonClassic:function(){return this.isOpen()&&!this.isClassic()},isPrivate:function(){return!1===this.isAvailable},isComplete:function(){return!0===this.isAvailable&&!0===this.isClosed},getStatus:function(){return this.isAvailable?this.isClosed?o.a.Complete:o.a.Open:o.a.Private},setStatus:function(e){o.a.Complete.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!0,this.ui.status=o.a.Complete):o.a.Open.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!1,this.ui.status=o.a.Open):o.a.Private.isEqualTo(e)&&(this.isAvailable=!1,this.isClosed=!1,this.ui.status=o.a.Private)},canAccess:function(){return this.ui&&this.ui.isExternal?!!this.ui.externalUrl:this.isUndecided()?this.permissions&&this.permissions.chooseUltraStatus:this.effectiveAvailability},canChooseUltraStatus:function(){return this.permissions.chooseUltraStatus},canExport:function(){return this.permissions.export&&!this.isUltraPreview()},canArchive:function(){return this.permissions.archive&&!this.isUltraPreview()},canCopy:function(){return this.permissions.copy},canImport:function(){return this.permissions.import},convertToUltraCourse:function(){var e=this;return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra",data:{id:this.id}},(function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle,e.ui.showConversionInProgress=!0,e.ui.showConversionComplete=!1})).$asPromise()},undoCourseConversion:function(){var e=this;return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/undo",data:{id:this.id}},(function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle,e.ui.showConversionInProgress=!0,e.ui.showConversionComplete=!1})).$allow([400,404]).$asPromise()},refreshConvertToUltraStatus:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/conversionStatus"},(function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle})).$allow([404,403]).$asPromise()},getInstructors:function(){return(this.instructorsMembership||[]).map((function(e){return e.user}))},getBaseRoute:function(){return this.isOrganization?"base.organizations":"base.courses"},importContents:function(e,t){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/imports?fileName="+e+"&fileLocation="+t,data:{cxAction:"CX_ACTION_IMPORT",includeItems:["alignments","announcement","availabilityRule","assessment","content","calendar","collabSessions","glossary","gradebookItems","groups","discussionBoard","settings","staffInformation","tasks","blog","journal","rubric","customArea(bb-retention)","customArea(bb-wiki)"]}},(function(e){this.$unwrap(e.data)})).$asPromise()},copyCourse:function(e,t,n,r,i,o,s){return void 0===t&&(t=!1),this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/copy",data:{srcCourseId:e,contentOnly:t,contentItems:n,targetContentId:r,positionBefore:i,positionAfter:o,shouldSendNotifyEmail:s}},(function(e){this.$unwrap(e.data)})).$asPromise()},getImportCopyTaskStatus:function(e){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/"+e},(function(e){this.$unwrap(e.data)})).$asPromise()},getGranularCopyTaskStatus:function(e){return void 0===e&&(e=[]),this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/ultraConversionReports?taskIds="+e.join()},(function(e){this.$unwrap(e.data)})).$asPromise()},getTaskErrorDetailMessages:function(e,t){return t=t||this.$scope.$url()+"/"+this.id+"/ultraConversionReports/"+e+"/messages",this.$scope.$build().$send({method:"GET",url:t},(function(e){this.$unwrap(e.data)})).$asPromise()},canConvert:function(){return this.permissions.convert},hasSchedule:function(){return!r.isEmpty(this.schedule)},getLocale:function(){return this.isLocaleEnforced&&this.locale},isToolAvailable:function(e){return this.tools.$resolve().$allow([403]).$asPromise().then((function(t){var n=r(t).filter((function(t){return t.identifier===e})).first();return!(!n||!n.toolEnabledSetting.isAvailable)}))},getAnnouncementsCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/announcements/counts"},(function(e){this.$unwrap(e.data)})).$asPromise()},getCourseGroupSetCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/groupsets/count"},(function(e){this.$unwrap(e.data)})).$asPromise()},getChildrenCourses:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url().replace(i.a.apiBasePath,i.a.apiBasePath+"/public")+"/"+this.id+"/children?fields=id,childCourse.name"}).$allow([400]).$asPromise().then((function(e){return e.$response.data.results&&e.$response.data.results}))},attendanceRecordsExist:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.$pk+"/attendanceRecords",params:{limit:"1"}}).$suppressErrorDialog().$asPromise().then((function(e){return e.$response.data.results&&e.$response.data.results.length>0}))},$extend:{Model:{findCourseByCourseId:function(e,t){void 0===t&&(t=!1);var n=this.$collection().$send({method:"GET",url:this.$url()+"/find",params:{courseId:e}});return t&&(n=n.$allow([404])),n.$asPromise().then((function(e){if(e&&e.$response&&200===e.$response.status)return e.$response&&e.$response.data}))}},Record:{getConversationCounts:function(){var e=this.$scope.$url()+"/"+this.$pk+"/conversations/counts";return n.get(e).then((function(e){return e.data}))}}},$hooks:{"after-fetch":function(){a.v.sortInstructorsMembership(this.instructorsMembership)},"after-feed":function(e){e.instructorsMembership&&this.instructorsMembership.$decode(e.instructorsMembership)}}});return p.mixinCourses=c.getDataMixin(p.findMany.bind(p),"courseId","course"),p}])},vdfi:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("Sa5G"),a=n("0JpG"),c=n("hlSw"),l=n("TnpK"),u=n("3bn4"),d="ultra.course.content.assessment.content-goal-alignment",p="ultra.course.content.assessment.content-goal-alignment.service",m="content-goal-alignment",f="content-goal-alignment-for-student",h=["course","goal-alignment","goal"],g=function(){function e(e){this.$q=null,this.defers=null,this.cachedGoalAlignment=null,this.isLoading=!1,this.$q=e}return e.prototype.isReady=function(){return null!==this.cachedGoalAlignment||this.isLoading},e.prototype.updataState=function(){this.cachedGoalAlignment=null,this.isLoading=!0},e.prototype.getData=function(){if(null===this.cachedGoalAlignment){this.defers=this.defers||[];var e=this.$q.defer();return this.defers.push(e),e.promise}return this.cachedGoalAlignment},e.prototype.updateData=function(e){var t=this;return this.cachedGoalAlignment=e,this.isLoading=!1,(this.defers||[]).forEach((function(e){e.resolve(t.cachedGoalAlignment)})),this.defers=null,this.cachedGoalAlignment},e.prototype.cleanData=function(){this.cachedGoalAlignment=null,this.isLoading=!1},e}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelClass="peek content-assessment-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.getCache=function(e){return t.cache=t.cache||new g(e)},t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentContent","currentCourse","currentColumn",a.serviceName,"$injector","refreshCache",function(t,n,r,i,a,l,u){if(void 0===u&&(u=!1),n&&!n.id)return t.when([]);var d=e.getCache(t);return!u&&d.isReady()?t.when(d.getData()):(d.updataState(),t.when(null).then((function(){if(!n)return l.invoke(c.a.currentContent,null,{currentCourse:r,translations:{}}).then((function(e){n=e}))})).then((function(){if(!i)return l.invoke(c.a.currentColumn,null,{currentCourse:r,currentContent:n}).then((function(e){i=e}))})).then((function(){return t.all([r.contents.$find(n.id,{expand:"alignedGoals,permissions"}).$asPromise(),r.assessments.$buildRaw({id:n.getDeployedAssessment().assessment.id}).questions.$fetch({expand:"alignedGoals"}).$asPromise(),r.gradebook.columns.$find(i.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),a.loadBundle("features/"+h.join("/"))]).then((function(t){var n=t[0],i=t[1],c=t[2],l=1,u=i.map((function(e){if(!s.A.PresentationOnly.isEqualTo(e.questionType)){var t=l++;return o.extend(e,{getContentTitleForGoalAlignment:function(){return a.translateSync({locale:r.locale,key:"components.directives.assessment-question.question-title",params:{index:t}})}})}return e}));return e.groupGoals(r.contents.$buildRaw(n),u,c,a)}))})).then((function(e){return d.updateData(e)})))}]},t.prototype.getPeekStateName=function(){return m},t.prototype.groupGoals=function(e,t,n,r){var s=n.rubricAssociations&&n.rubricAssociations.length>0?n.rubricAssociations[0].rubricDefinition:{},a=e.isTest()?"goalsAlignedWithTest":"goalsAlignedWithAssignment";return[{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+"."+a})},getContentIdForGoalAlignment:o.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:o.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map((function(t){return t.content=e,t})):[],coreContent:e},{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+".goalsAlignedWithQuestions"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()+".all.questions"},isCurrentUserEligibleToAlignGoals:function(){return!1},alignedGoals:i.flatten(t.map((function(e){return e.alignedGoals?e.alignedGoals.map((function(t){return t.content=e,t})):[]})))},{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+".goalsAlignedWithRubric"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()+".all.rubricrows"},isCurrentUserEligibleToAlignGoals:function(){return!1},alignedGoals:i.flatten((s.rows||[]).map((function(e){return e.alignedGoals.map((function(t){return e.getContentTitleForGoalAlignment=function(){return e.header},e.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+this.id},t.content=e,t}))})))}]},t.prototype.getOverrideSubTitle=function(){return["currentCourse","currentContent",function(e,t){return t.id?e.contents.$find(t.id).$asPromise().then((function(e){return e.title})):""}]},t.$inject=["$injector","$q"],t}(u.a),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(e){var t=this;return["$q","currentCourse","contentData",a.serviceName,function(n,r,i,s){var a=n.when(null);return e?a=n.when(e):i.courseContent.isGroupContent&&i.groupAttempt?a=i.gradingColumn.getGroupAttemptByGroupAssociationId(i.courseContent.assignedGroups[0].groupAssociationId):!i.courseContent.isGroupContent&&i.attempt&&(a=r.gradebook.attempts.$find(i.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),n.all([i.courseContent.alignedGoals?i.courseContent.$asPromise():r.contents.$find(i.courseContent.id,{expand:"alignedGoals"}).$asPromise(),a,r.gradebook.columns.$find(i.gradingColumn.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),s.loadBundle("features/"+h.join("/")),s.loadBundle("components/directives/assessment/assessment-question")]).then((function(e){var n=e[0],a=e[1],c=e[2],l=[];if(a&&a.$pk){var u=a.getToolAttemptDetailItem(i.gradingColumn.scoreProviderHandle);(u&&u.questionAttempts||[]).forEach((function(e){l.push(o.extend(e.question,{getContentTitleForGoalAlignment:function(){return s.translateSync({locale:r.locale,key:"components.directives.assessment-question.question-title",params:{index:e.visibleQuestionNumber}})},getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+this.id},isCurrentUserEligibleToAlignGoals:function(){return!1}}))}))}return t.groupGoals(n,l,c,s)}))}]},t.prototype.getPeekStateName=function(){return f},t.prototype.getOverrideSubTitle=function(){return["contentData",function(e){return e.courseContent&&e.courseContent.title||""}]},t}(v);o.module(d,[l.b,a.moduleName]).config([l.c,function(e){[new v,new b].forEach((function(t){e.peekState(t.getPeekStateName(),t)}))}]).value("refreshCache",!1).service(p,["$injector",a.serviceName,function(e){return{alignedGoalsCount:-1,resolveGoalAlignableContents:function(t,n,r,o){var s,a=this;return void 0===o&&(o=!1),e.invoke((new v).resolveGoalAlignableContent(),null,(s={currentCourse:t,currentContent:n,currentColumn:r},s.refreshCache=o,s)).then((function(e){return a.alignedGoalsCount=i.flatten(i.compact(e.map((function(e){return e.alignedGoals})))).length,[e,a.alignedGoalsCount]}))},resolveGoalAlignableContentsForStudent:function(t,n,r){return e.invoke((new b).resolveGoalAlignableContent(r),null,{currentCourse:t,contentData:n}).then((function(e){return[e,i.flatten(i.compact(e.map((function(e){return e.alignedGoals})))).length]}))}}}])},vhkR:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return k}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("4nF1"),c=n("Qbdf"),l=n("0JpG"),u=n("12mu"),d=n("sgjL"),p=n("TnpK"),m=n("Sa5G"),f=n("FBBZ"),h=n("Q/M7"),g=n("fYJU"),v=n("yytE"),b=n("qZC8"),y=n("e6jQ"),S=n("JfV0"),C="ultra.components.services.lti",w="lti",k="geolocation *; microphone *; camera *; midi *; encrypted-media *";var T=function(){function e(e,t,n,r,i,o,s,a,c,l,u,d,p,m,f){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=r,this.cacheFactory=i,this.contextCourse=o,this.bbLocalize=s,this.modalService=a,this.postMessageDispatcherService=c,this.stateService=l,this.CourseModel=u,this.PartnerContentIdModel=d,this.PartnerSettingsModel=p,this.PlacementModel=m,this.contextUser=f,this.shortMaxAge=5e3,this.thirtyMinuteMaxAge=18e5,this.placementCache=i.createCache("PlacementCache",{deleteOnExpire:"passive",maxAge:this.thirtyMinuteMaxAge}),this.placementsCache=i.createCache("PlacementsCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}return e.prototype.configureAndInitInlineLaunch=function(e,t){var n=this.$q.defer(),r=o.fromJson(e);if(r.linkType){if(!m.g.ExternalLink.isEqualTo(r.linkType)&&t&&t.preventDefault(),r.linkRefId){var i={courseId:this.contextCourse.courseId||this.$stateParams.courseId,parentContentId:this.$stateParams.contentId,linkType:m.g.parse(r.linkType),linkRefId:r.linkRefId};return m.g.LtiLink.isEqualTo(r.linkType)&&(i.url=r.url,i.launchInNewWindow=r.launchInNewWindow,r.customParameters&&(i.customParameters=JSON.stringify(r.customParameters))),!m.g.LtiLink.isEqualTo(r.linkType)||"IFRAME"!==r.target&&"embedded-app"!==r.bbtype||(i.renderAsEmbed=!0),(m.g.LtiPlacement.isEqualTo(r.linkType)||m.g.LtiLink.isEqualTo(r.linkType))&&r.linkRefUuid&&(i.linkRefUuid=r.linkRefUuid),this.ltiLaunch(i)}}else n.reject({errorMessage:"Failed to render the iframe from src"});return n.promise},e.prototype.getPlacements=function(e,t){if(void 0===t&&(t=!1),t)return this.PlacementModel.$search(e).$asPromise();var n=this.placementsCache.get(o.toJson(e||{}));return n||(n={promise:this.PlacementModel.$search(e).$asPromise()},this.placementsCache.put(o.toJson(e||{}),n)),n.promise},e.prototype.getAvailablePlacements=function(e,t){return void 0===t&&(t=!1),this.getPlacements(e,t).then((function(e){return e.filter((function(e){return e.isAvailable()}))}))},e.prototype.ltiLaunch=function(e){var t=this,n=this.$q.defer();return this._getContent(e.courseId,e.content,e.contentId,e.linkType,e.linkRefId).then((function(r){null!==r&&e.showPreLaunchPanel?t._getMembership(e.courseId).then((function(o){t._isGradable(r)&&t._isStudentInCourse(o)?t.stateService.goPeekState("lti.launch",{courseId:r.courseId,contentId:r.id}).then((function(){n.resolve()})).catch((function(e){n.reject({errorMessage:"Failed to open the gradable lti launch panel",errorResponse:e})})):t._ltiLaunch(i.merge(e,{content:r}),n)})):t._ltiLaunch(i.merge(e,{content:r}),n)})),n.promise},e.prototype.launch=function(e,t,n){return void 0===t&&(t=!1),e=h.c(e),e=h.a(e,"from_ultra","true"),t?(this.$window.open(e),"lti-service: Link was launched in a new window."):n?e:(this.stateService.goPeekState("lti.launch-frame",{toolHref:e}),"lti-service: Link was launched in a peek panel.")},e.prototype._ltiLaunch=function(e,t){var n;if(e.content){n=this.getLaunchLinkFromContent(e.content);var r=this.getDomainConfigStatusType(e.content);if(!n){if(r&&s.O.LTIStatusType.NeedsApproval.isEqualTo(r)){var o=this.$rootScope.$new();return o.email=this._getSupportEmail(e.content),o.hasEmail=!!o.email,this.modalService.open({scope:o,template:v,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]}}),void t.resolve()}return void t.reject({errorMessage:"Attempted to launch an LTI link without a valid launchLink."})}}else n=this._getLaunchLinkFromLinkRef(e);this._initLaunchTarget(i.merge(e,{launchLink:n}),t)},e.prototype._initLaunchTarget=function(e,t){var n=this,r=this.getPartnerIdFromLinkRefId(e.linkRefId);if(!r&&e.content&&m.g.PartnerCloud.isEqualTo(e.content.contentHandler)&&e.content&&e.content.contentDetail&&e.content.contentDetail[m.g.PartnerCloud.handle]&&(r=e.content.contentDetail[m.g.PartnerCloud.handle].providerId),e.content)if(m.g.LtiPlacement.startsWith(e.content.contentHandler)||m.g.LtiLink.isEqualTo(e.content.contentHandler)){var i=this._getUrl(e.content);i&&h.n(i)?t.resolve(this.launch(e.launchLink,e.content.launchInNewWindow)):t.resolve(this.launch(h.a(e.launchLink,"target_override","window"),!0))}else m.g.PartnerCloud.isEqualTo(e.content.contentHandler)&&this.PartnerSettingsModel.getSettingsById(r).then((function(r){return t.resolve(n.launch(e.launchLink,!r.responsive))}));else if(m.g.LtiPlacement.isEqualTo(e.linkType))this._getPlacementById(e.linkRefId).then((function(r){var i=e.launchLink,o=r.launchInNewWindow;h.n(r.url)||(i=h.a(i,"target_override","window"),o=!0),S.PlacementType.ContentItemMessage===r.type&&(m.x.Inline.isEqualTo(n.$stateParams.mode)||(n.$stateParams.position&&(i=h.a(i,"position",n.$stateParams.position)),n.$stateParams.parentId&&(i=h.a(i,"content_id",n.$stateParams.parentId)))),e.linkRefUuid&&(i=h.a(i,"blti_placement_uuid",e.linkRefUuid)),t.resolve(n.launch(i,o))}),(function(){t.resolve(n.launch(e.launchLink))}));else if(m.g.PartnerCloud.isEqualTo(e.linkType))this.PartnerSettingsModel.getSettingsById(r).then((function(r){return t.resolve(n.launch(e.launchLink,!r.responsive))}));else if(m.g.LtiLink.isEqualTo(e.linkType)){var o=e.launchLink;e.linkRefUuid&&(o=h.a(o,"blti_placement_uuid",e.linkRefUuid)),!e.launchInNewWindow&&e.url&&h.n(e.url)?t.resolve(this.launch(o,!1,e.renderAsEmbed)):t.resolve(this.launch(h.a(o,"target_override","window"),!0))}},e.prototype.getLaunchLinkFromContent=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].launchLink?e.contentDetail[e.contentHandler.toString()].launchLink:null},e.prototype._getPlacementById=function(e){var t=this,n=this.placementCache.get(e);return n||(n={promise:this.PlacementModel.$find(e).$asPromise()}).promise.then((function(){t.placementCache.put(e,n)})),n.promise},e.prototype.getPartnerIdFromLinkRefId=function(e){if(!e)return null;var t=e.split("-")[0];return t.indexOf(":")>=0&&(t=t.substring(t.indexOf(":")+1)),t},e.prototype._getLaunchLinkFromLinkRef=function(e){if(m.g.PartnerCloud.isEqualTo(e.linkType)){var t=this.getPartnerIdFromLinkRefId(e.linkRefId);return f.e({partnerId:t,courseId:e.courseId,linkRefId:e.linkRefId})}return m.g.LtiPlacement.isEqualTo(e.linkType)?(n={courseId:e.courseId,linkRefId:e.linkRefId,parentContentId:e.parentContentId},r="/webapps/blackboard/execute/blti/launchPlacement?blti_placement_id="+encodeURIComponent(n.linkRefId)+"&course_id="+encodeURIComponent(n.courseId),n.parentContentId&&(r=h.a(r,"parent_id",encodeURIComponent(n.parentContentId))),h.c(r)):m.g.LtiLink.isEqualTo(e.linkType)?function(e){var t="/webapps/blackboard/execute/blti/launchLink?cim_placement_id="+encodeURIComponent(e.linkRefId)+"&course_id="+encodeURIComponent(e.courseId)+"&url="+encodeURIComponent(e.url);return e.customParameters&&(t=h.a(t,"custom_parameters",encodeURIComponent(e.customParameters))),e.parentContentId&&(t=h.a(t,"parent_id",encodeURIComponent(e.parentContentId))),h.c(t)}({courseId:e.courseId,linkRefId:e.linkRefId,url:e.url,customParameters:e.customParameters,parentContentId:e.parentContentId}):void 0;var n,r},e.prototype.getDomainConfigStatusType=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].domainConfig&&e.contentDetail[e.contentHandler.toString()].domainConfig.statusType?e.contentDetail[e.contentHandler.toString()].domainConfig.statusType:null},e.prototype.ltiEditColumn=function(e){var t=this;this._getContent(e.courseId,e.ui.content,e.contentId,null,null).then((function(n){e.ui.content=n;var r=a.a.create(n).getEditState();t.stateService.goPeekState(r,{id:n.id})}))},e.prototype.isLTILink=function(e){return null!=e.scoreProviderHandle&&(m.B.PartnerCloud.isEqualTo(e.scoreProviderHandle)||m.B.LTILink.isEqualTo(e.scoreProviderHandle))},e.prototype.populateNewPlacement=function(e,t){var n=s.r.ContentHandler.LtiPlacement.handle+"-"+t.handle;e.isAvailable=!1,e.isPartiallyVisible=!1,e.visibility=s.r.Visibility.Hidden,e.contentHandler=new s.r.ContentHandler(n,null),e.permissions={edit:!0},e.contentDetail={},e.contentDetail[n]={},e.title=t.name.trim().substr(0,333),t.description&&t.description.length>0&&(e.description=t.description.trim().substr(0,250))},e.prototype._isStudentInCourse=function(e){return e.isStudentMembership()},e.prototype._isGradable=function(e){return!!(e&&e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].gradingColumn)&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn},e.prototype._getContent=function(e,t,n,r,i){var o=this;return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():i&&m.g.PartnerCloud.isEqualTo(r)?this.PartnerContentIdModel.getContentIds(e,i).then((function(t){return t.contentIds&&t.contentIds.length>0?o.CourseModel.$new(e).contents.$find(t.contentIds[0]).$asPromise():o.$q.when(null)})):this.$q.when(null)},e.prototype._getMembership=function(e){return this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()},e.prototype._getSupportEmail=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].supportEmail?e.contentDetail[e.contentHandler.toString()].supportEmail:null},e.prototype._getUrl=function(e){return m.g.LtiPlacement.startsWith(e.contentHandler)?e.contentDetail[e.contentHandler.toString()].placement.url:m.g.LtiLink.isEqualTo(e.contentHandler)?e.contentDetail[e.contentHandler.toString()].url:null},e.prototype.convertInlineLTILinkToBbMLLink=function(e){return e.map((function(e){var t=e.data;m.g.LtiLink.isEqualTo(e.data.linkType)&&("IFRAME"===e.data.target&&(t.bbtype="embedded-app",e.data.height&&(t.height=e.data.height),e.data.width&&(t.width=e.data.width),delete t.target),t.linkRefUuid||(t.linkRefUuid=Object(y.b)()));var n={type:o.isDefined(t)&&!m.g.ExternalLink.isEqualTo(t.linkType)?"lti":"external",title:e.title,url:"",data:i.escape(o.toJson(o.isDefined(t)?t:{}))};return o.isDefined(t)&&m.g.ExternalLink.isEqualTo(t.linkType)&&(n.url=t.url),n}))},e.prototype.isEmbeddedGradable=function(e){var t=!1;return e.forEach((function(e){e.data.gradable&&(t=!0)})),t},e.prototype.returnToContentState=function(){var e=this.stateService.current.name.split(".peek."),t=1;e.length>2&&(t="content-market"===e[e.length-2]?2:1);var n=e.splice(0,e.length-t).join(".peek.");this.stateService.goPeekState(n)},e.prototype._registerEmbedLinkEventHandler=function(e,t){var n=this;this.postMessageDispatcherService.registerEventHandler("embedded-links",(function(t,r){window!==r&&r.close(),n.returnToContentState();var i=function(t){var r=n.convertInlineLTILinkToBbMLLink(t);e(r.map((function(e){return{data:e.data,type:e.type.includes("lti")?"lti":"external",url:e.url,title:e.title}})))};n.isEmbeddedGradable(t.items)?n.showEmbeddedNotGradableModal(i,t.items):i(t.items)}),t,!0)},e.prototype.getOpenContentMarketConf=function(e){var t=this;return function(n){t._registerEmbedLinkEventHandler(n,e),t.stateService.goPeekState("content-market",{mode:"inline"})}},e.prototype.getOpenSystemContentMarketConf=function(e){var t=this;return function(n){t._registerEmbedLinkEventHandler(n,e),t.stateService.goPeekState("system-content-market",{mode:"inline"})}},e.prototype.showEmbeddedNotGradableModal=function(e,t){var n=this.$rootScope.$new(!0),r=this.modalService.open({scope:n,template:b,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/content-market/content-market")}]}});n.dismissCallback=function(){e(t),r.dismiss()}},e.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",c.e,l.serviceName,u.b,d.b,p.d,s.o.serviceName,s.W.serviceName,s.Y.serviceName,s.P.serviceName,g.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(T);o.module(C,[c.b,d.a,p.b,s.R]).service(w,T).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},w9Zy:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return v}));var r=n("D57K"),i=(n("NLMr"),n("5iHu")),o=n("wHJ2"),s=n("5MwF"),a=n("9zo4"),c=n("0JpG"),l=n("lEL+"),u=n("TT9l"),d=n("aHpC"),p="ultra.services.BbOffcanvas",m="bbOffcanvas",f="OffCanvasPanelClosed",h="OffCanvasPanelOpened",g=function(){function e(e,t,n,r,i,o){this.$compile=e,this.$q=t,this.$rootScope=n,this.accessibility=r,this.bbLocalize=i,this.timeout=o,this.document=document,this.openElements=[],this.openElementsPromise=[]}return e.prototype.open=function(e){var t=this;return this.$q.when(e.template).then((function(n){var r=i(n);if(r.length>1&&!s.a.production)throw new Error("Current page has multiple root element! Please refactor the page to have only one root element");r.attr("data-base-state-name",e.stateName),0===t.openElements.length&&1===t.openElementsPromise.length&&r.addClass("first");var o=e.scope||t.$rootScope,c=(o.$newOffcanvasScope||o.$new).apply(o);t.$rootScope.bbOffcanvasOpened=!1,t.bbOffcanvasOpening=!0;var l=e.opened,d=e.close,p=t;e.trapFocus=!1,e.open=function(){e.disableFocusHandling||p.accessibility.applyAccessibilityHandlingForPanel(r)},a.a.isLastNavigationByKeyboard&&i("body").addClass("hide-focus-outline"),e.opened=function(){var t=this;p.$compile(r)(c);var n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];p.$rootScope.bbOffcanvasOpened=!0,p.bbOffcanvasOpening=!1,l&&l.apply(t,e),a.a.isLastNavigationByKeyboard&&i("body").removeClass("hide-focus-outline"),p.$rootScope.$broadcast(h)};p.$rootScope.$$phase?n():p.$rootScope.$apply(n),p.accessibility.isElementInActivePanel(i(document.activeElement))||p.accessibility.focusCorrectElementOnPanel(r),r.hasClass("peek")&&r.hasClass("overlay-disabled")&&!e.disableFocusHandling&&p.enableFocusSkipLinks(c)},e.close=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.hasClass("peek")&&r.hasClass("overlay-disabled")&&!e.disableFocusHandling&&t.disableFocusSkipLinks(),d.apply(t,n)},e.closed=function(){e.disableFocusHandling||t.accessibility.revertAccessibilityHandling(),t.$rootScope.$broadcast(f)},e.overlay||r.addClass("overlay-disabled"),e.disableFocusHandling&&(r.addClass("focus-handling-disabled"),r.attr("role","region"),r.attr("aria-labelledby","aria-region-label")),r.bbOffcanvas(e);var m=new v(r,t.accessibility);e.banner&&u.a.pushBanner({state:{stateName:e.stateName,panelClass:e.panelClass},orphan:function(){m.setBanner()(void 0)},adopt:m.setBanner()}),m.open();var g=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(c),key:"global.close"}),b=r.find(".bb-close");b&&b.length>0&&(b[0].setAttribute("aria-label",g),r.find(".top-border").length>0&&b.addClass("has-top-border"));var y=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(c),key:"global.focusJumpLink"});return r.append('<button class="focus-skip-link focus-skip-link-disabled" tabindex="0">'+y+"</button>"),r.attr("data-page-title",t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(c),key:e.pageTitle})),m}))},e.prototype.addBbOffcanvasElement=function(e){this.openElements.push(e),this.synchronizeOffcanvasDepth()},e.prototype.addBbOffcanvasElementPromise=function(e,t){var n=this;this.openElementsPromise.push(this.$q.when(e)),this.openElementsPromise[this.openElementsPromise.length-1].then((function(e){e.name=t,n.addBbOffcanvasElement(e),n.openElementsPromise.pop()}),(function(){n.openElementsPromise.pop()}))},e.prototype.close=function(e){for(;0!==this.openElements.length;){var t=this.openElements.pop();if(this.synchronizeOffcanvasDepth(),t.close(),this.$rootScope.bbOffcanvasOpened&&t.name===e)break}this.$rootScope.$broadcast(f)},e.prototype.synchronizeOffcanvasDepth=function(){i(this.document.body).attr("bb-offcanvas-depth",this.openElements.length)},e.prototype.getElement=function(e){var t=this;return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then((function(){return t.openElements.filter((function(t){return t.name===e}))[0]}))},e.prototype.getTopElement=function(){return this.getNthElementFromTop(0)},e.prototype.getNthElementFromTop=function(e){var t=null;return this.openElementsPromise.length>e?t=this.openElementsPromise[this.openElementsPromise.length-e-1]:this.openElements.length>e&&(t=this.openElements[this.openElements.length-e-1]),this.$q.when(t)},e.prototype.getCoursePanel=function(){var e=this;return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then((function(){return e.openElements.filter((function(e){var t=e.name.match(/base\.[A-Za-z]+\.peek\.course\.[A-Za-z]+\.peek$/);return t&&0!==t.length}))[0]}))},e.prototype.showTopPanelCloseButton=function(){this.getTopElement().then((function(e){e&&e.showCloseButton()}))},e.prototype.expandTopPanel=function(){this.getTopElement().then((function(e){e&&!e.isPanelExpanded()&&e.expandPanel()}))},e.prototype.shrinkTopPanel=function(){return this.getTopElement().then((function(e){e&&e.isPanelExpanded()&&e.expandPanel()}))},e.prototype.safeFocus=function(e){var t=this;if(this.bbOffcanvasOpening)var n=this.$rootScope.$watch((function(){return t.bbOffcanvasOpening}),(function(r){!1===r&&(n(),t.timeout((function(){e.focus()}),t.$rootScope,0,!1))}));else this.timeout((function(){e.focus()}),this.$rootScope,0,!1);this.accessibility.isFocusDelayed=!1},e.prototype.enableFocusSkipLinks=function(e){var t=this;this.$q.all([this.getTopElement(),this.getNthElementFromTop(1)]).then((function(n){var r=n[0],i=n[1];if(null!=r&&null!=i){var o=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:i.getElement().attr("data-page-title")}}),s=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:r.getElement().attr("data-page-title")}});r.enableFocusSkipLink(i,o),i.enableFocusSkipLink(r,s)}}))},e.prototype.disableFocusSkipLinks=function(){this.getTopElement().then((function(e){e&&e.disableFocusSkipLink()})),this.getNthElementFromTop(1).then((function(e){e&&e.disableFocusSkipLink()}))},e=Object(r.__decorate)([Object(r.__param)(0,Object(d.b)("$compile")),Object(r.__param)(1,Object(d.b)("$q")),Object(r.__param)(2,Object(d.b)("$rootScope")),Object(r.__param)(3,Object(d.b)(a.c)),Object(r.__param)(4,Object(d.b)(c.serviceName)),Object(r.__param)(5,Object(d.b)(l.b))],e)}(),v=function(){function e(e,t,n){this.element=e,this.accessibility=t,this.name=n}return e.prototype.getElement=function(){return this.element},e.prototype.open=function(){this.element.addClass("hide-in-background"),this.element.bbOffcanvas("open")},e.prototype.close=function(){this.element.bbOffcanvas("remove")},e.prototype.setBanner=function(){return i(this.element)[0].setBanner},e.prototype.expandPanel=function(){this.element.bbOffcanvas("expandPanel")},e.prototype.isPanelExpanded=function(){return this.element.hasClass("full")},e.prototype.hideCloseButton=function(){this.element.find(".bb-close").addClass("bb-close-hide")},e.prototype.showCloseButton=function(){this.element.find(".bb-close.bb-close-hide").removeClass("bb-close-hide")},e.prototype.enableFocusSkipLink=function(e,t){var n=this;this.element.find(".focus-skip-link").removeClass("focus-skip-link-disabled").attr("aria-label",t).on("click.focusSkip",(function(){n.element.hasClass("peek")?n.accessibility.revertAccessibilityHandling():(n.accessibility.applyAccessibilityHandlingForPanel(e.getElement()),n.accessibility.focusCorrectElementOnPanel(e.getElement()))}))},e.prototype.disableFocusSkipLink=function(){this.element.find(".focus-skip-link").addClass("focus-skip-link-disabled").off("click.focusSkip")},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(g);o.module(p,[a.b,c.moduleName,l.a]).service(m,g)},w9mJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o="ultra.service.promiseQueue",s="promiseQueue",a=function(){function e(){this.queue=[],this.processing=!1,this.MAX_QUEUE_LENGTH=2e3}return e.prototype.enqueue=function(e){this.queue.length<this.MAX_QUEUE_LENGTH?(this.queue.push(e),this.processQueue()):console.error("Maximum queue length reached. Item was not enqueued.")},e.prototype.enqueueArray=function(e){var t=this;if(this.queue.length>0)throw Error("Queue is not currently empty. Cannot queue new array.");if(e.length>this.MAX_QUEUE_LENGTH)throw Error("Too many items to queue. "+e.length+" exceeds maximum of "+this.MAX_QUEUE_LENGTH);e.forEach((function(e){t.queue.push(e)})),this.processQueue()},e.prototype.processQueue=function(e){var t=this;if(!this.processing){var n=this.queue.shift();if(n){this.processing=!0;var r=e;try{n(e).then((function(e){r=e})).finally((function(){t.processing=!1,t.processQueue(r)}))}catch(e){throw this.processing=!1,e}}}},e.prototype._processQueue=function(){return this.processQueue()},e}(),c=function(){function e(){this.queues=Object.create(null)}return e.prototype.getQueue=function(e){var t=this.queues[e];return t||(t=this.queues[e]=new a),t},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(o,[]).service(s,c)},wDWF:function(e,t,n){"use strict";function r(e){if(!e)return 0;for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}n.d(t,"a",(function(){return r}))},wQOJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("D57K"),i=n("5MwF"),o=n("nbDY"),s=n.n(o),a=n("Q/M7"),c=n("aHpC"),l=n("Fvsw"),u="ultra.services.institutionApi",d="institutionApi",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.V1=new t("1.0"),t.V2=new t("2.0"),t}(s.a),m=function(){function e(e,t,n){var r=this;this.$http=e,this.$q=t,this.context=n,this.getUserCanEdit=function(e){return r.canEditFetch(e).then((function(e){return e.canEdit}),(function(){return!1}))},this.getUserCanView=function(e){return r.canEditFetch(e).then((function(e){return e.ipHasVisible>0}),(function(){return!1}))},this.getEffectiveVariantIdWithPermissions=function(){var e=r.context.getBrand(),t=e.isDefault?null:e.portalBrandId;return r.getEffectivePageVariantId(t).then((function(e){return r.canEditFetch(e).then((function(t){var n=t.canEdit,r=t.ipHasVisible;return{variantId:e,canEdit:n,canView:r>0}}))})).catch((function(){return{variantId:void 0,canEdit:!1,canView:!1}}))},this.getModuleIsVisible=function(e){return r.getModuleVisibility(e).then((function(e){return e.visible}),(function(){return!1}))},this.getHealth=function(){if(r.ipHealthPromise)return r.ipHealthPromise;var e=a.c(i.a.institutionApiBasePath+"/health");return r.ipHealthPromise=r.$http.get(e,r._getConfig())},this._getConfig=function(){return{headers:{Accept:"application/json; version="+p.V2.toString()}}}}return e.prototype.importIP=function(){return Promise.all([n.e(0),n.e(4),n.e(18)]).then(n.t.bind(null,"Rhk/",7)).then((function(e){return e.default}))},e.prototype.canEditFetch=function(e){return this.$q.when(this.importIP().then((function(t){return t.pageService.canEditFetch(p.V2.toString(),e)})))},e.prototype.getEffectivePageVariantId=function(e){return this.$q.when(this.importIP().then((function(t){return t.pageService.getEffectivePageVariantId(e)})))},e.prototype.getModuleVisibility=function(e){return this.$q.when(this.importIP().then((function(t){return t.moduleService.getModuleVisibility(e)})))},e=Object(r.__decorate)([Object(r.__param)(0,Object(c.b)("$http")),Object(r.__param)(1,Object(c.b)("$q")),Object(r.__param)(2,Object(c.b)(l.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(m);angular.module(u,[l.a]).service(d,m)},wWlP:function(e,t,n){"use strict";var r=function(){var e=[],t=[];function n(){return e[e.length-1]}function r(){var e=n();t.forEach((function(t){return t(e)}))}return{add:function(t,n){e.push({key:t,value:n}),r()},addTopListener:function(e){t.push(e)},get:function(t){for(var n,r=0;r<e.length;r++)if(t===e[r].key){n=e[r];break}return n},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:n,remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t===e[i].key){n=i;break}var o=e.splice(n,1)[0];return r(),o},removeTop:function(){var t=e.splice(e.length-1,1)[0];return r(),t},length:function(){return e.length}}}();t.a=r},"x+T+":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s="ultra.service.entitlementCache",a="entitlementCache",c="SYSTEM_ENTITLEMENTS",l=function(){function e(e,t,n){this.$q=e,this.CourseModel=t,this.EntitlementModel=n,this.entitlements=new Map,this.entitlementDefers=new Map}return e.prototype.fetchSystemEntitlements=function(){return this.EntitlementModel.$collection().$fetch().$asPromise()},e.prototype.fetchCourseEntitlements=function(e){return this.CourseModel.$new(e).entitlements.$fetch().$asPromise()},e.prototype.loadCourseEntitlements=function(e){var t=this;if(!e)return this.$q.resolve();if(this.hasCachedCourseEntitlements(e))return this.$q.resolve();var n=this.$q.defer();if(!this.entitlementDefers.has(e)){this.entitlementDefers.set(e,new Set);(e===c?this.fetchSystemEntitlements():this.fetchCourseEntitlements(e)).then((function(n){var r=n.filter((function(e){return e.hasEntitlement()})).map((function(e){return e.uid}));t.entitlements.set(e,new Set(r)),t.entitlementDefers.get(e).forEach((function(e){return e.resolve()}))}),(function(n){return t.entitlementDefers.get(e).forEach((function(e){return e.reject(n)}))})).finally((function(){return t.entitlementDefers.delete(e)}))}return this.entitlementDefers.get(e).add(n),n.promise},e.prototype.getCachedCourseEntitlements=function(e){return this.hasCachedCourseEntitlements(e)?this.entitlements.get(e):new Set},e.prototype.hasCachedCourseEntitlements=function(e){return this.entitlements.has(e)},e.prototype.clearEntitlementCache=function(e){this.entitlements.delete(e)},e.$inject=["$q",o.o.serviceName,o.A.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(s,[o.R]).service(a,l)},x9Ok:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return r}));var r,i=n("D57K"),o=n("wHJ2"),s=n("aHpC"),a=n("ZzR9"),c="ultra.components.services.route.routeListener",l="routeListener",u=function(){function e(e){this.$rootScope=e}return e.prototype.addRouteListener=function(){this.$rootScope.$on(a.a.$stateChangeSuccess,(function(e,t,n){var i=t.name;d.emitRouteEvent(r.Changed,i,n)})),this.$rootScope.$on(a.a.$stateChangeStart,(function(e,t,n){var i=t.name;d.emitRouteEvent(r.Changing,i,n)}))},e=Object(i.__decorate)([Object(i.__param)(0,Object(s.b)("$rootScope"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(u);o.module(c,[]).service(l,u),function(e){e[e.Changed=0]="Changed",e[e.Changing=1]="Changing"}(r||(r={}));var d=new(function(){function e(){var e,t=this;this.subscribers=((e={})[r.Changed]=[],e[r.Changing]=[],e),this.subscribe((function(e,n){t.currentRoute={currentRouteName:e,currentParams:n}}))}return e.prototype.subscribe=function(e,t){var n=this;return void 0===t&&(t=r.Changed),this.subscribers[t].push(e),function(){n.subscribers[t]=n.subscribers[t].filter((function(t){return t!==e}))}},e.prototype.emitRouteEvent=function(e,t,n){this.subscribers[e].forEach((function(e){return e(t,n)}))},e.prototype.getCurrentRoute=function(){return this.currentRoute},e}());t.b=d},xjJw:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-calendar",use:"icon-small-calendar-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calendar"><path d="M1 15h14V2H1v13zM5 1v1h6V1H5zM5 12h1M1 6h14M5 9h1M10 12h1M10 9h1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"xqn/":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.directives.validate.time",a="bbValidateTime",c=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getISOTime=function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},this.getTimeParser=function(e,n,r,i){return function(s){if(i.$isEmpty(s))return i.$setValidity("time",!0),i.$modelValue;var a;try{a=t.bbLocalize.parseTimeSync(s,o.ILocaleTimeFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("time",!1),i.$modelValue}return i.$setValidity("time",!0),(s="time"===r.type?t.getISOTime(a):t.bbLocalize.formatTimeSync(a,o.ILocaleTimeFormat.Short,e))!==i.$viewValue&&(i.$setViewValue(s),n.is(":focus")||i.$render()),a}},this.getTimeFormatter=function(e,n,r,i){return function(){i.$setValidity("time",!0);var s=i.$modelValue;return i.$isEmpty(s)?n.val():"time"===r.type?t.getISOTime(s):t.bbLocalize.formatTimeSync(s,o.ILocaleTimeFormat.Short,e)}},this.link=function(e,n,r,i){i.$parsers.push(t.getTimeParser(e,n,r,i)),i.$formatters.push(t.getTimeFormatter(e,n,r,i)),n.on("blur",(function(){i.$render()}))}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(s,[o.moduleName]).directive(a,[o.serviceName,function(e){return new c(e)}])},y3by:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.content-market.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-market",{url:"/contentmarket?parentId&positionBefore&positionAfter&position",require:function(){return Promise.all([n.e(13),n.e(84),n.e(142),n.e(584)]).then(n.bind(null,"NZF1"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])}]},panelClass:"full",pageTitle:"course.contentMarket.contentMarketName",peekStates:["partner-tool","lti"],params:{mode:null}})}])},yA26:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return a})),n.d(t,"controllerName",(function(){return c})),n.d(t,"template",(function(){return l})),n.d(t,"requireName",(function(){return u})),n.d(t,"BbOffcanvasController",(function(){return d})),n.d(t,"Controller",(function(){return p}));var r=n("D57K"),i=n("wHJ2"),o=n("w9Zy"),s=n("aHpC"),a="ultra.controllers.bbOffcanvas",c="BbOffcavasController",l="",u="components/services/bb-offcanvas/bb-offcanvas-controller",d=function(){function e(e,t,n){var r=t.open({template:e.template,trapFocus:e.trapFocus,panelClass:e.panelClass||"peek",pageTitle:e.pageTitle,anchor:e.anchor,showType:e.showType,container:e.container,scope:e.scope||n,close:e.close,closed:e.closed,open:e.open,opened:e.opened,overlay:null==e.overlay||e.overlay,stateName:e.stateName,disableFocusHandling:!!e.disableFocusHandling,banner:e.banner});t.addBbOffcanvasElementPromise(r,e.stateName)}return e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)("offCanvasArgs")),Object(r.__param)(1,Object(s.b)(o.e)),Object(r.__param)(2,Object(s.b)("$scope"))],e)}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(d);i.module(a,[o.d]).controller(c,d)},yC9S:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n("wHJ2"),i=n("nsO7"),o=function(){function t(){}return t.OnRootScope=function(e,n,r){return t.unbindOnDestroy(e,e.$root.$on(n,r))},t.OnScope=function(e,n,r){return t.unbindOnDestroy(e,e.$on(n,r))},t.unbindOnDestroy=function(e,t){return e.$on("$destroy",t),t},t.OnWindow=function(n,r,o){var s=e(window);s.on(n,r);var a=Object(i.once)((function(){return s.off(n,r)}));return t.unbindOnDestroy(o,a),a},t}();function s(e){return function(t){if(!e.module&&!e.moduleName)throw Error("Component must define a module or moduleName");(e.module?e.module:r.module(e.moduleName,e.requireModules||[])).component(e.componentName,r.extend(e,{controller:t}))}}var a=function(){function e(e){this.$ngRedux=e}return e.prototype.$onInit=function(){var e=this;this.unsubscribeRedux=this.$ngRedux.connect(this.mapStateToProps.bind(this),this.selectActions()||this.mapDispatchToActions.bind(this))((function(t,n){e.componentWillReceiveState(t),e.actions=n,e.props=t}))},e.prototype.$onDestroy=function(){this.unsubscribeRedux()},e.prototype.selectActions=function(){return{}},e.prototype.mapDispatchToActions=function(e){return{}},e}()}).call(this,n("5iHu"))},yCC5:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"Ub",(function(){return u})),n.d(t,"Vb",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return v})),n.d(t,"D",(function(){return b})),n.d(t,"U",(function(){return y})),n.d(t,"kb",(function(){return S})),n.d(t,"vb",(function(){return C})),n.d(t,"Eb",(function(){return w})),n.d(t,"t",(function(){return k})),n.d(t,"w",(function(){return T})),n.d(t,"y",(function(){return I})),n.d(t,"x",(function(){return $})),n.d(t,"A",(function(){return E})),n.d(t,"E",(function(){return P})),n.d(t,"F",(function(){return A})),n.d(t,"H",(function(){return x})),n.d(t,"z",(function(){return D})),n.d(t,"s",(function(){return O})),n.d(t,"Yb",(function(){return _})),n.d(t,"I",(function(){return M})),n.d(t,"J",(function(){return N})),n.d(t,"P",(function(){return R})),n.d(t,"Q",(function(){return L})),n.d(t,"B",(function(){return j})),n.d(t,"C",(function(){return U})),n.d(t,"N",(function(){return G})),n.d(t,"O",(function(){return B})),n.d(t,"R",(function(){return F})),n.d(t,"S",(function(){return q})),n.d(t,"T",(function(){return H})),n.d(t,"K",(function(){return z})),n.d(t,"L",(function(){return V})),n.d(t,"M",(function(){return K})),n.d(t,"W",(function(){return J})),n.d(t,"G",(function(){return W})),n.d(t,"l",(function(){return Q})),n.d(t,"m",(function(){return Y})),n.d(t,"n",(function(){return Z})),n.d(t,"p",(function(){return X})),n.d(t,"o",(function(){return ee})),n.d(t,"q",(function(){return te})),n.d(t,"V",(function(){return ne})),n.d(t,"X",(function(){return re})),n.d(t,"cb",(function(){return ie})),n.d(t,"hb",(function(){return oe})),n.d(t,"eb",(function(){return se})),n.d(t,"fb",(function(){return ae})),n.d(t,"r",(function(){return ce})),n.d(t,"gb",(function(){return le})),n.d(t,"jb",(function(){return ue})),n.d(t,"db",(function(){return de})),n.d(t,"Y",(function(){return pe})),n.d(t,"Z",(function(){return me})),n.d(t,"ib",(function(){return fe})),n.d(t,"bb",(function(){return he})),n.d(t,"ab",(function(){return ge})),n.d(t,"lb",(function(){return ve})),n.d(t,"mb",(function(){return be})),n.d(t,"nb",(function(){return ye})),n.d(t,"pb",(function(){return Se})),n.d(t,"ob",(function(){return Ce})),n.d(t,"qb",(function(){return we})),n.d(t,"rb",(function(){return ke})),n.d(t,"sb",(function(){return Te})),n.d(t,"tb",(function(){return Ie})),n.d(t,"ub",(function(){return $e})),n.d(t,"wb",(function(){return Ee})),n.d(t,"Cb",(function(){return Pe})),n.d(t,"yb",(function(){return Ae})),n.d(t,"Ab",(function(){return xe})),n.d(t,"xb",(function(){return De})),n.d(t,"zb",(function(){return Oe})),n.d(t,"Bb",(function(){return _e})),n.d(t,"Db",(function(){return Me})),n.d(t,"Fb",(function(){return Ne})),n.d(t,"Gb",(function(){return Re})),n.d(t,"Jb",(function(){return Le})),n.d(t,"Ob",(function(){return je})),n.d(t,"Lb",(function(){return Ue})),n.d(t,"Pb",(function(){return Ge})),n.d(t,"Rb",(function(){return Be})),n.d(t,"Ib",(function(){return Fe})),n.d(t,"Qb",(function(){return qe})),n.d(t,"Nb",(function(){return He})),n.d(t,"Kb",(function(){return ze})),n.d(t,"Mb",(function(){return Ve})),n.d(t,"Hb",(function(){return Ke})),n.d(t,"Wb",(function(){return Je})),n.d(t,"Sb",(function(){return We})),n.d(t,"Tb",(function(){return Qe})),n.d(t,"Xb",(function(){return Ye})),n.d(t,"Zb",(function(){return Ze})),n.d(t,"ac",(function(){return Xe})),n.d(t,"bc",(function(){return et})),n.d(t,"dc",(function(){return tt})),n.d(t,"ec",(function(){return nt})),n.d(t,"cc",(function(){return rt})),n.d(t,"fc",(function(){return it})),n.d(t,"gc",(function(){return ot})),n.d(t,"hc",(function(){return st})),n.d(t,"ic",(function(){return at})),n.d(t,"jc",(function(){return ct})),n.d(t,"kc",(function(){return lt})),n.d(t,"lc",(function(){return ut})),n.d(t,"mc",(function(){return dt})),n.d(t,"nc",(function(){return pt})),n.d(t,"oc",(function(){return mt})),n.d(t,"pc",(function(){return ft})),n.d(t,"qc",(function(){return ht})),n.d(t,"rc",(function(){return gt})),n.d(t,"sc",(function(){return vt})),n.d(t,"tc",(function(){return bt})),n.d(t,"uc",(function(){return yt})),n.d(t,"vc",(function(){return St})),n.d(t,"xc",(function(){return Ct})),n.d(t,"wc",(function(){return wt})),n.d(t,"yc",(function(){return kt})),n.d(t,"zc",(function(){return Tt})),n.d(t,"Ac",(function(){return It}));var r="AnalyticsEventModel",i="AnalyticsForLearnModel",o="AnnotationsModel",s="AnnouncementModel",a="AllyModel",c="AssessmentDetail",l="AssessmentExceptionModel",u="Question",d="QuestionAttempt",p="BlockedUserModel",m="BrandModel",f="CalendarModel",h="CalendarItemModel",g="CourseCalendarsModel",v="CourseCalendarItemModel",b="CourseDueDateCalendarItemModel",y="DueDateCalendarItemModel",S="InstitutionCalendarItemModel",C="OfficeHoursModel",w="PersonalCalendarItemModel",k="CourseModel",T="CourseCollab",I="CourseCollabUltra",$="CourseCollabSession",E="CourseContentModel",P="CourseEngagementParticipant",A="CourseEngagementUserStateModel",x="CourseExportModel",D="CourseConditionalReleaseModel",O="ConversionTaskModel",_="ScheduledTaskModel",M="CourseForumModel",N="CourseForumCountModel",R="CourseMessageModel",L="CourseMessageFolderModel",j="CourseConversationModel",U="CourseConversationMessageModel",G="CourseMembershipModel",B="CourseMembershipInviteModel",F="CoursePreferenceModel",q="CourseRole",H="CourseScheduleModel",z="CourseGroupModel",V="CourseGroupAssociationModel",K="CourseIndicatorModel",J="ExternalCourse",W="CourseEntitlementModel",Q="CloudDriveModel",Y="CloudDriveContent",Z="CloudDriveDownloadMessage",X="CloudDriveTask",ee="CloudDriveMeModel",te="CollabUltraPing",ne="EntitlementModel",re="FileModel",ie="GradeAttemptModel",oe="GradeGroupAttemptModel",se="GradeCategoryModel",ae="GradeColumnModel",ce="ColumnSummaryModel",le="GradeDetailModel",ue="GradeSchemaModel",de="GradeBulkViewModel",pe="GradebookModel",me="GradebookSettingsModel",fe="GradeNotationModel",he="GradedQuestionAttemptModel",ge="GradedOriginalityModel",ve="InstitutionRoleModel",be="LanguagesModel",ye="LtiDomainConfigModel",Se="LtiSettingsModel",Ce="LtiPlacementModel",we="MyPreferenceModel",ke="NotificationModel",Te="NotificationGeneralSettingsModel",Ie="NotificationSettingModel",$e="NotificationSettingsContainerModel",Ee="PartnerModel",Pe="PartnerStatusModel",Ae="PartnerCourseModel",xe="PartnerLinkedCourseModel",De="PartnerContentIdModel",Oe="PartnerGradeModel",_e="PartnerSettingsModel",Me="PartnerToolModel",Ne="PredictCourseModel",Re="PredictCourseSearch",Le="PredictFavoriteModel",je="PredictPreferences",Ue="PredictInstitutionPreference",Ge="PredictSettingsModel",Be="PredictSystemSettingsModel",Fe="PredictDynamicOptionModel",qe="PredictStudentModel",He="PredictPermissionsModel",ze="PredictFtueModel",Ve="PredictNoteModel",Ke="PredictCustomFieldSettingsModel",Je="RiskBucketDistributionModel",We="PrivacyPolicyModel",Qe="ProctoringServiceModel",Ye="Rubric",Ze="ScormReportItemModel",Xe="StagedAttemptGradeModel",et="StreamModel",tt="SystemInfoModel",nt="SystemPreferenceModel",rt="StudentPreviewModel",it="TargetedNotificationModel",ot="TelemetryActivityVsGradeModel",st="TelemetryContentActivityInDetailModel",at="TelemetryCourseActivityModel",ct="TelemetryCourseGradesModel",lt="TelemetryCourseNotificationsModel",ut="TelemetryDiscussionActivityModel",dt="TelemetryDiscussionXrayModel",pt="TelemetryMultimediaActivityInDetailModel",mt="TelemetryMultimediaStatisticsModel",ft="TelemetryNotificationsModel",ht="TelemetryNotificationUsersModel",gt="TelemetryStudentActivityModel",vt="TelemetryStudentGradesModel",bt="TelemetrySufficientDataModel",yt="TermModel",St="ThemeModel",Ct="ToolAvailabilityModel",wt="ToolsModel",kt="TrialSupportTicketsModel",Tt="UploadingFile",It="UserModel"},yCJt:function(e,t){e.exports='<svg id="icon-large-avatar-multiple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><g fill="none"  stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663"/><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438"/><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27"/><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223"/><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758"/></g></g></svg>'},yDoS:function(e,t,n){},yGso:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("wHJ2"),i=n("k9iv"),o=n("0JpG"),s=n("w9Zy"),a=n("Fvsw"),c=n("ZzN+"),l=n("pjml"),u=n("TnpK"),d="ultra.base.courses.routes";r.module(d,[i.b,o.moduleName,a.a,s.d,l.R,u.b,c.a]).config([u.c,function(e){e.peekState("external",{abstract:!0}).peekState("external.create",{url:"/external/create",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/courses/external/external-course")}]},require:function(){return Promise.all([n.e(7),n.e(14),n.e(28),n.e(153)]).then(n.bind(null,"hwlu"))},pageTitle:"course.external.panelTitleAdd"}).peekState("external.edit",{url:"/external/edit/:id",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/courses/external/external-course")}]},require:function(){return Promise.all([n.e(7),n.e(14),n.e(28),n.e(153)]).then(n.bind(null,"hwlu"))},pageTitle:"course.external.panelTitleEdit"}).peekState("external.description",{url:"/external/description/:courseId",resolve:{currentCourse:["$stateParams",l.o.serviceName,l.B.serviceName,function(e,t,n){var r=e.courseId;return n.$new(r).$fetch().$asPromise().then((function(e){var n=t.$new();return n.id=e.id,n.name=e.title,n.description=e.description,n.displayName=e.title,n}))}],translations:[o.serviceName,function(e){return e.loadBundle("features/course/description/course-description")}]},require:function(){return n.e(149).then(n.bind(null,"8WQs"))},pageTitle:"course.description.header"}).peekState("course-edit-banner",{url:"^/courses/:id/editBanner",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/edit-banner/edit-banner")}]},require:function(){return n.e(137).then(n.bind(null,"WXoY"))},pageTitle:"course.editBanner.pageTitle",panelClass:"peek"}).peekState("organization-edit-banner",{url:"^/organizations/:id/editBanner",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/edit-banner/edit-banner")}]},require:function(){return n.e(137).then(n.bind(null,"WXoY"))},pageTitle:"course.editBanner.pageTitle",panelClass:"peek"})}])},yXB1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.exports.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("exports",{url:"/exportsPanel",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]},require:function(){return n.e(612).then(n.bind(null,"m+3A"))},pageTitle:"course.export.exportPanel.head"})}])},"yo/t":function(e,t){e.exports='<div>\n  <div class="notification-container {{::toastStatus()}}">\n    <div class="close-notification">&times;</div>\n    <div class="progress-indicator icon">\n      <i class="{{::toastIcon()}}"></i>\n    </div>\n    <span class="progress-status {{::toastClass()}}">\n    </span>\n  </div>\n</div>\n'},yq4x:function(e,t,n){},yytE:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.ltiNeedsApprovalTitle"\n          analytics-id-tag-prefix="course.content.ltiNeedsApproval">\n  <div name="modal-contents">\n    <p ng-if="hasEmail" bb-translate>course.content.ltiNeedsApprovalDescription</p>\n    <p ng-if="hasEmail"><a href="mailto:{{ ::email }}" analytics-id="components.services.lti.needsApproval.email.link">{{ ::email }}</a></p>\n    <p ng-if="!hasEmail" bb-translate>course.content.ltiNeedsApprovalDescriptionNoEmail</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="global.ok"\n          bb-translate>global.ok</button>\n</bb-modal>'},z6Q5:function(e,t,n){"use strict";var r=n("nsO7"),i=n("wHJ2"),o=n("5MwF"),s=n("lEL+"),a=[];function c(){return a[a.length-1]}n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var l="ultra.service.batch-utility-rest-api",u="ultra.service.batch-utility-rest-api.service",d="batch-utility-rest-api-param",p=[];function m(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var f=function(e,t,n,r){this.position=e,this.deferred=t,this.reqConfig=n,this.token=r},h=0;i.module(l,["ng",s.a]).config(["$httpProvider",function(e){e.interceptors.push(["$injector","$log",function(e,t){var n={};return{request:function(s){var a,c=e.get("$q");if(s.params&&s.params[d]&&new RegExp("^"+m(s.params[d].baseUrl)).test(s.url)){var l=c.defer(),u=s.params[d];return delete s.params[d],u.trackId=u.trackId||""+h++,Object.prototype.hasOwnProperty.call(n,u.trackId)||(n[u.trackId]={token:u,queue:[]},u.sendDeferred.promise.then((a=u.trackId,function(){var s=n[a],c=new RegExp("^"+m(s.token.baseUrl));!o.a.features.batchRestAPI&&s.token.batchUrl===o.a.apiBasePath+"/v1/utilities/batch"||1===s.queue.length?(delete n[a],e.get("$q").all(s.queue.map((function(t){var n=function(e){return t.deferred.resolve(i.extend({},t.reqConfig,{method:"JSONP",cache:{get:function(){return[e.status,e.data,e.headers]}}})),{statusCode:e.status,body:e.data,method:t.reqConfig.method,headers:{},relativeUrl:t.reqConfig.url.replace(o.a.apiBasePath+"/","")}};return e.get("$http")(t.reqConfig).then(n,n)}))).then((function(e){s.token.finalDeferred.resolve(e)}))):s.queue.length>1?e.get("$http")({method:"PUT",url:s.token.batchUrl,data:s.queue.map((function(e,n){var i=e.reqConfig;return t.debug(i.method+" "+i.url+' will be sent by batch request "'+s.token.batchUrl+"?xb="+s.token.trackId+"["+n+']"'),{method:i.method,relativeUrl:i.url.replace(c,"")+"?"+r(i.params).omitBy(r.isUndefined).map((function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)})).value().join("&"),body:i.data}})),params:{xb:a}}).then((function(e){s.queue.forEach((function(t){var n=t.reqConfig,r=e.data[t.position];t.deferred.resolve(i.extend({},n,{method:"JSONP",cache:{get:function(){return[r.statusCode,r.body,r.headers]}}}))})),s.token.finalDeferred.resolve(e.data),delete n[a]})):(s.token.finalDeferred.resolve([]),delete n[a])}))),n[u.trackId].queue.push(new f(n[u.trackId].queue.length,l,s,u)),l.promise}return c.when(s)}}}])}]).config(["$provide",function(e){e.decorator("$http",["$delegate",function(e){var t=function(t){var n;return p.length>0&&(t.params=t.params||{},Object.prototype.hasOwnProperty.call(t.params,d)||(t.params[d]=r.last(p))),c()&&c().$emit("BEFORE_REQUEST",t),void 0!==(n=(t.params||{})[d])&&(n.totalRequests=(n.totalRequests||0)+1),e(t)};return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.each(e,(function(e){t[e]=function(n,r){return t(i.extend({},r||{},{method:e,url:n}))}}))}("get","delete","head","jsonp"),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.each(e,(function(e){t[e]=function(n,r,o){return t(i.extend({},o||{},{method:e,url:n,data:r}))}}))}("post","put","patch"),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.each(n,(function(n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}))}("defaults","pendingRequests"),t}])}]).factory(u,["$rootScope","$q","$log",s.b,function(e,t,n,i){return{performBatch:function(e,t,n){var r=this.newToken.apply(this,Array.prototype.slice.call(arguments).splice(1));p.push(r);var i=this.awaitBatch(e);return r.autoSend=!0,i()},awaitBatch:function(e){if(0===p.length)throw new Error("No batch token in current context! Please invoke in the callstack of performBatch");var i=r.last(p);return i.autoSend=!1,function(){var o;r.last(p)!==i&&p.push(i),i.autoSend=!0;try{o=e(i)}catch(e){n.error(e)}return p.pop(),i.autoSend&&i.send(),o?t.resolve(o):i.finalDeferred.promise}},newToken:function(e,n){void 0===e&&(e=o.a.apiBasePath+"/v1/utilities/batch"),void 0===n&&(n=o.a.apiBasePath+"/");var r=t.defer();return{send:function(){return this.totalRequests?this.sendDeferred.resolve():this.finalDeferred.resolve([]),this.finalDeferred.promise},sendDeferred:t.defer(),finalDeferred:r,batchUrl:e,baseUrl:n,autoSend:!1,promise:r.promise,totalRequests:0}}}}])},zFCC:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("nsO7"),i=n("wHJ2"),o=n("lEL+"),s="ultra.service.intersectionobserver.directive",a="bbIntersectionObserver";i.module(s,[o.a]).directive(a,[function(){return{restrict:"A",scope:!1,controller:["$scope","$element",o.b,function(e,t,n){if("IntersectionObserver"in window){var i=[],o=new IntersectionObserver((function(t){r(t).map((function(e){return{entry:e,data:r.find(i,(function(t){return t.el===e.target}))}})).each((function(e){var t=e.entry,n=e.data;n.fn(n.el,n.scope,t)&&(r.remove(i,(function(e){return e.el===t.target})),o.unobserve(t.target))})),n(r.noop,e)}),{root:null,rootMargin:"0px",threshold:0});e.$on("$destroy",(function(){o.disconnect()})),Object.assign(this,{link:function(e,t,n){t.$on("$destroy",(function(){o.unobserve(e),r.remove(i,(function(t){return t.el===e}))})),o.observe(e),i.push({el:e,scope:t,fn:n})},unlink:function(e){o.unobserve(e),r.remove(i,(function(t){return t.el===e}))}})}else Object.assign(this,{link:function(e,t,n){n(e,t,{isIntersecting:!0,boundingClientRect:void 0,intersectionRatio:void 0,intersectionRect:void 0,rootBounds:void 0,target:e,time:void 0})},unlink:r.noop})}]}}])},zJ62:function(e,t,n){},zXZW:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("4HXK"),o="ultra.services.errorHandler",s=["$delegate","$injector",function(e,t){var n;return Object.assign((function(r,o){e(r,o),n||(n=t.get(i.b)),"undefined"!=typeof NREUM&&NREUM.noticeError(r)}),e)}];r.module(o,[i.a]).config(["$provide",function(e){e.decorator("$exceptionHandler",s)}])},zlFc:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-forbidden.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-forbidden">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-forbidden.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'}});