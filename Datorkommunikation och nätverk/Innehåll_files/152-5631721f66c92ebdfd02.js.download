(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{M1tt:function(e,t,i){},"R+Yw":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return r}));var n=i("Vsv2"),a=i("pjml"),o="ultraUi.components.services.cloudDrive.rteKloudlessModal",r="RteKloudlessService",s=n.a.KLOUDLESS.toString(),c=function(){function e(e,t,i){this.$q=e,this.cloudDriveService=t,this.CloudDriveModel=i}return e.prototype.initialize=function(){var e=this;return this.cloudDriveService.isCloudServiceAvailable(n.a.parse(s)).then((function(t){return e.isCloudServiceAvailable=t}))},e.prototype.openFilePicker=function(e){var t=this;return this.cloudDriveService.cloudDriveStorage[s].openFilePicker(e,!0).then((function(e){if(e){var i=[];return e.forEach((function(n){var a=function(e){return e.account+"|"+e.id}(n),o=t.CloudDriveModel.$new(s).contents.$new(a).$fetch({accessToken:e[0].bearer_token.key}).$asPromise();i.push(o)})),t.$q.all(i).then((function(t){return t.map((function(t){return{id:t.id,kloudlessAccessToken:e[0].bearer_token.key,name:t.name,size:t.size,type:t.type,updatedTime:t.updatedTime,webLocation:t.webLocation}}))}))}return t.$q.reject()}))},e.prototype.getModalCallback=function(e){var t=this;return function(){return t.cloudDriveService.cloudDriveStorage[s]?t.openFilePicker(e):t.cloudDriveService.initializeCloudDrive(n.a.KLOUDLESS).then((function(){return t.openFilePicker(e)}))}},e.$inject=["$q",n.c,a.j.serviceName],e}();angular.module(o,[n.b]).service(r,c)},"dRT/":function(e,t,i){"use strict";i.r(t),i.d(t,"moduleName",(function(){return S})),i.d(t,"controllerName",(function(){return _})),i.d(t,"componentName",(function(){return O})),i.d(t,"IpHome",(function(){return k})),i.d(t,"BaseIpController",(function(){return P})),i.d(t,"template",(function(){return $}));var n=i("D57K"),a=i("Rhk/"),o=i.n(a),r=(i("M1tt"),i("9zo4")),s=i("Fvsw"),c=i("jhBu"),u=i("0JpG"),l=i("vhkR"),d=i("TnpK"),b=i("R+Yw"),p=i("yC9S"),h=i("Q/M7"),m=i("5MwF"),v=i("Qbdf"),f=i("Sa5G"),g=i("aHpC"),S="ultra.base.institution-page",_="ultra.base.institution-page.controller",O="institutionPageHome",j=angular.module(S,[s.a,d.b,b.a]),k=function(){function e(e,t,i,n,a,o,r,s,c,u,l){var d=this;this.$element=e,this.$scope=t,this.$stateParams=i,this.$q=n,this.accessibility=a,this.bbContext=o,this.entitlement=r,this.localize=s,this.ltiService=c,this.ultraState=u,this.contextCourse=l,this.featureFlags={},this.selectPage=function(e){d.ultraState.go("base.institution-page-admin",{variantId:e})},this.openSmallPeek=function(e){d.ultraState.goPeekState("allLinks",{moduleId:e})},this.openEditPeek=function(e,t){void 0===t&&(t=!1),t?d.ultraState.goPeekState("editModule",{moduleId:e,expandRoles:t}):d.ultraState.goPeekState("editModule",{moduleId:e})},this.openCreatePeek=function(e,t){d.ultraState.goPeekState("createModule",{type:e,sequence:t})},this.openModifyPageImage=function(e){d.ultraState.goPeekState("editPageImage",{type:e})},this.openSettingsPeek=function(e){return void 0===e&&(e="default"),d.ultraState.goPeekState("brand-detail",{brandId:e})}}return e.prototype.$postLink=function(){var e,t=this,i={insertYoutubeVideo:{apiBasePath:Object(h.c)(m.a.apiBasePath),babelfishInstance:this.localize.intl,babelfishFormatInstance:this.localize.frmt,courseId:this.contextCourse.courseId,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),locale:this.localize.getLocale(this.$scope),xsrfToken:this.bbContext.xsrfToken},contentMarket:{}},a={openEditPageImage:this.openModifyPageImage,openAll:this.openSmallPeek,openEdit:this.openEditPeek,openCreate:this.openCreatePeek,setFocusOverride:this.accessibility.setFocusOverrideOnPanel.bind(this.accessibility),openSettings:null,selectPage:this.selectPage,featureFlags:this.featureFlags,editorPluginsConfig:i};if(this.ultraState.is("base.institution-page-admin")){var r=this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:"base.institutionPage.defaultVariantName"});e=this.$q.all([this.entitlement.hasSystemEntitlement(f.D.ViewBrand),this.$q.resolve(o.a.pageService.getCustomPages("IP",!0).then((function(e){return e.map((function(e){return Object(n.__assign)(Object(n.__assign)({},e),{variantName:e.variantName||r})}))})))]).then((function(e){var i=e[0],o=e[1];return Object(n.__assign)(Object(n.__assign)({},a),{openSettings:i?t.openSettingsPeek:null,variantId:t.$stateParams.variantId,variantOptions:o,mode:"admin"})}))}else e=this.$q.resolve().then((function(){return Object(n.__assign)(Object(n.__assign)({},a),{variantId:t.variantId})}));e.then((function(e){o.a.renderIp(t.$element[0],t.localize.getAppLocale(),t.localize.intl,t.localize.frmt,e)}))},e.prototype.$onDestroy=function(){o.a.destroyReactControl(this.$element[0])},e=Object(n.__decorate)([Object(p.a)({module:j,componentName:O,bindings:{variantId:"<"}}),Object(n.__param)(0,Object(g.b)("$element")),Object(n.__param)(1,Object(g.b)("$scope")),Object(n.__param)(2,Object(g.b)("$stateParams")),Object(n.__param)(3,Object(g.b)("$q")),Object(n.__param)(4,Object(g.b)(r.c)),Object(n.__param)(5,Object(g.b)(s.b)),Object(n.__param)(6,Object(g.b)(c.b)),Object(n.__param)(7,Object(g.b)(u.serviceName)),Object(n.__param)(8,Object(g.b)(l.c)),Object(n.__param)(9,Object(g.b)(d.d)),Object(n.__param)(10,Object(g.b)(v.e))],e)}(),P=function(){function e(e,t){e.variantId=t}return e=Object(n.__decorate)([Object(n.__param)(0,Object(g.b)("$scope")),Object(n.__param)(1,Object(g.b)("ipVariantId"))],e)}(),$='<div class="institution-page-container">\n  <bb-base-header page-title-key="base.nav.institutionPage" header-not-skip-target="true"></bb-base-header>\n  <institution-page-home variant-id="variantId"></institution-page-home>\n  <div ui-view></div>\n</div>';j.controller(_,P)}}]);